"use strict";exports.id=5806,exports.ids=[5806],exports.modules={37322:(e,a,l)=>{l.d(a,{D:()=>u,u:()=>x});var t=l(60687),r=l(43210),o=l(75018),n=l(30485),s=l(42938),i=l(53185);let u={temperature:{name:s.W.TEMPERATURE,label:"Body Temperature",short:"Temp"},pulseRate:{name:s.W.PULSE_RATE,label:"Pulse Rate",short:"PR"},respiratoryRate:{name:s.W.RESPIRATORY_RATE,label:"Respiratory rate",short:"RR"},saturationRate:{name:s.W.BLOOD_OXYGEN_SATURATION,label:"Oxygen Saturation",short:"SPO2"},heartRate:{name:s.W.HEART_RATE,label:"Heart rate",short:"HR"},bloodPressure:{name:s.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic",short:"BP"},bloodPressureDiastolic:{name:s.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},motorResponse:{name:s.W.MOTOR_RESPONSE,label:"Motor Response"},eyeOpeningResponse:{name:s.W.EYE_OPENING_RESPONSE,label:"Eye Opening Response"},verbalResponse:{name:s.W.VERBAL_RESPONSE,label:"Verbal Response"},calculatedGCS:{name:"calculatedGCS",label:"Calculated GCS"},glucose:{name:s.W.GLUCOSE,label:"Glucose"},units:{name:s.W.ADDITIONAL_NOTES,label:"Units"},avpu:{name:s.W.AVPU,label:"AVPU"},pulseOximetry:{name:s.W.PULSE_OXIMETRY,label:"Pulse Oximetry",short:"SPO"}},d=n.Ik({[u.respiratoryRate.name]:n.ai().min(0).max(90).label(u.respiratoryRate.label),[u.saturationRate.name]:n.ai().required().min(20).max(100).label(u.saturationRate.label),[u.bloodPressure.name]:n.ai().min(0).max(300).required().label(u.bloodPressure.label),[u.bloodPressureDiastolic.name]:n.ai().min(0).max(300).required().label(u.bloodPressureDiastolic.label),[u.heartRate.name]:n.ai().required().label(u.heartRate.label).min(0).max(400),[u.temperature.name]:n.ai().min(20).max(45).required().label(u.temperature.label),[u.eyeOpeningResponse.name]:n.Yj().required().label(u.eyeOpeningResponse.label),[u.motorResponse.name]:n.Yj().required().label(u.motorResponse.label),[u.verbalResponse.name]:n.Yj().required().label(u.verbalResponse.label),[u.glucose.name]:n.ai().typeError("Glucose must be a number").min(0).max(1e3).label(u.glucose.label),[u.avpu.name]:n.Yj().label(u.avpu.label),[u.units.name]:n.Yj().required().label(u.units.label)}),m=[{label:"Spontaneous",value:"Spontaneous",weight:4},{label:"To Speech",value:"To Speech",weight:3},{label:"To Pain",value:"To Pain",weight:2},{label:"No Response",value:"No Response",weight:1}],b=[{label:"Obeying Commands",value:"Obeying Commands",weight:6},{label:"Localising",value:"Localising",weight:5},{label:"Withdraw",value:"Withdraw",weight:4},{label:"Normal Flexion",value:"Normal Flexion",weight:3},{label:"Extension",value:"Extension",weight:2},{label:"None",value:"None",weight:1}],c=[{label:"Oriented",value:"Oriented",weight:5},{label:"Confused",value:"Confused",weight:4},{label:"Inappropriate Words",value:"Inappropriate Words",weight:3},{label:"Incomprehensible sounds",value:"Incomprehensible sounds",weight:2},{label:"None",value:"None",weight:1}],p=[{id:"Alert",label:"Alert"},{id:"Verbal",label:"Verbal"},{id:"Pain",label:"Pain"},{id:"Unresponsive",label:"Unresponsive"}],h={[u.temperature.name]:[{operator:"<",value:34,result:s.So.RED,bound:0},{operator:">",value:39.9,result:s.So.RED,bound:100},{operator:"combined",operator1:">=",value:37.5,operator2:"<=",value2:39.9,result:s.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:34.1,operator2:"<=",value2:35.4,result:s.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:35.5,operator2:"<=",value2:37.4,result:s.So.GREEN,bound:0}],[u.heartRate.name]:[{operator:">",value:110,result:s.So.YELLOW,value2:0,bound:130},{operator:"<",value:50,result:s.So.YELLOW,bound:40},{operator:"<",value:40,result:s.So.RED,bound:0},{operator:">",value:130,result:s.So.RED,bound:1e3},{operator:"combined",operator1:">=",value:60,operator2:"<=",value2:100,result:s.So.GREEN,bound:0}],[u.respiratoryRate.name]:[{operator:">",value:30,result:s.So.RED,bound:100},{operator:"<",value:8,result:s.So.RED,bound:0},{operator:"combined",operator1:">=",value:21,operator2:"<=",value2:30,result:s.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:8,operator2:"<=",value2:11,result:s.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:12,operator2:"<=",value2:20,result:s.So.GREEN,bound:0}],[u.saturationRate.name]:[{operator:"<",value:90,result:s.So.RED,bound:0},{operator:"<=",value:93,result:s.So.YELLOW,bound:90},{operator:"combined",operator1:">=",value:94,operator2:"<=",value2:100,result:s.So.GREEN,bound:0}],[u.glucose.name]:[{operator:"<",value:40,result:s.So.RED,bound:0},{operator:"<",value:60,result:s.So.YELLOW,bound:40},{operator:"combined",operator1:">=",value:70,operator2:"<=",value2:140,result:s.So.GREEN,bound:0}]};function x({initialValues:e,onSubmit:a,triageResult:l,setTriageResult:n,continueTriage:s,previous:x,getFormValues:v}){let{addKeyToFlow:R}=(0,r.useContext)(i.gd),[g,y]=(0,r.useState)({}),[j,E]=(0,r.useState)(0),f=(e,a)=>{if(""==a)return void n("",e);h[e]?.forEach(l=>{let t=Number(a);switch(l.operator){case"<":t<l.value&&t>=l?.bound&&n(l.result,e);return;case">":t>l.value&&t<=l.bound&&n(l.result,e);return;case"=":t==l.value&&n(l.result,e);return;case"combined":l?.value2&&t>=l.value&&t<=l.value2&&n(l.result,e);return;default:return null}})},S=e=>"red"===l&&!g[e]&&!s,w=(e,a)=>{let l=a.find(a=>a.value==e);return l?l.weight:0};return(0,t.jsxs)(o.PD,{onSubmit:a,validationSchema:d,initialValues:{...e,[u.units.name]:"mmol/l"},submitButtonText:"next",submitButton:!1,getFormValues:v,children:[(0,t.jsx)(o.fP,{getValues:y}),(0,t.jsx)(o.kI,{title:"Oxygen Saturation and Heart Rate",children:(0,t.jsxs)(o.Vp,{mr:"1ch",children:[(0,t.jsx)(o.A8,{id:u.saturationRate.name,name:u.saturationRate.name,label:u.saturationRate.label,disabled:S(u.saturationRate.name),handleBlurEvent:e=>{if(""==e)return;let a=Number(e);a<90&&n("red",u.saturationRate.name),a>=94&&n("green",u.saturationRate.name),a>=90&&a<94&&n("yellow",u.saturationRate.name)},unitOfMeasure:"%",sx:{width:"100%",m:0}}),(0,t.jsx)(o.A8,{id:u.heartRate.name,name:u.heartRate.name,label:u.heartRate.label,disabled:S(u.heartRate.name),unitOfMeasure:"bpm",handleBlurEvent:e=>{if(""==e)return;let a=Number(e);(a>129||a<40)&&(R({heart:"red"}),n("red",u.heartRate.name)),(a>=101&&a<=129||a>=40&&a<=59)&&(R({heart:"yellow"}),n("yellow",u.heartRate.name)),a>=60&&a<=100&&(R({heart:"green"}),n("green",u.heartRate.name))},sx:{width:"100%",m:0}})]})}),(0,t.jsx)(o.kI,{title:"Blood Pressure (mmHg))",children:(0,t.jsxs)(o.Vp,{mr:"1ch",children:[(0,t.jsx)(o.A8,{id:u.bloodPressure.name,name:u.bloodPressure.name,label:u.bloodPressure.label,disabled:S(u.bloodPressure.name),helperTextWidth:"10ch",sx:{width:"10ch"},handleBlurEvent:e=>{if(""==e)return;let a=Number(e);if(a>200||a<80){R({systolic:"red"}),n("red",u.bloodPressure.name);return}if(a>=81&&a<=89||a>=150&&a<=200){n("yellow",u.bloodPressure.name),R({systolic:"yellow"});return}if(a>=90||a>89&&a<=149){n("green",u.bloodPressure.name),R({systolic:"green"});return}}}),(0,t.jsx)(o.A8,{id:u.bloodPressureDiastolic.name,name:u.bloodPressureDiastolic.name,label:u.bloodPressureDiastolic.label,sx:{width:"10ch"},helperTextWidth:"10ch",disabled:S(u.bloodPressureDiastolic.name),handleBlurEvent:e=>{if(""==e)return;let a=Number(e);a>119&&(R({diastolic:"red"}),n("red",u.bloodPressureDiastolic.name)),a>=100&&a<=119&&(R({diastolic:"yellow"}),n("yellow",u.bloodPressureDiastolic.name)),a<100&&(R({diastolic:"green"}),n("green",u.bloodPressureDiastolic.name))}})]})}),(0,t.jsxs)(o.kI,{title:"Respiratory and Temperature",children:[(0,t.jsxs)(o.Vp,{mr:"1ch",children:[(0,t.jsx)(o.A8,{id:u.respiratoryRate.name,name:u.respiratoryRate.name,label:u.respiratoryRate.label,handleBlurEvent:e=>{""!=e&&f(u.respiratoryRate.name,e)},disabled:S(u.respiratoryRate.name),unitOfMeasure:"bs/m",sx:{width:"100%",m:0}}),(0,t.jsx)(o.A8,{id:u.temperature.name,name:u.temperature.name,label:u.temperature.label,disabled:S(u.temperature.name),handleBlurEvent:e=>{""!=e&&f(u.temperature.name,e)},unitOfMeasure:"\xb0C",sx:{width:"100%",m:0}})]}),(0,t.jsxs)(o.Vp,{sx:{mt:"1ch"},mr:"2px",children:[(0,t.jsx)(o.el,{width:"40%",multiple:!1,name:u.units.name,options:[{id:"mmol/l",label:"mmol/l"},{id:"mg/dl",label:"mg/dl"}],label:u.units.label}),(0,t.jsx)(o.A8,{id:u.glucose.name,name:u.glucose.name,label:u.glucose.label,sx:{width:"100%",m:0},disabled:S(u.glucose.name),handleBlurEvent:e=>{if(""==e)return;let a=Number(e),l=g[u.units.name];R({glucose:`${a} ${l}`}),"mmol/l"==l&&((a<3||a>30)&&n("red",u.glucose.name),(a>=3.1&&a<=3.8||a>11.1&&a<=29.9)&&n("yellow",u.glucose.name),a>=3.9&&a<=11.1&&n("green",u.glucose.name)),"mg/dl"==l&&((a<54.054||a>540.54)&&n("red",u.glucose.name),(a>=55.8558&&a<=68.4684||a>199.9998&&a<=538.7382)&&n("yellow",u.glucose.name),a>=70.2702&&a<=199.9998&&n("green",u.glucose.name))},unitOfMeasure:g[u.units.name]})]})]}),(0,t.jsxs)(o.kI,{last:!0,title:"GCS",children:[(0,t.jsxs)(o.Vp,{sx:{alignItems:"start"},children:[(0,t.jsx)(o.b1,{name:u.motorResponse.name,label:u.motorResponse.label,options:b,disabled:S(u.motorResponse.name),row:!1}),(0,t.jsx)(o.b1,{name:u.verbalResponse.name,label:u.verbalResponse.label,options:c,disabled:S(u.verbalResponse.name),row:!1}),(0,t.jsx)(o.b1,{name:u.eyeOpeningResponse.name,label:u.eyeOpeningResponse.label,options:m,disabled:S(u.eyeOpeningResponse.name),row:!1})]}),(0,t.jsx)("br",{}),(0,t.jsxs)(o.Th,{fontWeight:"800",variant:"body2",children:["(M",w(g[u.motorResponse.name],b)," ","V",w(g[u.verbalResponse.name],c)," ","E",w(g[u.eyeOpeningResponse.name],m),") ",j,"/15"]}),(0,t.jsx)(o.el,{name:u.avpu.name,options:p,label:u.avpu.label,sx:{my:"1ch"},multiple:!1,disabled:S(u.avpu.name)})]}),(0,t.jsx)("br",{}),(0,t.jsxs)(o.jD,{children:[(0,t.jsx)(o.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:x}),(0,t.jsx)(o.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})}},50727:(e,a,l)=>{l.d(a,{SE:()=>j,Nt:()=>v,Wd:()=>g});var t=l(60687),r=l(43210),o=l(76166),n=l.n(o),s=l(75018),i=l(52773),u=l(89086),d=l.n(u),m=l(51060),b=l(28274),c=l(78590),p=l(69587),h=l(12755);let x=({getValue:e})=>{let[a,l]=(0,r.useState)("http://localhost:3000"),{data:o,isLoading:n}=(0,h.Ay)();return(0,r.useEffect)(()=>{e(a)},[a]),(0,t.jsx)(p.x,{getValue:e=>{l(e)},label:"Select Printer",options:o?o?.map(e=>({value:e.ip_address,label:e.name})):[]})},v=({value:e,children:a,setTriggerFunc:l,printer:o,orderDate:u})=>{let d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=async()=>{let e=document.getElementById("barcode");e&&R("test",await i.mo(e),o)};l(()=>e)},[o]),(0,t.jsx)(s.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,t.jsx)("div",{id:"barcode",children:(0,t.jsxs)(s.jD,{sx:{pb:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},ref:d,children:[a,(0,t.jsx)(n(),{width:6,height:120,margin:0,displayValue:!1,value:e})]})})})},R=async(e,a,l)=>{let t=a.toDataURL("image/png");try{let e=await d().encode(t),a=`^XA^FO20,20${e}^XZ`;await m.A.post(`${l}/print`,{zpl:a})}catch(e){console.error("Error encoding image to ZPL:",e)}},g=({presentingComplaints:e,vitals:a,date:l,arrivalTime:o,referredFrom:n,triageCategory:u,triagedBy:d})=>{let[m,h]=(0,r.useState)(""),[v,g]=(0,r.useState)(""),j=async()=>{let e=document.getElementById("triage");e&&R("test",await i.mo(e),m)};return(0,t.jsxs)(b.default,{children:[(0,t.jsx)("div",{id:"triage",children:(0,t.jsx)(s.jD,{sx:{p:"5px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,t.jsxs)(b.default,{sx:{width:"100%"},children:[(0,t.jsxs)(c.default,{variant:"body2",mr:"1ch",children:["Arrival Date Time: ",o]}),(0,t.jsxs)(b.default,{sx:{display:"flex",width:"100%"},children:[(0,t.jsxs)(c.default,{variant:"body2",mr:"1ch",children:["Triage Date Time: ",l]}),(0,t.jsxs)(c.default,{variant:"body2",children:["Referred From: ",n]})]}),(0,t.jsxs)(b.default,{sx:{display:"flex"},children:[(0,t.jsxs)(c.default,{mr:"1ch",variant:"body1",children:["Category: ",u]}),(0,t.jsxs)(c.default,{variant:"body1",children:["Reason: ",v]})]}),(0,t.jsxs)(c.default,{sx:{mt:"1ch"},variant:"subtitle1",children:["Presenting Complaints: ",e," "]}),(0,t.jsx)(s.jD,{sx:{display:"flex",border:"dashed",my:"1ch"},children:a.map(({name:e,value:a})=>(0,t.jsx)(y,{title:e,value:a},`${a}${e}`))}),(0,t.jsxs)(c.default,{variant:"body1",children:["Triaged By: ",d]})]})})}),(0,t.jsx)(p.x,{getValue:e=>g(e),label:"Reasons for triage category:",options:[{value:"Vitals above/below threshold",label:"Vitals above/below threshold"},{value:"Airway/Breathing compromised",label:"Airway/Breathing compromised"},{value:"Blood circulation compromised",label:"Blood circulation compromised"},{value:"Disability",label:"Disability"},{value:"Persistent pain and other concerns ",label:"Persistent pain and other concerns "}]}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(x,{getValue:e=>h(e)}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(s.O6,{onClick:j,title:"print"})]})},y=({title:e,value:a})=>(0,t.jsxs)(s.jD,{sx:{mx:"0.5ch",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(s.Th,{variant:"h6",textAlign:"center",children:e}),(0,t.jsx)(s.Th,{variant:"h6",children:a})]}),j=({value:e,children:a,setTriggerFunc:l,printer:o,orderDate:s,test:u,fullName:d,gender:m,description:b})=>{let c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{l(async()=>{let e=document.getElementById("barcode");if(e){let a=await i.mo(e),l=document.createElement("canvas");l.width=700,l.height=160;let t=l.getContext("2d");if(t){t.fillStyle="#ffffff",t.fillRect(0,0,700,160);let e=a.width/a.height,r=700,n=700/e;n>160&&(r=(n=160)*e);let s=(700-r)/2,i=(160-n)/2;t.drawImage(a,0,0,a.width,a.height,s,i,r,n),R("test",l,o)}}})},[o,l]),(0,t.jsxs)("div",{id:"barcode",ref:c,style:{display:"flex",flexDirection:"column",paddingLeft:"5ch"},children:[(0,t.jsxs)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:[d,"(",m,")~",b]}),(0,t.jsx)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:s}),(0,t.jsx)(n(),{width:1,height:45,margin:0,displayValue:!1,value:e}),(0,t.jsx)("b",{style:{fontSize:"0.5rem"},children:u})]})}}};