"use strict";exports.id=1568,exports.ids=[1568],exports.modules={17774:(a,b,c)=>{c.d(b,{A:()=>C});var d=c(21124),e=c(38301),f=c(80350),g=c(93602),h=c(47949),i=c(82283),j=c(95745),k=c(66815),l=c(50852),m=c(53862),n=c(99535),o=c(55204),p=c(81498),q=c(38736),r=c(66951),s=c(48936),t=c(29324),u=c(30902);let v=[{label:j.W.RESUSCITATION,id:j.W.RESUSCITATION},{label:j.W.SHORT_STAY,id:j.W.SHORT_STAY},{label:j.W.GYNAE_BENCH,id:j.W.GYNAE_BENCH},{label:j.W.PRIORITY,id:j.W.PRIORITY},{label:j.W.ISOLATION,id:j.W.ISOLATION},{label:j.W.TRAUMA,id:j.W.TRAUMA},{label:j.W.SURGICAL,id:j.W.SURGICAL}],w=({onSubmit:a,triageStatus:b})=>{let[c,g]=(0,e.useState)({}),[h,i]=(0,e.useState)(!1),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)([]),[p,q]=(0,e.useState)([]),{data:r,isLoading:w}=(0,t.X)(j.W.SERVICE_AREAS),{data:x,isLoading:y}=(0,t.X)(j.W.AETC_SERVICE_AREAS),z={Referred:{name:j.W.CARE_AREA,label:"Patient Referred to"},Other_Area:{name:j.W.OTHER_AETC_SERVICE_AREA,label:"Other Area"}},A=(0,k.f6)(z);(0,e.useEffect)(()=>{if(b&&(r||x)){q(r?.map(a=>({label:a.name,id:a.id})));let a=x?.filter(a=>a.name.toLowerCase()==j.W.GYNAE_BENCH.toLowerCase()||a.name.toLowerCase()==j.W.SURGICAL_BENCH.toLowerCase()||a.name.toLowerCase()==j.W.MEDICAL_BENCH.toLowerCase());if("red"==b)return void o(v);let c="yellow"===b?x:[...Array.isArray(a)?a:[],...Array.isArray(r)?r:[]];if(c){let a=c.map(a=>({label:a.name,id:a.name}));o(a);let b=a.find(a=>"Other"===a.label);m(b?b.id:null)}}},[b,r,x]),(0,e.useEffect)(()=>{if(c&&null!==l){let a=c[z.Referred.name]&&c[z.Referred.name]===l;i(a),a||g(a=>(delete a[z.Other_Area.name],a))}},[c,l]);let B=s.Ik().shape({[z.Referred.name]:s.Yj().label(z.Referred.label).required("This field is required"),[z.Other_Area.name]:s.Yj().when(z.Referred.name,{is:a=>a===l,then:a=>a.required("This field is required"),otherwise:a=>a.optional()})});return(0,d.jsxs)(d.Fragment,{children:[(y||w)&&(0,d.jsx)(u.A,{}),(0,d.jsxs)(f.PD,{validationSchema:B,initialValues:A,onSubmit:a,submitButton:!0,children:[(0,d.jsx)(f.fP,{getValues:g}),(0,d.jsxs)(f.GE,{direction:"column",children:[n.length>0&&(0,d.jsx)(f.el,{name:z.Referred.name,label:z.Referred.label,options:n,multiple:!1}),h&&(0,d.jsx)(f.el,{name:z.Other_Area.name,label:z.Other_Area.label,options:p,multiple:!1})]})]})]})};c(12781);let x=({hidden:a,children:b})=>(0,d.jsx)(f.jD,{sx:{display:a?"none":"block"},children:b});var y=c(57549),z=c(45701),A=c(75744),B=c(90675);function C(){let{ServerTime:a}=(0,B.useServerTime)(),[b,c]=(0,e.useState)(0),[k,s]=(0,e.useState)({}),{params:t}=(0,i.KU)(),[u,v]=(0,e.useState)(""),[C,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)({}),[G,H]=(0,e.useState)([]),[I,J]=(0,e.useState)({}),[K,L]=(0,e.useState)({}),[M,N]=(0,e.useState)({}),[O,P]=(0,e.useState)({}),[Q,R]=(0,e.useState)({}),[S,T]=(0,e.useState)({}),[U,V]=(0,e.useState)(!1),[W,X]=(0,e.useState)(!1),{loading:Y,setLoading:Z,completed:$,setCompleted:_,message:aa,setMessage:ab,showForm:ac,setShowForm:ad,error:ae,setError:af}=(0,m.g)(),{mutate:ag,isSuccess:ah,isPending:ai,isError:aj,data:ak}=(0,l.jM)(),{mutate:al,isSuccess:am,isPending:an,isError:ao}=(0,l.jM)(),{mutate:ap,isSuccess:aq,isPending:ar,isError:as}=(0,l.jM)(),{mutate:at,isSuccess:au,isPending:av,isError:aw}=(0,l.jM)(),{mutate:ax,isSuccess:ay,isPending:az,isError:aA}=(0,l.jM)(),{mutate:aB,isSuccess:aC,isPending:aD,isError:aE}=(0,l.jM)(),{mutate:aF,isSuccess:aG,isPending:aH,isError:aI}=(0,l.jM)(),{navigateTo:aJ,navigateBack:aK}=(0,i.cq)(),{data:aL}=(0,r.iu)(t?.id),aM=aL?.find(a=>!a.date_stopped),{mutate:aN,isSuccess:aO}=(0,y.FD)(),{data:aP}=(0,l.$O)(t?.id),[aQ,aR]=(0,e.useState)(),[aS,aT]=(0,e.useState)(),aU=(0,z.m)(aQ?.obs,j.W.REFERRED_FROM),aV=a=>{k.pain=a,ad(!1),V(!0)},aW=a=>{let b={...a};b&&void 0!==b[j.W.GLUCOSE]&&void 0!==b[j.W.ADDITIONAL_NOTES]&&(b[j.W.GLUCOSE]=`${b[j.W.GLUCOSE]} ${b[j.W.ADDITIONAL_NOTES]}`),k.vitals=b,c(2),H(a=>[...a,1])},aX=a=>{k.airway=a,c(3),H(a=>[...a,2])},aY=a=>{k.bloodCirculation=a,c(4),H(a=>[...a,3])},aZ=a=>{k.disability=a,c(5),H(a=>[...a,4])},a$=a=>{k.presentingComplaints=a,c(1),H(a=>[...a,0])},a_=(a,b)=>{F(c=>({...c,[b]:a}))};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(x,{hidden:!ac,children:[u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.um,{onCompleteTriage:()=>{a$(I),aX(M),aY(O),aZ(O),aW(K),aV(S)},result:u,message:"Interventions",setContinueTriage:D}),(0,d.jsx)("br",{})]}),(0,d.jsxs)(f.RG,{setActive:a=>{c(a)},title:"Triage",steps:[{id:6,label:"Presenting Complaints"},{id:5,label:"Vitals Signs"},{id:1,label:"Airway/Breathing"},{id:2,label:"Blood Circulation"},{id:3,label:"Disability"},{id:4,label:"Persistent Pain/Other Concerns"}],active:b,onBack:()=>aK(),allowPanelActiveOnClick:!1,backButtonProfileText:"Back to triage list",children:[(0,d.jsx)(g.M1,{getFormValues:J,triageResult:u,setTriageResult:a_,onSubmit:a$}),(0,d.jsx)(h.u,{previous:()=>c(0),triageResult:u,setTriageResult:a_,initialValues:{},onSubmit:aW,continueTriage:C,getFormValues:L}),(0,d.jsx)(g.hC,{getFormValues:N,previous:()=>c(1),continueTriage:C,triageResult:u,setTriageResult:a_,onSubmit:aX}),(0,d.jsx)(g.Eh,{previous:()=>c(2),getFormValues:P,continueTriage:C,triageResult:u,setTriageResult:a_,onSubmit:aY}),(0,d.jsx)(g.QD,{getFormValues:R,previous:()=>c(3),continueTriage:C,triageResult:u,setTriageResult:a_,onSubmit:aZ}),(0,d.jsx)(g.WJ,{getFormValues:T,previous:()=>c(4),continueTriage:C,setTriageResult:a_,triageResult:u,onSubmit:aV})]})]}),7==$&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(A.k2,{arrivalTime:(0,q.rX)(aS?.encounter_datetime),open:W,onClose:()=>X(!1),presentingComplaints:I[j.W.PRESENTING_COMPLAINTS].reduce((a,b)=>""==a?b.label:a+","+b.label,""),triageCategory:u,date:(0,q.rX)(a.getServerTimeString()),triagedBy:ak?.created_by,referredFrom:aU,vitals:[{name:h.D.saturationRate.short,value:K[h.D.saturationRate.name]},{name:h.D.heartRate.short,value:K[h.D.heartRate.name]},{name:h.D.bloodPressure.short,value:`${K[h.D.bloodPressure.name]}/${K[h.D.bloodPressureDiastolic.name]}`},{name:h.D.respiratoryRate.short,value:K[h.D.respiratoryRate.name]},{name:h.D.temperature.short,value:K[h.D.temperature.name]},{name:h.D.avpu.label,value:K[h.D.avpu.name]},{name:`${h.D.glucose.label}(${K[h.D.units.name]})`,value:K[h.D.glucose.name]}]}),(0,d.jsx)(p.n,{title:"Patient Triaged Successfully",primaryActionText:"Triage more patients",secondaryActionText:"Go Home",printButton:(0,d.jsx)(f.O6,{sx:{mx:"2px"},variant:"secondary",title:"print",onClick:()=>X(!0)}),onPrimaryAction:()=>{ad(!0),_(0),aJ("/triage")},onSecondaryAction:()=>aJ("/dashboard")})]}),ae&&(0,d.jsx)(o.j,{error:aa,onPrimaryAction:()=>{af(!1),_(0),Z(!1),ad(!0)},onSecondaryAction:()=>{_(0),ad(!0),Z(!1),af(!1)}}),(0,d.jsxs)(f.eV,{open:U,onClose:()=>{V(!1),aK()},title:"Triage Decision",children:[(0,d.jsxs)("p",{children:["Triage status is (","green"===u?(0,d.jsx)("span",{style:{color:"green"},children:u}):"red"===u?(0,d.jsx)("span",{style:{color:"red"},children:u}):(0,d.jsx)("span",{style:{color:"#cc9900"},children:u}),"). Where should this patient go next?"]}),(0,d.jsx)(w,{onSubmit:b=>{k.serviceArea=b,ab("adding next service area..."),(()=>{Z(!0);let b=a.getServerTimeString();ab("adding complaints..."),ag({encounterType:j.fA.PRESENTING_COMPLAINTS,visit:aM?.uuid,patient:t.id,encounterDatetime:b,obs:k.presentingComplaints})})(),V(!1)},triageStatus:u})]}),Y&&!ae&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)(n.n,{message:aa,progress:$/7*100})]})]})}},22566:(a,b,c)=>{c.d(b,{A:()=>l});var d=c(21124),e=c(41640),f=c(82283),g=c(38301),h=c(65689),i=c(80350),j=c(24515),k=c(47721);function l(a,b){return function(c){let[i,j]=(0,g.useState)(!1),{navigateTo:l}=(0,f.cq)(),n=(0,h.R)(b,(0,k.O)());return i?n?(0,d.jsx)(a,{...c}):(0,d.jsx)(m,{}):(0,d.jsx)(e.OverlayLoader,{open:!i})}}let m=()=>(0,d.jsx)(i.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,d.jsx)(j.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},36252:(a,b,c)=>{c.d(b,{l:()=>g});var d=c(38301),e=c(50852),f=c(95745);let g=()=>{let[a,b]=(0,d.useState)([]);return(0,d.useEffect)(()=>{(async()=>{let a=await (0,e.cr)(f.W.PRESENTING_COMPLAINTS);b(a=a.data[0].set_members.map(a=>({id:a?.names[0]?.uuid,label:a?.names[0]?.name})))})()},[]),{presentingComplaints:a}}},53862:(a,b,c)=>{c.d(b,{g:()=>e});var d=c(38301);let e=()=>{let[a,b]=(0,d.useState)(!1),[c,e]=(0,d.useState)(0),[f,g]=(0,d.useState)(!0),[h,i]=(0,d.useState)(""),[j,k]=(0,d.useState)(!1);return{loading:a,setLoading:b,completed:c,setCompleted:e,showForm:f,setShowForm:g,message:h,setMessage:i,error:j,setError:k}}},93602:(a,b,c)=>{c.d(b,{hC:()=>o,Eh:()=>u,uM:()=>O,QD:()=>E,WJ:()=>z,M1:()=>au,um:()=>P,TU:()=>ai});var d=c(21124),e=c(38301),f=c(80350),g=c(48936),h=c(82283),i=c(66815),j=c(95745);let k={airway:{name:j.W.IS_AIRWAY_COMPROMISED,label:"is Airway Compromised",coded:!0},breathing:{name:j.W.IS_BREATHING_ABNORMAL,label:"is Breathing Abnormal",coded:!0},respiratoryDysfunction:{name:j.W.SEVERE_RESPIRATORY,label:"Severe Respiratory dysfunction or exhaustion ",coded:!0},inabilityToSpeak:{name:j.W.INABILITY_TO_SPEAK,label:"Inability to speak in complete sentences ",coded:!0},stridor:{name:j.W.STRIDOR,label:"Stridor",coded:!0},reducedLevelOfConsciousness:{name:j.W.REDUCED_LEVEL_CONSCIOUSNESS,label:"Reduced Level of Consciousness due to low oxygen",coded:!0}},l=g.Ik().shape({[k.airway.name]:g.Yj().required().label(k.airway.label),[k.breathing.name]:g.Yj().required().label(k.breathing.label),[k.respiratoryDysfunction.name]:g.Yj().label(k.respiratoryDysfunction.label),[k.stridor.name]:g.Yj().label(k.stridor.label),[k.reducedLevelOfConsciousness.name]:g.Yj().label(k.reducedLevelOfConsciousness.label)}),m=(0,i.f6)(k),n=[{label:"Yes",value:j._Y},{label:"No",value:j.NO}],o=({onSubmit:a,triageResult:b,setTriageResult:c,continueTriage:g,previous:o,getFormValues:p})=>{let[q,r]=(0,e.useState)("false"),[s,t]=(0,e.useState)({}),{conditions:u,updateConditions:v,aggregateOrCondition:w}=(0,h.AS)(),[x,y]=(0,e.useState)(!1);(0,e.useEffect)(()=>{y(!w&&4==Object.keys(u).length)},[u]);let z=a=>"red"===b&&!s[a]&&!g,A=(a,b)=>{};return(0,d.jsxs)(f.PD,{validationSchema:l,initialValues:m,submitButtonText:"next",submitButton:!1,onSubmit:async b=>a(await (0,i.k$)(k,b)),getFormValues:async a=>p(await (0,i.k$)(k,a)),children:[(0,d.jsx)(f.fP,{getValues:t}),(0,d.jsx)(f.kI,{last:q!=j._Y,title:"Airway and Breathing",children:(0,d.jsxs)(f.Vp,{sx:{width:"100%"},children:[(0,d.jsx)(f.b1,{name:k.airway.name,label:k.airway.label,getValue:a=>{if(a==j._Y)return void c("red",k.airway.name);c("",k.airway.name)},options:n,disabled:z(k.airway.name)}),(0,d.jsx)(f.b1,{name:k.breathing.name,label:k.breathing.label,getValue:a=>r(a),options:n,disabled:z(k.breathing.name)})]})}),q==j._Y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.kI,{title:"Exhaustion and Inability to Speak",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{name:k.respiratoryDysfunction.name,disabled:z(k.respiratoryDysfunction.name),label:k.respiratoryDysfunction.label,getValue:a=>{v(k.respiratoryDysfunction.name,a),A(k.respiratoryDysfunction.name,a)},options:n}),(0,d.jsx)(f.b1,{name:k.inabilityToSpeak.name,label:k.inabilityToSpeak.label,disabled:z(k.inabilityToSpeak.name),options:n,getValue:a=>{v(k.inabilityToSpeak.name,a),A(k.inabilityToSpeak.name,a)}})]})}),(0,d.jsx)(f.kI,{title:"Stridor and Reduced Consciousness",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{name:k.stridor.name,label:k.stridor.label,disabled:z(k.stridor.name),options:n,getValue:a=>{v(k.stridor.name,a),A(k.stridor.name,a)}}),(0,d.jsx)(f.b1,{name:k.reducedLevelOfConsciousness.name,label:k.reducedLevelOfConsciousness.label,disabled:z(k.reducedLevelOfConsciousness.name),getValue:a=>{v(k.reducedLevelOfConsciousness.name,a),A(k.reducedLevelOfConsciousness.name,a)},options:n})]})})]}),(0,d.jsxs)(f.jD,{children:[(0,d.jsx)(f.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:o}),(0,d.jsx)(f.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})};var p=c(16316);let q={isCirculationAbnormal:{name:j.W.IS_CIRCULATION_ABNORMAL,label:"Is Circulation Abnormal",coded:!0},weakIrregularPulse:{name:j.W.WEAK_THREADY,label:"Weak, Thready, Bounding or regular/irregular pulse"},heartRate:{name:j.W.HEART_RATE,label:"Heart Rate"},pulseRate:{name:j.W.PULSE_RATE,label:"Pulse Rate"},reducedUrinaryOutput:{name:j.W.REDUCED_URINARY_OUTPUT,label:"Reduced urinary output < 30ml/hr",coded:!0},clammyPeripherals:{name:j.W.CAPILLARY_REFILL,label:"Cool clammy peripherals or cap refill > 4 seconds",coded:!0},hemorrhage:{name:j.W.HEMORRHAGE,label:"Hemorrhage",coded:!0},dehydration:{name:j.W.DEHYDRATION_SKIN,label:"Dehydration skin turgor, sunken eyes",coded:!0}},r=g.Ik().shape({[q.isCirculationAbnormal.name]:g.Yj().required().label(q.isCirculationAbnormal.label),[q.heartRate.name]:g.Yj().label(q.heartRate.label),[q.pulseRate.name]:g.Yj().label(q.pulseRate.label),[q.weakIrregularPulse.name]:g.Yj().label(q.weakIrregularPulse.label),[q.reducedUrinaryOutput.name]:g.Yj().label(q.reducedUrinaryOutput.label),[q.clammyPeripherals.name]:g.Yj().label(q.clammyPeripherals.label),[q.hemorrhage.name]:g.Yj().label(q.hemorrhage.label),[q.dehydration.name]:g.Yj().label(q.dehydration.label)}),s=(0,i.f6)(q),t=[{label:"Yes",value:j._Y},{label:"No",value:j.NO}],u=({onSubmit:a,triageResult:b,continueTriage:c,previous:g,setTriageResult:k,getFormValues:l})=>{let[m,n]=(0,e.useState)(""),[o,u]=(0,e.useState)({}),{updateConditions:v,aggregateOrCondition:w,conditions:x}=(0,h.AS)(),{flow:y}=(0,e.useContext)(p.gd),{navigateTo:z}=(0,h.cq)(),A=a=>"red"===b&&!o[a]&&!c,B=(a,b)=>{},C="yellow"==y.heart||"red"==y.heart||"yellow"==y.diastolic||"red"==y.diastolic||"yellow"==y.systolic||"red"==y.systolic;return(0,d.jsxs)(f.PD,{validationSchema:r,initialValues:{...s,[q.isCirculationAbnormal.name]:C?j._Y:j.NO},enableReinitialize:!0,submitButtonText:"next",submitButton:!1,onSubmit:async b=>a(await (0,i.k$)(q,b)),getFormValues:async a=>l(await (0,i.k$)(q,a)),children:[(0,d.jsx)(f.fP,{getValues:u}),(0,d.jsx)(f.kI,{last:m!=j._Y,title:"Circulation",children:(0,d.jsx)(f.b1,{name:q.isCirculationAbnormal.name,label:q.isCirculationAbnormal.label,options:t,getValue:a=>n(a),disabled:A(q.isCirculationAbnormal.name)})}),(0,d.jsx)("br",{}),m==j._Y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.kI,{title:"Heart Rate and Pulse",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{name:q.heartRate.name,label:q.heartRate.label,options:[{label:"Weak/Thready",value:"Weak/Thready"},{label:"Strong",value:"Strong"}],disabled:A(q.heartRate.name),getValue:a=>v(q.heartRate.name,a)}),(0,d.jsx)(f.b1,{name:q.pulseRate.name,label:q.pulseRate.label,options:[{label:"Irregular",value:"Irregular"},{label:"Regular",value:"Regular"}],disabled:A(q.pulseRate.name),getValue:a=>v(q.pulseRate.name,a)})]})}),(0,d.jsx)(f.kI,{title:"Reduced Urinary and Clammy Peripherals",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{disabled:A(q.reducedUrinaryOutput.name),name:q.reducedUrinaryOutput.name,label:q.reducedUrinaryOutput.label,options:t,getValue:a=>{v(q.reducedUrinaryOutput.name,a),B(q.reducedUrinaryOutput.name,a)}}),(0,d.jsx)(f.b1,{disabled:A(q.clammyPeripherals.name),name:q.clammyPeripherals.name,label:q.clammyPeripherals.label,options:t,getValue:a=>{v(q.clammyPeripherals.name,a),B(q.clammyPeripherals.name,a)}})]})}),(0,d.jsx)(f.kI,{title:"Hemorrhage and Skin Turgor",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{disabled:A(q.hemorrhage.name),name:q.hemorrhage.name,label:q.hemorrhage.label,options:t,getValue:a=>{v(q.hemorrhage.name,a),B(q.hemorrhage.name,a)}}),(0,d.jsx)(f.b1,{disabled:A(q.dehydration.name),name:q.dehydration.name,label:q.dehydration.label,getValue:a=>{v(q.dehydration.name,a),B(q.dehydration.name,a)},options:t})]})}),!w&&6==Object.keys(x).length&&(0,d.jsx)(d.Fragment,{})]}),(0,d.jsxs)(f.jD,{children:[(0,d.jsx)(f.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:g}),(0,d.jsx)(f.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})},v={activeSeizures:{name:j.W.ACTIVE_SEIZURES,label:"Active Seizures",coded:!0},focalNeurological:{name:j.W.FOCAL_NEUROLOGICAL,label:"focal neurologic findings",coded:!0},headache:{name:j.W.HEADACHE,label:"Headache",coded:!0},weakness:{name:j.W.WEAKNESS,label:"Weakness",coded:!0},confusion:{name:j.W.CONFUSION,label:"Confusion",coded:!0},severePain:{name:j.W.SEVERE_PAIN,label:"Severe Pain",coded:!0},moderatePain:{name:j.W.MODERATE_PAIN,label:"moderate pain or a reason to be seen in under four hours",coded:!0}},w=g.Ik().shape({[v.activeSeizures.name]:g.Yj().required().label(v.activeSeizures.label),[v.confusion.name]:g.Yj().required().label(v.confusion.label),[v.headache.name]:g.Yj().required().label(v.headache.label),[v.moderatePain.name]:g.Yj().required().label(v.moderatePain.label),[v.severePain.name]:g.Yj().required().label(v.severePain.label),[v.weakness.name]:g.Yj().required().label(v.weakness.label),[v.focalNeurological.name]:g.Yj().required().label(v.focalNeurological.label)}),x=(0,i.f6)(v),y=[{label:"Yes",value:j._Y},{label:"No",value:j.NO}],z=({onSubmit:a,triageResult:b,continueTriage:c,previous:g,setTriageResult:k,getFormValues:l})=>{let{updateConditions:m}=(0,h.AS)(),[n,o]=(0,e.useState)({}),p=a=>"red"===b&&!n[a]&&!c;return(0,d.jsxs)(f.PD,{validationSchema:w,initialValues:x,submitButton:!1,onSubmit:async b=>a(await (0,i.k$)(v,b)),getFormValues:async a=>l(await (0,i.k$)(v,a)),children:[(0,d.jsx)(f.fP,{getValues:o}),(0,d.jsx)(f.kI,{title:"Seizures and Focal Neurologic",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{name:v.activeSeizures.name,label:v.activeSeizures.label,options:y,disabled:p(v.activeSeizures.name),getValue:a=>{m(v.activeSeizures.name,a),a==j._Y?k("red",v.activeSeizures.name):k("green",v.activeSeizures.name)}}),(0,d.jsx)(f.b1,{name:v.focalNeurological.name,label:v.focalNeurological.label,options:y,disabled:p(v.focalNeurological.name),getValue:a=>{m(v.focalNeurological.name,a),a==j._Y?k("red",v.focalNeurological.name):k("green",v.focalNeurological.name)}})]})}),(0,d.jsx)(f.kI,{title:"Headache and Weakness",children:(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{name:v.headache.name,disabled:p(v.headache.name),label:v.headache.label,options:y,getValue:a=>{a==j._Y?k("yellow",v.headache.name):k("green",v.headache.name),m(v.headache.name,a)}}),(0,d.jsx)(f.b1,{name:v.weakness.name,disabled:p(v.weakness.name),label:v.weakness.label,options:y,getValue:a=>{m(v.weakness.name,a),a==j._Y?k("yellow",v.weakness.name):k("green",v.weakness.name)}})]})}),(0,d.jsxs)(f.kI,{last:!0,title:"Severe Pain and Confusion",children:[(0,d.jsxs)(f.Vp,{children:[(0,d.jsx)(f.b1,{name:v.severePain.name,disabled:p(v.severePain.name),label:v.severePain.label,options:y,getValue:a=>{m(v.severePain.name,a),a==j._Y?k("red",v.severePain.name):k("green",v.severePain.name)}}),(0,d.jsx)(f.b1,{name:v.confusion.name,disabled:p(v.confusion.name),label:v.confusion.label,options:y,getValue:a=>{m(v.confusion.name,a),a==j._Y?k("yellow",v.confusion.name):k("green",v.confusion.name)}})]}),(0,d.jsx)(f.Vp,{children:(0,d.jsx)(f.b1,{disabled:p(v.moderatePain.name),name:v.moderatePain.name,label:v.moderatePain.label,options:y,getValue:a=>{a==j._Y?k("yellow",v.moderatePain.name):k("green",v.moderatePain.name)}})})]}),(0,d.jsxs)(f.jD,{children:[(0,d.jsx)(f.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:g}),(0,d.jsx)(f.O6,{sx:{m:.5},title:"submit",type:"submit",onClick:()=>{}})]})]})},A={consciousness:{name:j.W.DOES_PATIENT_LOW_LEVEL_CONSCIOUSNESS,label:"Does the patient have a reduced Level of consciousness",coded:!0},bloodGlucose:{name:j.W.BLOOD_GLUCOSE,label:"Blood Glucose"},gcs:{name:j.W.GCS,label:"GCS"}},B=g.Ik().shape({[A.consciousness.name]:g.Yj().required().label(A.consciousness.label),[A.bloodGlucose.name]:g.Yj().label(A.bloodGlucose.label),[A.gcs.name]:g.Yj().label(A.gcs.label)}),C=[{label:"Yes",value:j._Y},{label:"No",value:j.NO}],D=(0,i.f6)(A),E=({onSubmit:a,triageResult:b,setTriageResult:c,continueTriage:g,previous:h,getFormValues:k})=>{let l,{flow:m}=(0,e.useContext)(p.gd),[n,o]=(0,e.useState)(),[q,r]=(0,e.useState)({});return(0,d.jsxs)(f.PD,{validationSchema:B,initialValues:{...D,[A.consciousness.name]:m.gsc<15?j._Y:j.NO,[A.gcs.name]:m.gsc,[A.bloodGlucose.name]:m.glucose},enableReinitialize:!0,onSubmit:async b=>a(await (0,i.k$)(A,b)),getFormValues:async a=>k(await (0,i.k$)(A,a)),submitButtonText:"next",submitButton:!1,children:[(0,d.jsx)(f.fP,{getValues:r}),(0,d.jsx)(f.kI,{last:n!=j._Y,title:"Consciousness",children:(0,d.jsx)(f.b1,{name:A.consciousness.name,label:A.consciousness.label,options:C,getValue:a=>o(a),disabled:(l=A.consciousness.name,"red"===b&&!q[l]&&!g)})}),n==j._Y&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(f.kI,{last:!0,title:"Blood Glucose and GCS",children:(0,d.jsxs)(f.Vp,{mr:"1ch",children:[(0,d.jsx)(f.A8,{sx:{width:"100%"},name:A.bloodGlucose.name,label:A.bloodGlucose.label,id:A.bloodGlucose.name,disabled:!0}),(0,d.jsx)(f.A8,{sx:{width:"100%"},name:A.gcs.name,label:A.gcs.label,id:A.gcs.name,getValue:a=>{if(!a)return void c("",A.gcs.name);a<10&&c("red",A.gcs.name),a>=10&&a<=14&&c("yellow",A.gcs.name)},disabled:!0})]})})}),(0,d.jsxs)(f.jD,{children:[(0,d.jsx)(f.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:h}),(0,d.jsx)(f.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})};c(17774);var F=c(38736),G=c(33104),H=c(75744),I=c(43312),J=c(48875),K=c(59604),L=c(62035),M=c(81328),N=c(66717);let O=()=>{let[a,b]=(0,e.useState)(!1),[c,g]=(0,e.useState)(""),[i,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(""),{navigateTo:n}=(0,h.cq)(),{loading:o,patients:p,paginationModel:q,setPaginationModel:r,searchText:s,setSearchText:t,totalPages:u,setOnSwitch:v,totalEntries:w}=(0,L.a)("triage"),[x,y]=(0,e.useState)(""),z=(0,M.d)(x,500);(0,e.useEffect)(()=>{t(z)},[z]);let A=p?.map(a=>({id:a?.uuid,...a,patient_arrival_time:(0,F.WB)(a.arrival_time)})).filter(a=>a.id!=l),B=[{field:"aetc_visit_number",headerName:"Visit Number"},{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"patient_arrival_time",headerName:"Arrival Time"},{field:"waiting",headerName:"WaitingTime",flex:1,renderCell:a=>(0,d.jsx)(f.VJ,{arrival_time:a.row.latest_encounter_time})},{field:"aggreg",headerName:"Aggregate",flex:1,renderCell:a=>(0,d.jsx)(f.VJ,{arrival_time:a.row.arrival_time})},{field:"last_encounter_creator",headerName:"Registered By",flex:1},{field:"action",headerName:"Action",flex:1.2,renderCell:a=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(I.A,{title:"Start Triage",arrow:!0,children:(0,d.jsx)(J.default,{onClick:()=>n(`/triage/${a.id}/start`),"aria-label":"start Triage",color:"primary",children:(0,d.jsx)(K.gSK,{})})}),(0,d.jsx)(G.R,{onDelete:()=>m(a.id),visitId:a.row.visit_uuid,patientId:a.id}),(0,d.jsx)(H.jx,{icon:!0,uuid:a.row.uuid}),(0,d.jsx)(I.A,{title:"Initiate CPR",arrow:!0,children:(0,d.jsx)(J.default,{onClick:()=>{g(a.id),b(!0),k(a.row.visit_uuid)},"aria-label":"initiate CPR",color:"error",children:(0,d.jsx)(K.szJ,{})})})]})}],C=A?.map(a=>({id:a.id,visitNumber:a.aetc_visit_number,firstName:a.given_name,lastName:a.family_name,gender:a.gender,arrivalTime:a.patient_arrival_time,arrivalDateTime:a.arrival_time,actor:(0,d.jsx)(f.uT,{encounterType:j.fA.SOCIAL_HISTORY,patientId:a.id}),aggregate:(0,d.jsx)(f.VJ,{arrival_time:a.arrival_time}),waitingTime:(0,d.jsx)(f.VJ,{arrival_time:a?.latest_encounter_time}),actionName:"Registered by",action:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.O6,{size:"small",sx:{fontSize:"12px",width:"30%",mr:"1px",mb:"1px"},title:"start",onClick:()=>n(`/triage/${a.id}/start`)}),(0,d.jsx)(G.R,{sx:{width:"30%"},onDelete:()=>m(a.id),visitId:a.visit_uuid,patientId:a.id}),(0,d.jsx)(H.jx,{sx:{width:"30%"},uuid:a.uuid})]}),age:(0,F.Cb)(a.birthdate),triageResult:a.triage_result}));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.vP,{columns:B,data:{data:A??[],page:q.page,per_page:q.pageSize,total_pages:u,totalEntries:w},searchText:x,setSearchString:y,setPaginationModel:r,paginationModel:q,loading:o,formatForMobileView:C||[],onSwitchChange:v,onRowClick:a=>n(`/triage/${a.id}/start`)}),(0,d.jsx)(N.w8,{patientuuid:c,visituuid:i,open:a,onClose:()=>b(!1)})]})},P=({message:a,result:b,onCompleteTriage:c,setContinueTriage:g})=>{let[h,j]=(0,e.useState)(!1),k=()=>{(0,i.iE)({title:"Complete Triage?",text:"Once you confirm you will not be able to proceed with the current triage for this patient",icon:"warning",confirmButtonText:"Yes, Complete",onConfirm:()=>{c()}})};return"green"==b?null:(0,d.jsxs)(f.sc,{elevation:0,sx:{...{red:{backgroundColor:"#FECDCA",color:"#B42318"},yellow:{backgroundColor:"#FEDF89",color:"#B54708"},green:{backgroundColor:"#DDEEDD",color:"#016302"},"":{}}[b],p:"1ch"},children:[(0,d.jsxs)(f.Th,{variant:"h4",textTransform:"capitalize",children:["Triage ",b]}),(0,d.jsx)(f.Th,{fontStyle:"italic",variant:"subtitle1",children:"yellow"==b?"Continue Triage":"red"==b?"Proceed to interventions":""}),"red"==b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.O6,{sx:{backgroundColor:"#B42318","&:hover":{backgroundColor:"#B42318"},mr:"0.5ch"},title:"Complete Triage",onClick:k}),(0,d.jsx)(f.O6,{variant:"secondary",title:"Continue Triage",onClick:()=>g(!0)}),(0,d.jsx)(f.O6,{variant:"secondary",sx:{ml:"0.5ch"},title:"Start CPR",onClick:()=>j(!0)})]}),(0,d.jsx)(N.w8,{open:h,onClose:()=>{k(),j(!1)}})]})};var Q=c(45701),R=c(47949),S=c(50852),T=c(81637),U=c(79515),V=c(61628),W=c(19787),X=c(95803),Y=c(46468),Z=c(21903),$=c(4927),_=c(54573),aa=c(31605),ab=c(94367),ac=c(54401),ad=c(53773),ae=c(68096),af=c(6921),ag=c(66951);function ah(){let{setActiveVisit:a,activeVisit:b,setOpenVisit:c}=e.useContext(p.U),[g,i]=e.useState(!1),j=e.useRef(null),{params:k}=(0,h.KU)(),[l,m]=(0,e.useState)([]),[n,o]=(0,e.useState)(""),{data:q,isLoading:r,isSuccess:s}=(0,ag.iu)(k?.id),t=a=>{j.current&&j.current.contains(a.target)||i(!1)};function u(a){"Tab"===a.key?(a.preventDefault(),i(!1)):"Escape"===a.key&&i(!1)}let v=e.useRef(g);return e.useEffect(()=>{!0===v.current&&!1===g&&j.current.focus(),v.current=g},[g]),(0,d.jsx)(ad.A,{direction:"row",spacing:2,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)(T.default,{ref:j,id:"composition-button","aria-controls":g?"composition-menu":void 0,"aria-expanded":g?"true":void 0,"aria-haspopup":"true",onClick:()=>{i(a=>!a)},sx:{display:"flex",cursor:"pointer",alignItems:"center",backgroundColor:"#ccc",padding:"1ch",borderRadius:"5px"},children:[(0,d.jsx)(f.Th,{sx:{marginRight:"1ch",fontWeight:"bold"},children:"Visit date:"}),(0,d.jsx)(ae.nxe,{}),(0,d.jsx)(f.Th,{sx:{marginRight:"1ch",ml:"1ch",lineHeight:"17px",letterSpacing:"0em",textAlign:"left",textTransform:"capitalize"},children:(0,F.Eb)(n)}),g?(0,d.jsx)(af.Ik,{}):(0,d.jsx)(af.pte,{})]}),(0,d.jsx)(aa.A,{open:g,anchorEl:j.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,sx:{zIndex:1e5},children:({TransitionProps:c,placement:e})=>(0,d.jsx)($.A,{...c,style:{transformOrigin:"bottom-start"===e?"left top":"left bottom"},children:(0,d.jsx)(_.default,{children:(0,d.jsx)(Z.x,{onClickAway:t,children:(0,d.jsx)(ac.A,{autoFocusItem:g,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:u,children:l.map(c=>(0,d.jsxs)(ab.A,{sx:{py:"2ch",mx:"1ch",display:"flex",justifyContent:"space-between",width:"240px","& .icon":{display:"none"}},onClick:b=>{a(c.visit_id),o(c.date_started),t(b)},children:[(0,d.jsx)(f.Th,{sx:{lineHeight:"21px",letterSpacing:"0em",textAlign:"left"},children:(0,F.Eb)(c.date_started)}),b==c.visit_id&&(0,d.jsx)(f.Th,{children:(0,d.jsx)(ae.CMH,{})})]},c.visit_id))})})})})})]})})}let ai=()=>{let{activeVisit:a}=(0,e.useContext)(p.U),{params:b}=(0,h.KU)(),{data:c,isLoading:g}=(0,S.$O)(b?.id),[i,l]=(0,e.useState)(0),[m,n]=(0,e.useState)([]),[o,r]=(0,e.useState)([]),[s,t]=(0,e.useState)([]),[u,w]=(0,e.useState)([]),[x,y]=(0,e.useState)([]),[z,B]=(0,e.useState)({}),[C,D]=(0,e.useState)({}),[E,F]=(0,e.useState)({}),[G,H]=(0,e.useState)({}),[I,J]=(0,e.useState)({}),[L,M]=(0,e.useState)([]);(0,e.useEffect)(()=>{N()},[i]),(0,e.useEffect)(()=>{M(Object.keys(z).map(a=>({value:Number(a),label:`Triage ${Number(a)+1}`}))),N()},[z,C]);let N=()=>{P(Object.keys(C).length>0?C[i]:[]),Z(Object.keys(E).length>0?E[i]:[]),$(Object.keys(I).length>0?I[i]:[]),O(Object.keys(z).length>0?z[i]:[]),U(Object.keys(G).length>0?G[i]:[])};(0,e.useEffect)(()=>{if(c&&0!==a){let b=(0,Q.tl)(c,j.fA.VITALS,a),d=(0,Q.tl)(c,j.fA.AIRWAY_ASSESSMENT,a),e=(0,Q.tl)(c,j.fA.DISABILITY_ASSESSMENT,a),f=(0,Q.tl)(c,j.fA.PERSISTENT_PAIN,a),g=(0,Q.tl)(c,j.fA.BLOOD_CIRCULATION,a);B((0,Q.Ev)(b)),D((0,Q.CK)(d)),F((0,Q.Mm)(e)),J((0,Q.e8)(f)),H((0,Q.Gi)(g))}},[c,a]);let O=a=>{n([{name:`${R.D.saturationRate.label} (%)`,value:(0,Q.m)(a,j.W.OXYGEN_SATURATION)},{name:`${R.D.heartRate.label} (bpm)`,value:(0,Q.m)(a,j.W.HEART_RATE)},{name:"Blood Pressure (mmHg)",value:`${(0,Q.m)(a,j.W.SYSTOLIC_BLOOD_PRESSURE)}/${(0,Q.m)(a,j.W.DIASTOLIC_BLOOD_PRESSURE)}`},{name:`${R.D.respiratoryRate.label} (bpm)`,value:(0,Q.m)(a,j.W.RESPIRATORY_RATE)},{name:`${R.D.temperature.label} (\xb0C)`,value:(0,Q.m)(a,j.W.TEMPERATURE)},{name:`${R.D.glucose.label} (mg/dL)`,value:(0,Q.m)(a,j.W.GLUCOSE)},{name:`${R.D.avpu.label}`,value:(0,Q.m)(a,j.W.AVPU)}])},P=a=>{r([{name:`${k.airway.label}`,value:(0,Q.m)(a,j.W.IS_AIRWAY_COMPROMISED)},{name:`${k.breathing.label}`,value:(0,Q.m)(a,j.W.IS_BREATHING_ABNORMAL)},{name:`${k.respiratoryDysfunction.label}`,value:(0,Q.m)(a,j.W.SEVERE_RESPIRATORY)},{name:`${k.inabilityToSpeak.label}`,value:(0,Q.m)(a,j.W.INABILITY_TO_SPEAK)},{name:`${k.stridor.label}`,value:(0,Q.m)(a,j.W.STRIDOR)},{name:`${k.reducedLevelOfConsciousness.label}`,value:(0,Q.m)(a,j.W.REDUCED_LEVEL_CONSCIOUSNESS)}])},U=a=>{t([{name:`${q.isCirculationAbnormal.label}`,value:(0,Q.m)(a,j.W.IS_CIRCULATION_ABNORMAL)},{name:`${q.weakIrregularPulse.label}`,value:(0,Q.m)(a,j.W.WEAK_THREADY)},{name:`${q.heartRate.label}`,value:(0,Q.m)(a,j.W.HEART_RATE)},{name:`${q.pulseRate.label}`,value:(0,Q.m)(a,j.W.PULSE_RATE)},{name:`${q.reducedUrinaryOutput.label}`,value:(0,Q.m)(a,j.W.REDUCED_URINARY_OUTPUT)},{name:`${q.clammyPeripherals.label}`,value:(0,Q.m)(a,j.W.CAPILLARY_REFILL)},{name:`${q.hemorrhage.label}`,value:(0,Q.m)(a,j.W.HEMORRHAGE)},{name:`${q.dehydration.label}`,value:(0,Q.m)(a,j.W.DEHYDRATION_SKIN)}])},Z=a=>{w([{name:`${A.consciousness.label}`,value:(0,Q.m)(a,j.W.DOES_PATIENT_LOW_LEVEL_CONSCIOUSNESS)},{name:`${A.bloodGlucose.label}`,value:(0,Q.m)(a,j.W.BLOOD_GLUCOSE)},{name:`${A.gcs.label}`,value:(0,Q.m)(a,j.W.GCS)}])},$=a=>{y([{name:`${v.activeSeizures.label}`,value:(0,Q.m)(a,j.W.ACTIVE_SEIZURES)},{name:`${v.focalNeurological.label}`,value:(0,Q.m)(a,j.W.FOCAL_NEUROLOGICAL)},{name:`${v.headache.label}`,value:(0,Q.m)(a,j.W.HEADACHE)},{name:`${v.weakness.label}`,value:(0,Q.m)(a,j.W.WEAKNESS)},{name:`${v.confusion.label}`,value:(0,Q.m)(a,j.W.CONFUSION)},{name:`${v.severePain.label}`,value:(0,Q.m)(a,j.W.SEVERE_PAIN)},{name:`${v.moderatePain.label}`,value:(0,Q.m)(a,j.W.MODERATE_PAIN)}])};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(T.default,{sx:{display:"flex",justifyContent:"space-between",my:"2ch"},children:[(0,d.jsx)(f.jD,{width:"20%",children:(0,d.jsx)(Y.x,{defaultValue:{value:i},getValue:a=>l(Number(a)),label:"",options:L})}),(0,d.jsx)(ah,{})]}),(0,d.jsxs)(T.default,{children:[(0,d.jsxs)(V.A,{defaultExpanded:!0,children:[(0,d.jsx)(W.A,{expandIcon:(0,d.jsx)(K.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Vitals"}),(0,d.jsx)(X.A,{children:(0,d.jsx)(aj,{children:m.map(({name:a,value:b})=>(0,d.jsx)(ak,{title:a,value:b},`${b}${a}`))})})]}),(0,d.jsxs)(V.A,{children:[(0,d.jsx)(W.A,{expandIcon:(0,d.jsx)(K.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Airway"}),(0,d.jsx)(X.A,{children:(0,d.jsx)(aj,{children:o.map(({name:a,value:b})=>(0,d.jsx)(ak,{title:a,value:b},`${b}${a}`))})})]}),(0,d.jsxs)(V.A,{children:[(0,d.jsx)(W.A,{expandIcon:(0,d.jsx)(K.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Blood Circulation"}),(0,d.jsx)(X.A,{children:(0,d.jsx)(aj,{children:s.map(({name:a,value:b})=>(0,d.jsx)(ak,{title:a,value:b},`${b}${a}`))})})]}),(0,d.jsxs)(V.A,{children:[(0,d.jsx)(W.A,{expandIcon:(0,d.jsx)(K.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Disability"}),(0,d.jsx)(X.A,{children:(0,d.jsx)(aj,{children:u.map(({name:a,value:b})=>(0,d.jsx)(ak,{title:a,value:b},`${b}${a}`))})})]}),(0,d.jsxs)(V.A,{children:[(0,d.jsx)(W.A,{expandIcon:(0,d.jsx)(K.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Persistent Pain"}),(0,d.jsx)(X.A,{children:(0,d.jsx)(aj,{children:x.map(({name:a,value:b})=>(0,d.jsx)(ak,{title:a,value:b},`${b}${a}`))})})]})]})]})},aj=({children:a})=>(0,d.jsx)(T.default,{children:(0,d.jsx)(T.default,{sx:{display:"flex",flexWrap:"wrap"},children:a})}),ak=({title:a,value:b})=>(0,d.jsxs)(f.jD,{sx:{width:"15ch",display:"flex",flexDirection:"column",my:"0.5ch",alignItems:"center"},children:[(0,d.jsx)(U.default,{variant:"caption",textAlign:"center",children:a}),(0,d.jsx)(U.default,{variant:"h5",children:b})]});var al=c(37674),am=c(17001),an=c(41893);let ao=({getValues:a})=>{let[b,c]=(0,e.useState)(""),[f,g]=(0,e.useState)([]);return(0,e.useEffect)(()=>{a(f)},[f]),(0,d.jsxs)(T.default,{children:[(0,d.jsx)(al.A,{sx:{my:"1ch"},fullWidth:!0,id:"outlined-basic",label:"Other Presenting Complaints",placeholder:"Enter other presenting complaints and click the save icon on the right",variant:"outlined",value:b,onChange:a=>{c(a.target.value)},InputProps:{endAdornment:(0,d.jsx)(am.A,{position:"end",children:(0,d.jsx)(J.default,{onClick:()=>{g(a=>[...a,b]),c("")},edge:"end",children:(0,d.jsx)(K.dIn,{})})})}}),(0,d.jsx)("br",{}),(0,d.jsx)(ad.A,{direction:"row",spacing:1,children:f.map(a=>(0,d.jsx)(an.A,{label:a,onDelete:()=>{g(b=>[...b.filter(b=>b!=a)])}},a))})]})};var ap=c(90675),aq=c(36252);let ar={complaints:{name:j.W.PRESENTING_COMPLAINTS,label:"Complaints"}},as=g.Ik().shape({[ar.complaints.name]:g.YO().required().label(ar.complaints.label)}),at=(0,i.f6)(ar),au=({onSubmit:a,setTriageResult:b,getFormValues:c})=>{let{ServerTime:g}=(0,ap.useServerTime)(),{presentingComplaints:h}=(0,aq.l)(),[i,k]=(0,e.useState)([]),[l,m]=(0,e.useState)(!1),n=async a=>{let c=await (0,S.cr)(j.W.CARBON_MONOXIDE_POISONING),d=await (0,S.cr)(j.W.INJURY_MAJOR_TRAUMA_PENETRATING),e=await (0,S.cr)(j.W.POISONING),f=await (0,S.cr)(j.W.VOMITING_BLOOD),g=await (0,S.cr)(j.W.OTHER),h=[c?.data[0]?.names[0]?.uuid,d?.data[0]?.names[0]?.uuid,e?.data[0]?.names[0]?.uuid,f?.data[0]?.names[0]?.uuid];m(!!a.find(a=>a.id==g.data[0]?.names[0]?.uuid)),h.forEach(c=>{a.find(a=>a.id==c)?b("red",c):b("",c)})};return(0,d.jsxs)(f.PD,{validationSchema:as,initialValues:at,onSubmit:b=>{let c=g.getServerTimeString(),d=i.map(a=>({value:a,concept:j.W.OTHER,dateTime:c}));a([...b[j.W.PRESENTING_COMPLAINTS].map(a=>({concept:j.W.PRESENTING_COMPLAINTS,value:a.id,obsDatetime:c})),...d])},submitButton:!1,submitButtonText:"next",getFormValues:c,children:[(0,d.jsx)(f.el,{getValue:n,name:ar.complaints.name,label:ar.complaints.label,options:h}),(0,d.jsx)("br",{}),l&&(0,d.jsx)(ao,{getValues:k}),(0,d.jsx)("br",{}),(0,d.jsx)(f.O6,{title:"next",type:"submit",onClick:()=>{}})]})}}};