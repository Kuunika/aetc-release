"use strict";exports.id=9197,exports.ids=[9197],exports.modules={43520:(a,b,c)=>{c.d(b,{l:()=>m});var d=c(21124),e=c(38301),f=c(80350),g=c(89724),h=c(6822),i=c(49840),j=c(95745),k=c(66951),l=c(41640);let m=({patient:a,disabled:b})=>{let[c,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(!1),[m,s]=(0,e.useState)(!1),{mutate:t,isPending:u,isSuccess:v,data:w}=(0,k.Wv)(),[x,y]=(0,e.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[z,A]=(0,e.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[B,C]=(0,e.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""});(0,e.useEffect)(()=>{D(a),F(a),E(a)},[a]),(0,e.useEffect)(()=>{v&&w&&(D(w),E(w),F(w))},[w,v]);let D=a=>{a&&y({firstName:a?.given_name,lastName:a?.family_name,birthDate:a?.birthdate,gender:a?.gender,birthDateEstimated:!!a?.birthdateEstimated})},E=a=>{a&&A({nationality:a?.addresses[0]?.country??"",district:a?.addresses[0]?.address1??"",village:a?.addresses[0]?.address2??"",traditionalAuthority:a?.addresses[0]?.county_district??""})},F=a=>{a&&C({district:a?.addresses[0]?.current_district??"",traditionalAuthority:a?.addresses[0]?.current_traditional_authority??"",village:a?.addresses[1]?.address1??"",closeLandMark:a?.addresses[1]?.address2??""})};return(0,d.jsx)(f.jD,{sx:{display:"flex",mt:"1ch"},children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.OverlayLoader,{open:u}),(0,d.jsx)(p,{onSubmit:b=>{let c={identifiers:[{identifier:b.identificationNumber,identifierType:j.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}],names:[{givenName:b.firstName,familyName:b.lastName}],gender:b.gender,birthdateEstimated:b.birthdateEstimated,birthdate:b.birthDate};t({id:a.uuid,data:c}),g(!1)},initialValues:{...x},onClose:()=>g(!1),open:c}),(0,d.jsxs)(n,{children:[(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.Th,{variant:"h5",children:"Demographics"}),(0,d.jsx)(o,{label:"First Name",value:x.firstName}),(0,d.jsx)(o,{label:"Last Name",value:x.lastName}),(0,d.jsx)(o,{label:"Gender",value:x.gender}),(0,d.jsx)(o,{label:"Date of birth",value:x.birthDate})]}),(0,d.jsx)(f.O6,{disabled:b,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>g(!0)})]}),(0,d.jsxs)(n,{children:[(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.Th,{variant:"h5",children:"Home Location"}),(0,d.jsx)(o,{label:"Country",value:z.nationality}),(0,d.jsx)(o,{label:"Home District",value:z.district}),(0,d.jsx)(o,{label:"Home Traditional Authority",value:z.traditionalAuthority}),(0,d.jsx)(o,{label:"Home Village",value:z.village})]}),(0,d.jsx)(q,{onSubmit:b=>{let c=[{address1:b.district,address2:b.village,address3:B.district,stateProvince:B.traditionalAuthority,countyDistrict:b.traditionalAuthority,cityVillage:b.traditionalAuthority,country:b.nationality,preferred:!0},{address1:B.village,address2:B.closeLandMark,countryDistrict:B.district,cityVillage:B.traditionalAuthority,preferred:!1}];t({id:a.uuid,data:{addresses:c}}),i(!1)},initialValues:z,open:h,onClose:()=>i(!1)}),(0,d.jsx)(f.O6,{disabled:b,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>i(!0)})]}),(0,d.jsxs)(n,{children:[(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.Th,{variant:"h5",children:"Current Location"}),(0,d.jsx)(o,{label:"Current District",value:B.district}),(0,d.jsx)(o,{label:"Current Traditional Authority",value:B.traditionalAuthority}),(0,d.jsx)(o,{label:"Current Village",value:B.village}),(0,d.jsx)(o,{label:"Close Land Mark",value:B.closeLandMark})]}),(0,d.jsx)(r,{onSubmit:b=>{let c=[{address1:z.district,address2:z.village,address3:b.district,stateProvince:b.traditionalAuthority,countyDistrict:z.traditionalAuthority,cityVillage:z.traditionalAuthority,country:z.nationality,preferred:!0},{address1:b.village,address2:a?.addresses[1]?.address2,countryDistrict:b.district,cityVillage:b.traditionalAuthority,preferred:!1}];t({id:a.uuid,data:{addresses:c}}),s(!1)},onClose:()=>s(!1),initialValues:B,open:m}),(0,d.jsx)(f.O6,{variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>s(!0)})]})]})})},n=({children:a})=>(0,d.jsx)(f.sc,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,mx:"0.5ch"},children:a}),o=({label:a,value:b})=>(0,d.jsxs)(f.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,d.jsx)(f.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:a}),(0,d.jsx)(f.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:b})]}),p=({open:a,onClose:b,initialValues:c,onSubmit:e})=>(0,d.jsx)(h.GenericDialog,{maxWidth:"sm",title:"Edit Demographics",open:a,onClose:b,children:(0,d.jsx)(g.H,{onSubmit:e,initialValues:c})}),q=({open:a,onClose:b,initialValues:c,onSubmit:e})=>(0,d.jsx)(h.GenericDialog,{maxWidth:"sm",title:"Edit Home Location",open:a,onClose:b,children:(0,d.jsx)(i.CB,{initialValues:c,onSubmit:e})}),r=({open:a,onClose:b,initialValues:c,onSubmit:e})=>(0,d.jsx)(h.GenericDialog,{maxWidth:"sm",title:"Edit Current Location",open:a,onClose:b,children:(0,d.jsx)(i.CB,{currentLocation:!0,initialValues:c,onSubmit:e})})},73240:(a,b,c)=>{c.d(b,{c4:()=>n,vY:()=>o,oC:()=>m});var d=c(21124),e=c(66951),f=c(80350),g=c(38301),h=c(95745),i=c(45701),j=c(49840),k=c(30902),l=c(33772);let m=({socialHistory:a,loading:b,onSubmit:c,disabled:e})=>{let[j,l]=(0,g.useState)(!1),m=(0,i.m)(a?.obs,h.W.MARITAL_STATUS),n=(0,i.m)(a?.obs,h.W.RELIGION),o=(0,i.m)(a?.obs,h.W.OCCUPATION),s=(0,i.m)(a?.obs,h.W.METHOD_OF_TRANSPORTATION),t=(0,i.m)(a?.obs,h.W.HIGHEST_EDUCATION);return b?(0,d.jsx)(f.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(k.A,{})}):(0,d.jsxs)(p,{children:[(0,d.jsx)(r,{onSubmit:a=>{c(a),l(!1)},initialValues:{[h.W.MARITAL_STATUS]:m,[h.W.RELIGION]:n,[h.W.OCCUPATION]:o,[h.W.METHOD_OF_TRANSPORTATION]:s,[h.W.HIGHEST_EDUCATION]:t},open:j,onClose:()=>l(!1)}),(0,d.jsx)(f.Th,{variant:"h5",children:"Social History"}),(0,d.jsx)(q,{label:"Marital Status",value:m}),(0,d.jsx)(q,{label:"Religion",value:n}),(0,d.jsx)(q,{label:"Occupation",value:o}),(0,d.jsx)(q,{label:"Transportation",value:s}),(0,d.jsx)(q,{label:"Highest Education",value:t}),(0,d.jsx)(f.O6,{disabled:e,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>l(!0)})]})},n=({financing:a,loading:b,onSubmit:c,disabled:e})=>{let[j,l]=(0,g.useState)(!1),[m,n]=(0,g.useState)({paymentOptions:"",insuranceProvider:"",insuranceNumber:"",insuranceScheme:"",insuranceStatus:""});if((0,g.useEffect)(()=>{let b=(0,i.m)(a?.obs,"c7bcc8bd-09d5-4f98-8d58-5179f749fd99"),c=(0,i.m)(a?.obs,"b0ffce26-2d25-449e-871e-c702e44bb37e"),d=(0,i.m)(a?.obs,"98b08fb2-f877-45b6-a95a-db89dffefb27");n({paymentOptions:b,insuranceProvider:c,insuranceNumber:d,insuranceScheme:(0,i.m)(a?.obs,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1"),insuranceStatus:(0,i.m)(a?.obs,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8")})},[a]),b)return(0,d.jsx)(f.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(k.A,{})});let{paymentOptions:o,insuranceProvider:r,insuranceNumber:t,insuranceScheme:u,insuranceStatus:v}=m;return(0,d.jsxs)(p,{children:[(0,d.jsx)(s,{onSubmit:a=>{c(a),l(!1)},initialValues:{[h.W.PAYMENT_OPTIONS]:[o],[h.W.INSURANCE_PROVIDER]:r,[h.W.INSURANCE_NUMBER]:t,[h.W.INSURANCE_STATUS]:v,[h.W.INSURANCE_SCHEME]:u},open:j,onClose:()=>l(!1)}),(0,d.jsx)(f.Th,{variant:"h5",children:"Financing"}),(0,d.jsx)(q,{label:"Payment Option",value:o}),(0,d.jsx)(q,{label:"Insurance Provider",value:r}),(0,d.jsx)(q,{label:"Insurance Number",value:t}),(0,d.jsx)(q,{label:"Insurance Scheme",value:u}),(0,d.jsx)(q,{label:"Insurance Status",value:v}),(0,d.jsx)(f.O6,{disabled:e,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>l(!0)})]})},o=({patientId:a,disabled:b})=>{let{data:c,isPending:i,refetch:j}=(0,e.B$)(a),[m,n]=(0,g.useState)(!1),[o,r]=(0,g.useState)(!1),{data:s,isPending:u}=(0,e.vi)(),[v,w]=(0,g.useState)({}),[x,y]=(0,g.useState)(""),{mutate:z,isPending:A,isSuccess:B,isError:C,data:D}=(0,l.bJ)(),{mutateAsync:E,isSuccess:F,data:G}=(0,e.Wv)(),{mutate:H,isPending:I,isSuccess:J,data:K,isError:L}=(0,l.AU)(),[M,N]=(0,g.useState)(!0),[O,P]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{B&&D&&H({patient:a,person:D?.uuid,nextOfKinRelationship:x})},[B]),(0,g.useEffect)(()=>{J&&(j(),r(!1),N(!0),P(!1))},[J]),i||u||A||I)return(0,d.jsx)(f.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(k.A,{})});let Q=c?.map(a=>{let b=a.relationship,c=s?.find(a=>a.relationship_type_id==b),d=s?.find(a=>a.a_is_to_b==c?.b_is_to_a);return{given_name:a.person_b.names[0].given_name,family_name:a.person_b.names[0].family_name,relationship:c?.b_is_to_a,relationshipUUID:d?.uuid,person:a.person_b.uuid}}),R=a=>{y(a.relationship),z({nextOfKinFirstName:a.given_name,nextOfKinLastName:a.family_name})},S=async a=>{let b={identifiers:[],names:[{givenName:a.given_name,familyName:a.family_name}]};await E({id:a.person,data:b}),j(),n(!1),N(!0),P(!1)};return(0,d.jsxs)(f.jD,{sx:{display:"flex",width:Q?.length==1?"50%":"100%"},children:[(0,d.jsx)(t,{onSubmit:M?S:R,initialValues:{...v,...O?{relationship:h.W.GUARDIAN}:{}},open:m,isGuardian:O,onClose:()=>{n(!1),N(!0),P(!1)}}),(0,d.jsx)(t,{onSubmit:M?S:R,isGuardian:!0,initialValues:{relationship:h.W.GUARDIAN},open:o,onClose:()=>{r(!1),N(!0),P(!1)}}),Q?.map(a=>(0,d.jsxs)(p,{children:[(0,d.jsx)(f.Th,{variant:"h5",children:a.relationship?.toLowerCase()=="guardian"?"Guardian Information":"Next Of Kin Information"}),(0,d.jsx)(q,{label:"First Name",value:a.given_name}),(0,d.jsx)(q,{label:"Last Name",value:a.family_name}),(0,d.jsx)(q,{label:"Relationship",value:a.relationship}),(0,d.jsx)(f.O6,{disabled:b,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>{n(!0),a.relationship?.toLowerCase()=="guardian"&&P(!0),w({...a,relationship:a.relationshipUUID})}})]})),(0,d.jsxs)(d.Fragment,{children:[Q?.length==0&&(0,d.jsx)(f.O6,{sx:{alignSelf:"flex-start",mr:"1px"},title:"Add Next Of Kin",onClick:()=>{N(!1),n(!0)}}),(Q?.length==1||Q?.length==0)&&(0,d.jsx)(f.O6,{disabled:b,sx:{alignSelf:"flex-start"},title:"Add Guardian",onClick:()=>{N(!1),r(!0)}})]})]})},p=({children:a})=>(0,d.jsx)(f.sc,{sx:{p:"1ch",flex:1,mx:"0.5ch"},children:a}),q=({label:a,value:b})=>(0,d.jsxs)(f.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,d.jsx)(f.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:a}),(0,d.jsx)(f.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:b})]}),r=({open:a,onClose:b,initialValues:c,onSubmit:e})=>(0,d.jsx)(f.eV,{maxWidth:"sm",title:"Edit Social History",open:a,onClose:b,children:(0,d.jsx)(j._T,{initialValues:c,onSubmit:e})}),s=({open:a,onClose:b,initialValues:c,onSubmit:e})=>(0,d.jsx)(f.eV,{maxWidth:"sm",title:"Edit Financing",open:a,onClose:b,children:(0,d.jsx)(j.OE,{initialValues:c,onSubmit:e})}),t=({open:a,onClose:b,initialValues:c,isGuardian:e,onSubmit:g})=>(0,d.jsx)(f.eV,{maxWidth:"sm",title:"Edit Relationships",open:a,onClose:b,children:(0,d.jsx)(j.tc,{isGuardian:e,initialValues:c,onSubmit:g})})}};