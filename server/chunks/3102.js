"use strict";exports.id=3102,exports.ids=[3102],exports.modules={43102:(e,a,i)=>{i.d(a,{H5:()=>N.H,OE:()=>M,CB:()=>_,tc:()=>Y,_T:()=>P,XU:()=>j});var t=i(60687),l=i(75018),n=i(79534),r=i(76990),s=i(61939),o=i(88794),m=i(85591);let d=(0,i(10356).A)((0,t.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var u=i(50772),c=i(18842),b=i(90160),h=i(43210),p=i(20287),x=i(55330),v=i(13670),g=i(87748),f=i(42938);let j=({sx:e})=>{let{params:a}=(0,s.KU)(),{navigateTo:i}=(0,s.cq)(),{data:j,isLoading:N}=(0,r.GN)(a.id),[S,A]=(0,h.useState)(null),E=!!S,[I,C]=(0,h.useState)(!1),{hasActiveVisit:_,closedVisitId:T,openClosedVisit:O}=(0,s.gd)(),{mutateAsync:w}=(0,v.qv)(a.id),P=()=>{A(null)};return N?(0,t.jsx)(m.E7,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{children:`
          .first_letter {
              background-color: #e6e6e6;
              padding: 20px;
              margin-right: 20px;
              font-size: 24px;
              border-radius: 4px;
              color: #636363 !important;
          }
          .p_name_image {
              font-size: 24px;
              color: #00190e;
              display: flex;
              font-weight: 700;
              overflow: hidden;
          }
          .p_name {
              max-width: 210px;
              margin-left: 20px;
              height: 25px;
          }
          .p_dash_header {
              display: flex;
              justify-content: space-between;
              padding: 20px;
              border-bottom: solid #cccccc 1px;
          }
          .p_title {
              font-weight: 700;
              font-size: 24px;
              color: #00190e;
          }
              .initialsBox {
              min-width: 85px;
              height: 90px;
              left: 31px;
              top: 122px;
              align-items: center;
              border-radius: 10px;
              align-items: center;
              display: flex;
              justify-content: center;
              margin-top: 10px;
          }
          .maleColor {
              background: #5983ba;
          }
          .femaleColor {
              background: #876d9b;
          }
              .vertical-dots {
            display: flex;
            flex-direction: column;
            align-items: end;
            gap: 3px;
          }

          .dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #333;
          }
        `}),(0,t.jsxs)(n.default,{style:{backgroundColor:"#ffffff",padding:"1ch"},children:[(0,t.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"end"},children:[(0,t.jsx)(u.A,{id:"basic-button","aria-controls":E?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,onClick:e=>{A(e.currentTarget)},size:"small",style:{minWidth:"30px"},children:(0,t.jsxs)("div",{className:"vertical-dots",children:[(0,t.jsx)("div",{className:"dot"}),(0,t.jsx)("div",{className:"dot"}),(0,t.jsx)("div",{className:"dot"})]})}),(0,t.jsxs)(c.A,{id:"basic-menu",anchorEl:S,open:E,onClose:P,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,t.jsx)(b.A,{onClick:()=>{P(),i(`/patient/${a.id}/view`)},style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Update demographics"}),(0,t.jsx)(b.A,{onClick:P,style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Update outcome"}),(0,t.jsx)(b.A,{onClick:P,style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Print visit summary"}),(0,t.jsx)(b.A,{onClick:P,style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Print patient identifier"}),!_&&(0,g.O)().some(e=>[f.Ot.ADMIN,f.Ot.CLINICIAN].includes(e))&&(0,t.jsx)(b.A,{onClick:()=>{P(),(0,x.iE)({title:"Visit reactivation",text:"Are you sure you want to reactive the most recent closed visit for this patient?",icon:"warning",confirmButtonText:"Yes",onConfirm:async()=>{await w(T)&&O()}})},style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Reactivate Most Recent Visit"}),(0,t.jsx)(b.A,{onClick:()=>{P(),C(!0)},style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Print patient summary"}),(0,t.jsx)(b.A,{onClick:()=>i(`/patient/${a.id}/view`),sx:{color:"blue",cursor:"pointer"},children:"see more"})]})]}),(0,t.jsxs)(l.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(l.jD,{sx:{background:"#E6E6E6",height:"5ch",display:"flex",alignItems:"center",justifyContent:"center",mr:"1ch",mt:"2ch",ml:"1ch"},children:(0,t.jsx)("div",{className:"p_name_image",children:(0,t.jsx)("div",{className:j?.gender=="Male"?"initialsBox maleColor":"initialsBox femaleColor",children:(0,t.jsx)(d,{style:{fontSize:"90px",color:"#fff"}})})})}),(0,t.jsx)(l.jD,{children:(0,t.jsx)(l.Th,{variant:"h5",fontWeight:"700",children:j?.given_name+" "+j?.family_name})})]}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{style:{marginLeft:"1ch"},children:[(0,t.jsx)(y,{label:"MRN:",value:function(e){let a=e.filter(e=>e.identifier_type&&"National id"===e.identifier_type.name).map(e=>e.identifier);return a[a.length-1]}(j?.identifiers)}),(0,t.jsx)(y,{label:"Gender:",value:j?.gender}),(0,t.jsx)(y,{label:"Age:",value:`  ${j?.birthdate&&(0,o.Cb)(j?.birthdate)} yrs (${(0,o.k)(j?.birthdate)})`}),(0,t.jsx)(y,{label:"Address:",value:j?.addresses[0]?.address1+" ,"+j?.addresses[0]?.address2+", "+j?.addresses[0]?.city_village})]})]}),(0,t.jsx)(p.p,{onClose:()=>C(!1),open:I})]})},y=({label:e,value:a})=>(0,t.jsxs)(l.jD,{sx:{display:"flex",mb:"0.5ch",mt:"1ch",color:"#737373"},children:[(0,t.jsx)("div",{style:{fontSize:"0.9rem",minWidth:"85px"},children:e}),(0,t.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"700"},children:a})]});i(62116),i(53185);var N=i(62013),S=i(33164),A=i(99725),E=i(15538),I=i(30485);let C=I.Ik().shape({district:I.Yj(),traditionalAuthority:I.Yj(),village:I.Yj(),nationality:I.Yj()}),_=({onSubmit:e,initialValues:a,currentLocation:i=!1,onFormValueChange:n=()=>{},submitButton:r=!0,setContext:s=e=>{}})=>{let{villages:o,districts:m,traditionalAuthorities:d}=(0,h.useContext)(E.d),[u,c]=(0,h.useState)({village:"",traditionalAuthority:"",district:""}),[b,p]=(0,h.useState)({});return(0,h.useEffect)(()=>{let e=m.find(e=>e.name==a.district)?.district_id,i=d.find(e=>e.name==a.traditionalAuthority)?.traditional_authority_id;c({village:o.find(e=>e.name==a.village)?.village_id,traditionalAuthority:i,district:e})},[]),(0,h.useEffect)(()=>{p(a)},[u]),(0,t.jsxs)(l.PD,{submitButtonText:"update",enableReinitialize:!0,initialValues:b,validationSchema:C,onSubmit:e,getFormValues:n,submitButton:r,children:[!i&&(0,t.jsx)(l.el,{name:"nationality",label:"Nationality",multiple:!1,options:A.X.map(e=>({id:e.nationality,label:e.nationality}))}),(0,t.jsx)(S.Ji,{setFormContext:s}),(0,t.jsx)(l.el,{name:"district",label:"District",multiple:!1,getValue:e=>{let a=m.find(a=>a.name==e);a&&c(e=>({...e,district:a.district_id.toString()}))},options:m?m.map(e=>({id:e.name,label:e.name})):[]}),(0,t.jsx)(l.el,{name:"traditionalAuthority",label:"Traditional Authority ",multiple:!1,getValue:e=>{let a=d.find(a=>a.name==e);a&&c(e=>({...e,traditionalAuthority:a.traditional_authority_id.toString()}))},options:d?d.filter(e=>e.district_id.toString()==u.district).map(e=>({id:e.name,label:e.name})):[]}),(0,t.jsx)(l.el,{name:"village",label:"Village",multiple:!1,options:o?o.filter(e=>e.traditional_authority_id.toString()==u.traditionalAuthority).map(e=>({id:e.name,label:e.name})):[]}),i&&(0,t.jsx)(l.A8,{sx:{width:"100%"},name:"closeLandMark",id:"closeLandMark",label:"Close Land Mark"})]})};var T=i(5608);let O={maritalStatus:{name:f.W.MARITAL_STATUS,label:"Marital Status"},occupation:{name:f.W.OCCUPATION,label:"Occupation"},religion:{name:f.W.RELIGION,label:"Religion"},religionSpecify:{name:f.W.ADDITIONAL_NOTES,label:"Specify"},highestEducation:{name:f.W.HIGHEST_EDUCATION,label:"Highest Education"},methodOfTransportation:{name:f.W.METHOD_OF_TRANSPORTATION,label:"Method Of Transportation"}},w=I.Ik().shape({[O.maritalStatus.name]:I.Yj().required().label(O.maritalStatus.label),[O.occupation.name]:I.Yj().required().label(O.occupation.label),[O.religion.name]:I.Yj().required().label(O.religion.label),[O.religionSpecify.name]:I.Yj().label(O.religionSpecify.label),[O.highestEducation.name]:I.Yj().required().label(O.highestEducation.label),[O.methodOfTransportation.name]:I.Yj().required().label(O.methodOfTransportation.label)}),P=({initialValues:e,onSubmit:a,submitButton:i=!0,setContext:n=e=>{}})=>{let[r,s]=(0,h.useState)("");return(0,t.jsxs)(l.PD,{onSubmit:a,initialValues:e,validationSchema:w,submitButtonText:"Update",submitButton:i,children:[(0,t.jsx)(S.Ji,{setFormContext:n}),(0,t.jsx)(T.uQ,{children:"Marital Status"}),(0,t.jsx)(l.b1,{row:!0,name:O.maritalStatus.name,label:O.maritalStatus.label,options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Separated",value:"separated"},{label:"Widowed",value:"widow/widower"},{label:"Divorced",value:"divorced"},{label:"Unknown",value:"unknown"}]}),(0,t.jsx)(T.uQ,{children:"Religion"}),(0,t.jsx)(l.pK,{getValue:e=>s(e),name:O.religion.name,selectItems:[{name:"Christianity",value:"Christianity"},{name:"Muslim",value:"Muslim"},{name:"Buddhism",value:"Buddhism"},{name:"Rastafarian",value:"Rastafarian"},{name:"Atheist",value:"Atheist"},{name:"Traditional",value:"Traditional"},{name:"Other",value:"Other"}],label:O.religion.label,id:O.religion.name}),"Other"==r&&(0,t.jsx)(l.A8,{name:O.religionSpecify.name,label:O.religionSpecify.label,id:O.religionSpecify.name}),(0,t.jsx)(T.uQ,{children:"Occupation"}),(0,t.jsx)(l.b1,{row:!0,name:O.occupation.name,label:"",options:[{label:"Working",value:"working"},{label:"Business",value:"business"},{label:"Unemployed",value:"unemployed"},{label:"Self Employed",value:"selfemployed"},{label:"Student",value:"student"},{label:"House Wife",value:"housewife"},{label:"Unknown",value:"unknown"}]}),(0,t.jsx)(T.uQ,{children:"Transportation"}),(0,t.jsx)(l.pK,{name:O.methodOfTransportation.name,selectItems:[{name:"Walking",value:"walking"},{name:"Ambulance",value:"ambulance"},{name:"Taxi",value:"Taxi"},{name:"Minibus",value:"Minibus"},{name:"Motorcycle",value:"motorcycle"},{name:"Hired Car",value:"hired car"},{name:"Private transport",value:"private_transport"},{name:"Police vehicle",value:"police_vehicle"},{name:"Company vehicle",value:"other_public_company_vehicle"},{name:"Bicycle",value:"bicycle"},{name:"Helicopter",value:"helicopter"}],label:O.methodOfTransportation.label,id:O.methodOfTransportation.name}),(0,t.jsx)(T.uQ,{children:"Highest Education"}),(0,t.jsx)(l.pK,{name:O.highestEducation.name,selectItems:[{name:"Primary",value:"primary"},{name:"Secondary",value:"secondary"},{name:"Tertiary",value:"tertiary"},{name:"None",value:"none"},{name:"Unknown",value:"unknown"}],label:O.highestEducation.label,id:O.highestEducation.name})]})},k={paymentOption:{name:f.W.PAYMENT_OPTIONS,label:"Payment Option"},insuranceProvider:{name:f.W.INSURANCE_PROVIDER,label:"Insurance Provider"},insuranceIdNo:{name:f.W.INSURANCE_NUMBER,label:"Insurance Id Number"},insuranceSchema:{name:f.W.INSURANCE_SCHEME,label:"Insurance Scheme"},status:{name:f.W.INSURANCE_STATUS,label:"Insurance Status"}},D=I.Ik().shape({[k.paymentOption.name]:I.YO().label(k.paymentOption.label),[k.insuranceProvider.name]:I.Yj().label(k.insuranceProvider.label),[k.insuranceIdNo.name]:I.Yj().label(k.insuranceIdNo.label),[k.insuranceSchema.name]:I.Yj().label(k.insuranceSchema.label)}),M=({onSubmit:e,initialValues:a,setContext:i=()=>{},submitButton:n})=>{let[r,s]=(0,h.useState)("");return(0,h.useEffect)(()=>{let e=a[f.W.PAYMENT_OPTIONS];Array.isArray(e)&&e.find(e=>"insurance"==e)&&s("insurance")},[a]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l.PD,{validationSchema:D,initialValues:a,onSubmit:e,submitButtonText:"Update",submitButton:n,children:[(0,t.jsx)(T.uQ,{children:"Payment Options"}),(0,t.jsx)(S.Ji,{setFormContext:i}),(0,t.jsx)(l.Z3,{getValue:e=>{if(!Array.isArray(e))return;let a=e?.find(e=>e?.key=="insurance"&&e?.value);a?s(a?.key):s("")},name:k.paymentOption.name,options:[{label:"Non-paying",value:"non-paying"},{label:"Cash",value:"cash"},{label:"Staff",value:"staff"},{label:"Insurance",value:"insurance"}]}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.pK,{label:k.insuranceProvider.label,id:k.insuranceProvider.name,name:k.insuranceProvider.name,selectItems:[{name:"Masm",value:"masm"},{name:"Escom",value:"Escom"},{name:"Reserve Bank",value:"Reserve Bank"},{name:"Liberty",value:"Liberty"},{name:"Unimed",value:"Unimed"},{name:"Medhealth",value:"Medhealth"},{name:"CIC Malawi",value:"CIC Malawi"},{name:"MRA",value:"MRA"}]}),(0,t.jsx)(l.A8,{name:k.insuranceIdNo.name,id:k.insuranceIdNo.name,label:k.insuranceIdNo.label}),(0,t.jsx)(l.pK,{label:k.insuranceSchema.label,id:k.insuranceSchema.name,name:k.insuranceSchema.name,selectItems:[{name:"VVIP",value:"VVIP"},{name:"VIP",value:"VIP"},{name:"EXEC",value:"EXEC"},{name:"ECO",value:"ECO"}]}),(0,t.jsx)(l.b1,{name:k.status.name,label:k.status.label,options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]})]})]})})},B=[{name:"Parent",value:f.W.PARENT},{name:"Uncle",value:f.W.UNCLE_AUNTIE},{name:"Auntie",value:f.W.AUNTIE},{name:"Spouse",value:f.W.SPOUSE},{name:"Siblings",value:f.W.SIBLING}],R=I.Ik().shape({given_name:I.Yj().required().label("First Name"),family_name:I.Yj().required().label("Last Name"),relationship:I.Yj().required().label("Relationship")}),Y=({onSubmit:e,initialValues:a,isGuardian:i,setContext:n=()=>{},submitButton:r})=>(0,t.jsxs)(l.PD,{submitButton:r,enableReinitialize:!0,submitButtonText:"Update",validationSchema:R,initialValues:a,onSubmit:e,children:[(0,t.jsx)(S.Ji,{setFormContext:n}),(0,t.jsx)(T.uQ,{children:i?"Guardian information":"Next of kin Information"}),(0,t.jsxs)(l.jD,{display:"flex",flexDirection:"column",children:[(0,t.jsx)(l.A8,{name:"given_name",id:"given_name",label:"First Name"}),(0,t.jsx)(l.A8,{name:"family_name",id:"family_name",label:"Last Name"}),!i&&(0,t.jsx)(l.pK,{name:"relationship",id:"relationship",label:"Relationship",selectItems:B}),(0,t.jsx)(l.A8,{name:"phoneNumber",id:"phoneNumber",label:"Phone Number"})]})]})},62013:(e,a,i)=>{i.d(a,{H:()=>u});var t=i(60687),l=i(88794),n=i(43210),r=i(75018),s=i(30485),o=i(33164);let m={identificationNumber:{name:"identificationNumber",label:"National Identification Number"},firstName:{name:"firstName",label:"First Name"},phoneNumber:{name:"phoneNumber",label:"Phone Number"},lastName:{name:"lastName",label:"Last Name"},dob:{name:"birthDate",label:"Date of Birth"},gender:{name:"gender",label:"Gender"},birthDateEstimated:{name:"birthdateEstimated",label:"Birthdate Estimated"},age:{name:"age",label:"Estimated Age"}},d=s.Ik().shape({[m.identificationNumber.name]:s.Yj().label(m.identificationNumber.label),[m.firstName.name]:s.Yj().required().label(m.firstName.label),[m.phoneNumber.name]:s.Yj().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"phone number not valid").min(10).label(m.phoneNumber.label),[m.lastName.name]:s.Yj().required().label(m.lastName.label),[m.dob.name]:s.p6().when(m.birthDateEstimated.name,{is:e=>"true"==e,then:()=>s.p6().required()}).test("valid-age","Age must be at least 14 years and not in the future",function(e){if(!e)return!0;let a=new Date(e),i=new Date,t=i.getFullYear()-a.getFullYear(),l=i.getMonth()-a.getMonth();return(l<0||0===l&&i.getDate()<a.getDate())&&t--,t>=14&&t>=0}),[m.gender.name]:s.Yj().required().label(m.gender.label)}),u=({initialValues:e,onSubmit:a,onFormValueChange:i=()=>{},submitButton:s=!0,setContext:u=e=>{}})=>{let[c,b]=(0,n.useState)({});return(0,t.jsxs)(r.PD,{validationSchema:d,initialValues:e,onSubmit:a,submitButtonText:"update",getFormValues:i,enableReinitialize:!0,submitButton:s,children:[(0,t.jsx)(o.Ji,{setFormContext:u}),(0,t.jsxs)(r.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,t.jsx)(r.fP,{getValues:b}),(0,t.jsx)(r.A8,{name:m.identificationNumber.name,id:m.identificationNumber.name,label:m.identificationNumber.label}),(0,t.jsx)(r.A8,{name:m.firstName.name,id:m.firstName.name,label:m.firstName.label}),(0,t.jsx)(r.A8,{name:m.lastName.name,id:m.lastName.name,label:m.lastName.label}),(0,t.jsx)(r.b1,{name:m.gender.name,label:m.gender.label,options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]}),(0,t.jsx)(r.b1,{name:m.birthDateEstimated.name,label:m.birthDateEstimated.label,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}),(0,t.jsx)(r.A8,{sx:{display:"true"==c[m.birthDateEstimated.name]?"flex":"none"},name:m.age.name,id:m.age.name,label:m.age.label}),c[m.age.name]>0&&"true"==c[m.birthDateEstimated.name]&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("br",{}),(0,t.jsxs)(r.Th,{variant:"body1",children:["Estimated birth date  ",(0,t.jsx)("b",{children:(0,l.wZ)(c[m.age.name])?.readable})]}),(0,t.jsx)("br",{})]}),(0,t.jsx)(r.bZ,{sx:{display:!1==c[m.birthDateEstimated.name]||"false"==c[m.birthDateEstimated.name]?"flex":"none",width:"100%"},width:"100%",label:m.dob.label,name:m.dob.name}),(0,t.jsx)(r.A8,{name:m.phoneNumber.name,id:m.phoneNumber.name,label:m.phoneNumber.label})]})]})}},85591:(e,a,i)=>{i.d(a,{E7:()=>r});var t=i(60687);i(43210);var l=i(51734),n=i(35933);i(75018);let r=({height:e=400})=>(0,t.jsx)(n.A,{width:"100%",mt:2,children:(0,t.jsx)(l.A,{variant:"rectangular",width:"100%",height:e})})}};