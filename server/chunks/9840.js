"use strict";exports.id=9840,exports.ids=[9840],exports.modules={49840:(a,b,c)=>{c.d(b,{H5:()=>w.H,OE:()=>J,CB:()=>C,tc:()=>M,_T:()=>G,XU:()=>u});var d=c(21124),e=c(80350),f=c(54573),g=c(66951),h=c(82283),i=c(38736),j=c(84782);let k=(0,c(11801).A)((0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var l=c(68730),m=c(85645),n=c(94367),o=c(38301),p=c(65521),q=c(66815),r=c(57549),s=c(47721),t=c(95745);let u=({sx:a})=>{let{params:b}=(0,h.KU)(),{navigateTo:c}=(0,h.cq)(),{data:u,isLoading:w}=(0,g.GN)(b.id),[x,y]=(0,o.useState)(null),z=!!x,[A,B]=(0,o.useState)(!1),{hasActiveVisit:C,closedVisitId:D,openClosedVisit:E}=(0,h.gd)(),{mutateAsync:F}=(0,r.qv)(b.id),G=()=>{y(null)};return w?(0,d.jsx)(j.E7,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{children:`
          .first_letter {
              background-color: #e6e6e6;
              padding: 20px;
              margin-right: 20px;
              font-size: 24px;
              border-radius: 4px;
              color: #636363 !important;
          }
          .p_name_image {
              font-size: 24px;
              color: #00190e;
              display: flex;
              font-weight: 700;
              overflow: hidden;
          }
          .p_name {
              max-width: 210px;
              margin-left: 20px;
              height: 25px;
          }
          .p_dash_header {
              display: flex;
              justify-content: space-between;
              padding: 20px;
              border-bottom: solid #cccccc 1px;
          }
          .p_title {
              font-weight: 700;
              font-size: 24px;
              color: #00190e;
          }
              .initialsBox {
              min-width: 85px;
              height: 90px;
              left: 31px;
              top: 122px;
              align-items: center;
              border-radius: 10px;
              align-items: center;
              display: flex;
              justify-content: center;
              margin-top: 10px;
          }
          .maleColor {
              background: #5983ba;
          }
          .femaleColor {
              background: #876d9b;
          }
              .vertical-dots {
            display: flex;
            flex-direction: column;
            align-items: end;
            gap: 3px;
          }

          .dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #333;
          }
        `}),(0,d.jsxs)(f.default,{style:{backgroundColor:"#ffffff",padding:"1ch"},children:[(0,d.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"end"},children:[(0,d.jsx)(l.A,{id:"basic-button","aria-controls":z?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":z?"true":void 0,onClick:a=>{y(a.currentTarget)},size:"small",style:{minWidth:"30px"},children:(0,d.jsxs)("div",{className:"vertical-dots",children:[(0,d.jsx)("div",{className:"dot"}),(0,d.jsx)("div",{className:"dot"}),(0,d.jsx)("div",{className:"dot"})]})}),(0,d.jsxs)(m.A,{id:"basic-menu",anchorEl:x,open:z,onClose:G,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,d.jsx)(n.A,{onClick:()=>{G(),c(`/patient/${b.id}/view`)},style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Update demographics"}),(0,d.jsx)(n.A,{onClick:G,style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Update outcome"}),(0,d.jsx)(n.A,{onClick:G,style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Print visit summary"}),(0,d.jsx)(n.A,{onClick:G,style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Print patient identifier"}),!C&&(0,s.O)().some(a=>[t.Ot.ADMIN,t.Ot.CLINICIAN].includes(a))&&(0,d.jsx)(n.A,{onClick:()=>{G(),(0,q.iE)({title:"Visit reactivation",text:"Are you sure you want to reactive the most recent closed visit for this patient?",icon:"warning",confirmButtonText:"Yes",onConfirm:async()=>{await F(D)&&E()}})},style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Reactivate Most Recent Visit"}),(0,d.jsx)(n.A,{onClick:()=>{G(),B(!0)},style:{borderBottom:"1px solid #ccc",padding:"10px"},children:"Print patient summary"}),(0,d.jsx)(n.A,{onClick:()=>c(`/patient/${b.id}/view`),sx:{color:"blue",cursor:"pointer"},children:"see more"})]})]}),(0,d.jsxs)(e.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsx)(e.jD,{sx:{background:"#E6E6E6",height:"5ch",display:"flex",alignItems:"center",justifyContent:"center",mr:"1ch",mt:"2ch",ml:"1ch"},children:(0,d.jsx)("div",{className:"p_name_image",children:(0,d.jsx)("div",{className:u?.gender=="Male"?"initialsBox maleColor":"initialsBox femaleColor",children:(0,d.jsx)(k,{style:{fontSize:"90px",color:"#fff"}})})})}),(0,d.jsx)(e.jD,{children:(0,d.jsx)(e.Th,{variant:"h5",fontWeight:"700",children:u?.given_name+" "+u?.family_name})})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("div",{style:{marginLeft:"1ch"},children:[(0,d.jsx)(v,{label:"MRN:",value:function(a){let b=a.filter(a=>a.identifier_type&&"National id"===a.identifier_type.name).map(a=>a.identifier);return b[b.length-1]}(u?.identifiers)}),(0,d.jsx)(v,{label:"Gender:",value:u?.gender}),(0,d.jsx)(v,{label:"Age:",value:`  ${u?.birthdate&&(0,i.Cb)(u?.birthdate)} yrs (${(0,i.k)(u?.birthdate)})`}),(0,d.jsx)(v,{label:"Address:",value:u?.addresses[0]?.address1+" ,"+u?.addresses[0]?.address2+", "+u?.addresses[0]?.city_village})]})]}),(0,d.jsx)(p.p,{onClose:()=>B(!1),open:A})]})},v=({label:a,value:b})=>(0,d.jsxs)(e.jD,{sx:{display:"flex",mb:"0.5ch",mt:"1ch",color:"#737373"},children:[(0,d.jsx)("div",{style:{fontSize:"0.9rem",minWidth:"85px"},children:a}),(0,d.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"700"},children:b})]});c(50852),c(16316);var w=c(89724),x=c(15143),y=c(96828),z=c(20399),A=c(48936);let B=A.Ik().shape({district:A.Yj(),traditionalAuthority:A.Yj(),village:A.Yj(),nationality:A.Yj()}),C=({onSubmit:a,initialValues:b,currentLocation:c=!1,onFormValueChange:f=()=>{},submitButton:g=!0,setContext:h=a=>{}})=>{let{villages:i,districts:j,traditionalAuthorities:k}=(0,o.useContext)(z.d),[l,m]=(0,o.useState)({village:"",traditionalAuthority:"",district:""}),[n,p]=(0,o.useState)({});return(0,o.useEffect)(()=>{let a=j.find(a=>a.name==b.district)?.district_id,c=k.find(a=>a.name==b.traditionalAuthority)?.traditional_authority_id;m({village:i.find(a=>a.name==b.village)?.village_id,traditionalAuthority:c,district:a})},[]),(0,o.useEffect)(()=>{p(b)},[l]),(0,d.jsxs)(e.PD,{submitButtonText:"update",enableReinitialize:!0,initialValues:n,validationSchema:B,onSubmit:a,getFormValues:f,submitButton:g,children:[!c&&(0,d.jsx)(e.el,{name:"nationality",label:"Nationality",multiple:!1,options:y.X.map(a=>({id:a.nationality,label:a.nationality}))}),(0,d.jsx)(x.Ji,{setFormContext:h}),(0,d.jsx)(e.el,{name:"district",label:"District",multiple:!1,getValue:a=>{let b=j.find(b=>b.name==a);b&&m(a=>({...a,district:b.district_id.toString()}))},options:j?j.map(a=>({id:a.name,label:a.name})):[]}),(0,d.jsx)(e.el,{name:"traditionalAuthority",label:"Traditional Authority ",multiple:!1,getValue:a=>{let b=k.find(b=>b.name==a);b&&m(a=>({...a,traditionalAuthority:b.traditional_authority_id.toString()}))},options:k?k.filter(a=>a.district_id.toString()==l.district).map(a=>({id:a.name,label:a.name})):[]}),(0,d.jsx)(e.el,{name:"village",label:"Village",multiple:!1,options:i?i.filter(a=>a.traditional_authority_id.toString()==l.traditionalAuthority).map(a=>({id:a.name,label:a.name})):[]}),c&&(0,d.jsx)(e.A8,{sx:{width:"100%"},name:"closeLandMark",id:"closeLandMark",label:"Close Land Mark"})]})};var D=c(81299);let E={maritalStatus:{name:t.W.MARITAL_STATUS,label:"Marital Status"},occupation:{name:t.W.OCCUPATION,label:"Occupation"},religion:{name:t.W.RELIGION,label:"Religion"},religionSpecify:{name:t.W.ADDITIONAL_NOTES,label:"Specify"},highestEducation:{name:t.W.HIGHEST_EDUCATION,label:"Highest Education"},methodOfTransportation:{name:t.W.METHOD_OF_TRANSPORTATION,label:"Method Of Transportation"}},F=A.Ik().shape({[E.maritalStatus.name]:A.Yj().required().label(E.maritalStatus.label),[E.occupation.name]:A.Yj().required().label(E.occupation.label),[E.religion.name]:A.Yj().required().label(E.religion.label),[E.religionSpecify.name]:A.Yj().label(E.religionSpecify.label),[E.highestEducation.name]:A.Yj().required().label(E.highestEducation.label),[E.methodOfTransportation.name]:A.Yj().required().label(E.methodOfTransportation.label)}),G=({initialValues:a,onSubmit:b,submitButton:c=!0,setContext:f=a=>{}})=>{let[g,h]=(0,o.useState)("");return(0,d.jsxs)(e.PD,{onSubmit:b,initialValues:a,validationSchema:F,submitButtonText:"Update",submitButton:c,children:[(0,d.jsx)(x.Ji,{setFormContext:f}),(0,d.jsx)(D.uQ,{children:"Marital Status"}),(0,d.jsx)(e.b1,{row:!0,name:E.maritalStatus.name,label:E.maritalStatus.label,options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Separated",value:"separated"},{label:"Widowed",value:"widow/widower"},{label:"Divorced",value:"divorced"},{label:"Unknown",value:"unknown"}]}),(0,d.jsx)(D.uQ,{children:"Religion"}),(0,d.jsx)(e.pK,{getValue:a=>h(a),name:E.religion.name,selectItems:[{name:"Christianity",value:"Christianity"},{name:"Muslim",value:"Muslim"},{name:"Buddhism",value:"Buddhism"},{name:"Rastafarian",value:"Rastafarian"},{name:"Atheist",value:"Atheist"},{name:"Traditional",value:"Traditional"},{name:"Other",value:"Other"}],label:E.religion.label,id:E.religion.name}),"Other"==g&&(0,d.jsx)(e.A8,{name:E.religionSpecify.name,label:E.religionSpecify.label,id:E.religionSpecify.name}),(0,d.jsx)(D.uQ,{children:"Occupation"}),(0,d.jsx)(e.b1,{row:!0,name:E.occupation.name,label:"",options:[{label:"Working",value:"working"},{label:"Business",value:"business"},{label:"Unemployed",value:"unemployed"},{label:"Self Employed",value:"selfemployed"},{label:"Student",value:"student"},{label:"House Wife",value:"housewife"},{label:"Unknown",value:"unknown"}]}),(0,d.jsx)(D.uQ,{children:"Transportation"}),(0,d.jsx)(e.pK,{name:E.methodOfTransportation.name,selectItems:[{name:"Walking",value:"walking"},{name:"Ambulance",value:"ambulance"},{name:"Taxi",value:"Taxi"},{name:"Minibus",value:"Minibus"},{name:"Motorcycle",value:"motorcycle"},{name:"Hired Car",value:"hired car"},{name:"Private transport",value:"private_transport"},{name:"Police vehicle",value:"police_vehicle"},{name:"Company vehicle",value:"other_public_company_vehicle"},{name:"Bicycle",value:"bicycle"},{name:"Helicopter",value:"helicopter"}],label:E.methodOfTransportation.label,id:E.methodOfTransportation.name}),(0,d.jsx)(D.uQ,{children:"Highest Education"}),(0,d.jsx)(e.pK,{name:E.highestEducation.name,selectItems:[{name:"Primary",value:"primary"},{name:"Secondary",value:"secondary"},{name:"Tertiary",value:"tertiary"},{name:"None",value:"none"},{name:"Unknown",value:"unknown"}],label:E.highestEducation.label,id:E.highestEducation.name})]})},H={paymentOption:{name:t.W.PAYMENT_OPTIONS,label:"Payment Option"},insuranceProvider:{name:t.W.INSURANCE_PROVIDER,label:"Insurance Provider"},insuranceIdNo:{name:t.W.INSURANCE_NUMBER,label:"Insurance Id Number"},insuranceSchema:{name:t.W.INSURANCE_SCHEME,label:"Insurance Scheme"},status:{name:t.W.INSURANCE_STATUS,label:"Insurance Status"}},I=A.Ik().shape({[H.paymentOption.name]:A.YO().label(H.paymentOption.label),[H.insuranceProvider.name]:A.Yj().label(H.insuranceProvider.label),[H.insuranceIdNo.name]:A.Yj().label(H.insuranceIdNo.label),[H.insuranceSchema.name]:A.Yj().label(H.insuranceSchema.label)}),J=({onSubmit:a,initialValues:b,setContext:c=()=>{},submitButton:f})=>{let[g,h]=(0,o.useState)("");return(0,o.useEffect)(()=>{let a=b[t.W.PAYMENT_OPTIONS];Array.isArray(a)&&a.find(a=>"insurance"==a)&&h("insurance")},[b]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(e.PD,{validationSchema:I,initialValues:b,onSubmit:a,submitButtonText:"Update",submitButton:f,children:[(0,d.jsx)(D.uQ,{children:"Payment Options"}),(0,d.jsx)(x.Ji,{setFormContext:c}),(0,d.jsx)(e.Z3,{getValue:a=>{if(!Array.isArray(a))return;let b=a?.find(a=>a?.key=="insurance"&&a?.value);b?h(b?.key):h("")},name:H.paymentOption.name,options:[{label:"Non-paying",value:"non-paying"},{label:"Cash",value:"cash"},{label:"Staff",value:"staff"},{label:"Insurance",value:"insurance"}]}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.pK,{label:H.insuranceProvider.label,id:H.insuranceProvider.name,name:H.insuranceProvider.name,selectItems:[{name:"Masm",value:"masm"},{name:"Escom",value:"Escom"},{name:"Reserve Bank",value:"Reserve Bank"},{name:"Liberty",value:"Liberty"},{name:"Unimed",value:"Unimed"},{name:"Medhealth",value:"Medhealth"},{name:"CIC Malawi",value:"CIC Malawi"},{name:"MRA",value:"MRA"}]}),(0,d.jsx)(e.A8,{name:H.insuranceIdNo.name,id:H.insuranceIdNo.name,label:H.insuranceIdNo.label}),(0,d.jsx)(e.pK,{label:H.insuranceSchema.label,id:H.insuranceSchema.name,name:H.insuranceSchema.name,selectItems:[{name:"VVIP",value:"VVIP"},{name:"VIP",value:"VIP"},{name:"EXEC",value:"EXEC"},{name:"ECO",value:"ECO"}]}),(0,d.jsx)(e.b1,{name:H.status.name,label:H.status.label,options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]})]})]})})},K=[{name:"Parent",value:t.W.PARENT},{name:"Uncle",value:t.W.UNCLE_AUNTIE},{name:"Auntie",value:t.W.AUNTIE},{name:"Spouse",value:t.W.SPOUSE},{name:"Siblings",value:t.W.SIBLING}],L=A.Ik().shape({given_name:A.Yj().required().label("First Name"),family_name:A.Yj().required().label("Last Name"),relationship:A.Yj().required().label("Relationship")}),M=({onSubmit:a,initialValues:b,isGuardian:c,setContext:f=()=>{},submitButton:g})=>(0,d.jsxs)(e.PD,{submitButton:g,enableReinitialize:!0,submitButtonText:"Update",validationSchema:L,initialValues:b,onSubmit:a,children:[(0,d.jsx)(x.Ji,{setFormContext:f}),(0,d.jsx)(D.uQ,{children:c?"Guardian information":"Next of kin Information"}),(0,d.jsxs)(e.jD,{display:"flex",flexDirection:"column",children:[(0,d.jsx)(e.A8,{name:"given_name",id:"given_name",label:"First Name"}),(0,d.jsx)(e.A8,{name:"family_name",id:"family_name",label:"Last Name"}),!c&&(0,d.jsx)(e.pK,{name:"relationship",id:"relationship",label:"Relationship",selectItems:K}),(0,d.jsx)(e.A8,{name:"phoneNumber",id:"phoneNumber",label:"Phone Number"})]})]})},84782:(a,b,c)=>{c.d(b,{E7:()=>g});var d=c(21124);c(38301);var e=c(72197),f=c(53773);c(80350);let g=({height:a=400})=>(0,d.jsx)(f.A,{width:"100%",mt:2,children:(0,d.jsx)(e.A,{variant:"rectangular",width:"100%",height:a})})},89724:(a,b,c)=>{c.d(b,{H:()=>l});var d=c(21124),e=c(38736),f=c(38301),g=c(80350),h=c(48936),i=c(15143);let j={identificationNumber:{name:"identificationNumber",label:"National Identification Number"},firstName:{name:"firstName",label:"First Name"},phoneNumber:{name:"phoneNumber",label:"Phone Number"},lastName:{name:"lastName",label:"Last Name"},dob:{name:"birthDate",label:"Date of Birth"},gender:{name:"gender",label:"Gender"},birthDateEstimated:{name:"birthdateEstimated",label:"Birthdate Estimated"},age:{name:"age",label:"Estimated Age"}},k=h.Ik().shape({[j.identificationNumber.name]:h.Yj().label(j.identificationNumber.label),[j.firstName.name]:h.Yj().required().label(j.firstName.label),[j.phoneNumber.name]:h.Yj().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"phone number not valid").min(10).label(j.phoneNumber.label),[j.lastName.name]:h.Yj().required().label(j.lastName.label),[j.dob.name]:h.p6().when(j.birthDateEstimated.name,{is:a=>"true"==a,then:()=>h.p6().required()}).test("valid-age","Age must be at least 14 years and not in the future",function(a){if(!a)return!0;let b=new Date(a),c=new Date,d=c.getFullYear()-b.getFullYear(),e=c.getMonth()-b.getMonth();return(e<0||0===e&&c.getDate()<b.getDate())&&d--,d>=14&&d>=0}),[j.gender.name]:h.Yj().required().label(j.gender.label)}),l=({initialValues:a,onSubmit:b,onFormValueChange:c=()=>{},submitButton:h=!0,setContext:l=a=>{}})=>{let[m,n]=(0,f.useState)({});return(0,d.jsxs)(g.PD,{validationSchema:k,initialValues:a,onSubmit:b,submitButtonText:"update",getFormValues:c,enableReinitialize:!0,submitButton:h,children:[(0,d.jsx)(i.Ji,{setFormContext:l}),(0,d.jsxs)(g.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,d.jsx)(g.fP,{getValues:n}),(0,d.jsx)(g.A8,{name:j.identificationNumber.name,id:j.identificationNumber.name,label:j.identificationNumber.label}),(0,d.jsx)(g.A8,{name:j.firstName.name,id:j.firstName.name,label:j.firstName.label}),(0,d.jsx)(g.A8,{name:j.lastName.name,id:j.lastName.name,label:j.lastName.label}),(0,d.jsx)(g.b1,{name:j.gender.name,label:j.gender.label,options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}]}),(0,d.jsx)(g.b1,{name:j.birthDateEstimated.name,label:j.birthDateEstimated.label,options:[{label:"Yes",value:!0},{label:"No",value:!1}]}),(0,d.jsx)(g.A8,{sx:{display:"true"==m[j.birthDateEstimated.name]?"flex":"none"},name:j.age.name,id:j.age.name,label:j.age.label}),m[j.age.name]>0&&"true"==m[j.birthDateEstimated.name]&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsxs)(g.Th,{variant:"body1",children:["Estimated birth date  ",(0,d.jsx)("b",{children:(0,e.wZ)(m[j.age.name])?.readable})]}),(0,d.jsx)("br",{})]}),(0,d.jsx)(g.bZ,{sx:{display:!1==m[j.birthDateEstimated.name]||"false"==m[j.birthDateEstimated.name]?"flex":"none",width:"100%"},width:"100%",label:j.dob.label,name:j.dob.name}),(0,d.jsx)(g.A8,{name:j.phoneNumber.name,id:j.phoneNumber.name,label:j.phoneNumber.label})]})]})}}};