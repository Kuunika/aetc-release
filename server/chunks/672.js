"use strict";exports.id=672,exports.ids=[672],exports.modules={22902:(a,b,c)=>{c.d(b,{l:()=>k});var d=c(21124),e=c(82283),f=c(80350),g=c(79515),h=c(38736),i=c(50852),j=c(95745);let k=()=>{let{params:a}=(0,e.KU)(),{data:b}=(0,i.$O)(a?.id,`encounter_type=${j.fA.LAB_ORDERS_PLAN}`),c=[{field:"specimen",headerName:"Specimen",flex:1,renderCell:a=>a.row.specimen.name},{field:"test",headerName:"Test(s)",flex:1,renderCell:a=>a.row.test.name},{field:"priority",headerName:"Priority",flex:1,renderCell:a=>a.row.test.priority},{field:"date",headerName:"Date",flex:1}],k=[];return b&&b?.length>0&&(k=b[0]?.obs?.flatMap(a=>a.children.map(b=>({test:b.names[0].name,date:(0,h.kh)(a.obs_datetime),specimen:a.names[0].name,priority:function(a){let b=[];if(Array.isArray(a.children))for(let c of a.children){let a=c.names?.[0]?.name;("Emergency"===a||"Urgent"===a)&&b.push(a)}return b.join(", ")}(b),id:b.obs_id})))),(0,d.jsx)(d.Fragment,{children:0===k.length?(0,d.jsx)(g.default,{children:"No lab orders added"}):(0,d.jsx)(f.WE,{height:"25ch",showTopBar:!1,rowHeight:25,rows:k,columns:c})})}},93315:(a,b,c)=>{c.d(b,{Q:()=>x});var d=c(21124),e=c(95745),f=c(82283),g=c(12781),h=c(50852),i=c(38301),j=c(81637),k=c(80155),l=c(77028),m=c(79515),n=c(99561),o=c(73520),p=c(68730),q=c(63908),r=c(17332),s=c(24390),t=c(90675);let u={PH:"pH",PCO2:"pCO₂ (mmHg)",PO2:"pO₂ (mmHg)",CTHB:"c_tHb (g/dL)",SO2:"sO₂ (%)",FO2HB:"FO₂Hb (%)",FHHB:"FHHb (%)",FMETHB:"FmetHb (%)",CK:"cK⁺ (mmol/L)",CNA:"cNa⁺ (mmol/L)",CA2:"cCa\xb2⁺ (mmol/L)",CCL:"cCl⁻ (mmol/L)",GLU:"cGlu (mmol/L)",LAC:"cLac (mmol/L)",CTBIL:"ctBil (\xb5mol/L)",PH_T:"pH (T)",PCO2_T:"pCO₂ (T) mmHg",PO2_T:"pO₂ (T) mmHg",P50E:"P50e",BASE_EXCESS:"cBaseExcess (Ecf)c",HCO3:"cHCO₃⁻ (P,st)c",ANION_GAP:"Amion Gap",MOSM:"cmOSm"},v={PH:{name:u.PH,label:u.PH},PCO2:{name:u.PCO2,label:u.PCO2},PO2:{name:u.PO2,label:u.PO2},CTHB:{name:u.CTHB,label:u.CTHB},SO2E:{name:u.SO2,label:u.SO2},FO2HBE:{name:u.FO2HB,label:u.FO2HB},FHHBE:{name:u.FHHB,label:u.FHHB},FMETHB:{name:u.FMETHB,label:u.FMETHB},CK:{name:u.CK,label:u.CK},CNA:{name:u.CNA,label:u.CNA},CA2:{name:u.CA2,label:u.CA2},CCL:{name:u.CCL,label:u.CCL},glucose:{name:u.GLU,label:u.GLU},LACTATE:{name:u.LAC,label:u.LAC},CTBIL:{name:u.CTBIL,label:u.CTBIL},PH_T:{name:u.PH_T,label:u.PH_T},PCO2_T:{name:u.PCO2_T,label:u.PCO2_T},PO2_T:{name:u.PO2_T,label:u.PO2_T},P50E:{name:u.P50E,label:u.P50E},BASE_EXCESS:{name:u.BASE_EXCESS,label:u.BASE_EXCESS},HCO3:{name:u.HCO3,label:u.HCO3},ANION_GAPC:{name:u.ANION_GAP,label:u.ANION_GAP},MOSMC:{name:u.MOSM,label:u.MOSM},mrdt:{name:e.W.MRDT,label:"MRDT",coded:!0},hiv:{name:e.W.HIV,label:"HIV",coded:!0},vdrl:{name:e.W.VDRL,label:"VDRL",coded:!0},pregnancyTest:{name:e.W.PREGNANCY_TEST,label:"Pregnancy Test",coded:!0},urobilinogen:{name:e.W.UROBILINOGEN,label:"Urobilinogen"},leukocytes:{name:e.W.LEUKOCYTES,label:"Leukocytes"},bilirubin:{name:e.W.BILIRUBIN,label:"Bilirubin"},specificGravity:{name:e.W.SPECIFIC_GRAVITY,label:"Specific Gravity"},nitrite:{name:e.W.NITRITE,label:"Nitrite"},ketones:{name:e.W.KETONES,label:"Ketones"},blood:{name:e.W.BLOOD,label:"Blood"},protein:{name:e.W.PROTEIN,label:"Protein"},pocus:{name:e.W.POINT_OF_CARE_ULTRASOUND,label:"Point of care ultrasound"},ecg:{name:e.W.ECG,label:"ECG"},pefr:{name:e.W.PEFR,label:"PEFR"},other:{name:e.W.OTHER,label:"Other"}},w={arterialVenousBloodGasMain:{title:"Arterial/Venous Blood Gas",subSections:["bloodGasValues","oximetryValues","electrolyteValues","metabolicValues","temperatureCorrectedValues","acidBaseStatus"]},bloodGasValues:{title:"Blood Gas Values",fields:[v.PH,v.PCO2,v.PO2]},oximetryValues:{title:"Oximetry Values",fields:[v.CTHB,v.SO2E,v.FO2HBE,v.FHHBE,v.FMETHB]},electrolyteValues:{title:"Electrolyte Values",fields:[v.CK,v.CNA,v.CA2,v.CCL]},metabolicValues:{title:"Metabolic Values",fields:[v.glucose,v.LACTATE,v.CTBIL]},temperatureCorrectedValues:{title:"Temperature Corrected Values",fields:[v.PH_T,v.PCO2_T,v.PO2_T,v.P50E]},acidBaseStatus:{title:"Acid Base Status",fields:[v.BASE_EXCESS,v.HCO3,v.ANION_GAPC,v.MOSMC]},dipstick:{title:"Dipstick",fields:[v.urobilinogen,v.PH,v.leukocytes,v.glucose,v.specificGravity,v.protein,v.nitrite,v.ketones,v.bilirubin,v.blood]},additionalTests:{title:"Additional Tests",fields:[v.pocus,v.ecg,v.pefr,v.other]},pregnancyTest:{title:"Pregnancy Test",fields:[v.pregnancyTest]}},x=()=>{let{activeVisit:a,patientId:b,gender:c}=(0,f.gd)(),{mutate:u,isPending:x,isSuccess:y}=(0,h.jM)(),{ServerTime:z}=(0,t.useServerTime)(),[A,B]=(0,i.useState)(!1),[C,D]=(0,i.useState)(!1),[E,F]=(0,i.useState)(!1),G=(0,i.useCallback)(()=>{let a={};return Object.keys(w).forEach(b=>{let c=w[b];a[b]={open:!1,selectedFields:{}},c.fields&&c.fields.forEach(c=>{a[b].selectedFields[c.name]=!1})}),a},[]),[H,I]=(0,i.useState)(G),J=(0,i.useCallback)(()=>{I(G()),B(!1),D(!1),F(!1)},[G]),K=(0,i.useCallback)(()=>{let a=[],b=b=>{let c=w[b],d=H[b];if(c.fields){let f=c.fields.filter(a=>d.selectedFields[a.name]);f.length>0&&("pregnancyTest"===b?a.push({concept:v.pregnancyTest.name,obsDatetime:z.getServerTimeString(),value:!0}):a.push({concept:e.W.BEDSIDE_INVESTIGATIONS,obsDatetime:z.getServerTimeString(),value:c.title,groupMembers:f.map(a=>({concept:a.name,obsDatetime:z.getServerTimeString(),value:!0}))}))}};return w.arterialVenousBloodGasMain.subSections?.forEach(a=>{b(a)}),b("dipstick"),b("additionalTests"),"Female"===c&&b("pregnancyTest"),A&&a.push({concept:v.mrdt.name,obsDatetime:z.getServerTimeString(),value:!0}),C&&a.push({concept:v.hiv.name,obsDatetime:z.getServerTimeString(),value:!0}),E&&a.push({concept:v.vdrl.name,obsDatetime:z.getServerTimeString(),value:!0}),a},[H,A,C,E,c]),L=(0,i.useCallback)(c=>{"string"!=typeof c&&c&&c.preventDefault();let d=K();console.log("\uD83D\uDE80 ~ handleSubmit ~ obs:",d),u({encounterType:e.fA.BEDSIDE_INVESTIGATION_PLAN,visit:a,patient:b,encounterDatetime:z.getServerTimeString(),obs:d}),J()},[K,u,a,b,J]);(0,i.useEffect)(()=>{y&&g.oR.success("Bedside test plan submitted successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:g.br})},[y]);let M=(0,i.useCallback)(a=>{I(b=>({...b,[a]:{...b[a],open:!b[a].open}}))},[]),N=(0,i.useCallback)((a,b)=>{I(c=>({...c,[a]:{...c[a],selectedFields:{...c[a].selectedFields,[b]:!c[a].selectedFields[b]}}}))},[]),O=(0,i.useCallback)(a=>{let b=w[a],c=H[a];return!!b.fields&&0!==b.fields.length&&b.fields.every(a=>c.selectedFields[a.name])},[H]),P=(0,i.useCallback)(a=>{let b=w[a],c=H[a];if(!b.fields||0===b.fields.length)return!1;let d=b.fields.filter(a=>c.selectedFields[a.name]).length;return d>0&&d<b.fields.length},[H]),Q=(0,i.useCallback)(a=>{let b=w[a];if(!b.fields)return;let c=H[a],d=!O(a),e={...c.selectedFields};b.fields.forEach(a=>{e[a.name]=d}),I(b=>({...b,[a]:{...b[a],selectedFields:e,open:!0}}))},[H,O]),R=(0,i.useCallback)(a=>{let b=w[a];return!!b.subSections&&b.subSections.every(a=>{let b=w[a];return!b.fields||0===b.fields.length||O(a)})},[O]),S=(0,i.useCallback)(a=>{let b=w[a];if(!b.subSections)return!1;let c=0,d=0;return b.subSections.forEach(a=>{let b=w[a];b.fields&&(d+=b.fields.length,c+=b.fields.filter(b=>H[a].selectedFields[b.name]).length)}),c>0&&c<d},[H]),T=(0,i.useCallback)(a=>{let b=w[a];if(!b.subSections)return;let c=!R(a);I(d=>{let e={...d};return b.subSections?.forEach(a=>{let b=w[a];if(b.fields){let d={...e[a].selectedFields};b.fields.forEach(a=>{d[a.name]=c}),e[a]={...e[a],selectedFields:d,open:!0}}}),e[a]={...e[a],open:!0},e})},[R]),U=({sectionKey:a})=>{let b=w[a],c=H[a],e=O(a),f=P(a);return b.fields&&0!==b.fields.length?(0,d.jsxs)(j.default,{sx:{mb:1},children:[" ",(0,d.jsx)(k.default,{control:(0,d.jsx)(l.default,{checked:e,indeterminate:f&&!e,onChange:()=>Q(a),sx:{color:"GrayText"}}),label:(0,d.jsxs)(m.default,{color:"GrayText",onClick:()=>M(a),sx:{fontSize:16,cursor:"pointer",display:"inline-flex",alignItems:"center"},children:[b.title,c.open?(0,d.jsx)(q.A,{sx:{ml:1,fontSize:20}}):(0,d.jsx)(r.A,{sx:{ml:1,fontSize:20}})]})}),(0,d.jsx)(n.A,{in:c.open,children:(0,d.jsx)(j.default,{sx:{pl:4,mt:1},children:b.fields?.map(b=>(0,d.jsx)(k.default,{control:(0,d.jsx)(l.default,{checked:c.selectedFields[b.name],onChange:()=>N(a,b.name),name:b.name,id:b.name}),label:b.label},b.name))})})]}):null};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(s.h,{loading:x,children:[(0,d.jsxs)(o.A,{children:[(0,d.jsx)(({sectionKey:a})=>{let b=w[a],c=H[a],e=R(a),f=S(a);return(0,d.jsxs)(j.default,{sx:{mb:1},children:[(0,d.jsx)(k.default,{control:(0,d.jsx)(l.default,{checked:e,indeterminate:f&&!e,onChange:()=>T(a),sx:{color:"GrayText"}}),label:(0,d.jsxs)(m.default,{color:"GrayText",onClick:()=>M(a),sx:{fontSize:16,cursor:"pointer",display:"inline-flex",alignItems:"center"},children:[b.title,c.open?(0,d.jsx)(q.A,{sx:{ml:1,fontSize:20}}):(0,d.jsx)(r.A,{sx:{ml:1,fontSize:20}})]})}),(0,d.jsx)(n.A,{in:c.open,children:(0,d.jsx)(j.default,{sx:{pl:4,mt:1},children:b.subSections?.map(a=>(0,d.jsx)(U,{sectionKey:a},a))})})]})},{sectionKey:"arterialVenousBloodGasMain"}),(0,d.jsx)(j.default,{sx:{mb:1},children:(0,d.jsx)(k.default,{control:(0,d.jsx)(l.default,{checked:A,onChange:()=>B(!A),sx:{color:"GrayText"},name:v.mrdt.name,id:v.mrdt.name}),label:(0,d.jsx)(m.default,{sx:{fontSize:16},color:"GrayText",children:v.mrdt.label})})}),(0,d.jsx)(j.default,{sx:{mb:1},children:(0,d.jsx)(k.default,{control:(0,d.jsx)(l.default,{checked:C,onChange:()=>D(!C),sx:{color:"GrayText"},name:v.hiv.name,id:v.hiv.name}),label:(0,d.jsx)(m.default,{sx:{fontSize:16},color:"GrayText",children:v.hiv.label})})}),(0,d.jsx)(j.default,{sx:{mb:1},children:(0,d.jsx)(k.default,{control:(0,d.jsx)(l.default,{checked:E,onChange:()=>F(!E),sx:{color:"GrayText",fontSize:16},name:v.vdrl.name,id:v.vdrl.name}),label:(0,d.jsx)(m.default,{sx:{fontSize:16},color:"GrayText",children:v.vdrl.label})})}),"Female"===c&&(0,d.jsx)(U,{sectionKey:"pregnancyTest"}),(0,d.jsx)(U,{sectionKey:"dipstick"}),(0,d.jsx)(U,{sectionKey:"additionalTests"})]}),(0,d.jsx)(j.default,{sx:{mb:1},children:(0,d.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",onClick:L,children:"Submit"})})]})})}}};