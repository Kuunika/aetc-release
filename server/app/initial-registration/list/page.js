(()=>{var e={};e.id=3962,e.ids=[3962],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5608:(e,t,i)=>{"use strict";i.d(t,{VQ:()=>n,kC:()=>l,sL:()=>s,uQ:()=>o});var r=i(60687),a=i(75018);let s=({children:e,id:t})=>(0,r.jsx)(a.Th,{id:t,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:e}),n=({children:e})=>(0,r.jsx)(a.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:e}),l=({children:e,sx:t})=>(0,r.jsx)(a.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...t},children:e}),o=({children:e})=>(0,r.jsx)(a.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:e})},6398:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=i(65239),a=i(48088),s=i(88170),n=i.n(s),l=i(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let d={children:["",{children:["initial-registration",{children:["list",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,40201)),"/Users/pk/App/hwis/aetc/app/initial-registration/list/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(i.bind(i,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/pk/App/hwis/aetc/app/initial-registration/list/page.tsx"],u={require:i,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/initial-registration/list/page",pathname:"/initial-registration/list",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},13670:(e,t,i)=>{"use strict";i.d(t,{b2:()=>c,FD:()=>u,qv:()=>p});var r=i(44504),a=i(60579);let s="visits",n=e=>(0,a.vt)(e,s),l=(e,t)=>(0,a.hc)(e,t,s);var o=i(8693),d=i(54050);let c=()=>{let e=(0,o.jE)();return(0,d.n)({mutationFn:e=>n(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},u=()=>{let{ServerTime:e}=(0,r.useServerTime)(),t=async t=>l(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,d.n)({mutationFn:t})},p=e=>{let t=(0,o.jE)();return(0,d.n)({mutationFn:e=>l(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},15995:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var r=i(60687),a=i(80564),s=i(75018),n=i(5608),l=i(85121),o=i(42938);let d=(0,i(77391).A)(function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.V,{title:"Patients waiting prescreening",link:"/dashboard"}),(0,r.jsxs)(s.Yr,{container:!0,children:[(0,r.jsx)(s.Yr,{xs:0,lg:1,item:!0}),(0,r.jsxs)(s.Yr,{xs:12,lg:10,sx:{display:"flex",flexDirection:"column"},item:!0,children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(n.sL,{children:"Patients waiting for Screening"}),(0,r.jsx)(n.VQ,{children:"This is a list of all patients that went through initial registration successfully and waiting for prescreening."}),(0,r.jsx)(n.kC,{sx:{p:0,mx:"1ch"},children:(0,r.jsx)(a.I,{})})]}),(0,r.jsx)(s.Yr,{xs:0,lg:1,item:!0})]})]})},[o.Ot.ADMIN,o.Ot.CLINICIAN,o.Ot.REGISTRATION_CLERK,o.Ot.NURSE,o.Ot.DATA_MANAGER])},16966:(e,t,i)=>{Promise.resolve().then(i.bind(i,40201))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34987:(e,t,i)=>{"use strict";i.d(t,{R:()=>u});var r=i(60687),a=i(43210),s=i(75018),n=i(13670),l=i(23641),o=i(12040),d=i(58706),c=i(18299);let u=({patientId:e,visitId:t,onDelete:i,sx:u,dialogTitle:p="Abscond Patient",dialogConfirmationMsg:x="Are you sure the patient absconded?",buttonTitle:m="Abscond"})=>{let{mutate:h,isPending:g,isSuccess:f}=(0,n.FD)(),[v,j]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{f&&i()},[f]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{title:"Mark as absconded",arrow:!0,children:(0,r.jsx)(d.default,{onClick:()=>{j(!0)},"aria-label":"abscond",children:(0,r.jsx)(c.axc,{})})}),(0,r.jsxs)(s.eV,{maxWidth:"sm",title:p,open:v,onClose:()=>j(!1),children:[(0,r.jsx)(l.OverlayLoader,{open:g}),(0,r.jsx)(s.Th,{children:x}),(0,r.jsx)("br",{}),(0,r.jsx)(s.O6,{title:"Yes",onClick:()=>{h(t)}}),(0,r.jsx)(s.O6,{sx:{ml:.3},variant:"secondary",title:"No",onClick:()=>j(!1)})]})]})}},39580:(e,t,i)=>{"use strict";i.d(t,{a:()=>s});var r=i(43210),a=i(92592);let s=(e,t)=>{let[i,a]=(0,r.useState)({page:0,pageSize:10}),[s,l]=(0,r.useState)(""),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)(0),[m,h]=(0,r.useState)(0),[g,f]=(0,r.useState)(!1),v=(0,r.useCallback)(async()=>{let r;u(!0),g&&(r=new Date().toISOString().split("T")[0]);try{let a=await n(e,i.pageSize,s,i.page+1,r||"",t);d(a.data.data),x(a.data.total_pages),h(a.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{u(!1)}},[e,i.pageSize,s,i.page,g]);return(0,r.useEffect)(()=>{v()},[v]),{loading:c,patients:o,paginationModel:i,setPaginationModel:a,searchText:s,setSearchText:l,totalPages:p,totalEntries:m,setOnSwitch:f,refetch:(0,r.useCallback)(()=>{v()},[v])}},n=async(e,t,i,r,s,n)=>{let l=`category=${e}&page=${r}&page_size=${t}&search=${i}&date=${s}`;return n&&(l=`category=${e}&paginate=false&patient_care_area=${encodeURIComponent(n)}`),await (0,a.P8)(l)}},40035:(e,t,i)=>{"use strict";i.d(t,{d:()=>a});var r=i(43210);function a(e,t){let[i,a]=(0,r.useState)(e);return i}},40201:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});let r=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/initial-registration/list/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/initial-registration/list/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},77391:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(60687),a=i(23641),s=i(61939),n=i(43210),l=i(41930),o=i(75018),d=i(30474),c=i(87748);function u(e,t){return function(i){let[o,d]=(0,n.useState)(!1),{navigateTo:u}=(0,s.cq)(),x=(0,l.R)(t,(0,c.O)());return o?x?(0,r.jsx)(e,{...i}):(0,r.jsx)(p,{}):(0,r.jsx)(a.OverlayLoader,{open:!o})}}let p=()=>(0,r.jsx)(o.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,r.jsx)(d.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},79551:e=>{"use strict";e.exports=require("url")},80564:(e,t,i)=>{"use strict";i.d(t,{S:()=>d,I:()=>y});var r=i(60687),a=i(75018),s=i(30485);let n={firstName:{name:"firstName",label:"First Name"},lastName:{name:"lastName",label:"Last Name"}},l=/^[a-zA-Z]+(?:['-][a-zA-Z]+)*\s*$/,o=s.Ik({[n.firstName.name]:s.Yj().matches(l,{message:"Name not valid"}).required().label(n.firstName.label),[n.lastName.name]:s.Yj().matches(l,{message:"Name not valid"}).required().label(n.lastName.label)}),d=({initialValues:e,onSubmit:t})=>(0,r.jsxs)(a.PD,{initialValues:e,validationSchema:o,onSubmit:t,submitButton:!1,enableReinitialize:!0,children:[(0,r.jsxs)(a.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(a.A8,{name:n.firstName.name,label:n.firstName.label,id:n.firstName.name}),(0,r.jsx)(a.A8,{name:n.lastName.name,label:n.lastName.label,id:n.lastName.name})]}),(0,r.jsx)(a.O6,{type:"submit",title:"Submit",onClick:()=>{}})]});var c=i(88794),u=i(61939),p=i(76990),x=i(43210),m=i(34987),h=i(42938),g=i(12040),f=i(58706),v=i(18299),j=i(39580),b=i(40035),_=i(46318);let y=()=>{let{loading:e,patients:t,paginationModel:i,setPaginationModel:s,searchText:n,setSearchText:l,totalPages:o,setOnSwitch:d,totalEntries:y}=(0,j.a)("screening"),[S,N]=(0,x.useState)(""),w=(0,b.d)(S,500);(0,x.useEffect)(()=>{l(w)},[w]);let{navigateTo:A}=(0,u.cq)(),[C,k]=(0,x.useState)(!1),[I,q]=(0,x.useState)(""),[P,T]=(0,x.useState)(""),[D,E]=(0,x.useState)(""),{mutate:R}=(0,p.Dk)(),z=t?.sort((e,t)=>new Date(e.arrival_time)-new Date(t.arrival_time)).map(e=>({id:e?.uuid,...e,patient_arrival_time:(0,c.WB)(e.arrival_time)})).filter(e=>e.id!=D),F=[{field:"aetc_visit_number",headerName:"Visit Number"},{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"patient_arrival_time",headerName:"Arrival Time",flex:1},{field:"waiting",headerName:"WaitingTime",flex:1,renderCell:e=>(0,r.jsx)(a.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Attended By",flex:1},{field:"action",flex:1,headerName:"Action",renderCell:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{title:"Start screening",arrow:!0,children:(0,r.jsx)(f.default,{onClick:()=>A(`/prescreening/${e.id}`),"aria-label":"start screening",color:"primary",children:(0,r.jsx)(v.gSK,{})})}),(0,r.jsx)(m.R,{onDelete:()=>{E(e.id),R({id:e.row.patient_id,void_reason:"Absconded"})},visitId:e.row.visit_uuid,patientId:e.id}),(0,r.jsx)(g.A,{title:"Initiate CPR",arrow:!0,children:(0,r.jsx)(f.default,{onClick:()=>{q(e.id),k(!0),T(e.row.visit_uuid)},"aria-label":"initiate CPR",color:"error",children:(0,r.jsx)(v.szJ,{})})})]})}],O=z?.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,actor:(0,r.jsx)(a.uT,{encounterType:h.fA.INITIAL_REGISTRATION,patientId:e.id}),aggregate:(0,r.jsx)(a.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,r.jsx)(a.VJ,{arrival_time:e?.latest_encounter_time}),actionName:"registered by",action:(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(a.O6,{sx:{fontSize:"12px",width:"49%",mr:"1px"},title:"screen",onClick:()=>A(`/prescreening/${e.id}`)}),(0,r.jsx)(m.R,{sx:{width:"49%"},onDelete:()=>E(e.id),visitId:e.visit_uuid,patientId:e.id})]}),age:"N/A",triageResult:e.triage_result}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.vP,{columns:F,data:{data:z??[],page:i.page,per_page:i.pageSize,total_pages:o,totalEntries:y},searchText:S,setSearchString:N,setPaginationModel:s,paginationModel:i,loading:e,formatForMobileView:O||[],onSwitchChange:d,onRowClick:e=>{A(`/prescreening/${e.id}`)}}),(0,r.jsx)(_.w8,{patientuuid:I,visituuid:P,open:C,onClose:()=>k(!1)})]})}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85121:(e,t,i)=>{"use strict";i.d(t,{V:()=>l});var r=i(60687),a=i(61939),s=i(75018),n=i(89061);let l=({title:e,link:t})=>{let{navigateTo:i}=(0,a.cq)(),l={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,r.jsxs)(s.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,r.jsxs)(s.jD,{onClick:()=>i(t),sx:{display:"flex",cursor:"pointer"},children:[(0,r.jsx)(s.Th,{children:(0,r.jsx)(n.oWm,{})}),(0,r.jsx)(s.Th,{sx:l,children:"Go back"})]}),(0,r.jsx)(s.Th,{sx:l,children:e}),(0,r.jsxs)(s.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(n.M4e,{}),(0,r.jsx)(s.Th,{sx:l,children:"Need any help?"})]})]})}},86702:(e,t,i)=>{Promise.resolve().then(i.bind(i,15995))},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[4447,6724,346,1658,485,7567,8142,1146,4431,8431,6318],()=>i(6398));module.exports=r})();