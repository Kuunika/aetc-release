(()=>{var e={};e.id=2019,e.ids=[2019],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5608:(e,t,i)=>{"use strict";i.d(t,{VQ:()=>n,kC:()=>l,sL:()=>a,uQ:()=>o});var s=i(60687),r=i(75018);let a=({children:e,id:t})=>(0,s.jsx)(r.Th,{id:t,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:e}),n=({children:e})=>(0,s.jsx)(r.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:e}),l=({children:e,sx:t})=>(0,s.jsx)(r.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...t},children:e}),o=({children:e})=>(0,s.jsx)(r.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:e})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},13670:(e,t,i)=>{"use strict";i.d(t,{b2:()=>c,FD:()=>p,qv:()=>u});var s=i(44504),r=i(60579);let a="visits",n=e=>(0,r.vt)(e,a),l=(e,t)=>(0,r.hc)(e,t,a);var o=i(8693),d=i(54050);let c=()=>{let e=(0,o.jE)();return(0,d.n)({mutationFn:e=>n(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},p=()=>{let{ServerTime:e}=(0,s.useServerTime)(),t=async t=>l(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,d.n)({mutationFn:t})},u=e=>{let t=(0,o.jE)();return(0,d.n)({mutationFn:e=>l(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34532:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});let s=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/dispositions/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/dispositions/page.tsx","default")},39580:(e,t,i)=>{"use strict";i.d(t,{a:()=>a});var s=i(43210),r=i(92592);let a=(e,t)=>{let[i,r]=(0,s.useState)({page:0,pageSize:10}),[a,l]=(0,s.useState)(""),[o,d]=(0,s.useState)([]),[c,p]=(0,s.useState)(!1),[u,x]=(0,s.useState)(0),[h,f]=(0,s.useState)(0),[m,g]=(0,s.useState)(!1),j=(0,s.useCallback)(async()=>{let s;p(!0),m&&(s=new Date().toISOString().split("T")[0]);try{let r=await n(e,i.pageSize,a,i.page+1,s||"",t);d(r.data.data),x(r.data.total_pages),f(r.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{p(!1)}},[e,i.pageSize,a,i.page,m]);return(0,s.useEffect)(()=>{j()},[j]),{loading:c,patients:o,paginationModel:i,setPaginationModel:r,searchText:a,setSearchText:l,totalPages:u,totalEntries:h,setOnSwitch:g,refetch:(0,s.useCallback)(()=>{j()},[j])}},n=async(e,t,i,s,a,n)=>{let l=`category=${e}&page=${s}&page_size=${t}&search=${i}&date=${a}`;return n&&(l=`category=${e}&paginate=false&patient_care_area=${encodeURIComponent(n)}`),await (0,r.P8)(l)}},40035:(e,t,i)=>{"use strict";i.d(t,{d:()=>r});var s=i(43210);function r(e,t){let[i,r]=(0,s.useState)(e);return i}},44845:(e,t,i)=>{Promise.resolve().then(i.bind(i,34532))},46055:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var s=i(31658);let r=async e=>[{type:"image/x-icon",sizes:"305x298",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68813:(e,t,i)=>{Promise.resolve().then(i.bind(i,87911))},74075:e=>{"use strict";e.exports=require("zlib")},77391:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var s=i(60687),r=i(23641),a=i(61939),n=i(43210),l=i(41930),o=i(75018),d=i(30474),c=i(87748);function p(e,t){return function(i){let[o,d]=(0,n.useState)(!1),{navigateTo:p}=(0,a.cq)(),x=(0,l.R)(t,(0,c.O)());return o?x?(0,s.jsx)(e,{...i}):(0,s.jsx)(u,{}):(0,s.jsx)(r.OverlayLoader,{open:!o})}}let u=()=>(0,s.jsx)(o.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,s.jsx)(d.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85121:(e,t,i)=>{"use strict";i.d(t,{V:()=>l});var s=i(60687),r=i(61939),a=i(75018),n=i(89061);let l=({title:e,link:t})=>{let{navigateTo:i}=(0,r.cq)(),l={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,s.jsxs)(a.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,s.jsxs)(a.jD,{onClick:()=>i(t),sx:{display:"flex",cursor:"pointer"},children:[(0,s.jsx)(a.Th,{children:(0,s.jsx)(n.oWm,{})}),(0,s.jsx)(a.Th,{sx:l,children:"Go back"})]}),(0,s.jsx)(a.Th,{sx:l,children:e}),(0,s.jsxs)(a.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(n.M4e,{}),(0,s.jsx)(a.Th,{sx:l,children:"Need any help?"})]})]})}},87670:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=i(65239),r=i(48088),a=i(88170),n=i.n(a),l=i(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let d={children:["",{children:["dispositions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,34532)),"/Users/pk/App/hwis/aetc/app/dispositions/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(i.bind(i,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/pk/App/hwis/aetc/app/dispositions/page.tsx"],p={require:i,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dispositions/page",pathname:"/dispositions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},87911:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>b});var s=i(60687),r=i(43210),a=i(61939),n=i(18842),l=i(90160),o=i(75018),d=i(42938),c=i(28274),p=i(58706),u=i(88794),x=i(13670),h=i(39580),f=i(12040),m=i(18299),g=i(40035);let j=()=>{let[e,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(""),[l,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),{navigateTo:j}=(0,a.cq)(),{gender:S}=(0,a.gd)(),{mutate:_,isSuccess:b}=(0,x.FD)(),{paginationModel:C,patients:w,searchText:A,setSearchText:k,setPaginationModel:q,loading:D,totalPages:N,refetch:P,totalEntries:T}=(0,h.a)("disposition"),[E,I]=(0,r.useState)(""),z=(0,g.d)(E,500);(0,r.useEffect)(()=>{k(z)},[z]),(0,r.useEffect)(()=>{b&&(P(),console.log("Visit closed successfully, refreshing data..."))},[b,P]);let F=[{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"gender",headerName:"Gender"},{field:"waiting",headerName:"Aggregated Time",flex:1,renderCell:e=>(0,s.jsx)(o.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Disposed By",flex:1},{field:"patient_care_area",flex:1,headerName:"Patient Care Area"},{field:"disposition_type",headerName:"Disposition Type",flex:1},{field:"destination",headerName:"Destination",flex:1},{field:"action",headerName:"Actions",flex:1.2,renderCell:e=>(0,s.jsx)(c.default,{display:"flex",gap:1,children:(0,s.jsx)(v,{patient:e.row,onVisitClosed:P})})}],$=w?.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,dispositionType:e.disposition_type,actor:(0,s.jsx)(o.uT,{encounterType:d.fA.DISPOSITION,patientId:e.id}),aggregate:(0,s.jsx)(o.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,s.jsx)(o.VJ,{arrival_time:e?.latest_encounter_time}),actionName:"Disposed By",action:(0,s.jsx)(y,{patient:e,setDeleted:e=>m(e),triage:e.triage_result,visitId:e.visit_uuid,id:e.uuid,onVisitClosed:P}),age:`${(0,u.Cb)(e.birthdate)}yrs`,triageResult:e.triage_result}));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.vP,{columns:F,data:w?.length?{data:w.map(e=>({id:e.uuid,...e})),page:C.page,per_page:C.pageSize,total_pages:N,totalEntries:T}:{data:[],page:1,per_page:10,total_pages:0,totalEntries:0},searchText:E,setSearchString:I,setPaginationModel:q,paginationModel:C,loading:D,formatForMobileView:$||[]})})},v=({patient:e,onVisitClosed:t})=>{let{navigateTo:i}=(0,a.cq)(),[o,d]=r.useState(null),{mutate:u,isSuccess:h}=(0,x.FD)(),{gender:g}=(0,a.gd)();return(0,r.useEffect)(()=>{h&&t()},[h,t]),(0,s.jsxs)(c.default,{display:"flex",gap:1,children:[(0,s.jsx)(f.A,{title:"View Profile",arrow:!0,children:(0,s.jsx)(p.default,{onClick:()=>i(`/patient/${e.id}/profile`),"aria-label":"view profile",sx:{color:"green"},children:(0,s.jsx)(m.gSK,{})})}),(0,s.jsx)(f.A,{title:"Close Visit",arrow:!0,children:(0,s.jsx)(p.default,{onClick:()=>{e.visit_uuid?u(e.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",sx:{color:"grey"},children:(0,s.jsx)(m.axc,{})})}),(0,s.jsx)(f.A,{title:"Template Forms",arrow:!0,children:(0,s.jsx)(p.default,{onClick:e=>{d(e.currentTarget)},"aria-label":"template forms",sx:{color:"#015E85"},children:(0,s.jsx)(m.t69,{})})}),(0,s.jsxs)(n.A,{id:"basic-menu",anchorEl:o,open:!!o,onClose:()=>{d(null)},children:[(0,s.jsx)(l.A,{onClick:()=>i(`/patient/${e.id}/medicalInpatient`),children:"Medical Inpatient Admission Sheet"}),(0,s.jsx)(l.A,{onClick:()=>i(`/patient/${e.id}/surgicalNotes`),children:"Surgical Notes"}),e.gender?.toLowerCase()==="female"&&(0,s.jsx)(l.A,{onClick:()=>i(`/patient/${e.id}/gyneacology`),children:"Gyneacology Ward Admission"})]})]})},y=({id:e,visitId:t,triage:i,setDeleted:d,patient:u,showCPR:h,onCPR:g,onVisitClosed:j})=>{let{navigateTo:v}=(0,a.cq)(),[y,S]=r.useState(null),{mutate:_,isSuccess:b}=(0,x.FD)();(0,r.useEffect)(()=>{b&&j()},[b,j]);let C=()=>{S(null)};return(0,s.jsxs)(c.default,{sx:{display:"flex",flexDirection:"column",flex:"1"},children:[(0,s.jsx)(o.jD,{sx:{borderRadius:"2px",width:"100%",height:"5ch",backgroundColor:"red"==i?"#B42318":"yellow"==i?"#ede207":"green"==i?"#016302":"",marginY:1}}),(0,s.jsxs)(c.default,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[(0,s.jsx)(f.A,{title:"Close Visit",arrow:!0,children:(0,s.jsx)(p.default,{onClick:()=>{u.visit_uuid?_(u.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",size:"small",sx:{color:"#015E85"},children:(0,s.jsx)(m.axc,{})})}),(0,s.jsx)(f.A,{title:"Template Forms",arrow:!0,children:(0,s.jsx)(p.default,{onClick:e=>{S(e.currentTarget)},"aria-label":"template forms",size:"small",sx:{color:"#015E85"},children:(0,s.jsx)(m.t69,{})})}),(0,s.jsx)(f.A,{title:"View Profile",arrow:!0,children:(0,s.jsx)(p.default,{onClick:()=>v(`/patient/${u.id}/profile`),"aria-label":"view profile",size:"small",sx:{color:"#015E85"},children:(0,s.jsx)(m.gSK,{})})}),h&&(0,s.jsx)(f.A,{title:"Initiate CPR",arrow:!0,children:(0,s.jsx)(p.default,{onClick:g,"aria-label":"initiate CPR",size:"small",color:"error",children:(0,s.jsx)(m.szJ,{})})})]}),(0,s.jsxs)(n.A,{id:"card-action-menu",anchorEl:y,open:!!y,onClose:C,children:[(0,s.jsx)(l.A,{onClick:()=>{v(`/patient/${e}/medicalInpatient`),C()},children:"Medical Inpatient Admission Sheet"}),(0,s.jsx)(l.A,{onClick:()=>{v(`/patient/${e}/surgicalNotes`),C()},children:"Surgical Notes"}),(0,s.jsx)(l.A,{onClick:()=>{v(`/patient/${e}/gyneacology`),C()},children:"Gyneacology Ward Admission"})]})]})};var S=i(5608),_=i(85121);let b=(0,i(77391).A)(function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.V,{title:"Disposition/Specialty",link:"/dashboard"}),(0,s.jsxs)(o.Yr,{container:!0,children:[(0,s.jsx)(o.Yr,{xs:0,lg:0,item:!0}),(0,s.jsxs)(o.Yr,{xs:12,lg:12,sx:{display:"flex",flexDirection:"column"},item:!0,children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsxs)(S.sL,{children:["Disposition List"," "]}),(0,s.jsx)(S.VQ,{children:"This is a list of all patients whose visit has been completed."}),(0,s.jsx)(S.kC,{sx:{mx:1,p:0},children:(0,s.jsx)(j,{})})]}),(0,s.jsx)(o.Yr,{xs:0,lg:0,item:!0})]})]})},[d.Ot.ADMIN,d.Ot.CLINICIAN,d.Ot.NURSE])},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[4447,6724,346,1658,1146],()=>i(87670));module.exports=s})();