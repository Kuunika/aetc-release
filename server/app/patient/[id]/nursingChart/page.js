(()=>{var e={};e.id=4281,e.ids=[4281],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19194:(e,t,r)=>{"use strict";r.d(t,{q:()=>y});var n=r(60687);r(43210);var a=r(24857),i=r(68730),l=r(2351),o=r(7850),s=r(69612),u=r(27621),d=r(71953),c=r(12040),p=r(58706),m=r(109);let b=(0,m.Ay)(a.A)(({theme:e})=>({borderRadius:e.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:e.shadows[3],position:"relative"})),h=(0,m.Ay)(i.A)(({theme:e})=>({borderCollapse:"separate",borderSpacing:"0px 4px"})),f=(0,m.Ay)(l.A)(({theme:e})=>({fontWeight:500,padding:"12px 16px",borderBottom:"none",color:e.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"})),x=(0,m.Ay)(f)(({theme:e})=>({fontSize:"0.9rem",fontWeight:"bold",backgroundColor:e.palette.background.default,textTransform:"uppercase"})),v=(0,m.Ay)(o.A)(({theme:e})=>({backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:e.palette.grey[100]},boxShadow:e.shadows[1]})),g=(0,m.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1})),y=({columns:e,data:t,actions:r=!1,getSelectedRow:a,loading:i=!1})=>(0,n.jsx)(b,{children:(0,n.jsxs)(h,{stickyHeader:!0,children:[(0,n.jsx)(s.A,{children:(0,n.jsxs)(o.A,{children:[e.map((e,t)=>(0,n.jsx)(x,{children:e.label},t)),r&&(0,n.jsx)(x,{children:"Actions"})]})}),(0,n.jsx)(u.A,{children:i?(0,n.jsx)(o.A,{children:(0,n.jsx)(l.A,{colSpan:e.length+ +!!r,children:(0,n.jsx)(g,{children:(0,n.jsx)(d.A,{})})})}):t.map((t,i)=>(0,n.jsxs)(v,{onClick:()=>a&&a(t),children:[e.map((e,r)=>(0,n.jsx)(c.A,{title:t[e.field],arrow:!0,children:(0,n.jsx)(f,{children:t[e.field]})},r)),r&&(0,n.jsxs)(f,{children:[(0,n.jsx)(p.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,n.jsx)(p.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},i))})]})})},19453:(e,t,r)=>{"use strict";r.d(t,{Yw:()=>o,rg:()=>s,uu:()=>u});var n=r(60687),a=r(19194),i=r(42938),l=r(88794);let o=e=>e?.map(e=>({route:e.children.find(e=>e.names?.length>0&&e.names[0]?.name==i.l8.MEDICATION_ROUTE)?.value,dose:e.children.find(e=>e.names?.length>0&&e.names[0]?.name==i.W.MEDICATION_DOSE)?.value,createdBy:e.created_by,createdTime:(0,l.rX)(e.obs_datetime),medication:e.value})),s=(e,t)=>o(e?.obs?.filter(e=>e.value_coded_uuid==t)),u=({data:e,givenMedication:t})=>{let r=s(e,t);return(0,n.jsx)(a.q,{columns:[{label:"Dose",field:"dose"},{label:"Route",field:"route"},{label:"Dispensed Time",field:"createdTime"},{label:"Dispenser",field:"createdBy"}],data:r||[]})}},21820:e=>{"use strict";e.exports=require("os")},25310:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/patient/[id]/nursingChart/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/patient/[id]/nursingChart/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"305x298",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},55330:(e,t,r)=>{"use strict";r.d(t,{iE:()=>a,Zt:()=>d,iL:()=>u,f6:()=>o,gX:()=>s,ZM:()=>c,k$:()=>p}),r(96851);var n=r(77567);let a=({title:e,text:t,icon:r,onConfirm:a,confirmButtonText:i,cancelButtonText:l="Cancel"})=>{n.A.fire({title:e,text:t,icon:r,showCancelButton:!0,confirmButtonColor:"#006401",confirmButtonText:i,cancelButtonText:l}).then(e=>{e.isConfirmed&&a()})};var i=r(42938),l=r(88794);let o=e=>Object.keys(e).reduce((t,r)=>(t[e[r].name]="",t),{}),s=(e,t)=>Object.keys(e).map(r=>({concept:r,value:e[r],obsDatetime:t})),u=(e,t,r)=>{let n=Object.keys(e).map(t=>({concept:e[t].name,label:e[t].label})),a=t.map(e=>({concept:e.id,label:e.label}));return[...n,...r.map(e=>({concept:e.value,label:e.label})),...a]},d=async e=>(await l.Fh.initialize(),e.map(e=>({concept:i.W.IMAGE_PART_NAME,value:e.label,obsDateTime:l.Fh.getServerTimeString(),groupMembers:e.formData.obs}))),c=(e,t,r,n=!1)=>Array.isArray(e)?e.map(e=>({concept:t,value:e.id,obsDatetime:r})):[],p=async(e,t,r)=>(await l.Fh.initialize(),Object.entries(t).map(([t,n])=>{let a=Object.keys(e).find(r=>e[r].name===t);if(!a)return null;let i=e[a].name,o=e[a].coded;return Array.isArray(n)&&n.every(e=>e&&void 0!==e.id)?n.map(e=>({key:i,value:e.id,coded:o})):{concept:i,value:n,coded:o,obsDatetime:r||l.Fh.getServerTimeString()}}).flat().filter(Boolean))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55634:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var n=r(60687),a=r(20631),i=r(70460),l=r(66621),o=r(75018);let s=({options:e,name:t,label:r,width:s="100%",sx:u,getValue:d,manualInitialValues:c,disabled:p=!1,multiple:m=!0,applyPadding:b=!0})=>{let{hasError:h,setFieldValue:f,value:x,errorMessage:v}=(0,a.W)(t),g=b?{paddingTop:"1ch",paddingBottom:"1ch"}:{};return(0,n.jsxs)(o.jD,{sx:{width:s,...u,borderRadius:.5},children:[(0,n.jsx)(i.A,{shrink:!0,children:r}),e&&e.length>0?(0,n.jsx)(l.Ay,{styles:{control:(e,t)=>({...e,borderColor:h?"red":"#B3B3B3",...g}),option:(e,t)=>({...e,backgroundColor:t.isSelected?"white":e.backgroundColor,color:"black","&:hover":{backgroundColor:"#cffccf"}})},defaultValue:c,onChange:r=>{if(m){let n=r.map(t=>{let r=e.find(e=>e.options.some(e=>e.value===t.value));return{group:r?.value||"Unknown",value:t.value,label:t.label}});f(t,n),d&&d(n)}else{let n=e.find(e=>e.options.some(e=>e.value===r.value)),a={group:n?.value||"Unknown",value:r.value,label:r.label};f(t,a),d&&d(a)}},isDisabled:p,isMulti:m,options:e,formatGroupLabel:e=>(0,n.jsx)("div",{style:{fontWeight:"bold"},children:e.label}),theme:e=>({...e,colors:{...e.colors,primary:o.zQ.primary,primary25:"#cffccf",neutral0:"white",neutral80:"black"}})}):null,(0,n.jsx)(o.Th,{color:"red",variant:"subtitle2",children:v})]})}},57495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eS});var n=r(60687),a=r(75018),i=r(42938),l=r(77391),o=r(43210),s=r(61939),u=r(30485),d=r(55330),c=r(49778),p=r(97851);function m(e){return(0,p.k5)({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 23.21875 3.78125 L 21.78125 5.21875 L 22.15625 5.59375 L 19.875 7.875 L 21.28125 9.3125 L 23.5625 7 L 25 8.4375 L 22.6875 10.71875 L 24.125 12.125 L 26.40625 9.84375 L 26.78125 10.21875 L 28.21875 8.78125 Z M 17.71875 7.28125 L 16.28125 8.71875 L 16.9375 9.375 L 7 19.34375 L 6.65625 19.6875 L 6.71875 20.15625 L 7.0625 23.34375 L 7.09375 23.6875 L 7.1875 23.75 L 3.9375 27 L 6.78125 27 L 8.8125 24.96875 L 11.84375 25.28125 L 12.3125 25.34375 L 12.65625 25 L 22.625 15.0625 L 23.28125 15.71875 L 24.71875 14.28125 Z M 18.375 10.8125 L 21.1875 13.625 L 11.59375 23.25 L 9.21875 22.96875 L 9.03125 22.78125 L 8.75 20.40625 Z"}}]})(e)}let b={oxygenSaturation:{name:i.W.BLOOD_OXYGEN_SATURATION,label:"Oxygen Saturation (O2 Sat)"},heartRate:{name:i.W.HEART_RATE,label:"Heart Rate (HR)"},bloodPressureSystolic:{name:i.W.SYSTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Systolic"},bloodPressureDiastolic:{name:i.W.DIASTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Diastolic"},respiratoryRate:{name:i.W.RESPIRATORY_RATE,label:"Respiratory Rate (RR)"},temperature:{name:i.W.TEMPERATURE,label:"Temperature (Temp)"},randomBloodGlucose:{name:i.W.GLUCOSE,label:"Random Blood Glucose (RBG)"},urineDipstickKetones:{name:i.W.URINE_DIPSTICK_KETONES,label:"Urine Dipstick - Ketones"},avpu:{name:i.W.AVPU,label:"AVPU Scale"},pefr:{name:i.W.PEAK_EXPIRATORY_FLOW_RATE,label:"Peak Expiratory Flow Rate (PEFR)"},triageScore:{name:i.W.TRIAGE_RESULT,label:"Triage Score"},units:{name:i.W.ADDITIONAL_NOTES,label:"Units"}},h=u.Ik().shape({[b.oxygenSaturation.name]:u.Yj().label(b.oxygenSaturation.label),[b.heartRate.name]:u.Yj().label(b.heartRate.label),[b.bloodPressureSystolic.name]:u.Yj().label(b.bloodPressureSystolic.label),[b.bloodPressureDiastolic.name]:u.Yj().label(b.bloodPressureDiastolic.label),[b.respiratoryRate.name]:u.Yj().label(b.respiratoryRate.label),[b.temperature.name]:u.Yj().label(b.temperature.label),[b.randomBloodGlucose.name]:u.Yj().label(b.randomBloodGlucose.label),[b.urineDipstickKetones.name]:u.Yj().label(b.urineDipstickKetones.label),[b.avpu.name]:u.Yj().label(b.avpu.label),[b.pefr.name]:u.Yj().label(b.pefr.label),[b.triageScore.name]:u.Yj().label(b.triageScore.label),[b.units.name]:u.Yj().label(b.units.label)}),f=(0,d.f6)(b),x=({onSubmit:e,onSkip:t,submitting:r})=>{let[i,l]=(0,o.useState)({}),{navigateTo:u}=(0,s.cq)(),{flow:d,addKeyToFlow:p}=(0,o.useContext)(c.Q),[x,v]=(0,o.useState)("Default"),g={[b.temperature.name]:[{operator:"<",value:34,result:"Emergency",bound:0},{operator:">",value:39.9,result:"Emergency",bound:100},{operator:"combined",operator1:">=",value:37.5,operator2:"<=",value2:39.9,result:"Priority",bound:0},{operator:"combined",operator1:">=",value:34.1,operator2:"<=",value2:35.4,result:"Priority",bound:0},{operator:"combined",operator1:">=",value:35.5,operator2:"<=",value2:37.4,result:"Queue",bound:0}],[b.respiratoryRate.name]:[{operator:">",value:30,result:"Emergency",bound:100},{operator:"<",value:8,result:"Emergency",bound:0},{operator:"combined",operator1:">=",value:21,operator2:"<=",value2:30,result:"Priority",bound:0},{operator:"combined",operator1:">=",value:8,operator2:"<=",value2:11,result:"Priority",bound:0},{operator:"combined",operator1:">=",value:12,operator2:"<=",value2:20,result:"Queue",bound:0}]},y=(e,t)=>{let r="Queue";console.log(e);let n=parseFloat(e)||0;switch(t){case b.oxygenSaturation.name:n<90&&(r="Emergency"),n>=90&&n<94&&(r="Priority"),n>=94&&(r="Queue");break;case b.heartRate.name:(n<40||n>129)&&(r="Emergency"),(n>=40&&n<=59||n>=101&&n<=129)&&(r="Priority"),n>=60&&n<=100&&(r="Queue");break;case b.bloodPressureSystolic.name:if(n>200||n<80)return"Emergency";if(n>=80&&n<=89||n>=150&&n<=200)return"Priority";if(n>=90||n>89&&n<=149)return"Queue";break;case b.bloodPressureDiastolic.name:n>119&&(r="Emergency"),n>=100&&n<=119&&(r="Priority"),n<100&&(r="Queue");break;case b.respiratoryRate.name:for(let e of g[b.respiratoryRate.name])if(">"===e.operator&&n>e.value||"<"===e.operator&&n<e.value||"combined"===e.operator&&void 0!==e.value2&&n>=e.value&&n<=e.value2){r=e.result;break}break;case b.temperature.name:for(let e of g[b.temperature.name])if(">"===e.operator&&n>e.value||"<"===e.operator&&n<e.value||"combined"===e.operator&&void 0!==e.value2&&n>=e.value&&n<=e.value2){r=e.result;break}break;case b.randomBloodGlucose.name:let a=i[b.units.name];a&&("mg/dl"==a&&(n<54.054||n>540.54?r="Emergency":n>=55.8558&&n<=68.4684||n>199.9998&&n<=538.7382?r="Priority":n>=70.2702&&n<=199.9998&&(r="Queue")),"mmol/l"==a&&((n<3||n>30)&&(r="Emergency"),(n>=3.1&&n<=3.8||n>11.1&&n<=29.9)&&(r="Priority"),n>=3.9&&n<=11.1&&(r="Queue")));break;default:r="Green"}return r};return(0,o.useEffect)(()=>{let e="No Score",t={};Object.keys(d).forEach(r=>{let n=d[r];if(n){let a=y(n,r);t[r]=a,e=a}for(let r in t)t.hasOwnProperty(r)&&("Emergency"==t[r]&&(e="Emergency"),"Priority"==t[r]&&"Emergency"!==e&&(e="Priority"))}),v(e)},[d]),(0,n.jsxs)(a.PD,{validationSchema:h,initialValues:f,onSubmit:t=>{i[b.triageScore.name]=x;let r={...i};i[b.randomBloodGlucose.name]&&(r[b.randomBloodGlucose.name]=`${i[b.randomBloodGlucose.name]} ${i[b.units.name]}`),e(r)},enableReinitialize:!1,submitButtonText:"Submit",submitButton:!1,children:[(0,n.jsx)(a.fP,{getValues:l}),(0,n.jsxs)("div",{style:{width:"100%",height:"20px",marginTop:"20px",marginBottom:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:"#000"},children:[(0,n.jsx)("p",{children:"Triage Score"}),(0,n.jsx)("div",{style:{backgroundColor:(e=>{switch(e){case"Emergency":return"#FECDCA";case"Priority":return"#FEDF89";case"Queue":return"#DDEEDD";default:return"#FFFFFF"}})(x),width:"100%",height:"50px",marginLeft:"280px",marginRight:"100px",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:x.charAt(0).toUpperCase()+x.slice(1)})]}),(0,n.jsxs)(a.Vp,{children:[(0,n.jsx)(a.A8,{name:b.oxygenSaturation.name,label:b.oxygenSaturation.label,id:b.oxygenSaturation.name,unitOfMeasure:"%",handleBlurEvent:e=>p({[b.oxygenSaturation.name]:e})}),(0,n.jsx)(a.A8,{name:b.respiratoryRate.name,label:b.respiratoryRate.label,id:b.respiratoryRate.name,unitOfMeasure:"bs/m",handleBlurEvent:e=>p({[b.respiratoryRate.name]:e})})]}),(0,n.jsx)(a.A8,{name:b.heartRate.name,label:b.heartRate.label,id:b.heartRate.name,handleBlurEvent:e=>p({[b.heartRate.name]:e}),unitOfMeasure:"bpm"}),(0,n.jsxs)(a.Vp,{sx:{mt:"2ch"},children:[(0,n.jsx)(a.A8,{name:b.bloodPressureSystolic.name,label:b.bloodPressureSystolic.label,id:b.bloodPressureSystolic.name,handleBlurEvent:e=>p({[b.bloodPressureSystolic.name]:e}),unitOfMeasure:"mmHg"}),(0,n.jsx)(a.A8,{name:b.bloodPressureDiastolic.name,label:b.bloodPressureDiastolic.label,id:b.bloodPressureDiastolic.name,handleBlurEvent:e=>p({[b.bloodPressureDiastolic.name]:e}),unitOfMeasure:"mmHg"})]}),(0,n.jsx)(a.A8,{name:b.temperature.name,label:b.temperature.label,id:b.temperature.name,handleBlurEvent:e=>p({[b.temperature.name]:e}),unitOfMeasure:"\xb0C"}),(0,n.jsx)(a.Vp,{children:(0,n.jsx)(a.pj,{unitOptions:["mmol/l","mg/dl"],id:b.randomBloodGlucose.name,label:b.randomBloodGlucose.label,name:b.randomBloodGlucose.name,unitName:b.units.name,placeholder:"e.g., 50",sx:{width:"320px"},inputIcon:(0,n.jsx)(m,{}),handleBlurEvent:e=>p({[b.randomBloodGlucose.name]:e})})}),(0,n.jsx)(a.A8,{name:b.urineDipstickKetones.name,label:b.urineDipstickKetones.label,id:b.urineDipstickKetones.name,handleBlurEvent:e=>p({[b.urineDipstickKetones.name]:e})}),(0,n.jsx)(a.el,{name:b.avpu.name,options:[{id:"Alert",label:"Alert"},{id:"Verbal",label:"Verbal"},{id:"Pain",label:"Pain"},{id:"Unresponsive",label:"Unresponsive"}],label:b.avpu.label,sx:{my:"1ch"},multiple:!1,disabled:!1,getValue:e=>p({[b.avpu.name]:e})}),(0,n.jsx)(a.A8,{name:b.pefr.name,label:b.pefr.label,id:b.pefr.name,handleBlurEvent:e=>p({[b.pefr.name]:e}),unitOfMeasure:"L/min"}),(0,n.jsxs)(a.jD,{children:[(0,n.jsx)(a.O6,{sx:{m:.5},title:"Submit",type:"submit",onClick:()=>{},disabled:r}),(0,n.jsx)(a.O6,{variant:"secondary",title:"Skip",type:"button",onClick:t})]})]})};var v=r(58706),g=r(89061),y=r(62085),A=r(55634),E=r(76831);let S=()=>{let[e,t]=(0,o.useState)([]),{data:r}=(0,E.X)("Type of circulation intervention");return(0,o.useEffect)(()=>{r&&t(r.map(e=>({id:e.uuid,label:e.name})))},[r]),{circulationOptions:e}},j=()=>{let[e,t]=(0,o.useState)([]),{data:r}=(0,E.X)("Disability interventions");return(0,o.useEffect)(()=>{r&&t(r.map(e=>({id:e.uuid,label:e.name})))},[r]),{disabilityOptions:e}},I=()=>{let[e,t]=(0,o.useState)([]),{data:r}=(0,E.X)("Exposure interventions");return(0,o.useEffect)(()=>{r&&t(r.map(e=>({id:e.uuid,label:e.name})))},[r]),{exposureOptions:e}},O={airwayIntervention:{name:i.W.AIRWAY_OPENING_INTERVENTIONS,label:"Airway intervention(s)"},breathingIntervention:{name:i.W.BREATHING_INTERVENTIONS,label:"Breathing intervention(s)"},circulationIntervention:{name:i.W.CIRCULATION_INTERVENTIONS,label:"Circulation intervention(s)"},disabilityIntervention:{name:i.W.DISABILITY_INTERVENTIONS,label:"Disability intervention(s)"},exposureIntervention:{name:i.W.EXPOSURE_INTERVENTIONS,label:"Exposure intervention(s)"}},T=u.Ik().shape({}),R=({onSubmit:e,onSkip:t})=>{let r={[O.airwayIntervention.name]:[],[O.breathingIntervention.name]:[],[O.circulationIntervention.name]:[],fluidEntries:[{intakeFluidType:"",intakeFluidAmount:"",outputFluidType:"",outputFluidAmount:"",balance:""}]};return(0,n.jsx)(a.PD,{validationSchema:T,initialValues:r,onSubmit:e,enableReinitialize:!0,submitButtonText:"Submit",submitButton:!1,children:(0,n.jsx)(C,{onSkip:t})})},C=({onSkip:e})=>{let{values:t,setFieldValue:r}=(0,y.j7)(),l=[{id:i.W.POSITIONING,label:"Positioning"},{id:i.W.C_SPINE_STABILIZATION,label:"C-Spine Stabilization"},{id:i.W.SUCTIONING,label:"Suctioning"},{id:i.W.FOREIGN_BODY_REMOVAL,label:"Foreign body removal"},{id:i.W.INSERTION_OF_GUEDEL,label:'Insertion of airway "Guedel"'},{id:i.W.OTHER_AIRWAY_INTERVENTION,label:"Other"}],o=[{id:i.W.OXYGEN_GIVEN,label:"Oxygen therapy"},{id:i.W.BAG_AND_MASK,label:"Bag and mask"},{id:i.W.INTERCOSTAL_DRAINAGE,label:"Intercostal drainage"}];i.W.INTAKE_FLUIDS,i.W.HEMORRHAGE_CONTROL,i.W.BLOOD_SAMPLE,i.W.CATHETER,i.W.TRANSFUSION,i.W.NG_INSERTION,i.W.SUTURING,i.W.KEEP_WARM;let s=[{label:"IV Fluids",options:[{value:"Ringers Lactate",label:"Ringers Lactate"},{value:"Saline 5%",label:"Saline 5%"},{value:"Saline 3%",label:"Saline 3%"},{value:"Saline 0.9%",label:"Saline 0.9%"},{value:"Saline 0.45%",label:"Saline 0.45%"},{value:"Dextrose 10%",label:"Dextrose 10%"},{value:"Dextrose 5%",label:"Dextrose 5%"},{value:"Haemacel",label:"Haemacel"}]},{label:"Blood products",options:[{value:"Whole blood",label:"Whole blood"},{value:"Packed Red cells",label:"Packed Red cells"},{value:"Platelets",label:"Platelets"},{value:"Fresh frozen plasma",label:"Fresh frozen plasma"}]},{label:"Oral products",options:[{value:"Water",label:"Water"},{value:"Juice",label:"Juice"},{value:"ORS",label:"ORS"}]}],u=[{id:"Urine",label:"Urine"},{id:"Stool",label:"Stool"},{id:"Nasal gastric tube drainage",label:"Nasal gastric tube drainage"},{id:"Vomitting",label:"Vomitting"},{id:"Insensible loss",label:"Insensible loss"}],d=()=>{r("fluidEntries",[...t.fluidEntries,{intakeFluidType:"",intakeFluidAmount:"",outputFluidType:"",outputFluidAmount:"",balance:""}])},{circulationOptions:c}=S(),{disabilityOptions:p}=j(),{exposureOptions:m}=I(),b=e=>{r("fluidEntries",t.fluidEntries.filter((t,r)=>r!==e))},h=(e,n,a)=>{r("fluidEntries",t.fluidEntries.map((t,r)=>{if(r===e){let e={...t,[n]:a};if("intakeFluidAmount"===n||"outputFluidAmount"===n){let t=parseFloat(e.intakeFluidAmount)||0,r=parseFloat(e.outputFluidAmount)||0;e.balance=t-r}return e}return t}))},f=Array.isArray(t[O.airwayIntervention.name])&&t[O.airwayIntervention.name]?.some(e=>e.id===i.W.OTHER_AIRWAY_INTERVENTION),x=Array.isArray(t[O.disabilityIntervention.name])&&t[O.disabilityIntervention.name]?.some(e=>"Other (free text)"===e.label),E=Array.isArray(t[O.exposureIntervention.name])&&t[O.exposureIntervention.name]?.some(e=>"Other"===e.label),T=Array.isArray(t[O.circulationIntervention.name])&&t[O.circulationIntervention.name]?.some(e=>"IV fluids"===e.label);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.fP,{getValues:e=>console.log(e)}),(0,n.jsxs)(a.jD,{children:[(0,n.jsx)(a.el,{name:O.airwayIntervention.name,options:l,label:O.airwayIntervention.label,sx:{mb:"2ch"},multiple:!0,getValue:(e=[])=>{e.some(e=>e.id===i.W.OTHER_AIRWAY_INTERVENTION)||r(`${O.airwayIntervention.name}_Other`,"")}}),f&&(0,n.jsx)(a.A8,{name:`${O.airwayIntervention.name}_Other`,label:"Please specify",sx:{mb:"2ch"}}),(0,n.jsx)(a.el,{name:O.breathingIntervention.name,options:o,label:O.breathingIntervention.label,sx:{mb:"2ch"},multiple:!0}),(0,n.jsx)(a.el,{name:O.circulationIntervention.name,options:c,label:O.circulationIntervention.label,sx:{mb:"2ch"},multiple:!0,getValue:e=>{e.some(e=>"IV fluids"===e.label)||r("fluidEntries",[{intakeFluidType:"",intakeFluidAmount:"",outputFluidType:"",outputFluidAmount:"",balance:""}])}}),(0,n.jsx)(a.el,{name:O.disabilityIntervention.name,options:p,label:O.disabilityIntervention.label,sx:{mb:"2ch"},multiple:!0,getValue:(e=[])=>{e.some(e=>"Other (free text)"===e.label)||r(`${O.disabilityIntervention.name}_Other`,"")}}),x&&(0,n.jsx)(a.A8,{name:`${O.disabilityIntervention.name}_Other`,label:"Please specify",sx:{mb:"2ch"}}),(0,n.jsx)(a.el,{name:O.exposureIntervention.name,options:m,label:O.exposureIntervention.label,sx:{mb:"2ch"},multiple:!0,getValue:(e=[])=>{e.some(e=>"Other"===e.label)||r(`${O.exposureIntervention.name}_Other`,"")}}),E&&(0,n.jsx)(a.A8,{name:`${O.exposureIntervention.name}_Other`,label:"Please specify",sx:{mb:"2ch"}}),T&&(0,n.jsx)(a.jD,{children:t.fluidEntries.map((e,t)=>(0,n.jsxs)(a.Vp,{children:[(0,n.jsxs)(a.jD,{children:[(0,n.jsx)(A.s,{name:`fluidEntries[${t}].intakeFluidType`,label:"Intake Fluid Type",options:s,getValue:e=>h(t,"intakeFluidType",e)}),(0,n.jsx)(a.A8,{name:`fluidEntries[${t}].intakeFluidAmount`,label:"Intake Fluid Amount",type:"number",unitOfMeasure:"ml",onChange:e=>h(t,"intakeFluidAmount",e)})]}),(0,n.jsxs)(a.jD,{children:[(0,n.jsx)(a.el,{name:`fluidEntries[${t}].outputFluidType`,label:"Output Fluid Type",options:u,getValue:e=>h(t,"outputFluidType",e)}),(0,n.jsx)(a.A8,{name:`fluidEntries[${t}].outputFluidAmount`,label:"Output Fluid Amount",type:"number",unitOfMeasure:"ml",onChange:e=>h(t,"outputFluidAmount",e)})]}),(0,n.jsx)(a.A8,{sx:{ml:"1ch"},name:`fluidEntriesBalance_${t}`,label:"Fluid Balance",unitOfMeasure:"ml",type:"number",disabled:!0,externalValue:e.balance}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",height:"90px"},children:[(0,n.jsx)(v.default,{disabled:0===t,onClick:()=>b(t),color:"error",children:(0,n.jsx)(g.iu5,{})}),(0,n.jsx)(v.default,{onClick:d,color:"primary",children:(0,n.jsx)(g.OiG,{})})]})]},t))})]}),(0,n.jsxs)(a.jD,{children:[(0,n.jsx)(a.O6,{sx:{m:.5},title:"Submit",type:"submit"}),(0,n.jsx)(a.O6,{variant:"secondary",title:"Skip",type:"button",onClick:e})]})]})};var k=r(62116),D=r(79534),N=r(78590),P=r(48308),F=r(52487),_=r(84135),w=r(45742),L=r(24942),M=r(28274),B=r(50772),W=r(44504),U=r(60931),G=r(19453),$=r(62764);let q=()=>{let{patientId:e,activeVisitId:t,activeVisit:r}=(0,s.gd)(),{data:a,isPending:l,isRefetching:u,refetch:d}=(0,k.$O)(e),{mutate:c,isPending:p,isSuccess:m}=(0,k.jM)(),[b,h]=(0,o.useState)(null),[f,x]=(0,o.useState)({route:"",dose:""}),[v,g]=(0,o.useState)({});(0,o.useEffect)(()=>{m&&d()},[m,d]);let y=a?.find(e=>e?.encounter_type?.uuid===i.fA.DISPENSING&&e.visit_id===Number(t)),A=(0,G.rg)(y??{},b?.medicationUUID),E=A?.reduce((e,t)=>e+Number(t.dose),0)||0,S=(0,o.useCallback)((e,t)=>{x(r=>({...r,[e]:t})),"dose"===e&&b?g(e=>({...e,dose:E+Number(t)>b.dose?"Cannot dispense more than prescribed":void 0})):g(r=>({...r,[e]:t?void 0:"Field is required"}))},[E,b]),j=(0,o.useCallback)(()=>{let{ServerTime:t}=(0,W.useServerTime)();if(!f.dose||!f.route)return void g({dose:f.dose?void 0:"Field is required",route:f.route?void 0:"Field is required"});c({encounterType:i.fA.DISPENSING,visit:r,patient:e,encounterDatetime:t.getServerTimeString(),obs:[{concept:i.W.DRUG_GIVEN,value:b.medicationUUID,obsDatetime:t.getServerTimeString(),coded:!0,groupMembers:[{concept:i.W.MEDICATION_DOSE,value:f.dose,obsDatetime:t.getServerTimeString()},{concept:i.W.MEDICATION_ROUTE,value:f.route,obsDatetime:t.getServerTimeString()}]}]}),x({dose:"",route:""})},[f,c,r,e,b]);return(0,n.jsxs)(D.default,{sx:{p:3,borderRadius:2,boxShadow:3},children:[(0,n.jsx)(N.default,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Prescribed Medication"}),(0,n.jsx)($.Z,{setRow:h}),(0,n.jsx)(P.A,{in:!!b,timeout:500,children:(0,n.jsx)("div",{children:b&&(0,n.jsxs)(F.A,{sx:{mt:2,p:3,borderRadius:2,boxShadow:4},children:[(0,n.jsx)(N.default,{variant:"h6",color:"primary",gutterBottom:!0,children:b?.medicationName}),(0,n.jsx)(U.h,{loading:p||l||u,children:(0,n.jsxs)(_.A,{children:[(0,n.jsxs)(w.default,{container:!0,spacing:2,alignItems:"center",children:[(0,n.jsx)(w.default,{item:!0,xs:6,children:(0,n.jsx)(L.A,{name:"dose",label:"Dose",type:"number",required:!0,fullWidth:!0,variant:"outlined",value:f.dose,onChange:e=>S("dose",e.target.value),error:!!v.dose,helperText:v.dose})}),(0,n.jsx)(w.default,{item:!0,xs:6,children:(0,n.jsx)(L.A,{name:"route",label:"Route",required:!0,fullWidth:!0,variant:"outlined",value:f.route,onChange:e=>S("route",e.target.value),error:!!v.route,helperText:v.route})})]}),(0,n.jsx)(M.default,{display:"flex",justifyContent:"center",mt:2,mb:2,children:(0,n.jsx)(B.A,{disabled:!!v.dose||!!v.route,onClick:j,variant:"contained",sx:{borderRadius:5,px:3,py:1,textTransform:"none",fontSize:16},children:"Administer Drug"})}),(0,n.jsx)(G.uu,{data:y??{},givenMedication:b.medicationUUID})]})}),(0,n.jsx)(M.default,{display:"flex",justifyContent:"center",mt:1,children:(0,n.jsx)(B.A,{variant:"text",onClick:()=>h(null),color:"primary",children:"Close"})})]})})})]})},V=u.Ik().shape({medications:u.YO().of(u.Ik().shape({drugName:u.Yj().required("Drug name is required"),dose:u.Yj().required("Dose is required"),route:u.Yj().required("Route is required"),prescriber:u.Yj().required("Prescriber is required")}))}),Y=({onSubmit:e,onSkip:t})=>{let[r,i]=(0,o.useState)({}),[l,s]=(0,o.useState)([{drugName:"",dose:"",route:"",prescriber:""}]),u=()=>{r.medications=l,e(r)};return(0,n.jsxs)(a.PD,{validationSchema:V,initialValues:{medications:l},onSubmit:u,enableReinitialize:!0,submitButtonText:"Submit",submitButton:!1,children:[(0,n.jsx)(a.fP,{getValues:i}),(0,n.jsx)(q,{}),(0,n.jsx)("br",{}),(0,n.jsx)(a.O6,{sx:{m:.5},title:"Submit",type:"submit",onClick:u}),(0,n.jsx)(a.O6,{variant:"secondary",title:"Skip",type:"button",onClick:t})]})};var z=r(76990),H=r(78896),K=r(63662),X=r(93900),Q=r(9088);let Z=function(e={}){let{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:a,resumeHideDuration:i}=e,l=(0,K.A)();o.useEffect(()=>{if(a)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key||n?.(e,"escapeKeyDown")}},[a,n]);let s=(0,X.A)((e,t)=>{n?.(e,t)}),u=(0,X.A)(e=>{n&&null!=e&&l.start(e,()=>{s(null,"timeout")})});o.useEffect(()=>(a&&u(t),l.clear),[a,t,u,l]);let d=l.clear,c=o.useCallback(()=>{null!=t&&u(null!=i?i:.5*t)},[t,i,u]),p=e=>t=>{let r=e.onBlur;r?.(t),c()},m=e=>t=>{let r=e.onFocus;r?.(t),d()},b=e=>t=>{let r=e.onMouseEnter;r?.(t),d()},h=e=>t=>{let r=e.onMouseLeave;r?.(t),c()};return o.useEffect(()=>{if(!r&&a)return window.addEventListener("focus",c),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",c),window.removeEventListener("blur",d)}},[r,a,c,d]),{getRootProps:(t={})=>{let r={...(0,Q.A)(e),...(0,Q.A)(t)};return{role:"presentation",...t,...r,onBlur:p(r),onFocus:m(r),onMouseEnter:b(r),onMouseLeave:h(r)}},onClickAway:e=>{n?.(e,"clickaway")}}};var J=r(91786),ee=r(109),et=r(85898),er=r(11896),en=r(2704),ea=r(17173),ei=r(54134),el=r(49384),eo=r(15610),es=r(62054),eu=r(41854);function ed(e){return(0,eu.Ay)("MuiSnackbarContent",e)}(0,es.A)("MuiSnackbarContent",["root","message","action"]);let ec=e=>{let{classes:t}=e;return(0,H.A)({root:["root"],action:["action"],message:["message"]},ed,t)},ep=(0,ee.Ay)(D.default,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((0,er.A)(({theme:e})=>{let t="light"===e.palette.mode?.8:.98,r=(0,eo.tL)(e.palette.background.default,t);return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(r),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),em=(0,ee.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),eb=(0,ee.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),eh=o.forwardRef(function(e,t){let r=(0,en.b)({props:e,name:"MuiSnackbarContent"}),{action:a,className:i,message:l,role:o="alert",...s}=r,u=ec(r);return(0,n.jsxs)(ep,{role:o,square:!0,elevation:6,className:(0,el.A)(u.root,i),ownerState:r,ref:t,...s,children:[(0,n.jsx)(em,{className:u.message,ownerState:r,children:l}),a?(0,n.jsx)(eb,{className:u.action,ownerState:r,children:a}):null]})});function ef(e){return(0,eu.Ay)("MuiSnackbar",e)}(0,es.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);var ex=r(1020);let ev=e=>{let{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${(0,ea.A)(r.vertical)}${(0,ea.A)(r.horizontal)}`]};return(0,H.A)(n,ef,t)},eg=(0,ee.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`anchorOrigin${(0,ea.A)(r.anchorOrigin.vertical)}${(0,ea.A)(r.anchorOrigin.horizontal)}`]]}})((0,er.A)(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical,style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>"top"!==e.anchorOrigin.vertical,style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>"left"===e.anchorOrigin.horizontal,style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>"right"===e.anchorOrigin.horizontal,style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>"center"===e.anchorOrigin.horizontal,style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),ey=o.forwardRef(function(e,t){let r=(0,en.b)({props:e,name:"MuiSnackbar"}),a=(0,et.A)(),i={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:l,anchorOrigin:{vertical:s,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:c,className:p,ClickAwayListenerProps:m,ContentProps:b,disableWindowBlurListener:h=!1,message:f,onBlur:x,onClose:v,onFocus:g,onMouseEnter:y,onMouseLeave:A,open:E,resumeHideDuration:S,slots:j={},slotProps:I={},TransitionComponent:O,transitionDuration:T=i,TransitionProps:{onEnter:R,onExited:C,...k}={},...D}=r,N={...r,anchorOrigin:{vertical:s,horizontal:u},autoHideDuration:d,disableWindowBlurListener:h,TransitionComponent:O,transitionDuration:T},P=ev(N),{getRootProps:F,onClickAway:_}=Z({...N}),[w,L]=o.useState(!0),M=e=>{L(!0),C&&C(e)},B=(e,t)=>{L(!1),R&&R(e,t)},W={slots:{transition:O,...j},slotProps:{content:b,clickAwayListener:m,transition:k,...I}},[U,G]=(0,ex.A)("root",{ref:t,className:[P.root,p],elementType:eg,getSlotProps:F,externalForwardedProps:{...W,...D},ownerState:N}),[$,q]=(0,ex.A)("clickAwayListener",{elementType:J.x,externalForwardedProps:W,getSlotProps:e=>({onClickAway:(...t)=>{e.onClickAway?.(...t),_(...t)}}),ownerState:N}),[V,Y]=(0,ex.A)("content",{elementType:eh,shouldForwardComponentProp:!0,externalForwardedProps:W,additionalProps:{message:f,action:l},ownerState:N}),[z,H]=(0,ex.A)("transition",{elementType:ei.A,externalForwardedProps:W,getSlotProps:e=>({onEnter:(...t)=>{e.onEnter?.(...t),B(...t)},onExited:(...t)=>{e.onExited?.(...t),M(...t)}}),additionalProps:{appear:!0,in:E,timeout:T,direction:"top"===s?"down":"up"},ownerState:N});return!E&&w?null:(0,n.jsx)($,{...q,children:(0,n.jsx)(U,{...G,children:(0,n.jsx)(z,{...H,children:c||(0,n.jsx)(V,{...Y})})})})});var eA=r(36970);let eE=()=>{let e,[t,r]=(0,o.useState)(0),{params:l}=(0,s.KU)(),{navigateBack:u}=(0,s.cq)(),[c,p]=(0,o.useState)(null),[m,b]=(0,o.useState)(null),[h,f]=(0,o.useState)(!1),{init:v,ServerTime:g}=(0,W.useServerTime)(),{data:y,isLoading:A,isSuccess:E}=(0,z.iu)(l?.id),S=y?.find(e=>!e.date_stopped),j=[{id:0,label:"Observations"},{id:1,label:"Interventions"},{id:2,label:"Medications"}],{mutate:I,isSuccess:O,isPending:T,isError:C}=(0,k.jM)(),{mutateAsync:D,isSuccess:N,isPending:P,isError:F}=(0,k.jM)();(0,o.useEffect)(()=>{C&&(p("Error submitting vitals encounter"),b("error")),F&&(p("Error submitting interventions"),b("error")),O&&(p("Vitals submitted successfully"),b("success"),w()),N&&(p("All encounters submitted successfully"),b("success"),w()),f(T)},[C,F,O,N,T]);let _=async t=>{if(e=g.getServerTimeString(),"No Score"===t["Triage Result"]){p(t["Triage Result"]),b("error");return}let r=Object.fromEntries(Object.entries(t).filter(([e,t])=>e!==i.W.TRIAGE_RESULT)),n=(0,d.gX)(r,e).filter(e=>""!==e.value),a=[{concept:i.W.TRIAGE_RESULT,obsDatetime:e,value:t[i.W.TRIAGE_RESULT],groupMembers:n}];I({encounterType:i.fA.VITALS,visit:S?.uuid,patient:l.id,encounterDatetime:e,obs:a})},w=()=>{let e=t+1;e<j.length?r(e):u()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ey,{open:!!c,autoHideDuration:5e3,onClose:()=>p(null),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(eA.A,{variant:"filled",severity:m||"success",onClose:()=>p(null),style:{opacity:.8},children:c})}),(0,n.jsxs)(a.RG,{setActive:r,title:"Monitoring Chart",steps:j,active:t,onBack:()=>u(),children:[(0,n.jsx)(x,{onSubmit:_,onSkip:w,submitting:h}),(0,n.jsx)(R,{onSubmit:t=>{for(let[r,n]of(e=g.getServerTimeString(),Object.entries(t))){if("fluidEntries"===r){if(Array.isArray(n)){if(0===n.filter(e=>e.intakeFluidType?.[0]?.value||e.intakeFluidAmount||e.outputFluidType?.[0]?.id||e.outputFluidAmount||e.balance).length)continue;n.map(e=>[{concept:i.W.INTAKE_FLUIDS,value:e.intakeFluidType[0]?.value},{concept:i.W.INTAKE_FLUID_AMOUNT,value:e.intakeFluidAmount},{concept:i.W.OUTPUT_FLUID_TYPE,value:e.outputFluidType[0]?.id},{concept:i.W.OUTPUT_FLUID_AMOUNT,value:e.outputFluidAmount},{concept:i.W.FLUID_BALANCE,value:e.balance}]).forEach(t=>{let r=[{concept:i.W.FLUID_BALANCE_CHART,obsDatetime:e,value:!0,groupMembers:t}];D({encounterType:i.fA.PROCEDURES_DONE,visit:S?.uuid,patient:l.id,encounterDatetime:e,obs:r})})}continue}if(!(r.endsWith("_Other")||!n||Array.isArray(n)&&0===n.length)&&Array.isArray(n)&&n.length>0){let a={};a="Circulation Interventions"===r||"Disability Interventions"===r||"Exposure Interventions"===r?n.reduce((e,t)=>(e[t.label]=!0,e),{}):n.reduce((e,t)=>(e[t.id||t.label]=!0,e),{});let o=(0,d.gX)(a,e),s=`${r}_Other`;t[s]&&o.forEach(e=>{(String(e.concept||"").toLowerCase().includes("other")||e.concept&&e.concept.toLowerCase().includes("other"))&&(e.value=t[s])});let u=[{concept:r,obsDatetime:e,value:!0,groupMembers:o}];D({encounterType:i.fA.PROCEDURES_DONE,visit:S?.uuid,patient:l.id,encounterDatetime:e,obs:u})}}},onSkip:w}),(0,n.jsx)(Y,{onSubmit:e=>{console.log("Medications:",e),r(3)},onSkip:w})]})]})},eS=(0,l.A)(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.TF,{}),(0,n.jsx)(a.MG,{children:(0,n.jsx)(eE,{})})]})},[i.Ot.CLINICIAN,i.Ot.NURSE,i.Ot.ADMIN,i.Ot.STUDENT_CLINICIAN])},60931:(e,t,r)=>{"use strict";r.d(t,{h:()=>l});var n=r(60687),a=r(28274),i=r(71953);let l=({loading:e,children:t,height:r="100%"})=>(0,n.jsxs)(a.default,{sx:{position:"relative",width:"100%",height:r},children:[e&&(0,n.jsx)(a.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,n.jsx)(i.A,{})}),(0,n.jsx)(a.default,{sx:{opacity:e?.5:1,pointerEvents:e?"none":"auto"},children:t})]})},62242:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u});var n=r(65239),a=r(48088),i=r(88170),l=r.n(i),o=r(30893),s={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>o[e]);r.d(t,s);let u={children:["",{children:["patient",{children:["[id]",{children:["nursingChart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25310)),"/Users/pk/App/hwis/aetc/app/patient/[id]/nursingChart/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/pk/App/hwis/aetc/app/patient/[id]/nursingChart/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/patient/[id]/nursingChart/page",pathname:"/patient/[id]/nursingChart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},62764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(60687),a=r(60931),i=r(19194),l=r(42938),o=r(48807),s=r(94482),u=r(99108),d=r(61939),c=r(62116),p=r(50772),m=r(43210);let b=({setRow:e,encounterType:t=l.fA.PRESCRIPTIONS,medicationLabelTitle:r,showPrintButton:b=!0})=>{let{patientId:h,activeVisitId:f}=(0,d.gd)(),{setZpl:x,setOpen:v}=(0,o.m)(),{selectedVisit:g}=(0,s.E)(),{data:y,isPending:A}=(0,c.$O)(h,`encounter_type=${t}&visit=${g?.uuid}`),[E,S]=(0,m.useState)([]),j=(e,t)=>e?.children?.find(e=>e.names&&e.names[0].name==t)?.value;return(0,m.useEffect)(()=>{let e=y?.filter(e=>e.visit_id==Number(f));if(!e||0==e.length)return void S([]);S(e[0]?.obs.filter(e=>e?.names&&e?.names[0].name==l.W.DRUG_GIVEN).map(e=>{let t=j(e,l.l8.MEDICATION_DURATION_UNIT),r=j(e,l.W.MEDICATION_DOSE),n=j(e,l.l8.DESCRIPTION),a=j(e,l.l8.MEDICATION_FORMULATION),i=j(e,l.l8.MEDICATION_DOSE_UNIT),o=j(e,l.l8.MEDICATION_FREQUENCY),s=j(e,l.l8.MEDICATION_DURATION)+" "+t,u=e.value_coded_uuid;return{medicationName:e.value,durationUnit:t,dose:r,doseUnits:i,frequency:o,duration:s,formulation:a,description:n,prescribedBy:e.created_by,medicationUUID:u}}).filter(e=>"current"==e.description))},[y]),(0,n.jsxs)(a.h,{loading:A,children:[b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.A,{onClick:()=>{let e=(0,u.B)(E,r);v(e),x(e)},variant:"contained",children:"Print Medications"}),(0,n.jsx)("br",{})]}),(0,n.jsx)(i.q,{getSelectedRow:e,columns:[{label:"Medication Name",field:"medicationName"},{label:"Dose",field:"dose"},{label:"Frequency",field:"frequency"},{label:"Duration",field:"duration"},{label:"Formulation",field:"formulation"},{label:"Prescriber",field:"prescribedBy"}],data:E})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63793:(e,t,r)=>{Promise.resolve().then(r.bind(r,57495))},74075:e=>{"use strict";e.exports=require("zlib")},76831:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});var n=r(62116),a=r(29494);let i=e=>{let t=async()=>{let t=await (0,n.P$)(e);return t.data?.length?t.data[0].set_members.map(({names:e})=>({name:e[0]?.name||"Unknown",uuid:e[0]?.uuid||"N/A"})):[]};return(0,a.I)({queryKey:[e],queryFn:t,enabled:!!e})}},77391:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(60687),a=r(23641),i=r(61939),l=r(43210),o=r(41930),s=r(75018),u=r(30474),d=r(87748);function c(e,t){return function(r){let[s,u]=(0,l.useState)(!1),{navigateTo:c}=(0,i.cq)(),m=(0,o.R)(t,(0,d.O)());return s?m?(0,n.jsx)(e,{...r}):(0,n.jsx)(p,{}):(0,n.jsx)(a.OverlayLoader,{open:!s})}}let p=()=>(0,n.jsx)(s.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,n.jsx)(u.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},84135:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var n=r(43210),a=r(49384),i=r(78896),l=r(109),o=r(2704),s=r(62054),u=r(41854);function d(e){return(0,u.Ay)("MuiCardContent",e)}(0,s.A)("MuiCardContent",["root"]);var c=r(60687);let p=e=>{let{classes:t}=e;return(0,i.A)({root:["root"]},d,t)},m=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),b=n.forwardRef(function(e,t){let r=(0,o.b)({props:e,name:"MuiCardContent"}),{className:n,component:i="div",...l}=r,s={...r,component:i},u=p(s);return(0,c.jsx)(m,{as:i,className:(0,a.A)(u.root,n),ownerState:s,ref:t,...l})})},94735:e=>{"use strict";e.exports=require("events")},98641:(e,t,r)=>{Promise.resolve().then(r.bind(r,25310))},99108:(e,t,r)=>{"use strict";function n({presentingComplaints:e,diagnosis:t,labOrders:r,dischargeNotes:n,dischargePlan:a,followUpPlan:i,homeCareInstructions:l}){let o=e=>Math.round(203*e/25.4),s=o(100),u=o(40),d=s-40,c=Math.floor(d/8),p=[{title:"Discharge Notes",content:n||"N/A"},{title:"Investigations",content:r.length?r.flatMap(e=>e.tests.map(e=>`${e.name}:${e.result||"pending"}`)).join(" ! "):"No investigations ordered"},{title:"Final Diagnosis",content:t?.length?t.map(e=>e.value).join(" ! "):"None"},{title:"Discharge Plan",content:a||"N/A"},{title:"Follow Up Plan",content:`${i}`||"N/A"},{title:"Home Care Instructions",content:l||"N/A"}],m=[];p.forEach((e,t)=>{m.push({text:e.title,isTitle:!0,sectionIndex:t}),(function(e){if(!e)return[];let t=e.split(" "),r=[],n="";for(let e of t){if(e.length>c){n&&(r.push(n),n="");for(let t=0;t<e.length;t+=c){let n=e.substring(t,t+c);r.push(n)}continue}let t=n?`${n} ${e}`:e;t.length<=c?n=t:(n&&r.push(n),n=e)}return n&&r.push(n),r})(e.content).forEach(e=>{m.push({text:e,isTitle:!1,sectionIndex:t})})});let b=[],h=[],f=70;for(let e=0;e<m.length;e++){let t=m[e],r=0;if(h.length>0){let e=h[h.length-1];t.sectionIndex!==e.sectionIndex&&(r=10)}let n=r+(t.isTitle?30:25);if(f+n>u-20){if(0===h.length){h.push(t),b.push(h),h=[],f=20;continue}b.push(h),h=[],f=20,e--;continue}h.push(t),f+=n}return h.length>0&&b.push(h),b.map((e,t)=>{let r=20,n=`^XA
^PW${s}
^LL${u}
^CF0,25`;0===t?(n+=`
^FO20,20^FDPatient Summary-QECH AETC^FS
^FO20,60^GB${d},3,3^FS`,r=70):r=20;let a=-1;for(let t of e)t.sectionIndex!==a&&(-1!==a&&(r+=10),a=t.sectionIndex),t.isTitle?(n+=`
^CF0,25
^FO20,${r}^FD${t.text}^FS`,r+=30):(n+=`
^CF0,20
^FO20,${r}^FD${t.text}^FS`,r+=25);return n+`
^XZ`}).join("\n")}function a(e,t="Medication Instructions"){let r=Math.floor(68.21428571428571),n=[],i=[],l=0,o=1;function s(e,r){let n=`^XA
^CF0,25
^FO30,30^${t}${r>1?` (Cont. ${r})`:""}^FS
^FO30,60^GB955,3,3^FS
`,a=68;for(let t of e){for(let e of t)n+=`^FO30,${a}^FD${e}^FS
`,a+=20;a+=10}return n+"^XZ"}return e.forEach(e=>{let t=function(e){let t=e.split(" "),n=[],a="";for(let e of t)(a+" "+e).trim().length<=r?a=(a+" "+e).trim():(n.push(a),a=e);return a&&n.push(a),n}(function(e,t){let r=[e.medicationName,`${e.dose} ${e.doseUnits}`,e.frequency,e.duration,e.formulation,`(${e.prescribedBy})`].filter(Boolean).map(e=>e.replace(/[\\^]/g,""));return`${t}. ${r.join(" | ")}`}(e,o)),a=20*t.length+10;l+a>323&&(n.push(s(i,n.length+1)),i=[],l=0),i.push(t),l+=a,o++}),i.length&&n.push(s(i,n.length+1)),n.join("\n")}r.d(t,{B:()=>a,U:()=>n})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4447,6724,346,1658,485,7567,6621,1146],()=>r(62242));module.exports=n})();