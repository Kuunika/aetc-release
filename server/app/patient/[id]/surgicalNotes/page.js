(()=>{var e={};e.id=8914,e.ids=[8914],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10009:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(37413),i=a(9018);a(61120);var l=a(57416);function n(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.TF,{}),(0,s.jsx)(i.MG,{children:(0,s.jsx)(l.SurgicalNotesFlow,{})})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19194:(e,t,a)=>{"use strict";a.d(t,{q:()=>y});var s=a(60687);a(43210);var i=a(24857),l=a(68730),n=a(2351),r=a(7850),o=a(69612),d=a(27621),c=a(71953),u=a(12040),m=a(58706),h=a(109);let p=(0,h.Ay)(i.A)(({theme:e})=>({borderRadius:e.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:e.shadows[3],position:"relative"})),x=(0,h.Ay)(l.A)(({theme:e})=>({borderCollapse:"separate",borderSpacing:"0px 4px"})),b=(0,h.Ay)(n.A)(({theme:e})=>({fontWeight:500,padding:"12px 16px",borderBottom:"none",color:e.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"})),g=(0,h.Ay)(b)(({theme:e})=>({fontSize:"0.9rem",fontWeight:"bold",backgroundColor:e.palette.background.default,textTransform:"uppercase"})),v=(0,h.Ay)(r.A)(({theme:e})=>({backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:e.palette.grey[100]},boxShadow:e.shadows[1]})),j=(0,h.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1})),y=({columns:e,data:t,actions:a=!1,getSelectedRow:i,loading:l=!1})=>(0,s.jsx)(p,{children:(0,s.jsxs)(x,{stickyHeader:!0,children:[(0,s.jsx)(o.A,{children:(0,s.jsxs)(r.A,{children:[e.map((e,t)=>(0,s.jsx)(g,{children:e.label},t)),a&&(0,s.jsx)(g,{children:"Actions"})]})}),(0,s.jsx)(d.A,{children:l?(0,s.jsx)(r.A,{children:(0,s.jsx)(n.A,{colSpan:e.length+ +!!a,children:(0,s.jsx)(j,{children:(0,s.jsx)(c.A,{})})})}):t.map((t,l)=>(0,s.jsxs)(v,{onClick:()=>i&&i(t),children:[e.map((e,a)=>(0,s.jsx)(u.A,{title:t[e.field],arrow:!0,children:(0,s.jsx)(b,{children:t[e.field]})},a)),a&&(0,s.jsxs)(b,{children:[(0,s.jsx)(m.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,s.jsx)(m.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},l))})]})})},21820:e=>{"use strict";e.exports=require("os")},22862:(e,t,a)=>{"use strict";a.d(t,{SurgicalNotesFlow:()=>ep});var s=a(60687),i=a(43210),l=a.n(i),n=a(75018),r=a(61939),o=a(30485),d=a(42938),c=a(62116),u=a(76990),m=a(44504),h=a(62085),p=a(13923),x=a(63705);let b=[{id:d.W.FEELING_OF_A_MASS,label:"Feeling of a mass"},{id:d.W.DIFFICULTY_PAIN_ON_PASSING_STOOLS,label:"Difficulty/Pain on passing stools"},{id:d.W.PAIN,label:"Pain"},{id:d.W.NOT_PASSING_FLATUS,label:"Not passing flatus"},{id:d.W.PASSING_BLOODY_STOOLS,label:"Passing bloody stools"},{id:d.W.PASSING_MELENA,label:"Passing melena"},{id:d.W.NOT_PASSING_URINE,label:"Not passing urine"},{id:d.W.DIFFICULTY_PASSING_URINE,label:"Difficulty passing urine"},{id:d.W.PASSING_DEEP_YELLOW_URINE,label:"Passing deep yellow urine"},{id:d.W.PASSING_PUS_IN_URINE,label:"Passing pus in urine"},{id:d.W.NOT_PASSING_STOOLS,label:"Not passing stools"},{id:d.W.VOMITING,label:"Vomiting"},{id:d.W.VOMITING_BLOOD,label:"Vomiting Blood"},{id:d.W.DYSPHAGIA,label:"Dysphagia"},{id:d.W.ODYNOPHAGIA,label:"Odynophagia"},{id:d.W.ULCER_OR_WOUND,label:"Ulcer"},{id:d.W.YELLOWINGOFEYESORSKIN,label:"Yellowing of the eyes"},{id:d.W.BLEEDING,label:"Bleeding"},{id:d.W.SHORTNESS_OF_BREATH,label:"Shortness of breath"},{id:d.W.OTHER,label:"Other (Specify)"}],g={complaint:"",duration:0,duration_unit:"",otherComplaintSpecify:""},v=({name:e})=>(0,s.jsx)(h.D0,{name:e,render:({form:t})=>{let a=(0,h.O6)(t.errors,e);return(0,h.O6)(t.touched,e)&&a?a:null}}),j=o.Ik().shape({complaints:o.YO().of(o.Ik().shape({complaint:o.Yj().required("Complaint is required"),duration:o.ai().min(1,"Duration must be greater than 0").required("Duration is required"),duration_unit:o.Yj().required("Duration unit is required"),otherComplaintSpecify:o.Yj().nullable().when("complaint",{is:d.W.OTHER,then:e=>e.required("Please specify the other complaint")})})),historyOfPresentingComplaint:o.Yj().required("History is required")}),y=({onSubmit:e,onSkip:t})=>{let[a,l]=(0,i.useState)({}),{params:o}=(0,r.KU)(),{mutate:y}=(0,c.jM)(),[N,E]=(0,i.useState)(void 0),{data:S}=(0,u.iu)(o.id),{init:f,ServerTime:A}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(S){let e=S.find(e=>!e.date_stopped);e&&E(e)}},[S]);let I={complaints_name:e=>({name:`complaints[${e}].complaint`,label:"Presenting Complaint"}),complaints_duration:e=>({name:`complaints[${e}].duration`,label:"Duration"}),complaints_duration_units:e=>({name:`complaints[${e}].duration_unit`,label:"Unit"}),other_complaint_specify:e=>({name:`complaints[${e}].otherComplaintSpecify`,label:"Specify Other Complaint"})},_=async t=>{let a=A.getServerTimeString(),s=t.complaints.map(e=>{let t=e.complaint===d.W.OTHER;return{concept:e.complaint,value:t?e.otherComplaintSpecify:e.complaint,obsDatetime:a,groupMembers:[{concept:d.W.DURATION,value:`${e.duration} ${e.duration_unit}`,obsDatetime:a}]}}),i=[{concept:d.W.PRESENTING_COMPLAINTS,value:d.W.PRESENTING_COMPLAINTS,obsDatetime:a,groupMembers:s},{concept:d.W.PRESENTING_HISTORY,value:t.historyOfPresentingComplaint,obsDatetime:a}],l={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:N?.uuid,patient:o.id,encounterDatetime:a,obs:i};try{await y(l),e(t)}catch(e){console.error("Error submitting presenting complaints: ",e)}};return(0,s.jsx)(n.PD,{validationSchema:j,initialValues:{complaints:[g],historyOfPresentingComplaint:""},onSubmit:_,enableReinitialize:!0,submitButton:!0,submitButtonText:"Next",children:({values:e,setFieldValue:t})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.fP,{getValues:l}),(0,s.jsx)(n.GE,{direction:"row",children:(0,s.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:[(0,s.jsx)(n.kI,{title:"Presenting complaints",children:(0,s.jsx)(h.ED,{name:"complaints",children:({})=>(0,s.jsx)(x.A,{items:e.complaints,setItems:e=>t("complaints",e),newItem:g,renderFields:(e,t)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:{display:"flex-column",width:"100%"},children:[(0,s.jsx)(n.el,{name:I.complaints_name(t).name,label:I.complaints_name(t).label,options:b,multiple:!1,sx:{width:"100%"}}),(0,s.jsx)(n.Th,{color:"red",variant:"subtitle2",children:(0,s.jsx)(v,{name:`complaints[${t}].complaint`})}),(0,s.jsx)(n.pj,{id:I.complaints_duration(t).name,name:I.complaints_duration(t).name,unitName:I.complaints_duration_units(t).name,label:I.complaints_duration(t).label,sx:{width:"50%"},unitOptions:d.bH,placeholder:"e.g., 3",inputIcon:(0,s.jsx)(p.YmN,{})}),(0,s.jsx)(n.Th,{color:"red",variant:"subtitle2",children:(0,s.jsx)(v,{name:`complaints[${t}].duration`})}),e.complaint===d.W.OTHER&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A8,{id:I.other_complaint_specify(t).name,label:I.other_complaint_specify(t).label,name:I.other_complaint_specify(t).name,placeholder:"Specify the complaint",sx:{width:"100%",mt:1}}),(0,s.jsx)(n.Th,{color:"red",variant:"subtitle2",children:(0,s.jsx)(v,{name:`complaints[${t}].otherComplaintSpecify`})})]})]})})})})}),(0,s.jsx)("br",{}),(0,s.jsx)(n.A8,{sx:{width:"100%"},id:"historyOfPresentingComplaint",name:"historyOfPresentingComplaint",label:"History of Presenting Complaint",multiline:!0,rows:5,placeholder:"Describe the history of the presenting complaint..."}),(0,s.jsx)(n.Th,{color:"red",variant:"subtitle2",children:(0,s.jsx)(v,{name:"historyOfPresentingComplaint"})})]})})]})})},N="NONE",E=[{value:N,label:"None"},{value:d.W.HIV,label:"HIV"},{value:d.W.TUBERCULOSIS,label:"Tuberculosis (TB)"},{value:d.W.CHRONIC_OBSTRUCTIVE_PULMONARY_DISEASE,label:"Chronic Obstructive Pulmonary Disease (COPD)"},{value:d.W.DIABETES_MELLITUS,label:"Diabetes Mellitus"},{value:d.W.ASTHMA,label:"Asthma"},{value:d.W.EPILEPSY,label:"Epilepsy"},{value:d.W.PREVIOUS_STROKE,label:"Previous stroke"},{value:d.W.BLEEDING_DISORDERS,label:"Bleeding disorders"},{value:d.W.OTHER_CONDITION,label:"Other (Specify)"}],S=o.Ik().shape({pastMedicalHistory:o.YO().of(o.Ik().shape({key:o.Yj().required(),value:o.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"Select at least one option"),otherConditionDetails:o.Yj().when("pastMedicalHistory",{is:e=>e.some(e=>e.key===d.W.OTHER_CONDITION&&e.value),then:e=>e.required("Please specify the other condition"),otherwise:e=>e.notRequired()})}),f=()=>{let{values:e,setFieldValue:t}=(0,h.j7)(),a=l().useRef(!1);return(0,i.useEffect)(()=>{if(!e.pastMedicalHistory||0===e.pastMedicalHistory.length)return;if(a.current){a.current=!1;return}let s=e.pastMedicalHistory,i=s.find(e=>e.key===N),l=s.filter(e=>e.key!==N&&e.value);i?.value&&l.length>0&&(console.log("None is checked with others - unchecking all others"),a.current=!0,t("pastMedicalHistory",s.map(e=>e.key===N?e:{...e,value:!1})),t("otherConditionDetails",""),t("onTreatment",{}),t("medications",{}))},[e.pastMedicalHistory]),null},A=({condition:e,isNoneSelected:t,selectedConditions:a,formik:i})=>{let l=t&&e.value!==N,r=a.includes(e.value);return(0,s.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,s.jsx)(n.Z3,{name:"pastMedicalHistory",allowFilter:!1,options:[{value:e.value,label:e.label}],disabled:l}),e.value===d.W.OTHER_CONDITION&&r&&(0,s.jsx)("div",{style:{marginLeft:"20px",marginTop:"5px"},children:(0,s.jsx)(n.A8,{name:"otherConditionDetails",label:"Specify other condition",placeholder:"Enter other medical condition",type:"text",id:"otherConditionDetails"})}),r&&e.value!==N&&(0,s.jsxs)("div",{style:{marginLeft:"20px",marginTop:"5px"},children:[(0,s.jsx)(n.b1,{name:`onTreatment.${e.value}`,label:`Are you on treatment for ${e.label}?`,options:[{value:d.W.YES,label:"Yes"},{value:d.W.NO,label:"No"}],getValue:t=>i.setFieldValue(`onTreatment.${e.value}`,t)}),i.values.onTreatment[e.value]===d.W.YES&&(0,s.jsxs)("div",{style:{marginLeft:"20px",marginTop:"10px"},children:[(0,s.jsx)("h5",{children:"Medication Details"}),(0,s.jsx)(n.A8,{name:`medications.${e.value}.currentMedication`,label:"Current Medication",type:"text",id:`med-${e.value}`}),(0,s.jsx)(n.A8,{name:`medications.${e.value}.dose`,label:"Dose",type:"text",id:`dose-${e.value}`}),(0,s.jsx)(n.A8,{name:`medications.${e.value}.reason`,label:"Reason for Taking",type:"text",id:`reason-${e.value}`}),(0,s.jsx)(n.A8,{name:`medications.${e.value}.duration`,label:"How long have you been taking it?",type:"text",id:`duration-${e.value}`})]})]})]},e.value)},I=({onSubmit:e,onSkip:t})=>{let[a,l]=(0,i.useState)({}),[o,h]=(0,i.useState)([]),{params:p}=(0,r.KU)(),{mutate:x}=(0,c.jM)(),[b,g]=(0,i.useState)(void 0),{data:v}=(0,u.iu)(p.id),{init:j,ServerTime:y}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(v){let e=v.find(e=>!e.date_stopped);e&&g(e)}},[v]),(0,i.useEffect)(()=>{a.pastMedicalHistory&&h(a.pastMedicalHistory.filter(e=>e.value).map(e=>e.key))},[a.pastMedicalHistory]);let I=async t=>{let a=y.getServerTimeString(),s=(t.pastMedicalHistory||[]).filter(e=>e.value).map(e=>e.key);if(console.log("Selected conditions:",s),s.includes(N)){let s={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:b?.uuid,patient:p.id,encounterDatetime:a,obs:[{concept:d.W.CONDITION,value:"None",obsDatetime:a}]};try{await x(s),console.log("No past medical history submitted successfully!"),e(t)}catch(e){console.error("Error submitting past medical history:",e)}return}let i=s.map(e=>{let s=t.onTreatment[e]===d.W.YES,i=e;return e===d.W.OTHER_CONDITION&&t.otherConditionDetails&&(i=`Other: ${t.otherConditionDetails}`),{concept:d.W.CONDITION,value:i,obsDatetime:a,groupMembers:[{concept:d.W.ON_TREATMENT,value:t.onTreatment[e]||d.W.NO,obsDatetime:a},...s?[{concept:d.W.MEDICATION,value:t.medications?.[e]?.currentMedication||"",obsDatetime:a},{concept:d.W.MEDICATION_DOSE,value:t.medications?.[e]?.dose||"",obsDatetime:a},{concept:d.W.REASON_FOR_REQUEST,value:t.medications?.[e]?.reason||"",obsDatetime:a},{concept:d.W.MEDICATION_DURATION,value:t.medications?.[e]?.duration||"",obsDatetime:a}]:[]]}}),l={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:b?.uuid,patient:p.id,encounterDatetime:a,obs:i};try{await x(l),console.log("Past Medical History submitted successfully!"),e(t)}catch(e){console.error("Error submitting Past Medical History: ",e)}};return(0,s.jsx)(n.PD,{validationSchema:S,initialValues:{pastMedicalHistory:[],onTreatment:{},medications:{},otherConditionDetails:""},onSubmit:I,children:e=>{let t=e.values.pastMedicalHistory?.some(e=>e.key===N&&e.value);return(0,s.jsxs)(n.GE,{direction:"column",children:[(0,s.jsx)(n.fP,{getValues:l}),(0,s.jsx)(f,{}),(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsx)(n.kI,{title:"Past Medical History",children:E.map(a=>(0,s.jsx)(A,{condition:a,isNoneSelected:t,selectedConditions:o,formik:e},a.value))})})]})}})},_=[{value:d.W.FAMILY_HISTORY_ASTHMA,label:"Asthma"},{value:d.W.FAMILY_HISTORY_DIABETES_MELLITUS,label:"Diabetes"},{value:d.W.FAMILY_HISTORY_EPILEPSY,label:"Epilepsy"},{value:d.W.FAMILY_HISTORY_HYPERTENSION,label:"Hypertension"},{value:d.W.FAMILY_HISTORY_CANCER,label:"Cancer"}],P=o.Ik().shape({familyHistory:o.YO().min(1,"Please select at least one option"),cancerType:o.Yj().when("familyHistory",{is:e=>e?.some(e=>e.key===d.W.FAMILY_HISTORY_CANCER&&e.value),then:e=>e.required("Please specify the type of cancer"),otherwise:e=>e.notRequired()})}),T=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,p]=(0,i.useState)(void 0),{data:x}=(0,u.iu)(a.id),{init:b,ServerTime:g}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let v=async t=>{let s=g.getServerTimeString(),i=(t.familyHistory||[]).filter(e=>e.value).map(e=>e.key),n=i.filter(e=>e!==d.W.FAMILY_HISTORY_CANCER).map(e=>{let t=_.find(t=>t.value===e);return{concept:e,value:t?t.label:"Unknown",obsDatetime:s}});i.includes(d.W.FAMILY_HISTORY_CANCER)&&t.cancerType&&n.push({concept:d.W.FAMILY_HISTORY_CANCER,value:t.cancerType,obsDatetime:s});let r={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:s,obs:n};try{await l(r),e(t)}catch(e){console.error("Error submitting Family History:",e)}};return(0,s.jsx)(n.PD,{validationSchema:P,initialValues:{familyHistory:[],cancerType:""},onSubmit:v,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)(n.kI,{title:"Family History",children:[(0,s.jsx)(n.Z3,{name:"familyHistory",allowFilter:!1,options:_}),(0,s.jsx)(()=>{let{values:e}=(0,h.j7)();return e.familyHistory?.some(e=>e.key===d.W.FAMILY_HISTORY_CANCER&&e.value)?(0,s.jsx)(n.A8,{name:"cancerType",label:"Type of Cancer",placeholder:"Specify cancer type",id:"cancerType"}):null},{})]})})})})},O=o.Ik().shape({hasSurgicalHistory:o.Yj().required("Please select Yes or No"),surgicalDetails:o.Yj().when("hasSurgicalHistory",{is:d.W.YES,then:e=>e.required("Please enter surgical details"),otherwise:e=>e.notRequired()})}),R=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,p]=(0,i.useState)(void 0),{data:x}=(0,u.iu)(a.id),{init:b,ServerTime:g}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let v=async t=>{let s=g.getServerTimeString(),i=[{concept:d.W.SURGICAL_PROCEDURE,value:t.hasSurgicalHistory,obsDatetime:s}];t.hasSurgicalHistory===d.W.YES&&t.surgicalDetails&&i.push({concept:d.W.PROCEDURES,value:t.surgicalDetails,obsDatetime:s});let n={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:s,obs:i};try{await l(n),e(t)}catch(e){console.error("Error submitting surgical history:",e)}};return(0,s.jsx)(n.PD,{validationSchema:O,initialValues:{hasSurgicalHistory:"",surgicalDetails:""},onSubmit:v,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)(n.kI,{title:"Any history of previous surgery or procedures?",children:[(0,s.jsx)(n.b1,{name:"hasSurgicalHistory",label:"Has Surgical History",options:[{value:d.W.YES,label:"Yes"},{value:d.W.NO,label:"No"}]}),(0,s.jsx)(()=>{let{values:e}=(0,h.j7)(),[t,a]=(0,h.Mt)("surgicalDetails");return e.hasSurgicalHistory!==d.W.YES?null:(0,s.jsx)(n.A8,{...t,id:"surgicalDetails",sx:{width:"100%"},name:"surgicalDetails",label:"Enter previous procedures and surgeries (Month & Year)",placeholder:"E.g., Appendectomy - January 2020",multiline:!0,rows:5})},{})]})})})})},D="NONE",W=[{value:D,label:"None"},{value:d.W.RECREATIONAL_DRUG,label:"Drugs"},{value:d.W.FOOD_ALLERGY,label:"Food"},{value:d.W.SKIN_PREP,label:"Skin prep"},{value:d.W.LATEX_ALLERGY,label:"Latex"},{value:d.W.MEDICATION_ALLERGY,label:"Medications"},{value:d.W.OTHER_CONDITION,label:"Other (Specify)"}],C=o.Ik().shape({allergies:o.YO().min(1,"Please select at least one option"),drugsDetails:o.Yj().when("allergies",{is:e=>e.some(e=>e.key===d.W.RECREATIONAL_DRUG&&e.value),then:e=>e.required("Specify drug allergy"),otherwise:e=>e.notRequired()}),foodDetails:o.Yj().when("allergies",{is:e=>e.some(e=>e.key===d.W.FOOD_ALLERGY&&e.value),then:e=>e.required("Specify food allergy"),otherwise:e=>e.notRequired()}),skinPrepDetails:o.Yj().when("allergies",{is:e=>e.some(e=>e.key===d.W.SKIN_PREP&&e.value),then:e=>e.required("Specify skin prep allergy"),otherwise:e=>e.notRequired()}),latexDetails:o.Yj().when("allergies",{is:e=>e.some(e=>e.key===d.W.LATEX_ALLERGY&&e.value),then:e=>e.required("Specify latex allergy"),otherwise:e=>e.notRequired()}),medicationsDetails:o.Yj().when("allergies",{is:e=>e.some(e=>e.key===d.W.MEDICATION_ALLERGY&&e.value),then:e=>e.required("Specify medication allergy"),otherwise:e=>e.notRequired()}),otherDetails:o.Yj().when("allergies",{is:e=>e.some(e=>e.key===d.W.OTHER_CONDITION&&e.value),then:e=>e.required("Specify other allergy"),otherwise:e=>e.notRequired()})}),M=()=>{let{values:e,setFieldValue:t}=(0,h.j7)(),a=l().useRef(!1);return(0,i.useEffect)(()=>{if(!e.allergies||0===e.allergies.length)return;if(a.current){a.current=!1;return}let s=e.allergies,i=s.find(e=>e.key===D),l=s.filter(e=>e.key!==D&&e.value);if(i?.value&&l.length>0)console.log("None is checked with others - unchecking all others"),a.current=!0,t("allergies",s.map(e=>e.key===D?e:{...e,value:!1})),t("drugsDetails",""),t("foodDetails",""),t("skinPrepDetails",""),t("latexDetails",""),t("medicationsDetails",""),t("otherDetails","");else if(!i?.value&&l.length>0&&s.some(e=>e.key===D)&&i?.value===!1)return},[e.allergies]),null},k=({allergy:e,isNoneSelected:t})=>{let{values:a}=(0,h.j7)(),i=a.allergies?.some(t=>t.key===e.value&&t.value),l=t&&e.value!==D,r="";return e.value===d.W.RECREATIONAL_DRUG?r="drugsDetails":e.value===d.W.FOOD_ALLERGY?r="foodDetails":e.value===d.W.SKIN_PREP?r="skinPrepDetails":e.value===d.W.LATEX_ALLERGY?r="latexDetails":e.value===d.W.MEDICATION_ALLERGY?r="medicationsDetails":e.value===d.W.OTHER_CONDITION&&(r="otherDetails"),(0,s.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,s.jsx)(n.Z3,{name:"allergies",allowFilter:!1,options:[e],disabled:l}),i&&r&&(0,s.jsx)("div",{style:{marginLeft:"20px",marginTop:"5px"},children:(0,s.jsx)(n.A8,{name:r,label:`Specify ${e.label.toLowerCase()} allergy`,placeholder:`Enter ${e.label.toLowerCase()} allergy details`,id:r})})]},e.value)},w=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,h]=(0,i.useState)(void 0),{data:p}=(0,u.iu)(a.id),{init:x,ServerTime:b}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(p){let e=p.find(e=>!e.date_stopped);e&&h(e)}},[p]);let g=async t=>{let s=b.getServerTimeString(),i=(t.allergies||[]).filter(e=>e.value).map(e=>e.key);if(console.log("Selected allergies:",i),i.includes(D)){let i={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:s,obs:[{concept:d.W.ALLERGIC_REACTION,value:"None",obsDatetime:s}]};try{await l(i),console.log("No allergies submitted successfully!"),e(t)}catch(e){console.error("Error submitting allergies:",e)}return}let n=[];i.forEach(e=>{let a="",i=W.find(t=>t.value===e),l=i?i.label:"Unknown";e===d.W.RECREATIONAL_DRUG?a=`${l}: ${t.drugsDetails||""}`:e===d.W.FOOD_ALLERGY?a=`${l}: ${t.foodDetails||""}`:e===d.W.SKIN_PREP?a=`${l}: ${t.skinPrepDetails||""}`:e===d.W.LATEX_ALLERGY?a=`${l}: ${t.latexDetails||""}`:e===d.W.MEDICATION_ALLERGY?a=`${l}: ${t.medicationsDetails||""}`:e===d.W.OTHER_CONDITION&&(a=`${l}: ${t.otherDetails||""}`),n.push({concept:d.W.ALLERGIC_REACTION,value:a,obsDatetime:s})}),console.log("Submitting observations:",n);let r={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:s,obs:n};try{await l(r),console.log("Allergies submitted successfully!"),e(t)}catch(e){console.error("Error submitting Allergies:",e)}};return(0,s.jsx)(n.PD,{validationSchema:C,initialValues:{allergies:[],drugsDetails:"",foodDetails:"",skinPrepDetails:"",latexDetails:"",medicationsDetails:"",otherDetails:""},onSubmit:g,children:({values:e})=>{let t=e.allergies?.some(e=>e.key===D&&e.value);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M,{}),(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsx)(n.kI,{title:"Allergies and Adverse Reactions",children:W.map(e=>(0,s.jsx)(k,{allergy:e,isNoneSelected:t},e.value))})})})]})}})},L=o.Ik().shape({doYouSmoke:o.Yj().required("Please select an option"),cigarettesPerDay:o.Yj().when("doYouSmoke",{is:"Yes",then:e=>e.required("Please enter how many you smoke per day"),otherwise:e=>e.notRequired()}),smokingHistory:o.Yj().when("doYouSmoke",{is:"No",then:e=>e.required("Please select if you quit or never smoked"),otherwise:e=>e.notRequired()}),alcoholIntake:o.Yj().required("Please enter daily alcohol intake"),recreationalDrugs:o.Yj().required("Please select if you use recreational drugs")}),H=({onSubmit:e,onSkip:t})=>{let[a,l]=(0,i.useState)(""),{params:o}=(0,r.KU)(),{mutate:h}=(0,c.jM)(),[p,x]=(0,i.useState)(void 0),{data:b}=(0,u.iu)(o.id),{init:g,ServerTime:v}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(b){let e=b.find(e=>!e.date_stopped);e&&x(e)}},[b]);let j=async t=>{let a=v.getServerTimeString(),s=[{concept:d.W.PATIENT_SMOKES,value:t.doYouSmoke,obsDatetime:a,groupMembers:"Yes"===t.doYouSmoke?[{concept:d.W.EXPECTED_DURATION,value:t.cigarettesPerDay,obsDatetime:a}]:[]},{concept:d.W.ALCOHOL_INTAKE,value:t.alcoholIntake,obsDatetime:a},{concept:d.W.RECREATIONAL_DRUG,value:t.recreationalDrugs,obsDatetime:a}],i={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:p?.uuid,patient:o.id,encounterDatetime:a,obs:s};try{await h(i),console.log("Social History submitted successfully!"),e(t)}catch(e){console.error("Error submitting Social History: ",e)}};return(0,s.jsx)(n.PD,{validationSchema:L,initialValues:{doYouSmoke:"",cigarettesPerDay:"",smokingHistory:"",alcoholIntake:"",recreationalDrugs:""},onSubmit:j,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)(n.kI,{title:"Social History",children:[(0,s.jsx)(n.b1,{name:"doYouSmoke",label:"Do you smoke?",options:[{value:d.W.YES,label:"Yes"},{value:d.W.NO,label:"No"}],getValue:e=>l(e)}),"Yes"===a&&(0,s.jsx)(n.A8,{id:"cigarettesPerDay",name:"cigarettesPerDay",label:"How many cigarettes per day?"}),(0,s.jsx)("br",{}),"No"===a&&(0,s.jsx)(n.b1,{name:"smokingHistory",label:"If not, did you quit over a month ago or never smoked?",options:[{value:"Quit over a month ago",label:"Quit over a month ago"},{value:"Never smoked",label:"Never smoked"}]}),(0,s.jsx)(n.A8,{id:"alcoholIntake",sx:{width:"100%"},name:"alcoholIntake",label:"What is your daily alcohol intake?"}),(0,s.jsx)(n.b1,{name:"recreationalDrugs",label:"Do you use recreational drugs?",options:[{value:d.W.YES,label:"Yes"},{value:d.W.NO,label:"No"}]})]})})})})},Y=o.Ik().shape({areYouPregnant:o.Yj().required("Please select an option"),lnmp:o.Yj().when("areYouPregnant",{is:"Yes",then:e=>e.required("Please enter the Last Normal Menstrual Period"),otherwise:e=>e.notRequired()}),gestationalAge:o.Yj().when("areYouPregnant",{is:"Yes",then:e=>e.required("Gestational age is required"),otherwise:e=>e.notRequired()}),parity:o.Yj().when("areYouPregnant",{is:"Yes",then:e=>e.required("Please enter the parity"),otherwise:e=>e.notRequired()})}),F=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,h]=(0,i.useState)(void 0),{data:p}=(0,u.iu)(a.id),{init:x,ServerTime:b}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(p){let e=p.find(e=>!e.date_stopped);e&&h(e)}},[p]);let g=async t=>{let s=b.getServerTimeString(),i=[{concept:d.W.PREGNANCY_TEST,value:t.areYouPregnant,obsDatetime:s},..."Yes"===t.areYouPregnant?[{concept:d.W.LNMP,value:t.lnmp,obsDatetime:s},{concept:d.W.GESTATIONAL_AGE,value:t.gestationalAge,obsDatetime:s},{concept:d.W.PARITY,value:t.parity,obsDatetime:s}]:[]],n={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:s,obs:i};try{await l(n),console.log("Gynae Obstetric History submitted successfully!"),e(t)}catch(e){console.error("Error submitting Gynae Obstetric History: ",e)}};return(0,s.jsx)(n.PD,{validationSchema:Y,initialValues:{areYouPregnant:"",lnmp:"",gestationalAge:"",parity:""},onSubmit:g,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)(n.kI,{title:"Gynae/Obstetric History (Only for Females)",children:[(0,s.jsx)(n.b1,{name:"areYouPregnant",label:"Are you pregnant?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),(0,s.jsx)(G,{})]})})})})},G=()=>{let{values:e}=(0,h.j7)();return"Yes"!==e.areYouPregnant?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.bZ,{name:"lnmp",label:"Last Normal Menstrual Period (LNMP)"}),(0,s.jsx)(n.A8,{name:"gestationalAge",label:"Gestational Age (weeks)",id:""}),(0,s.jsx)(n.A8,{id:"parity",name:"parity",label:"Parity"})]})},U={general:[{value:d.W.FEVER,label:"Fever"},{value:d.W.LYMPHADENOPATHY,label:"Lymphadenopathy"},{value:d.W.NIGHT_SWEATS,label:"Night sweats"},{value:d.W.FATIGUE,label:"Fatigue"},{value:d.W.WEIGHT_LOSS,label:"Weight loss"}],ent:[{value:d.W.EYE_PAIN,label:"Eye pain"},{value:d.W.RHINORRHEA,label:"Rhinorrhea"},{value:d.W.TINNITUS,label:"Tinnitus"},{value:d.W.EPISTAXIS,label:"Epistaxis"},{value:d.W.SINUS_PAIN,label:"Sinus pain"},{value:d.W.ORAL_LESIONS,label:"Oral lesions"},{value:d.W.DYSPHAGIA,label:"Dysphagia"},{value:d.W.ODYNOPHAGIA,label:"Odynophagia"}],endocrine:[{value:d.W.HEAT_TOLERANCE,label:"Heat tolerance"},{value:d.W.ABNORMAL_HAIR_GROWTH,label:"Abnormal hair growth"},{value:d.W.COLD_TOLERANCE,label:"Cold tolerance"},{value:d.W.POLYURIA,label:"Polyuria"},{value:d.W.POLYDIPSIA,label:"Polydipsia"}],cardiac:[{value:d.W.BLEEDING_TENDENCIES,label:"Bleeding tendencies"},{value:d.W.CHEST_PAIN,label:"Chest pain"},{value:d.W.HEART_PALPITATIONS,label:"Palpitations"},{value:d.W.OEDEMA,label:"Oedema"},{value:d.W.CYANOSIS,label:"Cyanosis"},{value:d.W.CLAUDICATION,label:"Claudication"},{value:d.W.ORTHOPNOEA,label:"Orthopnoea"},{value:d.W.PAROXYSMAL_NOCTURNAL_DYSPNOEA,label:"Paroxysmal nocturnal dyspnoea"}],respiratory:[{value:d.W.SHORTNESS_OF_BREATH,label:"Shortness Of Breath"},{value:d.W.DYSPNOEA_ON_EXERTION,label:"Dyspnoea on exertion"},{value:d.W.DYSPNOEA_AT_REST,label:"Dyspnoea at rest"},{value:d.W.COUGH,label:"Cough"},{value:d.W.HAEMOPTYSIS,label:"Haemoptysis"},{value:d.W.WHEEZING,label:"Wheezing"}],gastrointestinal:[{value:d.W.NAUSEA,label:"Nausea"},{value:d.W.VOMITING,label:"Vomiting"},{value:d.W.MELENA,label:"Melena"},{value:d.W.HAEMATOCHEZIA,label:"Haematochezia"},{value:d.W.CHANGE_IN_APPETITE,label:"Change in appetite"},{value:d.W.ABDOMINALPAINS,label:"Abdominal pain"},{value:d.W.CHANGE_IN_BOWEL_HABIT,label:"Change in bowel habit"},{value:d.W.HEARTBURN,label:"Heartburn"}],genitourinary:[{value:d.W.DYSURIA,label:"Dysuria"},{value:d.W.URGENCY,label:"Urgency"},{value:d.W.INCONTINENCE,label:"Incontinence"},{value:d.W.HAEMATURIA,label:"Haematuria"},{value:d.W.PYURIA,label:"Pyuria"},{value:d.W.SEXUALLY_TRANSMITTED_INFECTION,label:"Sexually Transmitted Infection (STI)"},{value:d.W.ABNORMAL_VAGINAL_DISCHARGE,label:"Abnormal Vaginal Discharge"},{value:d.W.DYSMENORRHEA,label:"Dysmenorrhea"},{value:d.W.PELVIC_PAIN,label:"Pelvic pain"}],musculoskeletal:[{value:d.W.JOINT_PAIN,label:"Joint Pain"},{value:d.W.SWELLING_JOINT,label:"Joint Swelling"},{value:d.W.PAIN_BACK,label:"Back Pain"}],neurologic:[{value:d.W.HEADACHE,label:"Headache"},{value:d.W.CHANGE_IN_SMELL,label:"Change in smell"},{value:d.W.CHANGE_IN_TASTE,label:"Change in taste"},{value:d.W.PARAESTHESIAS,label:"Paraesthesias"},{value:d.W.MUSCLE_WEAKNESS,label:"Muscle weakness"},{value:d.W.ATAXIA,label:"Ataxia"},{value:d.W.CHANGE_IN_SPEECH,label:"Change in speech"}],psychiatric:[{value:d.W.DEPRESSION,label:"Depression"},{value:d.W.ANXIETY,label:"Anxiety"},{value:d.W.HALLUCINATIONS,label:"Hallucinations"},{value:d.W.MANIA,label:"Mania"},{value:d.W.SUICIDAL_THOUGHTS,label:"Suicidal thoughts"}]},q={general:d.W.REVIEW_OF_SYSTEMS_GENERAL,ent:d.W.REVIEW_OF_SYSTEMS_ENT,endocrine:d.W.REVIEW_OF_SYSTEMS__ENDOCRINE,cardiac:d.W.REVIEW_OF_SYSTEMS_CARDIAC,respiratory:d.W.SEVERE_RESPIRATORY,gastrointestinal:d.W.REVIEW_OF_SYSTEMS_GASTROINTESTINAL,genitourinary:d.W.REVIEW_OF_SYSTEMS_GENITOURINARY,musculoskeletal:d.W.REVIEW_OF_SYSTEMS_MUSCULOSKELETAL,neurologic:d.W.REVIEW_OF_SYSTEMS_NEUROLOGIC,psychiatric:d.W.REVIEW_OF_SYSTEMS_PSYCHIATRIC},B=o.Ik({}),$=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,h]=(0,i.useState)(void 0),{data:p}=(0,u.iu)(a.id),{init:x,ServerTime:b}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(p){let e=p.find(e=>!e.date_stopped);e&&h(e)}},[p]);let g=async t=>{let s=b.getServerTimeString();if(!a.id||!o)return void console.error("Missing patient ID or active visit");console.log("Form values:",t);let i=[];for(let e in U){let a=t[e]||[];if(!a.length)continue;let l=a.filter(e=>!0===e.value).map(e=>e.key);if(!l.length)continue;let n=q[e],r=l.map(t=>{let a=U[e].find(e=>e.value===t);return{concept:t,value:a?.label||t,obsDatetime:s}});r.length>0&&i.push({concept:n,value:n,obsDatetime:s,groupMembers:r})}if(console.log("Final obs structure:",i),0===i.length){console.warn("No systems selected, moving to next step anyway"),e(t);return}let n={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,patient:a.id,encounterDatetime:s,visit:o.uuid,obs:i};try{console.log("Submitting payload:",n),await l(n),e(t)}catch(e){console.error("Error submitting Review of Systems:",e)}};return(0,s.jsx)(n.PD,{initialValues:{general:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]},validationSchema:B,onSubmit:g,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsx)(n.kI,{title:"Review of Systems",children:Object.entries(U).map(([e,t])=>(0,s.jsxs)("div",{style:{marginBottom:"2ch"},children:[(0,s.jsx)("h5",{style:{textTransform:"capitalize"},children:e.replace(/_/g," ")}),(0,s.jsx)(n.Z3,{name:e,allowFilter:!1,options:t.map(e=>({key:e.value,value:e.value,label:e.label}))})]},e))})})})})},V={general:[{value:d.W.SEVERE_PAIN,label:"In Pain"},{value:d.W.COMFORTABLE,label:"Comfortable"},{value:d.W.ILL,label:"Ill"},{value:d.W.FIT_FOR_AGE,label:"Fit for age"}],eyes:[{value:d.W.PALLOR,label:"Pallor"},{value:d.W.JAUNDICE,label:"Jaundice"},{value:d.W.NONE,label:"None"}],mouth:[{value:d.W.CANDIDA,label:"Candida"},{value:d.W.KAPOSI_SARCOMA,label:"Kaposi's Sarcoma (KS)"},{value:d.W.HYDRATION,label:"Hydration"}],neck:[{value:d.W.NODES,label:"Nodes"},{value:d.W.SUBMENTAL,label:"Submental"},{value:d.W.EPITHROCHLEAR,label:"Epithrochlear"}],endocrine:[{value:d.W.BREAST,label:"Breast"},{value:d.W.THYROID,label:"Thyroid"}]},K={motorResponse:[{value:d.W.NO_MOVEMENT,label:"No movement"},{value:d.W.ABNORMAL_EXTENSION,label:"Abnormal extension (decerebrate posture)"},{value:d.W.ABNORMAL_FLEXION,label:"Abnormal flexion (decorticate posture)"},{value:d.W.FLEXION_WITHDRAWAL_FROM_PAINFUL_STIMULI,label:"Flexion/Withdrawal from painful stimuli"},{value:d.W.MOVES_TO_LOCALIZE_PAIN,label:"Moves to localize pain"},{value:d.W.OBEYS_COMMANDS,label:"Obeys commands"}],verbalResponse:[{value:d.W.NO_SOUND,label:"No sound"},{value:d.W.INCOMPREHENSIBLE_SOUNDS,label:"Incomprehensible sounds"},{value:d.W.INAPPROPRIATE_WORDS,label:"Inappropriate words"},{value:d.W.CONFUSED_AND_DISORIENTED,label:"Confused and disoriented, but able to answer questions"},{value:d.W.ORIENTED_TO_TIME,label:"Oriented to time, person, and place, converses normally"}],eyeResponse:[{value:d.W.DOES_NOT_OPEN_EYES,label:"Does not open eyes"},{value:d.W.OPENS_EYES_IN_RESPONSE_TO_PAIN,label:"Opens eyes in response to pain"},{value:d.W.OPENS_EYES_IN_RESPONSE_TO_VOICE,label:"Opens eyes in response to voice"},{value:d.W.OPENS_EYES_SPONTANEOUSLY,label:"Opens eyes spontaneously"}]},X=o.Ik({}),z=({onSubmit:e,onSkip:t})=>{let{gender:a}=(0,r.gd)(),{params:l}=(0,r.KU)(),{mutate:o}=(0,c.jM)(),[h,p]=(0,i.useState)(void 0),{data:x}=(0,u.iu)(l.id),{init:b,ServerTime:g}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let v=async t=>{if(!h)return void console.error("No active visit found for the patient.");let a=g.getServerTimeString(),s=(e,t)=>({concept:e,value:t,obsDatetime:a}),i=[s(d.W.GENERAL_CONDITION,t.general),s(d.W.TEMPERATURE,t.temperature),s(d.W.PULSE_RATE,t.pulse),s(d.W.BLOOD_PRESSURE_MEASURED,t.bloodPressure),s(d.W.RESPIRATORY_RATE,t.respiratoryRate),s(d.W.EYES,t.eyes),s(d.W.MOUTH,t.mouth),s(d.W.NECK,t.neck),s(d.W.CHEST_EXAMINATION,t.chest),s(d.W.ENDOCRINE_EXAMINATION,t.endocrine),s(d.W.ABDOMINAL_EXAMINATION,t.abdomen),s(d.W.MOTOR_RESPONSE,t.motorResponse),s(d.W.VERBAL_RESPONSE,t.verbalResponse),s(d.W.EYE_OPENING_RESPONSE,t.eyeResponse),s(d.W.CRANIAL_ERVES,t.cranialNerves),s(d.W.GROSS_MOTOR,t.grossMotor),s(d.W.SENSATION,t.sensation),s(d.W.PULSATIONS,t.pulsations),s(d.W.RECTAL_EXAMINATION,t.rectalExamination),s(d.W.EXTREMITIES,t.extremities),s(d.W.VAGINAL_EXAMINATION,t.vaginalExamination)].filter(e=>e.value&&""!==e.value),n={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,patient:l.id,visit:h.uuid,encounterDatetime:a,obs:i};try{await o(n),console.log("Physical Examination submitted successfully!"),e(t)}catch(e){console.error("Error submitting Physical Examination:",e)}};return(0,s.jsx)(n.PD,{initialValues:{general:"",temperature:"",pulse:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdomen:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:"",extremities:"",vaginalExamination:""},validationSchema:X,onSubmit:v,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)(n.kI,{title:"Physical Examination",children:[(0,s.jsx)(n.kI,{title:"General Condition",children:(0,s.jsx)(n.b1,{name:"general",options:V.general,label:""})}),(0,s.jsxs)(n.kI,{title:"Vitals",children:[(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"temperature",label:"Temperature",type:"text",id:"",unitOfMeasure:"\xb0C"}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"pulse",label:"Pulse",type:"text",id:"",unitOfMeasure:"bpm"}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"bloodPressure",label:"Blood Pressure (BP)",type:"text",id:"",unitOfMeasure:"mmHg"}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"respiratoryRate",label:"Respiratory Rate",type:"text",id:"",unitOfMeasure:"bs/m"})]}),(0,s.jsx)(n.kI,{title:"Eyes",children:(0,s.jsx)(n.b1,{name:"eyes",options:V.eyes,label:""})}),(0,s.jsx)(n.kI,{title:"Mouth",children:(0,s.jsx)(n.b1,{name:"mouth",options:V.mouth,label:""})}),(0,s.jsxs)(n.kI,{title:"Neck",children:[(0,s.jsx)(n.b1,{name:"neck",options:V.neck,label:""})," "]}),(0,s.jsx)(n.kI,{title:"Chest Examination",children:(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"chest",label:"Chest",type:"text",id:""})}),(0,s.jsx)(n.kI,{title:"Endocrine Examination",children:(0,s.jsx)(n.b1,{name:"endocrine",options:V.endocrine,label:""})}),(0,s.jsx)(n.kI,{title:"Abdominal Examination",children:(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"abdomen",label:"Abdomen",type:"text",id:""})}),(0,s.jsxs)(n.kI,{title:"Glasgow Coma Scale (GCS)",children:[(0,s.jsx)("h5",{children:"Motor Response"}),(0,s.jsx)(n.b1,{name:"motorResponse",options:K.motorResponse,label:""}),(0,s.jsx)("h5",{children:"Verbal Response"}),(0,s.jsx)(n.b1,{name:"verbalResponse",options:K.verbalResponse,label:""}),(0,s.jsx)("h5",{children:"Eye Response"}),(0,s.jsx)(n.b1,{name:"eyeResponse",options:K.eyeResponse,label:""})]}),(0,s.jsxs)(n.kI,{title:"Additional Examinations",children:[(0,s.jsx)(n.A8,{name:"cranialNerves",sx:{width:"100%"},label:"Cranial Nerves",type:"text",id:""}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"grossMotor",label:"Gross Motor",type:"text",id:""}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"sensation",label:"Sensation",type:"text",id:""})]}),(0,s.jsxs)(n.kI,{title:"Extremities",children:[(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"pulsations",label:"Pulsations",type:"text",id:""}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"rectalExamination",label:"Rectal Examination",type:"text",id:""}),(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"extremities",label:"Extremities Examination",type:"text",id:""}),"Female"==a&&(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"vaginalExamination",label:"Vaginal Examination (For Females Only)",type:"text",id:""})]})]})})})})};var Z=a(19194),J=a(50772),Q=a(40987);let ee=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,h]=(0,i.useState)(void 0),{data:p}=(0,u.iu)(a.id),[x,b]=(0,i.useState)([]),{init:g,ServerTime:v}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(p){let e=p.find(e=>!e.date_stopped);e&&h(e)}},[p]);let j=async()=>{let t=v.getServerTimeString(),s=x.map(e=>({concept:d.W.DIFFERENTIAL_DIAGNOSIS,value:`${e.code}-${e.diagnosis}`,obsDatetime:t})),i={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:t,obs:s};try{await l(i),console.log("Differential Diagnosis submitted successfully!"),e(x)}catch(e){console.error("Error submitting diagnosis:",e)}};return(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)(n.kI,{title:"Working Differential Diagnosis",children:[(0,s.jsx)(Z.q,{columns:[{label:"Code",field:"code"},{label:"Diagnosis",field:"diagnosis"}],data:x}),(0,s.jsx)("br",{}),(0,s.jsx)(Q.default,{label:"Diagnosis",initialValue:"",onSelection:e=>{b(t=>[...t,e])},placeholder:"Start typing to search diagnoses..."}),(0,s.jsx)("br",{}),(0,s.jsx)(J.A,{variant:"contained",color:"primary",onClick:j,children:"Finish and Submit"})]})})})};var et=a(51040),ea=a(55330);let es={additionalNotes:{name:d.W.NOTES,label:"Additional Investigation Notes"}},ei=(0,ea.f6)(es),el=o.Ik().shape({}),en=({onSubmit:e,onSkip:t})=>{let{params:a}=(0,r.KU)(),{mutate:l}=(0,c.jM)(),[o,h]=(0,i.useState)(void 0),{data:p}=(0,u.iu)(a.id),{ServerTime:x}=(0,m.useServerTime)();(0,i.useEffect)(()=>{if(p){let e=p.find(e=>!e.date_stopped);e&&h(e)}},[p]);let b=async t=>{let s=x.getServerTimeString();if(t[d.W.NOTES]?.trim()){let i={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:o?.uuid,patient:a.id,encounterDatetime:s,obs:[{concept:d.W.NOTES,value:t[d.W.NOTES],obsDatetime:s}]};try{await l(i),console.log("Additional Notes submitted successfully!"),e(t)}catch(e){console.error("Error submitting additional notes:",e)}}else e(t)};return(0,s.jsx)(n.PD,{initialValues:ei,validationSchema:el,onSubmit:b,children:(0,s.jsx)(n.GE,{direction:"column",children:(0,s.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Investigations"}),(0,s.jsx)(et.M,{}),(0,s.jsxs)("div",{style:{marginTop:"30px"},children:[(0,s.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"15px",color:"#374151",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:"Additional Investigation Notes"}),(0,s.jsx)("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:"12px"},children:"Include other radiology investigations and lab orders that AETC doesn't perform (e.g., external diagnostic laboratories)."}),(0,s.jsx)(n.A8,{multiline:!0,rows:6,name:es.additionalNotes.name,label:es.additionalNotes.label,id:es.additionalNotes.name,sx:{width:"100%"},placeholder:"Enter external lab orders, radiology investigations, or other diagnostic tests not performed at AETC..."})]})]})})})})};var er=a(76180),eo=a.n(er),ed=a(30859),ec=a(62764),eu=a(60120);let em=o.Ik({}),eh=({onSubmit:e,onSkip:t})=>{let[a,l]=(0,i.useState)(null),{params:o}=(0,r.KU)(),{navigateTo:h}=(0,r.cq)(),{data:p}=(0,u.iu)(o.id),{data:x}=(0,c.$O)(o.id),{mutate:b}=(0,c.jM)(),[g,v]=(0,i.useState)(void 0),{init:j,ServerTime:y}=(0,m.useServerTime)(),N=(0,i.useRef)(null),[E,S]=(0,i.useState)({clerkName:"",designation:"",signature:"",additionalNotes:""}),[f,A]=(0,i.useState)({complaints:"",history:"",surgicalHistory:"",surgicalProcedure:"",familyHistory:[],allergies:"",differentialDiagnosis:"",smoking:{status:"",duration:""},alcoholIntake:"",recreationalDrugs:""}),[I,_]=(0,i.useState)({general:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]}),[P,T]=(0,i.useState)({generalCondition:"",temperature:"",pulseRate:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdominal:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:""}),[O,R]=(0,i.useState)([]),D=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!x)return;let e=x?.filter(e=>e.encounter_type&&e.encounter_type.uuid===d.fA.SURGICAL_NOTES_TEMPLATE_FORM).sort((e,t)=>new Date(t.encounter_datetime).getTime()-new Date(e.encounter_datetime).getTime())[0];if(e&&e.obs){let t={clerkName:"",designation:"",signature:"",additionalNotes:""},a={complaints:"",history:"",surgicalHistory:"",surgicalProcedure:"",familyHistory:[],allergies:"",differentialDiagnosis:"",smoking:{status:"",duration:""},alcoholIntake:"",recreationalDrugs:""},s={general:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]},i={generalCondition:"",temperature:"",pulseRate:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdominal:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:""};e.obs.forEach(e=>{let l=e.names&&e.names.length>0?e.names[0].name:null;if("Clerk name"===l)t.clerkName=e.value||e.value_text||"";else if("Designation"===l)t.designation=e.value||e.value_text||"";else if("Signature"===l)t.signature=e.value||e.value_text||"";else if("Additional Notes"===l)t.additionalNotes=e.value||e.value_text||"";else if("Presenting Complaints"===l)e.children&&e.children.length>0&&(a.complaints=e.children[0].value_text||"");else if("Presenting history"===l)a.history=e.value||e.value_text||"";else if("Surgical Procedure"===l)a.surgicalHistory=e.value||e.value_text||"";else if("Procedures"===l)a.surgicalProcedure=e.value||e.value_text||"";else if(l?.startsWith("Family History")){let t=e.value||e.value_text||"";t&&a.familyHistory.push(t)}else if("Allergic reaction"===l)a.allergies=e.value||e.value_text||"";else if("Attempted/ Differential Diagnosis"===l)a.differentialDiagnosis=e.value||e.value_text||"";else if("Patient smokes"===l){if(a.smoking.status=e.value||e.value_text||"",e.children&&e.children.length>0){let t=e.children.find(e=>e.names&&e.names.length>0&&"Expected Duration"===e.names[0].name);t&&(a.smoking.duration=t.value||t.value_text||"")}}else"Alcohol intake"===l?a.alcoholIntake=e.value||e.value_text||"":"Recreational drug"===l?a.recreationalDrugs=e.value||e.value_text||"":"Review of systems, general"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.general.push(t)}):"Review of systems ENT"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.ent.push(t)}):"Review of systems endocrine"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.endocrine.push(t)}):"Review of systems cardiac"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.cardiac.push(t)}):"Severe Respiratory"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.respiratory.push(t)}):"Review Of Systems Gastrointestinal"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.gastrointestinal.push(t)}):"Review Of Systems Genitourinary"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.genitourinary.push(t)}):"Review Of Systems musculoskeletal"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.musculoskeletal.push(t)}):"Review Of Systems neurologic"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.neurologic.push(t)}):"Review of systems psychiatric"===l&&e.children&&e.children.length>0&&e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;t&&s.psychiatric.push(t)});"General condition"===l?i.generalCondition=e.value||"":"Temperature (c)"===l?i.temperature=e.value_numeric?`${e.value_numeric}\xb0C`:e.value||"":"Pulse Rate"===l?i.pulseRate=e.value_text||e.value||"":"Blood Pressure Measured"===l?i.bloodPressure=e.value_text||e.value||"":"Respiratory rate"===l?i.respiratoryRate=e.value_text||e.value||"":"Eyes"===l?i.eyes=e.value_text||e.value||"":"Mouth"===l?i.mouth=e.value_text||e.value||"":"Neck"===l?i.neck=e.value_text||e.value||"":"Chest examination"===l?i.chest=e.value_text||e.value||"":"Endocrine examination"===l?i.endocrine=e.value_text||e.value||"":"Abdominal examination"===l?i.abdominal=e.value_text||e.value||"":"Motor response"===l?i.motorResponse=e.value_text||e.value||"":"Verbal Response"===l?i.verbalResponse=e.value_text||e.value||"":"Eye Opening response"===l?i.eyeResponse=e.value_text||e.value||"":"Motor response"===l?i.motorResponse=e.value_text||e.value||"":"Verbal Response"===l?i.verbalResponse=e.value_text||e.value||"":"Cranial erves"===l?i.cranialNerves=e.value_text||e.value||"":"Gross motor"===l?i.grossMotor=e.value_text||e.value||"":"Sensation"===l?i.sensation=e.value_text||e.value||"":"Pulsations"===l?i.pulsations=e.value_text||e.value||"":"Rectal examination"===l&&(i.rectalExamination=e.value_text||e.value||"")}),!t.clerkName&&e.created_by&&(t.clerkName=e.created_by),S(t),A(a),_(s),T(i)}let t=[];x.forEach(e=>{e.obs&&e.obs.forEach(e=>{if("Condition"===(e.names&&e.names.length>0?e.names[0].name:null)&&e.children&&e.children.length>0){let a={condition:e.value||e.value_text||"",onTreatment:"",medication:"",medicationDose:"",reasonForRequest:"",medicationDuration:""};e.children.forEach(e=>{let t=e.names&&e.names.length>0?e.names[0].name:null;"On treatment"===t?a.onTreatment=e.value||e.value_text||"":"Medication"===t?a.medication=e.value||e.value_text||"":"Medication Dose"===t?a.medicationDose=e.value||e.value_text||"":"Reason for request"===t?a.reasonForRequest=e.value||e.value_text||"":"Medication Duration"===t&&(a.medicationDuration=e.value||e.value_text||"")}),t.push(a)}})}),R(t)},[x]),(0,i.useEffect)(()=>{if(p){let e=p.find(e=>!e.date_stopped);e&&v(e)}},[p]);let W=async t=>{let a=y.getServerTimeString(),s=[{concept:d.W.ADDITIONAL_NOTES,value:t.additionalNotes,obsDatetime:a},{concept:d.W.CLERK_NAME,value:t.clerkName,obsDatetime:a},{concept:d.W.DESIGNATION,value:t.designation,obsDatetime:a},{concept:d.W.SIGNATURE,value:t.signature,obsDatetime:a}],i={encounterType:d.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:g?.uuid,patient:o.id,encounterDatetime:a,obs:s};try{await b(i),console.log("Initial Management submitted successfully!"),e(t),h(`/patient/${o.id}/profile`)}catch(e){console.error("Error submitting Initial Management:",e)}};return(0,ed.useReactToPrint)({contentRef:D}),(0,s.jsxs)(n.PD,{initialValues:{additionalNotes:E.additionalNotes,clerkName:E.clerkName,designation:E.designation,signature:E.signature},validationSchema:em,onSubmit:W,enableReinitialize:!0,children:[(0,s.jsx)("div",{ref:D,className:"jsx-7b66091306a8e529 printable-content",children:(0,s.jsxs)("div",{className:"jsx-7b66091306a8e529 print-only",children:[(0,s.jsx)(n.TF,{}),(0,s.jsx)("h1",{style:{textAlign:"center",marginBottom:"20px"},className:"jsx-7b66091306a8e529",children:"Surgical Notes"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Presenting Complaints:"})," ",f.complaints]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Presenting History:"})," ",f.history]}),(0,s.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Past Medical History"}),O.length>0?(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("thead",{className:"jsx-7b66091306a8e529",children:(0,s.jsxs)("tr",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Condition"}),(0,s.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"On Treatment"}),(0,s.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Medication"}),(0,s.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Medication Dose"}),(0,s.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Reason for Request"}),(0,s.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Medication Duration"})]})}),(0,s.jsx)("tbody",{className:"jsx-7b66091306a8e529",children:O.map((e,t)=>(0,s.jsxs)("tr",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.condition}),(0,s.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.onTreatment}),(0,s.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.medication}),(0,s.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.medicationDose}),(0,s.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.reasonForRequest}),(0,s.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.medicationDuration})]},t))})]}):(0,s.jsx)("p",{className:"jsx-7b66091306a8e529",children:"No past medical history recorded."}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Surgical History:"})," ",f.surgicalHistory]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Surgical Procedure:"})," ",f.surgicalProcedure]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Family History:"})," ",f.familyHistory.length>0?f.familyHistory.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Allergies:"})," ",f.allergies||"None"]}),(0,s.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Social History"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Smoking Status:"})," ",f.smoking.status||"Unknown"]}),"Yes"===f.smoking.status&&(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Cigarettes per day:"})," ",f.smoking.duration||"Unknown"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Alcohol Intake:"})," ",f.alcoholIntake?`${f.alcoholIntake} units per day`:"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Recreational Drugs:"})," ",f.recreationalDrugs||"None"]}),(0,s.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Review of Systems"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"General:"})," ",I.general.length>0?I.general.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"ENT:"})," ",I.ent.length>0?I.ent.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Endocrine:"})," ",I.endocrine.length>0?I.endocrine.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Cardiac:"})," ",I.cardiac.length>0?I.cardiac.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Respiratory:"})," ",I.respiratory.length>0?I.respiratory.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Gastrointestinal:"})," ",I.gastrointestinal.length>0?I.gastrointestinal.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Genitourinary:"})," ",I.genitourinary.length>0?I.genitourinary.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Musculoskeletal:"})," ",I.musculoskeletal.length>0?I.musculoskeletal.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Neurologic:"})," ",I.neurologic.length>0?I.neurologic.join(", "):"None"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Psychiatric:"})," ",I.psychiatric.length>0?I.psychiatric.join(", "):"None"]}),(0,s.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Physical Examination"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"General Condition:"})," ",P.generalCondition||"Not recorded"]}),(0,s.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Vitals"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"10px"},className:"jsx-7b66091306a8e529",children:[(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Temperature:"})," ",P.temperature||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Pulse Rate:"})," ",P.pulseRate||"Not recorded"," bpm"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Blood Pressure:"})," ",P.bloodPressure||"Not recorded"," mmHg"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Respiratory Rate:"})," ",P.respiratoryRate||"Not recorded"," breaths/min"]})]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Eyes:"})," ",P.eyes||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Mouth:"})," ",P.mouth||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Neck:"})," ",P.neck||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Chest Examination:"})," ",P.chest||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Endocrine Examination:"})," ",P.endocrine||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Abdominal Examination:"})," ",P.abdominal||"Not recorded"]}),(0,s.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Glasgow Coma Scale (GCS)"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Motor Response:"})," ",P.motorResponse||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Verbal Response:"})," ",P.verbalResponse||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Eye Response:"})," ",P.eyeResponse||"Not recorded"]}),(0,s.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Additional Examinations"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Cranial Nerves:"})," ",P.cranialNerves||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Gross Motor:"})," ",P.grossMotor||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Sensation:"})," ",P.sensation||"Not recorded"]}),(0,s.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Extremities"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Pulsations:"})," ",P.pulsations||"Not recorded"]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Rectal Examination:"})," ",P.rectalExamination||"Not recorded"]}),(0,s.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Working Differential Diagnosis:"})," ",f.differentialDiagnosis||"None"]}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Investigations"}),(0,s.jsx)(et.M,{}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Medications"}),(0,s.jsx)(ec.Z,{setRow:l}),(0,s.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,s.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Clerking Details"}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Additional Notes:"})," ",E.additionalNotes]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Clerk Name:"})," ",E.clerkName]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Designation:"})," ",E.designation]}),(0,s.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,s.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Signature:"})," ",E.signature]})]})}),(0,s.jsxs)(n.GE,{direction:"column",children:[(0,s.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:[(0,s.jsx)(ec.Z,{setRow:l,showPrintButton:!1}),(0,s.jsx)(n.kI,{title:"Additional Information",children:(0,s.jsx)(n.A8,{sx:{width:"100%"},name:"additionalNotes",label:"Additional Notes",multiline:!0,rows:5,placeholder:"Enter any additional information here...",id:""})}),(0,s.jsxs)(n.kI,{title:"Clerk Information",children:[(0,s.jsx)(n.A8,{name:"clerkName",label:"Clerked by (Name)",id:""}),(0,s.jsx)(n.A8,{name:"designation",label:"Designation",id:""}),(0,s.jsx)(n.A8,{name:"signature",label:"Signature",placeholder:"E.g J.Smith",id:""})]})]}),(0,s.jsx)(eu.r,{ref:N,onPrintComplete:()=>{console.log("Surgical notes PDF generated successfully!")}})]}),(0,s.jsx)(eo(),{id:"7b66091306a8e529",children:"@media print{.print-only.jsx-7b66091306a8e529{display:block!important}}.print-only.jsx-7b66091306a8e529{display:none}"})]})},ep=()=>{let{gender:e}=(0,r.gd)(),[t,a]=(0,i.useState)(0),{navigateBack:l}=(0,r.cq)(),o=[{id:0,label:"Presenting Complaints"},{id:1,label:"Past Medical History"},{id:2,label:"Past Surgical History"},{id:3,label:"Family History"},{id:4,label:"Allergies"},{id:5,label:"Social History"},..."Female"===e?[{id:6,label:"Gynae History"}]:[],{id:7,label:"Review of Systems"},{id:8,label:"Physical Examination"},{id:9,label:"Working Differential Diagnosis"},{id:10,label:"Investigations"},{id:11,label:"Initial Management"}];return(0,i.useEffect)(()=>{console.log(`Active step is now: ${t}`)},[t]),(0,s.jsxs)(n.RG,{title:"Surgical Notes",steps:o,active:t,setActive:a,onBack:()=>l(),children:[(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(y,{onSkip:()=>{},onSubmit:()=>a(1)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(I,{onSkip:()=>{},onSubmit:()=>a(2)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(R,{onSkip:()=>{},onSubmit:()=>a(3)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(T,{onSkip:()=>{},onSubmit:()=>a(4)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(w,{onSkip:()=>{},onSubmit:()=>a(5)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(H,{onSkip:()=>{},onSubmit:()=>a(6)})}),"Female"===e&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(F,{onSkip:()=>{},onSubmit:()=>a(7)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)($,{onSkip:()=>{},onSubmit:()=>a(8)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(z,{onSkip:()=>{},onSubmit:()=>a(9)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ee,{onSkip:()=>{},onSubmit:()=>a(10)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(en,{onSkip:()=>{},onSubmit:()=>a(11)})}),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eh,{onSkip:()=>{},onSubmit:()=>{}})})]})}},23207:(e,t,a)=>{Promise.resolve().then(a.bind(a,57416)),Promise.resolve().then(a.bind(a,59866)),Promise.resolve().then(a.bind(a,18496)),Promise.resolve().then(a.bind(a,64652)),Promise.resolve().then(a.bind(a,17257)),Promise.resolve().then(a.bind(a,45114)),Promise.resolve().then(a.bind(a,33501)),Promise.resolve().then(a.bind(a,4002)),Promise.resolve().then(a.bind(a,18456)),Promise.resolve().then(a.bind(a,7570)),Promise.resolve().then(a.bind(a,90293)),Promise.resolve().then(a.bind(a,50449)),Promise.resolve().then(a.bind(a,39472)),Promise.resolve().then(a.bind(a,63849)),Promise.resolve().then(a.bind(a,32563)),Promise.resolve().then(a.bind(a,90220)),Promise.resolve().then(a.bind(a,70643)),Promise.resolve().then(a.bind(a,48123)),Promise.resolve().then(a.bind(a,1480)),Promise.resolve().then(a.bind(a,70934)),Promise.resolve().then(a.bind(a,9394)),Promise.resolve().then(a.bind(a,13214)),Promise.resolve().then(a.bind(a,20454)),Promise.resolve().then(a.bind(a,23668)),Promise.resolve().then(a.bind(a,32050)),Promise.resolve().then(a.bind(a,32629)),Promise.resolve().then(a.bind(a,77766)),Promise.resolve().then(a.bind(a,32768)),Promise.resolve().then(a.bind(a,40189)),Promise.resolve().then(a.bind(a,53127)),Promise.resolve().then(a.bind(a,65570)),Promise.resolve().then(a.bind(a,71887)),Promise.resolve().then(a.bind(a,79089)),Promise.resolve().then(a.bind(a,25500)),Promise.resolve().then(a.bind(a,38298)),Promise.resolve().then(a.bind(a,3910)),Promise.resolve().then(a.bind(a,66612)),Promise.resolve().then(a.bind(a,14108)),Promise.resolve().then(a.bind(a,20772)),Promise.resolve().then(a.bind(a,33248)),Promise.resolve().then(a.bind(a,29478)),Promise.resolve().then(a.bind(a,14232)),Promise.resolve().then(a.bind(a,29784)),Promise.resolve().then(a.bind(a,30372)),Promise.resolve().then(a.bind(a,40386)),Promise.resolve().then(a.bind(a,89247)),Promise.resolve().then(a.bind(a,83756)),Promise.resolve().then(a.bind(a,66180)),Promise.resolve().then(a.bind(a,30713)),Promise.resolve().then(a.bind(a,98956))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37119:(e,t,a)=>{Promise.resolve().then(a.bind(a,22862)),Promise.resolve().then(a.bind(a,49040)),Promise.resolve().then(a.bind(a,33094)),Promise.resolve().then(a.bind(a,51818)),Promise.resolve().then(a.bind(a,29645)),Promise.resolve().then(a.bind(a,57472)),Promise.resolve().then(a.bind(a,35127)),Promise.resolve().then(a.bind(a,33912)),Promise.resolve().then(a.bind(a,50962)),Promise.resolve().then(a.bind(a,64680)),Promise.resolve().then(a.bind(a,90035)),Promise.resolve().then(a.bind(a,52723)),Promise.resolve().then(a.bind(a,95486)),Promise.resolve().then(a.bind(a,72783)),Promise.resolve().then(a.bind(a,18501)),Promise.resolve().then(a.bind(a,89454)),Promise.resolve().then(a.bind(a,54937)),Promise.resolve().then(a.bind(a,50265)),Promise.resolve().then(a.bind(a,8382)),Promise.resolve().then(a.bind(a,90408)),Promise.resolve().then(a.bind(a,66724)),Promise.resolve().then(a.bind(a,40987)),Promise.resolve().then(a.bind(a,56440)),Promise.resolve().then(a.bind(a,51258)),Promise.resolve().then(a.bind(a,1376)),Promise.resolve().then(a.bind(a,72227)),Promise.resolve().then(a.bind(a,98384)),Promise.resolve().then(a.bind(a,22290)),Promise.resolve().then(a.bind(a,30311)),Promise.resolve().then(a.bind(a,62681)),Promise.resolve().then(a.bind(a,70700)),Promise.resolve().then(a.bind(a,57361)),Promise.resolve().then(a.bind(a,58047)),Promise.resolve().then(a.bind(a,10443)),Promise.resolve().then(a.bind(a,90940)),Promise.resolve().then(a.bind(a,44504)),Promise.resolve().then(a.bind(a,28274)),Promise.resolve().then(a.bind(a,4072)),Promise.resolve().then(a.bind(a,70166)),Promise.resolve().then(a.bind(a,32578)),Promise.resolve().then(a.bind(a,45742)),Promise.resolve().then(a.bind(a,58706)),Promise.resolve().then(a.bind(a,79534)),Promise.resolve().then(a.bind(a,18895)),Promise.resolve().then(a.bind(a,44797)),Promise.resolve().then(a.bind(a,70969)),Promise.resolve().then(a.bind(a,79485)),Promise.resolve().then(a.bind(a,81252)),Promise.resolve().then(a.bind(a,72899)),Promise.resolve().then(a.bind(a,78590))},42533:(e,t,a)=>{"use strict";a.d(t,{fS:()=>v,G5:()=>g,Xt:()=>x,Jl:()=>p,RO:()=>b});var s=a(42938),i=a(60579),l=a(62116);let n=e=>c(e),r=()=>c(s.W.INVESTIGATIONS),o=e=>(0,i.vt)(e,"/lab/orders"),d=e=>(0,i.UK)(`/lab/orders?patient=${e}`),c=async e=>{let t=await (0,l.cr)(e);return(0,i.UK)(`/concepts/${t?.data[0].uuid}/set_members?paginate=false`)};var u=a(29494),m=a(8693),h=a(54050);let p=e=>{let t=async()=>n(e).then(e=>e.data.filter(e=>e.names.length>0&&e.names.some(e=>e?.name)).map(e=>({...e,name:e.names.find(e=>e?.name)?.name})).sort((e,t)=>e.name.localeCompare(t.name)));return(0,u.I)({queryKey:["testTypes",e],queryFn:t,enabled:!0})},x=()=>{let e=async()=>r().then(e=>e.data.sort((e,t)=>e.names[0].name.localeCompare(t.names[0].name)));return(0,u.I)({queryKey:["getSpecimenTypes"],queryFn:e,enabled:!0})},b=e=>{let t=async()=>d(e).then(e=>e.data);return(0,u.I)({queryKey:["patientsOrder",e],queryFn:t,enabled:!0})},g=e=>{let t=async()=>c(e).then(e=>e.data);return(0,u.I)({queryKey:["concept-setMembers",e],queryFn:t,enabled:!1})},v=e=>{let t=(0,m.jE)();return(0,h.n)({mutationFn:e=>o(e).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patientsOrder"]})}})}},46055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(31658);let i=async e=>[{type:"image/x-icon",sizes:"305x298",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},50727:(e,t,a)=>{"use strict";a.d(t,{SE:()=>N,Nt:()=>g,Wd:()=>j});var s=a(60687),i=a(43210),l=a(76166),n=a.n(l),r=a(75018),o=a(52773),d=a(89086),c=a.n(d),u=a(51060),m=a(28274),h=a(78590),p=a(69587),x=a(12755);let b=({getValue:e})=>{let[t,a]=(0,i.useState)("http://localhost:3000"),{data:l,isLoading:n}=(0,x.Ay)();return(0,i.useEffect)(()=>{e(t)},[t]),(0,s.jsx)(p.x,{getValue:e=>{a(e)},label:"Select Printer",options:l?l?.map(e=>({value:e.ip_address,label:e.name})):[]})},g=({value:e,children:t,setTriggerFunc:a,printer:l,orderDate:d})=>{let c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=async()=>{let e=document.getElementById("barcode");e&&v("test",await o.mo(e),l)};a(()=>e)},[l]),(0,s.jsx)(r.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,s.jsx)("div",{id:"barcode",children:(0,s.jsxs)(r.jD,{sx:{pb:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},ref:c,children:[t,(0,s.jsx)(n(),{width:6,height:120,margin:0,displayValue:!1,value:e})]})})})},v=async(e,t,a)=>{let s=t.toDataURL("image/png");try{let e=await c().encode(s),t=`^XA^FO20,20${e}^XZ`;await u.A.post(`${a}/print`,{zpl:t})}catch(e){console.error("Error encoding image to ZPL:",e)}},j=({presentingComplaints:e,vitals:t,date:a,arrivalTime:l,referredFrom:n,triageCategory:d,triagedBy:c})=>{let[u,x]=(0,i.useState)(""),[g,j]=(0,i.useState)(""),N=async()=>{let e=document.getElementById("triage");e&&v("test",await o.mo(e),u)};return(0,s.jsxs)(m.default,{children:[(0,s.jsx)("div",{id:"triage",children:(0,s.jsx)(r.jD,{sx:{p:"5px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,s.jsxs)(m.default,{sx:{width:"100%"},children:[(0,s.jsxs)(h.default,{variant:"body2",mr:"1ch",children:["Arrival Date Time: ",l]}),(0,s.jsxs)(m.default,{sx:{display:"flex",width:"100%"},children:[(0,s.jsxs)(h.default,{variant:"body2",mr:"1ch",children:["Triage Date Time: ",a]}),(0,s.jsxs)(h.default,{variant:"body2",children:["Referred From: ",n]})]}),(0,s.jsxs)(m.default,{sx:{display:"flex"},children:[(0,s.jsxs)(h.default,{mr:"1ch",variant:"body1",children:["Category: ",d]}),(0,s.jsxs)(h.default,{variant:"body1",children:["Reason: ",g]})]}),(0,s.jsxs)(h.default,{sx:{mt:"1ch"},variant:"subtitle1",children:["Presenting Complaints: ",e," "]}),(0,s.jsx)(r.jD,{sx:{display:"flex",border:"dashed",my:"1ch"},children:t.map(({name:e,value:t})=>(0,s.jsx)(y,{title:e,value:t},`${t}${e}`))}),(0,s.jsxs)(h.default,{variant:"body1",children:["Triaged By: ",c]})]})})}),(0,s.jsx)(p.x,{getValue:e=>j(e),label:"Reasons for triage category:",options:[{value:"Vitals above/below threshold",label:"Vitals above/below threshold"},{value:"Airway/Breathing compromised",label:"Airway/Breathing compromised"},{value:"Blood circulation compromised",label:"Blood circulation compromised"},{value:"Disability",label:"Disability"},{value:"Persistent pain and other concerns ",label:"Persistent pain and other concerns "}]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(b,{getValue:e=>x(e)}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(r.O6,{onClick:N,title:"print"})]})},y=({title:e,value:t})=>(0,s.jsxs)(r.jD,{sx:{mx:"0.5ch",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)(r.Th,{variant:"h6",textAlign:"center",children:e}),(0,s.jsx)(r.Th,{variant:"h6",children:t})]}),N=({value:e,children:t,setTriggerFunc:a,printer:l,orderDate:r,test:d,fullName:c,gender:u,description:m})=>{let h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{a(async()=>{let e=document.getElementById("barcode");if(e){let t=await o.mo(e),a=document.createElement("canvas");a.width=700,a.height=160;let s=a.getContext("2d");if(s){s.fillStyle="#ffffff",s.fillRect(0,0,700,160);let e=t.width/t.height,i=700,n=700/e;n>160&&(i=(n=160)*e);let r=(700-i)/2,o=(160-n)/2;s.drawImage(t,0,0,t.width,t.height,r,o,i,n),v("test",a,l)}}})},[l,a]),(0,s.jsxs)("div",{id:"barcode",ref:h,style:{display:"flex",flexDirection:"column",paddingLeft:"5ch"},children:[(0,s.jsxs)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:[c,"(",u,")~",m]}),(0,s.jsx)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:r}),(0,s.jsx)(n(),{width:1,height:45,margin:0,displayValue:!1,value:e}),(0,s.jsx)("b",{style:{fontSize:"0.5rem"},children:d})]})}},55330:(e,t,a)=>{"use strict";a.d(t,{iE:()=>i,Zt:()=>c,iL:()=>d,f6:()=>r,gX:()=>o,ZM:()=>u,k$:()=>m}),a(96851);var s=a(77567);let i=({title:e,text:t,icon:a,onConfirm:i,confirmButtonText:l,cancelButtonText:n="Cancel"})=>{s.A.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#006401",confirmButtonText:l,cancelButtonText:n}).then(e=>{e.isConfirmed&&i()})};var l=a(42938),n=a(88794);let r=e=>Object.keys(e).reduce((t,a)=>(t[e[a].name]="",t),{}),o=(e,t)=>Object.keys(e).map(a=>({concept:a,value:e[a],obsDatetime:t})),d=(e,t,a)=>{let s=Object.keys(e).map(t=>({concept:e[t].name,label:e[t].label})),i=t.map(e=>({concept:e.id,label:e.label}));return[...s,...a.map(e=>({concept:e.value,label:e.label})),...i]},c=async e=>(await n.Fh.initialize(),e.map(e=>({concept:l.W.IMAGE_PART_NAME,value:e.label,obsDateTime:n.Fh.getServerTimeString(),groupMembers:e.formData.obs}))),u=(e,t,a,s=!1)=>Array.isArray(e)?e.map(e=>({concept:t,value:e.id,obsDatetime:a})):[],m=async(e,t,a)=>(await n.Fh.initialize(),Object.entries(t).map(([t,s])=>{let i=Object.keys(e).find(a=>e[a].name===t);if(!i)return null;let l=e[i].name,r=e[i].coded;return Array.isArray(s)&&s.every(e=>e&&void 0!==e.id)?s.map(e=>({key:l,value:e.id,coded:r})):{concept:l,value:s,coded:r,obsDatetime:a||n.Fh.getServerTimeString()}}).flat().filter(Boolean))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57416:(e,t,a)=>{"use strict";a.d(t,{SurgicalNotesFlow:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call SurgicalNotesFlow() from the server but SurgicalNotesFlow is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/patient/[id]/surgicalNotes/components/surgicalNotesFlow.tsx","SurgicalNotesFlow")},60931:(e,t,a)=>{"use strict";a.d(t,{h:()=>n});var s=a(60687),i=a(28274),l=a(71953);let n=({loading:e,children:t,height:a="100%"})=>(0,s.jsxs)(i.default,{sx:{position:"relative",width:"100%",height:a},children:[e&&(0,s.jsx)(i.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,s.jsx)(l.A,{})}),(0,s.jsx)(i.default,{sx:{opacity:e?.5:1,pointerEvents:e?"none":"auto"},children:t})]})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94694:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=a(65239),i=a(48088),l=a(88170),n=a.n(l),r=a(30893),o={};for(let e in r)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);a.d(t,o);let d={children:["",{children:["patient",{children:["[id]",{children:["surgicalNotes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,10009)),"/Users/pk/App/hwis/aetc/app/patient/[id]/surgicalNotes/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/pk/App/hwis/aetc/app/patient/[id]/surgicalNotes/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/patient/[id]/surgicalNotes/page",pathname:"/patient/[id]/surgicalNotes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94735:e=>{"use strict";e.exports=require("events")},99108:(e,t,a)=>{"use strict";function s({presentingComplaints:e,diagnosis:t,labOrders:a,dischargeNotes:s,dischargePlan:i,followUpPlan:l,homeCareInstructions:n}){let r=e=>Math.round(203*e/25.4),o=r(100),d=r(40),c=o-40,u=Math.floor(c/8),m=[{title:"Discharge Notes",content:s||"N/A"},{title:"Investigations",content:a.length?a.flatMap(e=>e.tests.map(e=>`${e.name}:${e.result||"pending"}`)).join(" ! "):"No investigations ordered"},{title:"Final Diagnosis",content:t?.length?t.map(e=>e.value).join(" ! "):"None"},{title:"Discharge Plan",content:i||"N/A"},{title:"Follow Up Plan",content:`${l}`||"N/A"},{title:"Home Care Instructions",content:n||"N/A"}],h=[];m.forEach((e,t)=>{h.push({text:e.title,isTitle:!0,sectionIndex:t}),(function(e){if(!e)return[];let t=e.split(" "),a=[],s="";for(let e of t){if(e.length>u){s&&(a.push(s),s="");for(let t=0;t<e.length;t+=u){let s=e.substring(t,t+u);a.push(s)}continue}let t=s?`${s} ${e}`:e;t.length<=u?s=t:(s&&a.push(s),s=e)}return s&&a.push(s),a})(e.content).forEach(e=>{h.push({text:e,isTitle:!1,sectionIndex:t})})});let p=[],x=[],b=70;for(let e=0;e<h.length;e++){let t=h[e],a=0;if(x.length>0){let e=x[x.length-1];t.sectionIndex!==e.sectionIndex&&(a=10)}let s=a+(t.isTitle?30:25);if(b+s>d-20){if(0===x.length){x.push(t),p.push(x),x=[],b=20;continue}p.push(x),x=[],b=20,e--;continue}x.push(t),b+=s}return x.length>0&&p.push(x),p.map((e,t)=>{let a=20,s=`^XA
^PW${o}
^LL${d}
^CF0,25`;0===t?(s+=`
^FO20,20^FDPatient Summary-QECH AETC^FS
^FO20,60^GB${c},3,3^FS`,a=70):a=20;let i=-1;for(let t of e)t.sectionIndex!==i&&(-1!==i&&(a+=10),i=t.sectionIndex),t.isTitle?(s+=`
^CF0,25
^FO20,${a}^FD${t.text}^FS`,a+=30):(s+=`
^CF0,20
^FO20,${a}^FD${t.text}^FS`,a+=25);return s+`
^XZ`}).join("\n")}function i(e,t="Medication Instructions"){let a=Math.floor(68.21428571428571),s=[],l=[],n=0,r=1;function o(e,a){let s=`^XA
^CF0,25
^FO30,30^${t}${a>1?` (Cont. ${a})`:""}^FS
^FO30,60^GB955,3,3^FS
`,i=68;for(let t of e){for(let e of t)s+=`^FO30,${i}^FD${e}^FS
`,i+=20;i+=10}return s+"^XZ"}return e.forEach(e=>{let t=function(e){let t=e.split(" "),s=[],i="";for(let e of t)(i+" "+e).trim().length<=a?i=(i+" "+e).trim():(s.push(i),i=e);return i&&s.push(i),s}(function(e,t){let a=[e.medicationName,`${e.dose} ${e.doseUnits}`,e.frequency,e.duration,e.formulation,`(${e.prescribedBy})`].filter(Boolean).map(e=>e.replace(/[\\^]/g,""));return`${t}. ${a.join(" | ")}`}(e,r)),i=20*t.length+10;n+i>323&&(s.push(o(l,s.length+1)),l=[],n=0),l.push(t),n+=i,r++}),l.length&&s.push(o(l,s.length+1)),s.join("\n")}a.d(t,{B:()=>i,U:()=>s})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[4447,6724,346,1658,485,7567,7549,4138,1146,3195],()=>a(94694));module.exports=s})();