(()=>{var e={};e.id=2378,e.ids=[2378],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9913:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});let r=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/patient/[id]/differential-diagnosis/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/patient/[id]/differential-diagnosis/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40446:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});var r=i(60687);i(43210);var s=i(75018);let n=({diagnoses:e})=>{let t=[{field:"condition",headerName:"Diagnosis",flex:1},{field:"label",headerName:"Diagnosis Type ",flex:1,renderCell:()=>(0,r.jsx)("span",{children:"Differential Diagnosis"})},{field:"obsDatetime",headerName:"Date Recorded",flex:1,renderCell:e=>{let t=e.row.obsDatetime;return(0,r.jsx)("span",{children:t?new Date(t).toLocaleDateString():"N/A"})}}];return(0,r.jsx)(s.WE,{rows:e,columns:t,height:"400px",width:"100%",showTopBar:!1})}},41190:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>l});var r=i(65239),s=i(48088),n=i(88170),a=i.n(n),o=i(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);i.d(t,d);let l={children:["",{children:["patient",{children:["[id]",{children:["differential-diagnosis",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,9913)),"/Users/pk/App/hwis/aetc/app/patient/[id]/differential-diagnosis/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(i.bind(i,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/Users/pk/App/hwis/aetc/app/patient/[id]/differential-diagnosis/page.tsx"],c={require:i,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/patient/[id]/differential-diagnosis/page",pathname:"/patient/[id]/differential-diagnosis",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},46055:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var r=i(31658);let s=async e=>[{type:"image/x-icon",sizes:"305x298",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67618:(e,t,i)=>{Promise.resolve().then(i.bind(i,9913))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85770:(e,t,i)=>{Promise.resolve().then(i.bind(i,99251))},88806:(e,t,i)=>{"use strict";i.d(t,{A:()=>g});var r=i(60687),s=i(75018),n=i(43210),a=i(40446),o=i(78590),d=i(50772),l=i(62116),p=i(96851),c=i(61939),u=i(76990),x=i(42938),h=i(44504),f=i(40987);let g=function({conceptType:e}){let[t,i]=(0,n.useState)([]),{mutate:g,isSuccess:m,isError:v}=(0,l.jM)(),{params:y}=(0,c.KU)(),{data:b}=(0,u.GN)(y.id),[j,w]=(0,n.useState)(void 0),[D,A]=(0,n.useState)(!1),[S,P]=(0,n.useState)({}),[q,_]=(0,n.useState)(!1),{data:I}=(0,u.iu)(y.id),{data:T,refetch:k}=(0,l.$O)(y.id,`encounter_type=${x.fA.OUTPATIENT_DIAGNOSIS}`),{mutate:N}=(0,l.tI)(),{init:E,ServerTime:C}=(0,h.useServerTime)(),G=e=>{N(e,{onSuccess:()=>{i(t=>t.filter(t=>t.id!==e))},onError:()=>{console.error("Error deleting diagnosis")}})};return(0,r.jsxs)(s.Yr,{container:!0,spacing:2,children:[(0,r.jsx)(s.Yr,{item:!0,xs:12,children:(0,r.jsxs)(s.sc,{style:{padding:"20px"},children:[(0,r.jsx)(o.default,{variant:"subtitle1",style:{marginBottom:"10px",fontWeight:"500"},children:"Current Diagnosis"}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{style:{display:"flex",paddingBottom:"8px",borderBottom:"1px solid #ddd"},children:[(0,r.jsx)(o.default,{variant:"body2",style:{width:"40%",fontWeight:"500"},children:"Condition"}),(0,r.jsx)(o.default,{variant:"body2",style:{width:"25%",fontWeight:"500"},children:"Diagnosis Type"}),(0,r.jsx)(o.default,{variant:"body2",style:{width:"25%",fontWeight:"500"},children:"Date"}),(0,r.jsx)(o.default,{variant:"body2",style:{width:"10%",fontWeight:"500"},children:"Action"})]}),0===t.length?(0,r.jsx)(o.default,{variant:"body2",style:{padding:"16px",textAlign:"center",color:"gray"},children:"No Diagnosis Added"}):t.slice(-3).map(t=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px solid #f0f0f0"},children:[(0,r.jsx)(o.default,{variant:"body2",style:{width:"40%"},children:t.condition}),(0,r.jsx)(o.default,{variant:"body2",style:{width:"25%",fontStyle:"italic"},children:e===x.W.DIFFERENTIAL_DIAGNOSIS?"Differential Diagnosis":"Final Diagnosis"}),(0,r.jsx)(o.default,{variant:"body2",style:{width:"25%"},children:new Date(t.obsDatetime).toLocaleDateString("en-GB")}),(0,r.jsx)(o.default,{variant:"body2",style:{width:"10%"},children:(0,r.jsx)(d.A,{onClick:()=>G(t.id),size:"small",color:"error",variant:"text",children:"Delete"})})]},t.id)),(0,r.jsx)(o.default,{variant:"subtitle2",style:{color:"green",cursor:"pointer",marginTop:"30px"},onClick:()=>_(!q),children:q?"- Cancel New Diagnosis":"+ Add New Diagnosis"}),q&&(0,r.jsx)(f.default,{label:"Select Diagnosis",initialValue:"",onSelection:t=>{let i=C.getServerTimeString();t&&j?.uuid?g({encounterType:x.fA.OUTPATIENT_DIAGNOSIS,visit:j?.uuid,patient:y.id,encounterDatetime:i,obs:[{concept:e,value:`${t.code} - ${t.diagnosis}`,obsDatetime:i}]},{onSuccess:async()=>{await k()},onError:()=>{p.oR.error("Failed to submit diagnosis.")}}):p.oR.error("Visit information is missing, cannot add diagnosis.")},placeholder:"Start typing to search diagnoses..."})]})}),(0,r.jsx)(s.Yr,{item:!0,xs:12,children:(0,r.jsxs)(s.sc,{children:[(0,r.jsx)(o.default,{onClick:()=>A(!D),variant:"subtitle1",style:{cursor:"pointer",padding:"1ch",fontWeight:"500"},children:D?"Hide Previous Diagnosis":"Show Previous Diagnosis"}),D&&(0,r.jsx)(a.c,{diagnoses:t})]})})]})}},94735:e=>{"use strict";e.exports=require("events")},99251:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var r=i(60687),s=i(75018);i(43210);var n=i(42938),a=i(88806),o=i(61939);function d(){let{params:e}=(0,o.KU)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.TF,{}),(0,r.jsxs)(s.MG,{children:[(0,r.jsx)(s.oq,{}),(0,r.jsx)(a.A,{conceptType:n.W.DIFFERENTIAL_DIAGNOSIS}),(0,r.jsx)(s.Dh,{size:"medium",sx:{fontSize:"12px",mr:"1px",mt:"1ch",float:"right"},title:"Proceed to Investigation",url:`/patient/${e?.id}/investigations`})]})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[4447,6724,346,1658,1146],()=>i(41190));module.exports=r})();