"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4330],{1831:(e,a,t)=>{t.d(a,{A:()=>I});var l=t(95155),n=t(12115),i=t(72478),r=t(22039),s=t(96887),o=t(87295),u=t(263),d=t(51267),c=t(66637),m=t(30422),b=t(55271),h=t(12098),g=t(57694),x=t(26301),p=t(5387),S=t(35068),v=t(38514),j=t(4474);let A=[{label:u.W.RESUSCITATION,id:u.W.RESUSCITATION},{label:u.W.SHORT_STAY,id:u.W.SHORT_STAY},{label:u.W.GYNAE_BENCH,id:u.W.GYNAE_BENCH},{label:u.W.PRIORITY,id:u.W.PRIORITY},{label:u.W.ISOLATION,id:u.W.ISOLATION},{label:u.W.TRAUMA,id:u.W.TRAUMA},{label:u.W.SURGICAL,id:u.W.SURGICAL}],f=e=>{let{onSubmit:a,triageStatus:t}=e,[r,s]=(0,n.useState)({}),[o,c]=(0,n.useState)(!1),[m,b]=(0,n.useState)(null),[h,g]=(0,n.useState)([]),[x,p]=(0,n.useState)([]),{data:f,isLoading:E}=(0,v.X)(u.W.SERVICE_AREAS),{data:R,isLoading:C}=(0,v.X)(u.W.AETC_SERVICE_AREAS),y={Referred:{name:u.W.CARE_AREA,label:"Patient Referred to"},Other_Area:{name:u.W.OTHER_AETC_SERVICE_AREA,label:"Other Area"}},T=(0,d.f6)(y);(0,n.useEffect)(()=>{if(t&&(f||R)){p(null==f?void 0:f.map(e=>({label:e.name,id:e.id})));let e=null==R?void 0:R.filter(e=>e.name.toLowerCase()==u.W.GYNAE_BENCH.toLowerCase()||e.name.toLowerCase()==u.W.SURGICAL_BENCH.toLowerCase()||e.name.toLowerCase()==u.W.MEDICAL_BENCH.toLowerCase());if("red"==t)return void g(A);let a="yellow"===t?R:[...Array.isArray(e)?e:[],...Array.isArray(f)?f:[]];if(a){let e=a.map(e=>({label:e.name,id:e.name}));g(e);let t=e.find(e=>"Other"===e.label);b(t?t.id:null)}}},[t,f,R]),(0,n.useEffect)(()=>{if(r&&null!==m){let e=r[y.Referred.name]&&r[y.Referred.name]===m;c(e),e||s(e=>(delete e[y.Other_Area.name],e))}},[r,m]);let _=S.Ik().shape({[y.Referred.name]:S.Yj().label(y.Referred.label).required("This field is required"),[y.Other_Area.name]:S.Yj().when(y.Referred.name,{is:e=>e===m,then:e=>e.required("This field is required"),otherwise:e=>e.optional()})});return(0,l.jsxs)(l.Fragment,{children:[(C||E)&&(0,l.jsx)(j.A,{}),(0,l.jsxs)(i.PD,{validationSchema:_,initialValues:T,onSubmit:a,submitButton:!0,children:[(0,l.jsx)(i.fP,{getValues:s}),(0,l.jsxs)(i.GE,{direction:"column",children:[h.length>0&&(0,l.jsx)(i.el,{name:y.Referred.name,label:y.Referred.label,options:h,multiple:!1}),o&&(0,l.jsx)(i.el,{name:y.Other_Area.name,label:y.Other_Area.label,options:x,multiple:!1})]})]})]})};var E=t(33115);let R=e=>{let{hidden:a,children:t}=e;return(0,l.jsx)(i.jD,{sx:{display:a?"none":"block"},children:t})};var C=t(98579),y=t(24507),T=t(94706),_=t(25641);function I(){let{ServerTime:e}=(0,_.useServerTime)(),[a,t]=(0,n.useState)(0),[S,v]=(0,n.useState)({}),{params:j}=(0,o.KU)(),[A,I]=(0,n.useState)(""),[O,N]=(0,n.useState)(!1),[W,P]=(0,n.useState)({}),[D,w]=(0,n.useState)([]),[k,L]=(0,n.useState)({}),[V,Y]=(0,n.useState)({}),[B,U]=(0,n.useState)({}),[G,H]=(0,n.useState)({}),[M,F]=(0,n.useState)({}),[z,q]=(0,n.useState)({}),[K,$]=(0,n.useState)(!1),[J,X]=(0,n.useState)(!1),{loading:Q,setLoading:Z,completed:ee,setCompleted:ea,message:et,setMessage:el,showForm:en,setShowForm:ei,error:er,setError:es}=(0,m.g)(),{mutate:eo,isSuccess:eu,isPending:ed,isError:ec,data:em}=(0,c.jM)(),{mutate:eb,isSuccess:eh,isPending:eg,isError:ex}=(0,c.jM)(),{mutate:ep,isSuccess:eS,isPending:ev,isError:ej}=(0,c.jM)(),{mutate:eA,isSuccess:ef,isPending:eE,isError:eR}=(0,c.jM)(),{mutate:eC,isSuccess:ey,isPending:eT,isError:e_}=(0,c.jM)(),{mutate:eI,isSuccess:eO,isPending:eN,isError:eW}=(0,c.jM)(),{mutate:eP,isSuccess:eD,isPending:ew,isError:ek}=(0,c.jM)(),{navigateTo:eL,navigateBack:eV}=(0,o.cq)(),{data:eY}=(0,p.iu)(null==j?void 0:j.id),eB=null==eY?void 0:eY.find(e=>!e.date_stopped),{mutate:eU,isSuccess:eG}=(0,C.FD)(),{data:eH}=(0,c.$O)(null==j?void 0:j.id),[eM,eF]=(0,n.useState)(),[ez,eq]=(0,n.useState)(),eK=e=>null==eH?void 0:eH.filter(a=>(null==a?void 0:a.encounter_type.uuid)==e).find(e=>e.visit_id==(null==eB?void 0:eB.visit_id));(0,n.useEffect)(()=>{eF(eK(u.fA.REFERRAL)),eq(eK(u.fA.INITIAL_REGISTRATION))},[eH]);let e$=(0,y.m)(null==eM?void 0:eM.obs,u.W.REFERRED_FROM);(0,n.useEffect)(()=>{if(eu){ea(1),el("adding vitals...");let a=e.getServerTimeString();eb({encounterType:u.fA.VITALS,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:a,obs:(0,d.gX)(S.vitals,a)})}},[eu]),(0,n.useEffect)(()=>{if(eh){let a=e.getServerTimeString();ea(2),el("adding airway..."),ep({encounterType:u.fA.AIRWAY_BREATHING,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:a,obs:S.airway})}},[eh]),(0,n.useEffect)(()=>{if(eS){let a=e.getServerTimeString();ea(3),el("adding blood circulation data..."),eA({encounterType:u.fA.BLOOD_CIRCULATION,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:a,obs:S.bloodCirculation})}},[eS]),(0,n.useEffect)(()=>{if(ef){let a=e.getServerTimeString();ea(4),el("adding disability..."),eC({encounterType:u.fA.DISABILITY_ASSESSMENT,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:a,obs:S.disability})}},[ef]),(0,n.useEffect)(()=>{if(ey){ea(5);let a=e.getServerTimeString();el("adding pain and persistent..."),eI({encounterType:u.fA.PERSISTENT_PAIN,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:a,obs:S.pain})}},[ey]),(0,n.useEffect)(()=>{var a,t,l,n;if(eO){ea(6),el("finalizing...");let n="red"===A?null:null==(a=Object.entries(null!=(l=null==S?void 0:S.serviceArea)?l:{}).find(e=>{let[a]=e;return a!==u.W.OTHER_AETC_SERVICE_AREA}))?void 0:a[1],i=e.getServerTimeString();eP({encounterType:u.fA.TRIAGE_RESULT,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:i,obs:[{concept:u.W.TRIAGE_RESULT,value:A,obsDatetime:i},{concept:u.W.CARE_AREA,value:(null==S||null==(t=S.serviceArea)?void 0:t[u.W.CARE_AREA])||"",obsDatetime:i},{concept:u.W.OTHER_AETC_SERVICE_AREA,value:n||"",obsDatetime:i}]})}if("green"==A){let e=null==S||null==(n=S.serviceArea)?void 0:n[u.W.CARE_AREA];if((null==e?void 0:e.toLowerCase())==(null===u.W||void 0===u.W?void 0:u.W.GYNAE_BENCH.toLowerCase())||(null==e?void 0:e.toLowerCase())==(null===u.W||void 0===u.W?void 0:u.W.MEDICAL_BENCH.toLowerCase())||(null==e?void 0:e.toLowerCase())==(null===u.W||void 0===u.W?void 0:u.W.SURGICAL_BENCH.toLowerCase()))return;el("closing visit..."),eU(null==eB?void 0:eB.uuid)}},[eO]),(0,n.useEffect)(()=>{eD&&(ea(7),Z(!1))},[eD]),(0,n.useEffect)(()=>{es(ec||ex||ej||eR||e_||ek||eW)},[ec,ex,ej,eR,e_,eW,ek]);let eJ=e=>{S.pain=e,ei(!1),$(!0)},eX=e=>{let a={...e};a&&void 0!==a[u.W.GLUCOSE]&&void 0!==a[u.W.ADDITIONAL_NOTES]&&(a[u.W.GLUCOSE]="".concat(a[u.W.GLUCOSE]," ").concat(a[u.W.ADDITIONAL_NOTES])),S.vitals=a,t(2),w(e=>[...e,1])},eQ=e=>{S.airway=e,t(3),w(e=>[...e,2])},eZ=e=>{S.bloodCirculation=e,t(4),w(e=>[...e,3])},e0=e=>{S.disability=e,t(5),w(e=>[...e,4])},e1=e=>{S.presentingComplaints=e,t(1),w(e=>[...e,0])};(0,n.useEffect)(()=>{let e="",a=Object.keys(W);for(let t=0;t<a.length;t++){if("red"==W[a[t]]){e="red";break}"yellow"==W[a[t]]&&(e="yellow"),"yellow"!=e&&(e="green")}I(e)},[W]),(0,n.useEffect)(()=>{"red"==A&&E.oR.error("Triage Red",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:E.br}),"yellow"==A&&E.oR.warn("Triage Yellow",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:E.br})},[A]);let e5=(e,a)=>{P(t=>({...t,[a]:e}))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(R,{hidden:!en,children:[A&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.um,{onCompleteTriage:()=>{e1(k),eQ(B),eZ(G),e0(G),eX(V),eJ(z)},result:A,message:"Interventions",setContinueTriage:N}),(0,l.jsx)("br",{})]}),(0,l.jsxs)(i.RG,{setActive:e=>{t(e)},title:"Triage",steps:[{id:6,label:"Presenting Complaints"},{id:5,label:"Vitals Signs"},{id:1,label:"Airway/Breathing"},{id:2,label:"Blood Circulation"},{id:3,label:"Disability"},{id:4,label:"Persistent Pain/Other Concerns"}],active:a,onBack:()=>eV(),allowPanelActiveOnClick:!1,backButtonProfileText:"Back to triage list",children:[(0,l.jsx)(r.M1,{getFormValues:L,triageResult:A,setTriageResult:e5,onSubmit:e1}),(0,l.jsx)(s.u,{previous:()=>t(0),triageResult:A,setTriageResult:e5,initialValues:{},onSubmit:eX,continueTriage:O,getFormValues:Y}),(0,l.jsx)(r.hC,{getFormValues:U,previous:()=>t(1),continueTriage:O,triageResult:A,setTriageResult:e5,onSubmit:eQ}),(0,l.jsx)(r.Eh,{previous:()=>t(2),getFormValues:H,continueTriage:O,triageResult:A,setTriageResult:e5,onSubmit:eZ}),(0,l.jsx)(r.QD,{getFormValues:F,previous:()=>t(3),continueTriage:O,triageResult:A,setTriageResult:e5,onSubmit:e0}),(0,l.jsx)(r.WJ,{getFormValues:q,previous:()=>t(4),continueTriage:O,setTriageResult:e5,triageResult:A,onSubmit:eJ})]})]}),7==ee&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.k2,{arrivalTime:(0,x.rX)(null==ez?void 0:ez.encounter_datetime),open:J,onClose:()=>X(!1),presentingComplaints:k[u.W.PRESENTING_COMPLAINTS].reduce((e,a)=>""==e?a.label:e+","+a.label,""),triageCategory:A,date:(0,x.rX)(e.getServerTimeString()),triagedBy:null==em?void 0:em.created_by,referredFrom:e$,vitals:[{name:s.D.saturationRate.short,value:V[s.D.saturationRate.name]},{name:s.D.heartRate.short,value:V[s.D.heartRate.name]},{name:s.D.bloodPressure.short,value:"".concat(V[s.D.bloodPressure.name],"/").concat(V[s.D.bloodPressureDiastolic.name])},{name:s.D.respiratoryRate.short,value:V[s.D.respiratoryRate.name]},{name:s.D.temperature.short,value:V[s.D.temperature.name]},{name:s.D.avpu.label,value:V[s.D.avpu.name]},{name:"".concat(s.D.glucose.label,"(").concat(V[s.D.units.name],")"),value:V[s.D.glucose.name]}]}),(0,l.jsx)(g.n,{title:"Patient Triaged Successfully",primaryActionText:"Triage more patients",secondaryActionText:"Go Home",printButton:(0,l.jsx)(i.O6,{sx:{mx:"2px"},variant:"secondary",title:"print",onClick:()=>X(!0)}),onPrimaryAction:()=>{ei(!0),ea(0),eL("/triage")},onSecondaryAction:()=>eL("/dashboard")})]}),er&&(0,l.jsx)(h.j,{error:et,onPrimaryAction:()=>{es(!1),ea(0),Z(!1),ei(!0)},onSecondaryAction:()=>{ea(0),ei(!0),Z(!1),es(!1)}}),(0,l.jsxs)(i.eV,{open:K,onClose:()=>{$(!1),eV()},title:"Triage Decision",children:[(0,l.jsxs)("p",{children:["Triage status is (","green"===A?(0,l.jsx)("span",{style:{color:"green"},children:A}):"red"===A?(0,l.jsx)("span",{style:{color:"red"},children:A}):(0,l.jsx)("span",{style:{color:"#cc9900"},children:A}),"). Where should this patient go next?"]}),(0,l.jsx)(f,{onSubmit:a=>{S.serviceArea=a,el("adding next service area..."),(()=>{Z(!0);let a=e.getServerTimeString();el("adding complaints..."),eo({encounterType:u.fA.PRESENTING_COMPLAINTS,visit:null==eB?void 0:eB.uuid,patient:j.id,encounterDatetime:a,obs:S.presentingComplaints})})(),$(!1)},triageStatus:A})]}),Q&&!er&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(b.n,{message:et,progress:ee/7*100})]})]})}},22039:(e,a,t)=>{t.d(a,{hC:()=>h,Eh:()=>j,uM:()=>B,QD:()=>O,WJ:()=>C,M1:()=>ej,um:()=>U,TU:()=>eo});var l=t(95155),n=t(12115),i=t(72478),r=t(35068),s=t(87295),o=t(51267),u=t(263);let d={airway:{name:u.W.IS_AIRWAY_COMPROMISED,label:"is Airway Compromised",coded:!0},breathing:{name:u.W.IS_BREATHING_ABNORMAL,label:"is Breathing Abnormal",coded:!0},respiratoryDysfunction:{name:u.W.SEVERE_RESPIRATORY,label:"Severe Respiratory dysfunction or exhaustion ",coded:!0},inabilityToSpeak:{name:u.W.INABILITY_TO_SPEAK,label:"Inability to speak in complete sentences ",coded:!0},stridor:{name:u.W.STRIDOR,label:"Stridor",coded:!0},reducedLevelOfConsciousness:{name:u.W.REDUCED_LEVEL_CONSCIOUSNESS,label:"Reduced Level of Consciousness due to low oxygen",coded:!0}},c=r.Ik().shape({[d.airway.name]:r.Yj().required().label(d.airway.label),[d.breathing.name]:r.Yj().required().label(d.breathing.label),[d.respiratoryDysfunction.name]:r.Yj().label(d.respiratoryDysfunction.label),[d.stridor.name]:r.Yj().label(d.stridor.label),[d.reducedLevelOfConsciousness.name]:r.Yj().label(d.reducedLevelOfConsciousness.label)}),m=(0,o.f6)(d),b=[{label:"Yes",value:u._Y},{label:"No",value:u.NO}],h=e=>{let{onSubmit:a,triageResult:t,setTriageResult:r,continueTriage:h,previous:g,getFormValues:x}=e,[p,S]=(0,n.useState)("false"),[v,j]=(0,n.useState)({}),{conditions:A,updateConditions:f,aggregateOrCondition:E}=(0,s.AS)(),[R,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{C(!E&&4==Object.keys(A).length)},[A]);let y=e=>"red"===t&&!v[e]&&!h,T=(e,a)=>{};return(0,l.jsxs)(i.PD,{validationSchema:c,initialValues:m,submitButtonText:"next",submitButton:!1,onSubmit:async e=>a(await (0,o.k$)(d,e)),getFormValues:async e=>x(await (0,o.k$)(d,e)),children:[(0,l.jsx)(i.fP,{getValues:j}),(0,l.jsx)(i.kI,{last:p!=u._Y,title:"Airway and Breathing",children:(0,l.jsxs)(i.Vp,{sx:{width:"100%"},children:[(0,l.jsx)(i.b1,{name:d.airway.name,label:d.airway.label,getValue:e=>{if(e==u._Y)return void r("red",d.airway.name);r("",d.airway.name)},options:b,disabled:y(d.airway.name)}),(0,l.jsx)(i.b1,{name:d.breathing.name,label:d.breathing.label,getValue:e=>S(e),options:b,disabled:y(d.breathing.name)})]})}),p==u._Y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.kI,{title:"Exhaustion and Inability to Speak",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{name:d.respiratoryDysfunction.name,disabled:y(d.respiratoryDysfunction.name),label:d.respiratoryDysfunction.label,getValue:e=>{f(d.respiratoryDysfunction.name,e),T(d.respiratoryDysfunction.name,e)},options:b}),(0,l.jsx)(i.b1,{name:d.inabilityToSpeak.name,label:d.inabilityToSpeak.label,disabled:y(d.inabilityToSpeak.name),options:b,getValue:e=>{f(d.inabilityToSpeak.name,e),T(d.inabilityToSpeak.name,e)}})]})}),(0,l.jsx)(i.kI,{title:"Stridor and Reduced Consciousness",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{name:d.stridor.name,label:d.stridor.label,disabled:y(d.stridor.name),options:b,getValue:e=>{f(d.stridor.name,e),T(d.stridor.name,e)}}),(0,l.jsx)(i.b1,{name:d.reducedLevelOfConsciousness.name,label:d.reducedLevelOfConsciousness.label,disabled:y(d.reducedLevelOfConsciousness.name),getValue:e=>{f(d.reducedLevelOfConsciousness.name,e),T(d.reducedLevelOfConsciousness.name,e)},options:b})]})})]}),(0,l.jsxs)(i.jD,{children:[(0,l.jsx)(i.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:g}),(0,l.jsx)(i.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})};var g=t(98672);let x={isCirculationAbnormal:{name:u.W.IS_CIRCULATION_ABNORMAL,label:"Is Circulation Abnormal",coded:!0},weakIrregularPulse:{name:u.W.WEAK_THREADY,label:"Weak, Thready, Bounding or regular/irregular pulse"},heartRate:{name:u.W.HEART_RATE,label:"Heart Rate"},pulseRate:{name:u.W.PULSE_RATE,label:"Pulse Rate"},reducedUrinaryOutput:{name:u.W.REDUCED_URINARY_OUTPUT,label:"Reduced urinary output < 30ml/hr",coded:!0},clammyPeripherals:{name:u.W.CAPILLARY_REFILL,label:"Cool clammy peripherals or cap refill > 4 seconds",coded:!0},hemorrhage:{name:u.W.HEMORRHAGE,label:"Hemorrhage",coded:!0},dehydration:{name:u.W.DEHYDRATION_SKIN,label:"Dehydration skin turgor, sunken eyes",coded:!0}},p=r.Ik().shape({[x.isCirculationAbnormal.name]:r.Yj().required().label(x.isCirculationAbnormal.label),[x.heartRate.name]:r.Yj().label(x.heartRate.label),[x.pulseRate.name]:r.Yj().label(x.pulseRate.label),[x.weakIrregularPulse.name]:r.Yj().label(x.weakIrregularPulse.label),[x.reducedUrinaryOutput.name]:r.Yj().label(x.reducedUrinaryOutput.label),[x.clammyPeripherals.name]:r.Yj().label(x.clammyPeripherals.label),[x.hemorrhage.name]:r.Yj().label(x.hemorrhage.label),[x.dehydration.name]:r.Yj().label(x.dehydration.label)}),S=(0,o.f6)(x),v=[{label:"Yes",value:u._Y},{label:"No",value:u.NO}],j=e=>{let{onSubmit:a,triageResult:t,continueTriage:r,previous:d,setTriageResult:c,getFormValues:m}=e,[b,h]=(0,n.useState)(""),[j,A]=(0,n.useState)({}),{updateConditions:f,aggregateOrCondition:E,conditions:R}=(0,s.AS)(),{flow:C}=(0,n.useContext)(g.gd),{navigateTo:y}=(0,s.cq)(),T=e=>"red"===t&&!j[e]&&!r,_=(e,a)=>{},I="yellow"==C.heart||"red"==C.heart||"yellow"==C.diastolic||"red"==C.diastolic||"yellow"==C.systolic||"red"==C.systolic;return(0,l.jsxs)(i.PD,{validationSchema:p,initialValues:{...S,[x.isCirculationAbnormal.name]:I?u._Y:u.NO},enableReinitialize:!0,submitButtonText:"next",submitButton:!1,onSubmit:async e=>a(await (0,o.k$)(x,e)),getFormValues:async e=>m(await (0,o.k$)(x,e)),children:[(0,l.jsx)(i.fP,{getValues:A}),(0,l.jsx)(i.kI,{last:b!=u._Y,title:"Circulation",children:(0,l.jsx)(i.b1,{name:x.isCirculationAbnormal.name,label:x.isCirculationAbnormal.label,options:v,getValue:e=>h(e),disabled:T(x.isCirculationAbnormal.name)})}),(0,l.jsx)("br",{}),b==u._Y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.kI,{title:"Heart Rate and Pulse",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{name:x.heartRate.name,label:x.heartRate.label,options:[{label:"Weak/Thready",value:"Weak/Thready"},{label:"Strong",value:"Strong"}],disabled:T(x.heartRate.name),getValue:e=>f(x.heartRate.name,e)}),(0,l.jsx)(i.b1,{name:x.pulseRate.name,label:x.pulseRate.label,options:[{label:"Irregular",value:"Irregular"},{label:"Regular",value:"Regular"}],disabled:T(x.pulseRate.name),getValue:e=>f(x.pulseRate.name,e)})]})}),(0,l.jsx)(i.kI,{title:"Reduced Urinary and Clammy Peripherals",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{disabled:T(x.reducedUrinaryOutput.name),name:x.reducedUrinaryOutput.name,label:x.reducedUrinaryOutput.label,options:v,getValue:e=>{f(x.reducedUrinaryOutput.name,e),_(x.reducedUrinaryOutput.name,e)}}),(0,l.jsx)(i.b1,{disabled:T(x.clammyPeripherals.name),name:x.clammyPeripherals.name,label:x.clammyPeripherals.label,options:v,getValue:e=>{f(x.clammyPeripherals.name,e),_(x.clammyPeripherals.name,e)}})]})}),(0,l.jsx)(i.kI,{title:"Hemorrhage and Skin Turgor",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{disabled:T(x.hemorrhage.name),name:x.hemorrhage.name,label:x.hemorrhage.label,options:v,getValue:e=>{f(x.hemorrhage.name,e),_(x.hemorrhage.name,e)}}),(0,l.jsx)(i.b1,{disabled:T(x.dehydration.name),name:x.dehydration.name,label:x.dehydration.label,getValue:e=>{f(x.dehydration.name,e),_(x.dehydration.name,e)},options:v})]})}),!E&&6==Object.keys(R).length&&(0,l.jsx)(l.Fragment,{})]}),(0,l.jsxs)(i.jD,{children:[(0,l.jsx)(i.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:d}),(0,l.jsx)(i.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})},A={activeSeizures:{name:u.W.ACTIVE_SEIZURES,label:"Active Seizures",coded:!0},focalNeurological:{name:u.W.FOCAL_NEUROLOGICAL,label:"focal neurologic findings",coded:!0},headache:{name:u.W.HEADACHE,label:"Headache",coded:!0},weakness:{name:u.W.WEAKNESS,label:"Weakness",coded:!0},confusion:{name:u.W.CONFUSION,label:"Confusion",coded:!0},severePain:{name:u.W.SEVERE_PAIN,label:"Severe Pain",coded:!0},moderatePain:{name:u.W.MODERATE_PAIN,label:"moderate pain or a reason to be seen in under four hours",coded:!0}},f=r.Ik().shape({[A.activeSeizures.name]:r.Yj().required().label(A.activeSeizures.label),[A.confusion.name]:r.Yj().required().label(A.confusion.label),[A.headache.name]:r.Yj().required().label(A.headache.label),[A.moderatePain.name]:r.Yj().required().label(A.moderatePain.label),[A.severePain.name]:r.Yj().required().label(A.severePain.label),[A.weakness.name]:r.Yj().required().label(A.weakness.label),[A.focalNeurological.name]:r.Yj().required().label(A.focalNeurological.label)}),E=(0,o.f6)(A),R=[{label:"Yes",value:u._Y},{label:"No",value:u.NO}],C=e=>{let{onSubmit:a,triageResult:t,continueTriage:r,previous:d,setTriageResult:c,getFormValues:m}=e,{updateConditions:b}=(0,s.AS)(),[h,g]=(0,n.useState)({}),x=e=>"red"===t&&!h[e]&&!r;return(0,l.jsxs)(i.PD,{validationSchema:f,initialValues:E,submitButton:!1,onSubmit:async e=>a(await (0,o.k$)(A,e)),getFormValues:async e=>m(await (0,o.k$)(A,e)),children:[(0,l.jsx)(i.fP,{getValues:g}),(0,l.jsx)(i.kI,{title:"Seizures and Focal Neurologic",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{name:A.activeSeizures.name,label:A.activeSeizures.label,options:R,disabled:x(A.activeSeizures.name),getValue:e=>{b(A.activeSeizures.name,e),e==u._Y?c("red",A.activeSeizures.name):c("green",A.activeSeizures.name)}}),(0,l.jsx)(i.b1,{name:A.focalNeurological.name,label:A.focalNeurological.label,options:R,disabled:x(A.focalNeurological.name),getValue:e=>{b(A.focalNeurological.name,e),e==u._Y?c("red",A.focalNeurological.name):c("green",A.focalNeurological.name)}})]})}),(0,l.jsx)(i.kI,{title:"Headache and Weakness",children:(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{name:A.headache.name,disabled:x(A.headache.name),label:A.headache.label,options:R,getValue:e=>{e==u._Y?c("yellow",A.headache.name):c("green",A.headache.name),b(A.headache.name,e)}}),(0,l.jsx)(i.b1,{name:A.weakness.name,disabled:x(A.weakness.name),label:A.weakness.label,options:R,getValue:e=>{b(A.weakness.name,e),e==u._Y?c("yellow",A.weakness.name):c("green",A.weakness.name)}})]})}),(0,l.jsxs)(i.kI,{last:!0,title:"Severe Pain and Confusion",children:[(0,l.jsxs)(i.Vp,{children:[(0,l.jsx)(i.b1,{name:A.severePain.name,disabled:x(A.severePain.name),label:A.severePain.label,options:R,getValue:e=>{b(A.severePain.name,e),e==u._Y?c("red",A.severePain.name):c("green",A.severePain.name)}}),(0,l.jsx)(i.b1,{name:A.confusion.name,disabled:x(A.confusion.name),label:A.confusion.label,options:R,getValue:e=>{b(A.confusion.name,e),e==u._Y?c("yellow",A.confusion.name):c("green",A.confusion.name)}})]}),(0,l.jsx)(i.Vp,{children:(0,l.jsx)(i.b1,{disabled:x(A.moderatePain.name),name:A.moderatePain.name,label:A.moderatePain.label,options:R,getValue:e=>{e==u._Y?c("yellow",A.moderatePain.name):c("green",A.moderatePain.name)}})})]}),(0,l.jsxs)(i.jD,{children:[(0,l.jsx)(i.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:d}),(0,l.jsx)(i.O6,{sx:{m:.5},title:"submit",type:"submit",onClick:()=>{}})]})]})},y={consciousness:{name:u.W.DOES_PATIENT_LOW_LEVEL_CONSCIOUSNESS,label:"Does the patient have a reduced Level of consciousness",coded:!0},bloodGlucose:{name:u.W.BLOOD_GLUCOSE,label:"Blood Glucose"},gcs:{name:u.W.GCS,label:"GCS"}},T=r.Ik().shape({[y.consciousness.name]:r.Yj().required().label(y.consciousness.label),[y.bloodGlucose.name]:r.Yj().label(y.bloodGlucose.label),[y.gcs.name]:r.Yj().label(y.gcs.label)}),_=[{label:"Yes",value:u._Y},{label:"No",value:u.NO}],I=(0,o.f6)(y),O=e=>{let a,{onSubmit:t,triageResult:r,setTriageResult:s,continueTriage:d,previous:c,getFormValues:m}=e,{flow:b}=(0,n.useContext)(g.gd),[h,x]=(0,n.useState)(),[p,S]=(0,n.useState)({});return(0,l.jsxs)(i.PD,{validationSchema:T,initialValues:{...I,[y.consciousness.name]:b.gsc<15?u._Y:u.NO,[y.gcs.name]:b.gsc,[y.bloodGlucose.name]:b.glucose},enableReinitialize:!0,onSubmit:async e=>t(await (0,o.k$)(y,e)),getFormValues:async e=>m(await (0,o.k$)(y,e)),submitButtonText:"next",submitButton:!1,children:[(0,l.jsx)(i.fP,{getValues:S}),(0,l.jsx)(i.kI,{last:h!=u._Y,title:"Consciousness",children:(0,l.jsx)(i.b1,{name:y.consciousness.name,label:y.consciousness.label,options:_,getValue:e=>x(e),disabled:(a=y.consciousness.name,"red"===r&&!p[a]&&!d)})}),h==u._Y&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.kI,{last:!0,title:"Blood Glucose and GCS",children:(0,l.jsxs)(i.Vp,{mr:"1ch",children:[(0,l.jsx)(i.A8,{sx:{width:"100%"},name:y.bloodGlucose.name,label:y.bloodGlucose.label,id:y.bloodGlucose.name,disabled:!0}),(0,l.jsx)(i.A8,{sx:{width:"100%"},name:y.gcs.name,label:y.gcs.label,id:y.gcs.name,getValue:e=>{if(!e)return void s("",y.gcs.name);e<10&&s("red",y.gcs.name),e>=10&&e<=14&&s("yellow",y.gcs.name)},disabled:!0})]})})}),(0,l.jsxs)(i.jD,{children:[(0,l.jsx)(i.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:c}),(0,l.jsx)(i.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})};t(1831);var N=t(26301),W=t(65494),P=t(94706),D=t(78470),w=t(1151),k=t(97998),L=t(81013),V=t(94054),Y=t(39625);let B=()=>{let[e,a]=(0,n.useState)(!1),[t,r]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[c,m]=(0,n.useState)(""),{navigateTo:b}=(0,s.cq)(),{loading:h,patients:g,paginationModel:x,setPaginationModel:p,searchText:S,setSearchText:v,totalPages:j,setOnSwitch:A,totalEntries:f}=(0,L.a)("triage"),[E,R]=(0,n.useState)(""),C=(0,V.d)(E,500);(0,n.useEffect)(()=>{v(C)},[C]);let y=null==g?void 0:g.map(e=>({id:null==e?void 0:e.uuid,...e,patient_arrival_time:(0,N.WB)(e.arrival_time)})).filter(e=>e.id!=c),T=[{field:"aetc_visit_number",headerName:"Visit Number"},{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"patient_arrival_time",headerName:"Arrival Time"},{field:"waiting",headerName:"WaitingTime",flex:1,renderCell:e=>(0,l.jsx)(i.VJ,{arrival_time:e.row.latest_encounter_time})},{field:"aggreg",headerName:"Aggregate",flex:1,renderCell:e=>(0,l.jsx)(i.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Registered By",flex:1},{field:"action",headerName:"Action",flex:1.2,renderCell:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.A,{title:"Start Triage",arrow:!0,children:(0,l.jsx)(w.default,{onClick:()=>b("/triage/".concat(e.id,"/start")),"aria-label":"start Triage",color:"primary",children:(0,l.jsx)(k.gSK,{})})}),(0,l.jsx)(W.R,{onDelete:()=>m(e.id),visitId:e.row.visit_uuid,patientId:e.id}),(0,l.jsx)(P.jx,{icon:!0,uuid:e.row.uuid}),(0,l.jsx)(D.A,{title:"Initiate CPR",arrow:!0,children:(0,l.jsx)(w.default,{onClick:()=>{r(e.id),a(!0),d(e.row.visit_uuid)},"aria-label":"initiate CPR",color:"error",children:(0,l.jsx)(k.szJ,{})})})]})}],_=null==y?void 0:y.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,actor:(0,l.jsx)(i.uT,{encounterType:u.fA.SOCIAL_HISTORY,patientId:e.id}),aggregate:(0,l.jsx)(i.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,l.jsx)(i.VJ,{arrival_time:null==e?void 0:e.latest_encounter_time}),actionName:"Registered by",action:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.O6,{size:"small",sx:{fontSize:"12px",width:"30%",mr:"1px",mb:"1px"},title:"start",onClick:()=>b("/triage/".concat(e.id,"/start"))}),(0,l.jsx)(W.R,{sx:{width:"30%"},onDelete:()=>m(e.id),visitId:e.visit_uuid,patientId:e.id}),(0,l.jsx)(P.jx,{sx:{width:"30%"},uuid:e.uuid})]}),age:(0,N.Cb)(e.birthdate),triageResult:e.triage_result}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.vP,{columns:T,data:{data:null!=y?y:[],page:x.page,per_page:x.pageSize,total_pages:j,totalEntries:f},searchText:E,setSearchString:R,setPaginationModel:p,paginationModel:x,loading:h,formatForMobileView:_||[],onSwitchChange:A,onRowClick:e=>b("/triage/".concat(e.id,"/start"))}),(0,l.jsx)(Y.w8,{patientuuid:t,visituuid:o,open:e,onClose:()=>a(!1)})]})},U=e=>{let{message:a,result:t,onCompleteTriage:r,setContinueTriage:s}=e,[u,d]=(0,n.useState)(!1),c=()=>{(0,o.iE)({title:"Complete Triage?",text:"Once you confirm you will not be able to proceed with the current triage for this patient",icon:"warning",confirmButtonText:"Yes, Complete",onConfirm:()=>{r()}})};return"green"==t?null:(0,l.jsxs)(i.sc,{elevation:0,sx:{...{red:{backgroundColor:"#FECDCA",color:"#B42318"},yellow:{backgroundColor:"#FEDF89",color:"#B54708"},green:{backgroundColor:"#DDEEDD",color:"#016302"},"":{}}[t],p:"1ch"},children:[(0,l.jsxs)(i.Th,{variant:"h4",textTransform:"capitalize",children:["Triage ",t]}),(0,l.jsx)(i.Th,{fontStyle:"italic",variant:"subtitle1",children:"yellow"==t?"Continue Triage":"red"==t?"Proceed to interventions":""}),"red"==t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.O6,{sx:{backgroundColor:"#B42318","&:hover":{backgroundColor:"#B42318"},mr:"0.5ch"},title:"Complete Triage",onClick:c}),(0,l.jsx)(i.O6,{variant:"secondary",title:"Continue Triage",onClick:()=>s(!0)}),(0,l.jsx)(i.O6,{variant:"secondary",sx:{ml:"0.5ch"},title:"Start CPR",onClick:()=>d(!0)})]}),(0,l.jsx)(Y.w8,{open:u,onClose:()=>{c(),d(!1)}})]})};var G=t(24507),H=t(96887),M=t(66637),F=t(94049),z=t(25635),q=t(98267),K=t(20537),$=t(37960),J=t(15966),X=t(8279),Q=t(22379),Z=t(2300),ee=t(3004),ea=t(86973),et=t(81114),el=t(80777),en=t(56164),ei=t(21799),er=t(5387);function es(){let{setActiveVisit:e,activeVisit:a,setOpenVisit:t}=n.useContext(g.U),[r,o]=n.useState(!1),u=n.useRef(null),{params:d}=(0,s.KU)(),[c,m]=(0,n.useState)([]),[b,h]=(0,n.useState)(""),{data:x,isLoading:p,isSuccess:S}=(0,er.iu)(null==d?void 0:d.id);(0,n.useEffect)(()=>{if(S){let a=x.find(e=>!e.date_stopped);a?(h(null==a?void 0:a.date_started),e(null==a?void 0:a.visit_id),t(!0)):t(!1),m(x)}},[S]);let v=e=>{u.current&&u.current.contains(e.target)||o(!1)};function j(e){"Tab"===e.key?(e.preventDefault(),o(!1)):"Escape"===e.key&&o(!1)}let A=n.useRef(r);return n.useEffect(()=>{!0===A.current&&!1===r&&u.current.focus(),A.current=r},[r]),(0,l.jsx)(el.A,{direction:"row",spacing:2,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)(F.default,{ref:u,id:"composition-button","aria-controls":r?"composition-menu":void 0,"aria-expanded":r?"true":void 0,"aria-haspopup":"true",onClick:()=>{o(e=>!e)},sx:{display:"flex",cursor:"pointer",alignItems:"center",backgroundColor:"#ccc",padding:"1ch",borderRadius:"5px"},children:[(0,l.jsx)(i.Th,{sx:{marginRight:"1ch",fontWeight:"bold"},children:"Visit date:"}),(0,l.jsx)(en.nxe,{}),(0,l.jsx)(i.Th,{sx:{marginRight:"1ch",ml:"1ch",lineHeight:"17px",letterSpacing:"0em",textAlign:"left",textTransform:"capitalize"},children:(0,N.Eb)(b)}),r?(0,l.jsx)(ei.Ik,{}):(0,l.jsx)(ei.pte,{})]}),(0,l.jsx)(ee.A,{open:r,anchorEl:u.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,sx:{zIndex:1e5},children:t=>{let{TransitionProps:n,placement:s}=t;return(0,l.jsx)(Q.A,{...n,style:{transformOrigin:"bottom-start"===s?"left top":"left bottom"},children:(0,l.jsx)(Z.default,{children:(0,l.jsx)(X.x,{onClickAway:v,children:(0,l.jsx)(et.A,{autoFocusItem:r,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:j,children:c.map(t=>(0,l.jsxs)(ea.A,{sx:{py:"2ch",mx:"1ch",display:"flex",justifyContent:"space-between",width:"240px","& .icon":{display:"none"}},onClick:a=>{e(t.visit_id),h(t.date_started),v(a)},children:[(0,l.jsx)(i.Th,{sx:{lineHeight:"21px",letterSpacing:"0em",textAlign:"left"},children:(0,N.Eb)(t.date_started)}),a==t.visit_id&&(0,l.jsx)(i.Th,{children:(0,l.jsx)(en.CMH,{})})]},t.visit_id))})})})})}})]})})}let eo=()=>{let{activeVisit:e}=(0,n.useContext)(g.U),{params:a}=(0,s.KU)(),{data:t,isLoading:r}=(0,M.$O)(null==a?void 0:a.id),[o,c]=(0,n.useState)(0),[m,b]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[S,v]=(0,n.useState)([]),[j,f]=(0,n.useState)([]),[E,R]=(0,n.useState)([]),[C,T]=(0,n.useState)({}),[_,I]=(0,n.useState)({}),[O,N]=(0,n.useState)({}),[W,P]=(0,n.useState)({}),[D,w]=(0,n.useState)({}),[L,V]=(0,n.useState)([]);(0,n.useEffect)(()=>{Y()},[o]),(0,n.useEffect)(()=>{V(Object.keys(C).map(e=>({value:Number(e),label:"Triage ".concat(Number(e)+1)}))),Y()},[C,_]);let Y=()=>{U(Object.keys(_).length>0?_[o]:[]),X(Object.keys(O).length>0?O[o]:[]),Q(Object.keys(D).length>0?D[o]:[]),B(Object.keys(C).length>0?C[o]:[]),z(Object.keys(W).length>0?W[o]:[])};(0,n.useEffect)(()=>{if(t&&0!==e){let a=(0,G.tl)(t,u.fA.VITALS,e),l=(0,G.tl)(t,u.fA.AIRWAY_ASSESSMENT,e),n=(0,G.tl)(t,u.fA.DISABILITY_ASSESSMENT,e),i=(0,G.tl)(t,u.fA.PERSISTENT_PAIN,e),r=(0,G.tl)(t,u.fA.BLOOD_CIRCULATION,e);T((0,G.Ev)(a)),I((0,G.CK)(l)),N((0,G.Mm)(n)),w((0,G.e8)(i)),P((0,G.Gi)(r))}},[t,e]);let B=e=>{b([{name:"".concat(H.D.saturationRate.label," (%)"),value:(0,G.m)(e,u.W.OXYGEN_SATURATION)},{name:"".concat(H.D.heartRate.label," (bpm)"),value:(0,G.m)(e,u.W.HEART_RATE)},{name:"Blood Pressure (mmHg)",value:"".concat((0,G.m)(e,u.W.SYSTOLIC_BLOOD_PRESSURE),"/").concat((0,G.m)(e,u.W.DIASTOLIC_BLOOD_PRESSURE))},{name:"".concat(H.D.respiratoryRate.label," (bpm)"),value:(0,G.m)(e,u.W.RESPIRATORY_RATE)},{name:"".concat(H.D.temperature.label," (\xb0C)"),value:(0,G.m)(e,u.W.TEMPERATURE)},{name:"".concat(H.D.glucose.label," (mg/dL)"),value:(0,G.m)(e,u.W.GLUCOSE)},{name:"".concat(H.D.avpu.label),value:(0,G.m)(e,u.W.AVPU)}])},U=e=>{p([{name:"".concat(d.airway.label),value:(0,G.m)(e,u.W.IS_AIRWAY_COMPROMISED)},{name:"".concat(d.breathing.label),value:(0,G.m)(e,u.W.IS_BREATHING_ABNORMAL)},{name:"".concat(d.respiratoryDysfunction.label),value:(0,G.m)(e,u.W.SEVERE_RESPIRATORY)},{name:"".concat(d.inabilityToSpeak.label),value:(0,G.m)(e,u.W.INABILITY_TO_SPEAK)},{name:"".concat(d.stridor.label),value:(0,G.m)(e,u.W.STRIDOR)},{name:"".concat(d.reducedLevelOfConsciousness.label),value:(0,G.m)(e,u.W.REDUCED_LEVEL_CONSCIOUSNESS)}])},z=e=>{v([{name:"".concat(x.isCirculationAbnormal.label),value:(0,G.m)(e,u.W.IS_CIRCULATION_ABNORMAL)},{name:"".concat(x.weakIrregularPulse.label),value:(0,G.m)(e,u.W.WEAK_THREADY)},{name:"".concat(x.heartRate.label),value:(0,G.m)(e,u.W.HEART_RATE)},{name:"".concat(x.pulseRate.label),value:(0,G.m)(e,u.W.PULSE_RATE)},{name:"".concat(x.reducedUrinaryOutput.label),value:(0,G.m)(e,u.W.REDUCED_URINARY_OUTPUT)},{name:"".concat(x.clammyPeripherals.label),value:(0,G.m)(e,u.W.CAPILLARY_REFILL)},{name:"".concat(x.hemorrhage.label),value:(0,G.m)(e,u.W.HEMORRHAGE)},{name:"".concat(x.dehydration.label),value:(0,G.m)(e,u.W.DEHYDRATION_SKIN)}])},X=e=>{f([{name:"".concat(y.consciousness.label),value:(0,G.m)(e,u.W.DOES_PATIENT_LOW_LEVEL_CONSCIOUSNESS)},{name:"".concat(y.bloodGlucose.label),value:(0,G.m)(e,u.W.BLOOD_GLUCOSE)},{name:"".concat(y.gcs.label),value:(0,G.m)(e,u.W.GCS)}])},Q=e=>{R([{name:"".concat(A.activeSeizures.label),value:(0,G.m)(e,u.W.ACTIVE_SEIZURES)},{name:"".concat(A.focalNeurological.label),value:(0,G.m)(e,u.W.FOCAL_NEUROLOGICAL)},{name:"".concat(A.headache.label),value:(0,G.m)(e,u.W.HEADACHE)},{name:"".concat(A.weakness.label),value:(0,G.m)(e,u.W.WEAKNESS)},{name:"".concat(A.confusion.label),value:(0,G.m)(e,u.W.CONFUSION)},{name:"".concat(A.severePain.label),value:(0,G.m)(e,u.W.SEVERE_PAIN)},{name:"".concat(A.moderatePain.label),value:(0,G.m)(e,u.W.MODERATE_PAIN)}])};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(F.default,{sx:{display:"flex",justifyContent:"space-between",my:"2ch"},children:[(0,l.jsx)(i.jD,{width:"20%",children:(0,l.jsx)(J.x,{defaultValue:{value:o},getValue:e=>c(Number(e)),label:"",options:L})}),(0,l.jsx)(es,{})]}),(0,l.jsxs)(F.default,{children:[(0,l.jsxs)(q.A,{defaultExpanded:!0,children:[(0,l.jsx)(K.A,{expandIcon:(0,l.jsx)(k.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Vitals"}),(0,l.jsx)($.A,{children:(0,l.jsx)(eu,{children:m.map(e=>{let{name:a,value:t}=e;return(0,l.jsx)(ed,{title:a,value:t},"".concat(t).concat(a))})})})]}),(0,l.jsxs)(q.A,{children:[(0,l.jsx)(K.A,{expandIcon:(0,l.jsx)(k.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Airway"}),(0,l.jsx)($.A,{children:(0,l.jsx)(eu,{children:h.map(e=>{let{name:a,value:t}=e;return(0,l.jsx)(ed,{title:a,value:t},"".concat(t).concat(a))})})})]}),(0,l.jsxs)(q.A,{children:[(0,l.jsx)(K.A,{expandIcon:(0,l.jsx)(k.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Blood Circulation"}),(0,l.jsx)($.A,{children:(0,l.jsx)(eu,{children:S.map(e=>{let{name:a,value:t}=e;return(0,l.jsx)(ed,{title:a,value:t},"".concat(t).concat(a))})})})]}),(0,l.jsxs)(q.A,{children:[(0,l.jsx)(K.A,{expandIcon:(0,l.jsx)(k.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Disability"}),(0,l.jsx)($.A,{children:(0,l.jsx)(eu,{children:j.map(e=>{let{name:a,value:t}=e;return(0,l.jsx)(ed,{title:a,value:t},"".concat(t).concat(a))})})})]}),(0,l.jsxs)(q.A,{children:[(0,l.jsx)(K.A,{expandIcon:(0,l.jsx)(k.BNo,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Persistent Pain"}),(0,l.jsx)($.A,{children:(0,l.jsx)(eu,{children:E.map(e=>{let{name:a,value:t}=e;return(0,l.jsx)(ed,{title:a,value:t},"".concat(t).concat(a))})})})]})]})]})},eu=e=>{let{children:a}=e;return(0,l.jsx)(F.default,{children:(0,l.jsx)(F.default,{sx:{display:"flex",flexWrap:"wrap"},children:a})})},ed=e=>{let{title:a,value:t}=e;return(0,l.jsxs)(i.jD,{sx:{width:"15ch",display:"flex",flexDirection:"column",my:"0.5ch",alignItems:"center"},children:[(0,l.jsx)(z.default,{variant:"caption",textAlign:"center",children:a}),(0,l.jsx)(z.default,{variant:"h5",children:t})]})};var ec=t(9562),em=t(42553),eb=t(28548);let eh=e=>{let{getValues:a}=e,[t,i]=(0,n.useState)(""),[r,s]=(0,n.useState)([]);return(0,n.useEffect)(()=>{a(r)},[r]),(0,l.jsxs)(F.default,{children:[(0,l.jsx)(ec.A,{sx:{my:"1ch"},fullWidth:!0,id:"outlined-basic",label:"Other Presenting Complaints",placeholder:"Enter other presenting complaints and click the save icon on the right",variant:"outlined",value:t,onChange:e=>{i(e.target.value)},InputProps:{endAdornment:(0,l.jsx)(em.A,{position:"end",children:(0,l.jsx)(w.default,{onClick:()=>{s(e=>[...e,t]),i("")},edge:"end",children:(0,l.jsx)(k.dIn,{})})})}}),(0,l.jsx)("br",{}),(0,l.jsx)(el.A,{direction:"row",spacing:1,children:r.map(e=>(0,l.jsx)(eb.A,{label:e,onDelete:()=>{s(a=>[...a.filter(a=>a!=e)])}},e))})]})};var eg=t(25641),ex=t(59452);let ep={complaints:{name:u.W.PRESENTING_COMPLAINTS,label:"Complaints"}},eS=r.Ik().shape({[ep.complaints.name]:r.YO().required().label(ep.complaints.label)}),ev=(0,o.f6)(ep),ej=e=>{let{onSubmit:a,setTriageResult:t,getFormValues:r}=e,{ServerTime:s}=(0,eg.useServerTime)(),{presentingComplaints:o}=(0,ex.l)(),[d,c]=(0,n.useState)([]),[m,b]=(0,n.useState)(!1),h=async e=>{var a,l,n,i,r,s,o,d;let c=await (0,M.cr)(u.W.CARBON_MONOXIDE_POISONING),m=await (0,M.cr)(u.W.INJURY_MAJOR_TRAUMA_PENETRATING),h=await (0,M.cr)(u.W.POISONING),g=await (0,M.cr)(u.W.VOMITING_BLOOD),x=await (0,M.cr)(u.W.OTHER),p=[null==c||null==(l=c.data[0])||null==(a=l.names[0])?void 0:a.uuid,null==m||null==(i=m.data[0])||null==(n=i.names[0])?void 0:n.uuid,null==h||null==(s=h.data[0])||null==(r=s.names[0])?void 0:r.uuid,null==g||null==(d=g.data[0])||null==(o=d.names[0])?void 0:o.uuid];b(!!e.find(e=>{var a,t;return e.id==(null==(t=x.data[0])||null==(a=t.names[0])?void 0:a.uuid)})),p.forEach(a=>{e.find(e=>e.id==a)?t("red",a):t("",a)})};return(0,l.jsxs)(i.PD,{validationSchema:eS,initialValues:ev,onSubmit:e=>{let t=s.getServerTimeString(),l=d.map(e=>({value:e,concept:u.W.OTHER,dateTime:t}));a([...e[u.W.PRESENTING_COMPLAINTS].map(e=>({concept:u.W.PRESENTING_COMPLAINTS,value:e.id,obsDatetime:t})),...l])},submitButton:!1,submitButtonText:"next",getFormValues:r,children:[(0,l.jsx)(i.el,{getValue:h,name:ep.complaints.name,label:ep.complaints.label,options:o}),(0,l.jsx)("br",{}),m&&(0,l.jsx)(eh,{getValues:c}),(0,l.jsx)("br",{}),(0,l.jsx)(i.O6,{title:"next",type:"submit",onClick:()=>{}})]})}},30422:(e,a,t)=>{t.d(a,{g:()=>n});var l=t(12115);let n=()=>{let[e,a]=(0,l.useState)(!1),[t,n]=(0,l.useState)(0),[i,r]=(0,l.useState)(!0),[s,o]=(0,l.useState)(""),[u,d]=(0,l.useState)(!1);return{loading:e,setLoading:a,completed:t,setCompleted:n,showForm:i,setShowForm:r,message:s,setMessage:o,error:u,setError:d}}},41186:(e,a,t)=>{t.d(a,{A:()=>c});var l=t(95155),n=t(93584),i=t(87295),r=t(12115),s=t(75855),o=t(72478),u=t(15239),d=t(9877);function c(e,a){return function(t){let[o,u]=(0,r.useState)(!1),{navigateTo:c}=(0,i.cq)();(0,r.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let a=parseInt(e);if(Math.floor((new Date().getTime()-a)%36e5/6e4)>60){u(!1),c("/"),localStorage.clear();return}}u(!0)}else u(!1),localStorage.clear(),c("/")},[]);let b=(0,s.R)(a,(0,d.O)());return o?b?(0,l.jsx)(e,{...t}):(0,l.jsx)(m,{}):(0,l.jsx)(n.OverlayLoader,{open:!o})}}let m=()=>(0,l.jsx)(o.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,l.jsx)(u.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},59452:(e,a,t)=>{t.d(a,{l:()=>r});var l=t(12115),n=t(66637),i=t(263);let r=()=>{let[e,a]=(0,l.useState)([]);return(0,l.useEffect)(()=>{(async()=>{let e=await (0,n.cr)(i.W.PRESENTING_COMPLAINTS);a(e=e.data[0].set_members.map(e=>{var a,t;return{id:null==e||null==(a=e.names[0])?void 0:a.uuid,label:null==e||null==(t=e.names[0])?void 0:t.name}}))})()},[]),{presentingComplaints:e}}}}]);