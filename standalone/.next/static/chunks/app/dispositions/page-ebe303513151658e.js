(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{12409:(e,t,i)=>{"use strict";i.d(t,{VQ:()=>n,kC:()=>r,sL:()=>l,uQ:()=>o});var a=i(95155),s=i(72478);let l=e=>{let{children:t,id:i}=e;return(0,a.jsx)(s.Th,{id:i,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:t})},n=e=>{let{children:t}=e;return(0,a.jsx)(s.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:t})},r=e=>{let{children:t,sx:i}=e;return(0,a.jsx)(s.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...i},children:t})},o=e=>{let{children:t}=e;return(0,a.jsx)(s.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:t})}},41186:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var a=i(95155),s=i(93584),l=i(87295),n=i(12115),r=i(75855),o=i(72478),c=i(15239),d=i(9877);function p(e,t){return function(i){let[o,c]=(0,n.useState)(!1),{navigateTo:p}=(0,l.cq)();(0,n.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){c(!1),p("/"),localStorage.clear();return}}c(!0)}else c(!1),localStorage.clear(),p("/")},[]);let u=(0,r.R)(t,(0,d.O)());return o?u?(0,a.jsx)(e,{...i}):(0,a.jsx)(x,{}):(0,a.jsx)(s.OverlayLoader,{open:!o})}}let x=()=>(0,a.jsx)(o.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,a.jsx)(c.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},54150:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>E});var a=i(95155),s=i(12115),l=i(87295),n=i(53756),r=i(86973),o=i(72478),c=i(263),d=i(94049),p=i(2300),x=i(25635),u=i(28548),h=i(91871),f=i(50430),m=i(52641),g=i(95436),j=i(55606),y=i(47448),A=i(1151),v=i(26301),C=i(98579),S=i(81013),_=i(78470),T=i(97998),w=i(94054);let b=()=>{let[e,t]=(0,s.useState)(!1),[i,n]=(0,s.useState)(""),[A,_]=(0,s.useState)(""),[b,N]=(0,s.useState)(""),[k,E]=(0,s.useState)(!1),[z,B]=(0,s.useState)({disposedBy:[],patientCareArea:[],dispositionType:[]}),[F,V]=(0,s.useState)({disposedByOptions:[],patientCareAreas:[],dispositionTypes:[]}),{navigateTo:P}=(0,l.cq)(),{gender:W}=(0,l.gd)(),{mutate:O,isSuccess:M}=(0,C.FD)(),{paginationModel:L,patients:q,searchText:R,setSearchText:U,setPaginationModel:Q,loading:Y,totalPages:H,refetch:J,totalEntries:G}=(0,S.a)("disposition"),[K,X]=(0,s.useState)(""),Z=(0,w.d)(K,500);(0,s.useEffect)(()=>{if(q&&q.length>0){let e=Array.from(new Set(q.map(e=>e.last_encounter_creator).filter(Boolean))),t=Array.from(new Set(q.map(e=>e.patient_care_area).filter(Boolean))),i=Array.from(new Set(q.map(e=>e.disposition_type).filter(Boolean)));V({disposedByOptions:e.sort(),patientCareAreas:t.sort(),dispositionTypes:i.sort()})}},[q]);let $=s.useMemo(()=>q?q.filter(e=>{let t=0===z.disposedBy.length||z.disposedBy.includes(e.last_encounter_creator),i=0===z.patientCareArea.length||z.patientCareArea.includes(e.patient_care_area),a=0===z.dispositionType.length||z.dispositionType.includes(e.disposition_type);return t&&i&&a}):[],[q,z]),ee=e=>t=>{let i=t.target.value;B(t=>({...t,[e]:"string"==typeof i?i.split(","):i}))},et=(e,t)=>{B(i=>({...i,[e]:i[e].filter(e=>e!==t)}))},ei=z.disposedBy.length>0||z.patientCareArea.length>0||z.dispositionType.length>0;(0,s.useEffect)(()=>{U(Z)},[Z]),(0,s.useEffect)(()=>{M&&(J(),console.log("Visit closed successfully, refreshing data..."))},[M,J]);let ea=[{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"gender",headerName:"Gender"},{field:"waiting",headerName:"Aggregated Time",flex:1,renderCell:e=>(0,a.jsx)(o.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Disposed By",flex:1},{field:"patient_care_area",flex:1,headerName:"Patient Care Area"},{field:"disposition_type",headerName:"Disposition Type",flex:1},{field:"destination",headerName:"Destination",flex:1},{field:"action",headerName:"Actions",flex:1.2,renderCell:e=>(0,a.jsx)(d.default,{display:"flex",gap:1,children:(0,a.jsx)(D,{patient:e.row,onVisitClosed:J})})}],es=null==$?void 0:$.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,dispositionType:e.disposition_type,actor:(0,a.jsx)(o.uT,{encounterType:c.fA.DISPOSITION,patientId:e.id}),aggregate:(0,a.jsx)(o.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,a.jsx)(o.VJ,{arrival_time:null==e?void 0:e.latest_encounter_time}),actionName:"Disposed By",action:(0,a.jsx)(I,{patient:e,setDeleted:e=>N(e),triage:e.triage_result,visitId:e.visit_uuid,id:e.uuid,onVisitClosed:J}),age:"".concat((0,v.Cb)(e.birthdate),"yrs"),triageResult:e.triage_result}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.default,{sx:{p:2,mb:2},children:[(0,a.jsxs)(d.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,a.jsxs)(d.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(T.YsJ,{}),(0,a.jsx)(x.default,{variant:"h6",children:"Filters"}),ei&&(0,a.jsx)(u.A,{label:"".concat(z.disposedBy.length+z.patientCareArea.length+z.dispositionType.length," active"),size:"small",color:"primary"})]}),(0,a.jsxs)(d.default,{sx:{display:"flex",gap:1},children:[ei&&(0,a.jsx)(h.A,{startIcon:(0,a.jsx)(T.QCr,{}),onClick:()=>{B({disposedBy:[],patientCareArea:[],dispositionType:[]})},size:"small",variant:"outlined",color:"secondary",children:"Clear All"}),(0,a.jsxs)(h.A,{startIcon:k?(0,a.jsx)(T.Ucs,{}):(0,a.jsx)(T.Vr3,{}),onClick:()=>E(!k),size:"small",variant:"outlined",children:[k?"Hide":"Show"," Filters"]})]})]}),(0,a.jsx)(f.A,{in:k,children:(0,a.jsxs)(d.default,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2},children:[(0,a.jsxs)(m.A,{sx:{minWidth:200},children:[(0,a.jsx)(g.A,{children:"Disposed By"}),(0,a.jsx)(j.A,{multiple:!0,value:z.disposedBy,onChange:ee("disposedBy"),input:(0,a.jsx)(y.A,{label:"Disposed By"}),renderValue:e=>(0,a.jsx)(d.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,a.jsx)(u.A,{label:e,size:"small",onDelete:()=>et("disposedBy",e),onMouseDown:e=>{e.stopPropagation()}},e))}),children:F.disposedByOptions.map(e=>(0,a.jsx)(r.A,{value:e,children:e},e))})]}),(0,a.jsxs)(m.A,{sx:{minWidth:200},children:[(0,a.jsx)(g.A,{children:"Patient Care Area"}),(0,a.jsx)(j.A,{multiple:!0,value:z.patientCareArea,onChange:ee("patientCareArea"),input:(0,a.jsx)(y.A,{label:"Patient Care Area"}),renderValue:e=>(0,a.jsx)(d.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,a.jsx)(u.A,{label:e,size:"small",onDelete:()=>et("patientCareArea",e),onMouseDown:e=>{e.stopPropagation()}},e))}),children:F.patientCareAreas.map(e=>(0,a.jsx)(r.A,{value:e,children:e},e))})]}),(0,a.jsxs)(m.A,{sx:{minWidth:200},children:[(0,a.jsx)(g.A,{children:"Disposition Type"}),(0,a.jsx)(j.A,{multiple:!0,value:z.dispositionType,onChange:ee("dispositionType"),input:(0,a.jsx)(y.A,{label:"Disposition Type"}),renderValue:e=>(0,a.jsx)(d.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,a.jsx)(u.A,{label:e,size:"small",onDelete:()=>et("dispositionType",e),onMouseDown:e=>{e.stopPropagation()}},e))}),children:F.dispositionTypes.map(e=>(0,a.jsx)(r.A,{value:e,children:e},e))})]})]})}),ei&&(0,a.jsxs)(d.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,a.jsx)(x.default,{variant:"body2",sx:{mr:1,alignSelf:"center"},children:"Active filters:"}),z.disposedBy.map(e=>(0,a.jsx)(u.A,{label:"Disposed By: ".concat(e),onDelete:()=>et("disposedBy",e),size:"small",color:"primary",variant:"outlined"},"disposed-".concat(e))),z.patientCareArea.map(e=>(0,a.jsx)(u.A,{label:"Care Area: ".concat(e),onDelete:()=>et("patientCareArea",e),size:"small",color:"primary",variant:"outlined"},"area-".concat(e))),z.dispositionType.map(e=>(0,a.jsx)(u.A,{label:"Type: ".concat(e),onDelete:()=>et("dispositionType",e),size:"small",color:"primary",variant:"outlined"},"type-".concat(e)))]})]}),(0,a.jsx)(o.vP,{columns:ea,data:(null==$?void 0:$.length)?{data:$.map(e=>({id:e.uuid,...e})),page:L.page,per_page:L.pageSize,total_pages:H,totalEntries:G}:{data:[],page:1,per_page:10,total_pages:0,totalEntries:0},searchText:K,setSearchString:X,setPaginationModel:Q,paginationModel:L,loading:Y,formatForMobileView:es||[]})]})},D=e=>{var t;let{patient:i,onVisitClosed:o}=e,{navigateTo:c}=(0,l.cq)(),[p,x]=s.useState(null),{mutate:u,isSuccess:h}=(0,C.FD)(),{gender:f}=(0,l.gd)();return(0,s.useEffect)(()=>{h&&o()},[h,o]),(0,a.jsxs)(d.default,{display:"flex",gap:1,children:[(0,a.jsx)(_.A,{title:"View Profile",arrow:!0,children:(0,a.jsx)(A.default,{onClick:()=>c("/patient/".concat(i.id,"/profile")),"aria-label":"view profile",sx:{color:"green"},children:(0,a.jsx)(T.gSK,{})})}),(0,a.jsx)(_.A,{title:"Close Visit",arrow:!0,children:(0,a.jsx)(A.default,{onClick:()=>{i.visit_uuid?u(i.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",sx:{color:"grey"},children:(0,a.jsx)(T.axc,{})})}),(0,a.jsx)(_.A,{title:"Template Forms",arrow:!0,children:(0,a.jsx)(A.default,{onClick:e=>{x(e.currentTarget)},"aria-label":"template forms",sx:{color:"#015E85"},children:(0,a.jsx)(T.t69,{})})}),(0,a.jsxs)(n.A,{id:"basic-menu",anchorEl:p,open:!!p,onClose:()=>{x(null)},children:[(0,a.jsx)(r.A,{onClick:()=>c("/patient/".concat(i.id,"/medicalInpatient")),children:"Medical Inpatient Admission Sheet"}),(0,a.jsx)(r.A,{onClick:()=>c("/patient/".concat(i.id,"/surgicalNotes")),children:"Surgical Notes"}),(null==(t=i.gender)?void 0:t.toLowerCase())==="female"&&(0,a.jsx)(r.A,{onClick:()=>c("/patient/".concat(i.id,"/gyneacology")),children:"Gyneacology Ward Admission"})]})]})},I=e=>{let{id:t,visitId:i,triage:c,setDeleted:p,patient:x,showCPR:u,onCPR:h,onVisitClosed:f}=e,{navigateTo:m}=(0,l.cq)(),[g,j]=s.useState(null),{mutate:y,isSuccess:v}=(0,C.FD)();(0,s.useEffect)(()=>{v&&f()},[v,f]);let S=()=>{j(null)};return(0,a.jsxs)(d.default,{sx:{display:"flex",flexDirection:"column",flex:"1"},children:[(0,a.jsx)(o.jD,{sx:{borderRadius:"2px",width:"100%",height:"5ch",backgroundColor:"red"==c?"#B42318":"yellow"==c?"#ede207":"green"==c?"#016302":"",marginY:1}}),(0,a.jsxs)(d.default,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[(0,a.jsx)(_.A,{title:"Close Visit",arrow:!0,children:(0,a.jsx)(A.default,{onClick:()=>{x.visit_uuid?y(x.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",size:"small",sx:{color:"#015E85"},children:(0,a.jsx)(T.axc,{})})}),(0,a.jsx)(_.A,{title:"Template Forms",arrow:!0,children:(0,a.jsx)(A.default,{onClick:e=>{j(e.currentTarget)},"aria-label":"template forms",size:"small",sx:{color:"#015E85"},children:(0,a.jsx)(T.t69,{})})}),(0,a.jsx)(_.A,{title:"View Profile",arrow:!0,children:(0,a.jsx)(A.default,{onClick:()=>m("/patient/".concat(x.id,"/profile")),"aria-label":"view profile",size:"small",sx:{color:"#015E85"},children:(0,a.jsx)(T.gSK,{})})}),u&&(0,a.jsx)(_.A,{title:"Initiate CPR",arrow:!0,children:(0,a.jsx)(A.default,{onClick:h,"aria-label":"initiate CPR",size:"small",color:"error",children:(0,a.jsx)(T.szJ,{})})})]}),(0,a.jsxs)(n.A,{id:"card-action-menu",anchorEl:g,open:!!g,onClose:S,children:[(0,a.jsx)(r.A,{onClick:()=>{m("/patient/".concat(t,"/medicalInpatient")),S()},children:"Medical Inpatient Admission Sheet"}),(0,a.jsx)(r.A,{onClick:()=>{m("/patient/".concat(t,"/surgicalNotes")),S()},children:"Surgical Notes"}),(0,a.jsx)(r.A,{onClick:()=>{m("/patient/".concat(t,"/gyneacology")),S()},children:"Gyneacology Ward Admission"})]})]})};var N=i(12409),k=i(98624);let E=(0,i(41186).A)(function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.V,{title:"Disposition/Specialty",link:"/dashboard"}),(0,a.jsxs)(o.Yr,{container:!0,children:[(0,a.jsx)(o.Yr,{xs:0,lg:0,item:!0}),(0,a.jsxs)(o.Yr,{xs:12,lg:12,sx:{display:"flex",flexDirection:"column"},item:!0,children:[(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)(N.sL,{children:["Disposition List"," "]}),(0,a.jsx)(N.VQ,{children:"This is a list of all patients whose visit has been completed."}),(0,a.jsx)(N.kC,{sx:{mx:1,p:0},children:(0,a.jsx)(b,{})})]}),(0,a.jsx)(o.Yr,{xs:0,lg:0,item:!0})]})]})},[c.Ot.ADMIN,c.Ot.CLINICIAN,c.Ot.NURSE])},68623:(e,t,i)=>{Promise.resolve().then(i.bind(i,54150))},81013:(e,t,i)=>{"use strict";i.d(t,{a:()=>l});var a=i(12115),s=i(31345);let l=(e,t,i)=>{let[s,l]=(0,a.useState)({page:0,pageSize:10}),[r,o]=(0,a.useState)(""),[c,d]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(0),[f,m]=(0,a.useState)(0),[g,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{y()},[t,s,r,g,i]);let y=async()=>{let a;x(!0),g&&(a=new Date().toISOString().split("T")[0]);try{let l=await n(e,s.pageSize,r,s.page+1,a||"",t,i);d(l.data.data),h(l.data.total_pages),m(l.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{x(!1)}};return{loading:p,patients:c,paginationModel:s,setPaginationModel:l,searchText:r,setSearchText:o,totalPages:u,totalEntries:f,setOnSwitch:j,refetch:y}},n=async(e,t,i,a,l,n,r)=>{let o="category=".concat(e,"&page=").concat(a,"&page_size=").concat(t,"&search=").concat(i,"&date=").concat(l);return n&&(o+="&patient_care_area=".concat(encodeURIComponent(n))),r&&(o+="&last_encounter_creator=".concat(encodeURIComponent(r))),await (0,s.P8)(o)}},93584:(e,t,i)=>{"use strict";i.d(t,{OverlayLoader:()=>n});var a=i(95155);i(12115);var s=i(93526),l=i(4474);function n(e){let{open:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(s.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:t,children:(0,a.jsx)(l.A,{color:"inherit"})})})}},94054:(e,t,i)=>{"use strict";i.d(t,{d:()=>s});var a=i(12115);function s(e,t){let[i,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let i=setTimeout(()=>s(e),t);return()=>clearTimeout(i)},[e,t]),i}},98579:(e,t,i)=>{"use strict";i.d(t,{b2:()=>c,FD:()=>d,qv:()=>p});var a=i(25641),s=i(93292);let l="visits",n=(e,t)=>(0,s.hc)(e,t,l);var r=i(99776),o=i(80549);let c=()=>{let e=(0,r.jE)();return(0,o.n)({mutationFn:e=>(0,s.vt)(e,l).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},d=()=>{let{ServerTime:e}=(0,a.useServerTime)(),t=async t=>n(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,o.n)({mutationFn:t})},p=e=>{let t=(0,r.jE)();return(0,o.n)({mutationFn:e=>n(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},98624:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});var a=i(95155),s=i(87295),l=i(72478),n=i(56164);let r=e=>{let{title:t,link:i}=e,{navigateTo:r}=(0,s.cq)(),o={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,a.jsxs)(l.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,a.jsxs)(l.jD,{onClick:()=>r(i),sx:{display:"flex",cursor:"pointer"},children:[(0,a.jsx)(l.Th,{children:(0,a.jsx)(n.oWm,{})}),(0,a.jsx)(l.Th,{sx:o,children:"Go back"})]}),(0,a.jsx)(l.Th,{sx:o,children:t}),(0,a.jsxs)(l.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(n.M4e,{}),(0,a.jsx)(l.Th,{sx:o,children:"Need any help?"})]})]})}}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,2141,7861,2891,1412,4018,7774,2478,8441,1255,7358],()=>e(e.s=68623)),_N_E=e.O()}]);