(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3962],{12409:(e,t,i)=>{"use strict";i.d(t,{VQ:()=>s,kC:()=>l,sL:()=>n,uQ:()=>c});var a=i(95155),r=i(72478);let n=e=>{let{children:t,id:i}=e;return(0,a.jsx)(r.Th,{id:i,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:t})},s=e=>{let{children:t}=e;return(0,a.jsx)(r.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:t})},l=e=>{let{children:t,sx:i}=e;return(0,a.jsx)(r.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...i},children:t})},c=e=>{let{children:t}=e;return(0,a.jsx)(r.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:t})}},41186:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var a=i(95155),r=i(93584),n=i(87295),s=i(12115),l=i(75855),c=i(72478),o=i(15239),d=i(9877);function u(e,t){return function(i){let[c,o]=(0,s.useState)(!1),{navigateTo:u}=(0,n.cq)();(0,s.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){o(!1),u("/"),localStorage.clear();return}}o(!0)}else o(!1),localStorage.clear(),u("/")},[]);let x=(0,l.R)(t,(0,d.O)());return c?x?(0,a.jsx)(e,{...i}):(0,a.jsx)(m,{}):(0,a.jsx)(r.OverlayLoader,{open:!c})}}let m=()=>(0,a.jsx)(c.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,a.jsx)(o.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},51608:(e,t,i)=>{"use strict";i.d(t,{S:()=>o,I:()=>N});var a=i(95155),r=i(72478),n=i(35068);let s={firstName:{name:"firstName",label:"First Name"},lastName:{name:"lastName",label:"Last Name"}},l=/^[a-zA-Z]+(?:['-][a-zA-Z]+)*\s*$/,c=n.Ik({[s.firstName.name]:n.Yj().matches(l,{message:"Name not valid"}).required().label(s.firstName.label),[s.lastName.name]:n.Yj().matches(l,{message:"Name not valid"}).required().label(s.lastName.label)}),o=e=>{let{initialValues:t,onSubmit:i}=e;return(0,a.jsxs)(r.PD,{initialValues:t,validationSchema:c,onSubmit:i,submitButton:!1,enableReinitialize:!0,children:[(0,a.jsxs)(r.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,a.jsx)(r.A8,{name:s.firstName.name,label:s.firstName.label,id:s.firstName.name}),(0,a.jsx)(r.A8,{name:s.lastName.name,label:s.lastName.label,id:s.lastName.name})]}),(0,a.jsx)(r.O6,{type:"submit",title:"Submit",onClick:()=>{}})]})};var d=i(26301),u=i(87295),m=i(5387),x=i(12115),h=i(65494),f=i(263),g=i(78470),j=i(1151),p=i(97998),v=i(81013),S=i(94054),_=i(39625);let N=()=>{let{loading:e,patients:t,paginationModel:i,setPaginationModel:n,searchText:s,setSearchText:l,totalPages:c,setOnSwitch:o,totalEntries:N}=(0,v.a)("screening"),[y,b]=(0,x.useState)(""),A=(0,S.d)(y,500);(0,x.useEffect)(()=>{l(A)},[A]);let{navigateTo:I}=(0,u.cq)(),[w,T]=(0,x.useState)(!1),[C,D]=(0,x.useState)(""),[k,E]=(0,x.useState)(""),[O,F]=(0,x.useState)(""),{mutate:R}=(0,m.Dk)(),z=null==t?void 0:t.sort((e,t)=>new Date(e.arrival_time)-new Date(t.arrival_time)).map(e=>({id:null==e?void 0:e.uuid,...e,patient_arrival_time:(0,d.WB)(e.arrival_time)})).filter(e=>e.id!=O),L=[{field:"aetc_visit_number",headerName:"Visit Number"},{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"patient_arrival_time",headerName:"Arrival Time",flex:1},{field:"waiting",headerName:"WaitingTime",flex:1,renderCell:e=>(0,a.jsx)(r.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Attended By",flex:1},{field:"action",flex:1,headerName:"Action",renderCell:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{title:"Start screening",arrow:!0,children:(0,a.jsx)(j.default,{onClick:()=>I("/prescreening/".concat(e.id)),"aria-label":"start screening",color:"primary",children:(0,a.jsx)(p.gSK,{})})}),(0,a.jsx)(h.R,{onDelete:()=>{F(e.id),R({id:e.row.patient_id,void_reason:"Absconded"})},visitId:e.row.visit_uuid,patientId:e.id}),(0,a.jsx)(g.A,{title:"Initiate CPR",arrow:!0,children:(0,a.jsx)(j.default,{onClick:()=>{D(e.id),T(!0),E(e.row.visit_uuid)},"aria-label":"initiate CPR",color:"error",children:(0,a.jsx)(p.szJ,{})})})]})}],V=null==z?void 0:z.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,actor:(0,a.jsx)(r.uT,{encounterType:f.fA.INITIAL_REGISTRATION,patientId:e.id}),aggregate:(0,a.jsx)(r.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,a.jsx)(r.VJ,{arrival_time:null==e?void 0:e.latest_encounter_time}),actionName:"registered by",action:(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(r.O6,{sx:{fontSize:"12px",width:"49%",mr:"1px"},title:"screen",onClick:()=>I("/prescreening/".concat(e.id))}),(0,a.jsx)(h.R,{sx:{width:"49%"},onDelete:()=>F(e.id),visitId:e.visit_uuid,patientId:e.id})]}),age:"N/A",triageResult:e.triage_result}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.vP,{columns:L,data:{data:null!=z?z:[],page:i.page,per_page:i.pageSize,total_pages:c,totalEntries:N},searchText:y,setSearchString:b,setPaginationModel:n,paginationModel:i,loading:e,formatForMobileView:V||[],onSwitchChange:o,onRowClick:e=>{I("/prescreening/".concat(e.id))}}),(0,a.jsx)(_.w8,{patientuuid:C,visituuid:k,open:w,onClose:()=>T(!1)})]})}},65494:(e,t,i)=>{"use strict";i.d(t,{R:()=>u});var a=i(95155),r=i(12115),n=i(72478),s=i(98579),l=i(93584),c=i(78470),o=i(1151),d=i(97998);let u=e=>{let{patientId:t,visitId:i,onDelete:u,sx:m,dialogTitle:x="Abscond Patient",dialogConfirmationMsg:h="Are you sure the patient absconded?",buttonTitle:f="Abscond"}=e,{mutate:g,isPending:j,isSuccess:p}=(0,s.FD)(),[v,S]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{p&&u()},[p]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{title:"Mark as absconded",arrow:!0,children:(0,a.jsx)(o.default,{onClick:()=>{S(!0)},"aria-label":"abscond",children:(0,a.jsx)(d.axc,{})})}),(0,a.jsxs)(n.eV,{maxWidth:"sm",title:x,open:v,onClose:()=>S(!1),children:[(0,a.jsx)(l.OverlayLoader,{open:j}),(0,a.jsx)(n.Th,{children:h}),(0,a.jsx)("br",{}),(0,a.jsx)(n.O6,{title:"Yes",onClick:()=>{g(i)}}),(0,a.jsx)(n.O6,{sx:{ml:.3},variant:"secondary",title:"No",onClick:()=>S(!1)})]})]})}},81013:(e,t,i)=>{"use strict";i.d(t,{a:()=>n});var a=i(12115),r=i(31345);let n=(e,t)=>{let[i,r]=(0,a.useState)({page:0,pageSize:10}),[n,l]=(0,a.useState)(""),[c,o]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(0),[h,f]=(0,a.useState)(0),[g,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{p()},[t,i,n,g]);let p=async()=>{let a;u(!0),g&&(a=new Date().toISOString().split("T")[0]);try{let r=await s(e,i.pageSize,n,i.page+1,a||"",t);o(r.data.data),x(r.data.total_pages),f(r.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{u(!1)}};return{loading:d,patients:c,paginationModel:i,setPaginationModel:r,searchText:n,setSearchText:l,totalPages:m,totalEntries:h,setOnSwitch:j,refetch:p}},s=async(e,t,i,a,n,s)=>{let l="category=".concat(e,"&page=").concat(a,"&page_size=").concat(t,"&search=").concat(i,"&date=").concat(n);return s&&(l+="&patient_care_area=".concat(encodeURIComponent(s))),await (0,r.P8)(l)}},82142:(e,t,i)=>{Promise.resolve().then(i.bind(i,92702))},92702:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i(95155),r=i(51608),n=i(72478),s=i(12409),l=i(98624),c=i(263);let o=(0,i(41186).A)(function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.V,{title:"Patients waiting prescreening",link:"/dashboard"}),(0,a.jsxs)(n.Yr,{container:!0,children:[(0,a.jsx)(n.Yr,{xs:0,lg:1,item:!0}),(0,a.jsxs)(n.Yr,{xs:12,lg:10,sx:{display:"flex",flexDirection:"column"},item:!0,children:[(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(s.sL,{children:"Patients waiting for Screening"}),(0,a.jsx)(s.VQ,{children:"This is a list of all patients that went through initial registration successfully and waiting for prescreening."}),(0,a.jsx)(s.kC,{sx:{p:0,mx:"1ch"},children:(0,a.jsx)(r.I,{})})]}),(0,a.jsx)(n.Yr,{xs:0,lg:1,item:!0})]})]})},[c.Ot.ADMIN,c.Ot.CLINICIAN,c.Ot.REGISTRATION_CLERK,c.Ot.NURSE,c.Ot.DATA_MANAGER])},93584:(e,t,i)=>{"use strict";i.d(t,{OverlayLoader:()=>s});var a=i(95155);i(12115);var r=i(93526),n=i(4474);function s(e){let{open:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(r.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:t,children:(0,a.jsx)(n.A,{color:"inherit"})})})}},94054:(e,t,i)=>{"use strict";i.d(t,{d:()=>r});var a=i(12115);function r(e,t){let[i,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let i=setTimeout(()=>r(e),t);return()=>clearTimeout(i)},[e,t]),i}},98579:(e,t,i)=>{"use strict";i.d(t,{b2:()=>o,FD:()=>d,qv:()=>u});var a=i(25641),r=i(93292);let n="visits",s=(e,t)=>(0,r.hc)(e,t,n);var l=i(99776),c=i(80549);let o=()=>{let e=(0,l.jE)();return(0,c.n)({mutationFn:e=>(0,r.vt)(e,n).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},d=()=>{let{ServerTime:e}=(0,a.useServerTime)(),t=async t=>s(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,c.n)({mutationFn:t})},u=e=>{let t=(0,l.jE)();return(0,c.n)({mutationFn:e=>s(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},98624:(e,t,i)=>{"use strict";i.d(t,{V:()=>l});var a=i(95155),r=i(87295),n=i(72478),s=i(56164);let l=e=>{let{title:t,link:i}=e,{navigateTo:l}=(0,r.cq)(),c={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,a.jsxs)(n.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,a.jsxs)(n.jD,{onClick:()=>l(i),sx:{display:"flex",cursor:"pointer"},children:[(0,a.jsx)(n.Th,{children:(0,a.jsx)(s.oWm,{})}),(0,a.jsx)(n.Th,{sx:c,children:"Go back"})]}),(0,a.jsx)(n.Th,{sx:c,children:t}),(0,a.jsxs)(n.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(s.M4e,{}),(0,a.jsx)(n.Th,{sx:c,children:"Need any help?"})]})]})}}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,8320,3349,2141,7861,2891,1412,4018,5068,7774,2478,4008,5832,9625,8441,1255,7358],()=>e(e.s=82142)),_N_E=e.O()}]);