(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7092],{41186:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(95155),o=n(93584),r=n(87295),l=n(12115),a=n(75855),s=n(72478),d=n(15239),c=n(9877);function p(e,t){return function(n){let[s,d]=(0,l.useState)(!1),{navigateTo:p}=(0,r.cq)();(0,l.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){d(!1),p("/"),localStorage.clear();return}}d(!0)}else d(!1),localStorage.clear(),p("/")},[]);let m=(0,a.R)(t,(0,c.O)());return s?m?(0,i.jsx)(e,{...n}):(0,i.jsx)(x,{}):(0,i.jsx)(o.OverlayLoader,{open:!s})}}let x=()=>(0,i.jsx)(s.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,i.jsx)(d.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},44468:(e,t,n)=>{Promise.resolve().then(n.bind(n,52919))},52919:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eh});var i=n(95155),o=n(263),r=n(41186),l=n(72478),a=n(15008),s=n(12115),d=n(87295),c=n(99354),p=n(2300),x=n(94049),m=n(91871),u=n(25635),g=n(50119),h=n(53756),f=n(41602),S=n(73707),b=n(17681),A=n(50430),v=n(62962),y=n(63186),j=n(56164),E=n(98672),C=n(39625),T=n(66637);let I=e=>{let{patient:t}=e,[n,r]=(0,s.useState)(!1),{gender:l}=(0,d.gd)(),{patientId:a,hasActiveVisit:c}=(0,d.gd)(),{data:p,isLoading:I}=(0,T.$O)(a),{navigateTo:R}=(0,d.cq)(),[D,w]=(0,s.useState)(null),{isOnList:O}=(0,d.lT)(null==t?void 0:t.id),{setActiveStep:N}=(0,s.useContext)(E.X2),[F,_]=(0,s.useState)({templateForms:!1,consultation:!1}),[P,k]=(0,s.useState)("");(0,s.useEffect)(()=>{!I&&p&&(e=>{var t;let n=null==p?void 0:p.find(t=>{var n;return(null==t||null==(n=t.encounter_type)?void 0:n.uuid)===e});if(!n)return;let i=new Map;(n.obs||[]).forEach(e=>{let{concept_id:t,obs_datetime:n}=e,o=i.get(t);(!o||new Date(n)>new Date(o.obs_datetime))&&i.set(t,e)}),k(null==(t=Array.from(i.values())[0])?void 0:t.value)})(o.fA.OUTPATIENT_DIAGNOSIS)},[I,p]);let M=()=>{w(null)},L=e=>{M(),R(e)},G=[{label:"Medical Inpatient Admission Sheet",path:"/patient/".concat(t.id,"/medicalInpatient")},{label:"Surgical Notes",path:"/patient/".concat(t.id,"/surgicalNotes")},..."Female"===l?[{label:"Gynaecology Ward Admission",path:"/patient/".concat(t.id,"/gyneacology")}]:[]],W=[{label:"Monitoring Chart",path:"/patient/".concat(t.id,"/nursingChart")},{label:"Nursing Care Notes (SOAPIER)",path:"/patient/".concat(t.id,"/soap")},{label:"Primary Survey",path:"/patient/".concat(t.id,"/primary-assessment")},{label:"SAMPLE History",path:"/patient/".concat(t.id,"/medicalHistory")},{label:"Secondary Survey",path:"/patient/".concat(t.id,"/secondary-assessment")},{label:"Differential Diagnosis",path:"/patient/".concat(t.id,"/differential-diagnosis")},{label:"Investigations Plan",path:"/patient/".concat(t.id,"/investigations")},{label:"Final Diagnosis",path:"/patient/".concat(t.id,"/final-diagnosis")},{label:"Patient Management Plan",path:"/patient/".concat(t.id,"/patient-management-plan")},{label:"Continuation Sheet",path:"/patient/".concat(t.id,"/continuationSheet")},{label:"Disposition",path:"/patient/".concat(t.id,"/disposition")}];return(0,i.jsxs)(x.default,{children:[(0,i.jsx)("style",{children:"\n          .listItemButton {\n            gap: 10px !important;\n            line-height: 1 !important;\n            border-bottom: 1px solid #ccc !important;\n          } \n          .nestedMenuItem {\n            padding-left: 32px !important;\n          }\n        "}),(0,i.jsxs)(m.A,{sx:{backgroundColor:"#FECDCA",color:"#B42318",borderRadius:"9999px",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",textTransform:"none",maxWidth:300,justifyContent:"flex-start",paddingRight:"20px","&:hover":{backgroundColor:"#FFA6A0"}},children:[(0,i.jsx)(u.default,{component:"span",fontWeight:"bold",mr:.5,noWrap:!0,children:"Final Diagnosis:"}),(0,i.jsx)(x.default,{component:"span",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",maxWidth:"calc(100% - 130px)",verticalAlign:"bottom"},title:P,children:P})]}),(0,i.jsx)(m.A,{disabled:!c,variant:"outlined",onClick:()=>r(!0),sx:{backgroundColor:"rgb(221, 238, 221)",color:"rgb(0, 70, 0)",borderRadius:"9999px",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"Start CPR"}),(0,i.jsxs)(g.A,{variant:"contained",disabled:!c,sx:{borderRadius:"9999px",overflow:"hidden",minWidth:"130px","& .MuiButtonGroup-grouped:not(:last-of-type)":{borderRight:0}},children:[(0,i.jsx)(m.A,{sx:{backgroundColor:"#006401",color:"white",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)","&:hover":{backgroundColor:"#004d00"}},children:"Start Assessment"}),(0,i.jsx)(m.A,{onClick:e=>{w(e.currentTarget)},sx:{backgroundColor:"#008000",color:"white",borderLeft:"1px solid #135a14",fontSize:"14px",padding:"0px",minWidth:"unset",width:"40px","&:hover":{backgroundColor:"#006b00"}},children:(0,i.jsx)(u.default,{sx:{fontSize:"18px"},children:"â–¾"})})]}),(0,i.jsx)(h.A,{anchorEl:D,open:!!D,onClose:M,PaperProps:{style:{borderRadius:"10px",marginTop:"105px"}},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:(0,i.jsxs)(f.A,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[W.map((e,t)=>(0,i.jsxs)(S.A,{onClick:()=>L(e.path),className:"listItemButton",children:[(0,i.jsx)(j.OiG,{}),(0,i.jsx)(b.A,{primary:e.label})]},t)),(0,i.jsxs)(S.A,{onClick:()=>(e=>{_(t=>({...t,[e]:!t[e]}))})("templateForms"),className:"listItemButton",children:[(0,i.jsx)(j.OiG,{}),(0,i.jsx)(b.A,{primary:"Template Forms"}),F.templateForms?(0,i.jsx)(v.A,{}):(0,i.jsx)(y.A,{})]}),(0,i.jsx)(A.A,{in:F.templateForms,timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(f.A,{component:"div",disablePadding:!0,children:G.map((e,t)=>(0,i.jsxs)(S.A,{onClick:()=>L(e.path),className:"listItemButton nestedMenuItem",children:[(0,i.jsx)(j.OiG,{}),(0,i.jsx)(b.A,{primary:e.label})]},"template-".concat(t)))})})]})}),(0,i.jsx)(C.w8,{open:n,onClose:()=>{r(!1)}})]})},R=()=>{let{isLoading:e,vitals:t}=(0,d.zg)(),{params:n}=(0,d.KU)();return e?(0,i.jsx)(c.E7,{height:120}):(0,i.jsxs)(p.default,{elevation:3,children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.2rem",padding:"1ch"},children:"Most recent Vitals & Biometrics"}),(0,i.jsx)("div",{style:{padding:"1ch"},children:(0,i.jsx)(I,{patient:n})})]}),(0,i.jsx)("div",{style:{overflowX:"scroll",marginLeft:"10px",marginRight:"10px"},children:(0,i.jsx)(l.jD,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",padding:"1ch",minWidth:"854px"},children:t.map(e=>{let{name:t,value:n}=e;return(0,i.jsx)(D,{title:t,value:n},"".concat(n).concat(t))})})})]})},D=e=>{let{title:t,value:n}=e;return(0,i.jsx)(l.jD,{sx:{display:"flex",flexDirection:"column"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(l.Th,{style:{marginBottom:" 15px",fontSize:"14px",padding:"10px"},variant:"caption",textAlign:"center",children:t}),(0,i.jsx)(l.Th,{sx:{fontWeight:"bold",padding:"5px"},variant:"h5",textAlign:"center",children:n})]})})};var w=n(43676),O=n(26466),N=n(24665),F=n(52375),_=n(4190);let P=()=>{let{params:e}=(0,d.KU)(),{data:t,refetch:n}=(0,T.$O)(e.id,"encounter_type=".concat(o.fA.OUTPATIENT_DIAGNOSIS)),[r,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(t){let e=t.flatMap(e=>e.obs.map(e=>{var t,n,i;return{id:e.obs_id.toString(),condition:null!=(i=e.value_text)?i:"",obsDatetime:e.obs_datetime||"",diagnosisType:(null==(t=e.names[0])?void 0:t.name.toLowerCase().includes("differential"))?"Differential Diagnosis":null==(n=e.names[0])?void 0:n.name,diagnosis:e.names}}));console.log({object:e}),l(e)}},[t]),(0,i.jsx)(_.Z,{title:"Diagnosis",children:(0,i.jsx)(F.q,{columns:[{label:"Condition",field:"condition"},{label:"Diagnosis Type",field:"diagnosisType"}],data:r})})};var k=n(7047);let M=e=>{let{children:t,level:n=1}=e,o=Array.isArray(t)?t:t?[t]:[];return o.length?(0,i.jsx)("div",{style:{paddingLeft:"".concat(16*n,"px")},children:o.map((e,t)=>{let o=null;return"string"==typeof(null==e?void 0:e.item)?o=e.bold?(0,i.jsx)("strong",{children:e.item}):e.item:(null==e?void 0:e.item)&&"object"==typeof e.item&&(o=(0,i.jsx)(i.Fragment,{children:Object.entries(e.item).map((t,n,o)=>{let[r,l]=t;return(0,i.jsxs)("span",{children:[e.bold?(0,i.jsx)("strong",{children:r}):r,": ",l,n<o.length-1&&", "]},n)})})),(0,i.jsxs)("div",{style:{marginBottom:"4px"},children:[o&&(0,i.jsxs)("div",{children:["- ",o]}),(null==e?void 0:e.children)&&(0,i.jsx)(M,{children:e.children,level:n+1})]},t)})}):null},L=e=>{let{data:t=[],columns:n=2}=e;return Array.isArray(t)&&0!==t.length?(0,i.jsx)("div",{style:{fontFamily:"Arial, sans-serif",lineHeight:1.6},children:(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(n,", 1fr)"),gap:"1rem"},children:Array.from({length:n}).map((e,o)=>(0,i.jsx)("div",{children:t.filter((e,t)=>t%n===o).map((e,t)=>(0,i.jsxs)("div",{style:{marginBottom:"2rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",padding:"1rem"},children:[(0,i.jsx)("h4",{style:{marginBottom:"0.5rem"},children:(0,i.jsx)("strong",{children:e.title})}),e.content&&(0,i.jsx)(i.Fragment,{children:Array.isArray(e.content)?e.content.map((e,t)=>(0,i.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#f9f9f9",borderRadius:"6px"},children:[(null==e?void 0:e.heading)&&(0,i.jsxs)("strong",{children:["- ",(null==e?void 0:e.heading)||"Untitled Section"]}),(0,i.jsx)(M,{children:null==e?void 0:e.children}),(0,i.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px",letterSpacing:"0.2px",marginTop:"8px",fontStyle:"italic"},children:e.user})]},t)):(0,i.jsx)("div",{children:e.content})})]},t))},o))})}):null};var G=n(24364),W=n(23113),B=n(83159),U=n(26301),z=n(70856);let Y=e=>{let{obs:t}=e;return t.map(e=>(0,i.jsxs)("div",{style:{marginBottom:"1ch"},children:[(0,i.jsx)("p",{style:{whiteSpace:"pre-wrap",margin:0},children:(0,i.jsx)(z.oz,{children:e.value})}),(0,i.jsxs)("div",{style:{color:"#7f8c8d",fontSize:"14px",letterSpacing:"0.2px",marginTop:"8px",fontStyle:"italic"},children:["~ ",e.created_by," -"," ",(0,U.rX)(e.obs_datetime||new Date)]})]},e.uuid))};var H=n(33077),X=n(90043),K=n(99052);function $(){let{values:e,dateTimes:t}=(0,d.L$)("Peak Expiratory Flow Rate");return(0,i.jsx)(K.b,{chartConfig:{series:[{name:"Peak Expiratory Flow Rate",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#70C1B3"]}})}function V(){let{values:e,dateTimes:t}=(0,d.L$)("Urine Dipstick Ketones");return(0,i.jsx)(K.b,{chartConfig:{series:[{name:"Urine Dipstick Ketones",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#70C1B3"]}})}let q=()=>{let e=[{title:"Blood Pressure (BP)",Component:X.BP},{title:"Temperature (\xb0C)",Component:X.hv},{title:"Heart Rate (bpm)",Component:X.vz},{title:"Respiratory Rate (breaths/min)",Component:X.lu},{title:"Oxygen Saturation (Oâ‚‚ Sat)",Component:X.Rg},{title:"Glucose (mmol/L)",Component:X.d7},{title:"Peak Expiratory Flow Rate (L/min)",Component:$},{title:"Urine Dipstick Ketones",Component:V}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n          @media print {\n\n            /* Compact layout */\n            .MuiGrid-item {\n              padding: 2mm !important;\n              margin: 0 !important;\n            }\n\n            .MuiPaper-root {\n              padding: 3mm !important;\n              margin: 0 0 4mm 0 !important;\n              border: 0.3pt solid #ccc !important;\n              page-break-inside: avoid !important;\n              break-inside: avoid !important;\n              display: block !important;\n            }\n\n            /* Ensure title and chart stay together */\n            .chart-section {\n              page-break-inside: avoid !important;\n              break-inside: avoid !important;\n              display: block !important;\n              position: relative;\n            }\n\n            /* Typography smaller for print */\n            .chart-section-title {\n              font-size: 11px !important;\n              font-weight: 600 !important;\n              margin-bottom: 2mm !important;\n              color: #000 !important;\n              page-break-after: avoid !important;\n              break-after: avoid !important;\n            }\n\n            /* Charts adapt height */\n            .apexcharts-canvas {\n              height: auto !important;\n              max-height: 60mm !important;\n            }\n\n            /* Prevent splitting charts */\n            .apexcharts-graphical {\n              page-break-inside: avoid !important;\n              break-inside: avoid !important;\n            }\n\n            /* Reduce margins for print */\n            @page {\n              margin: 10mm !important;\n            }\n          }\n        "}),(0,i.jsx)(H.default,{container:!0,spacing:2,children:e.map(e=>{let{title:t,Component:n}=e;return(0,i.jsx)(H.default,{item:!0,xs:12,md:6,className:"chart-section",children:(0,i.jsxs)(p.default,{elevation:2,sx:{p:2},children:[(0,i.jsx)(u.default,{variant:"subtitle1",className:"chart-section-title",sx:{mb:1},children:t}),(0,i.jsx)(n,{})]})},t)})})]})};var J=n(38230),Z=n(88538);let Q=e=>{let{onAddNote:t,filterSoapierState:n,filterAETCState:o,filterSurgicalState:r,filterGyneacologyState:l,filterMedicalInpatientState:a,setFilterSoapierState:c,setFilterAETCState:p,setFilterSurgicalState:u,setFilterGyneacologyState:g,setFilterMedicalInpatientState:h,onDownload:f,surgicalData:S,gyneacologyData:b,medicalInpatientData:A,onClickFilterButton:v}=e,{hasActiveVisit:y}=(0,d.gd)(),[j,E]=(0,s.useState)(null),C=!!j,{gender:T}=(0,d.gd)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.default,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mb:2,width:"100%"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(m.A,{onClick:f,sx:{color:"white",backgroundColor:"primary.main",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"110px","&:hover":{backgroundColor:"rgb(0, 70, 0)"}},children:"Download PDF"}),(0,i.jsx)("span",{style:{width:"10px",borderRight:"1px solid #000",marginRight:"10px",height:"30px",paddingTop:"5px",paddingBottom:"5px"}}),(0,i.jsx)(m.A,{onClick:()=>{u(!0),c(!1),p(!1),g(!1),h(!1)},sx:{backgroundColor:r?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"Surgical Notes"}),"Female"===T&&(0,i.jsxs)(m.A,{onClick:()=>{g(!0),u(!1),h(!1),c(!1),p(!1)},sx:{backgroundColor:l?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:["Gyneacology"," "]}),(0,i.jsxs)(m.A,{onClick:()=>{h(!0),g(!1),u(!1),c(!1),p(!1)},sx:{backgroundColor:a?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:["Medical Inpatient"," "]}),(0,i.jsx)(m.A,{onClick:()=>{c(!1),p(!1),u(!1),g(!1),h(!1),v("All")},sx:{backgroundColor:n||o||r||l||a?"":"rgb(221, 238, 221)",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"110px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"All"})]})}),(0,i.jsx)(Z.default,{id:C?"simple-popover":void 0,open:C,anchorEl:j,onClose:()=>{E(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,i.jsx)(J.A,{onSubmit:e=>{E(null),t(e)}})})]})};var ee=n(51267),et=n(25641),en=n(45185),ei=n(94222),eo=n(62207),er=n(95671),el=n(88867),ea=n(23820),es=n(24507);let ed=e=>{var t,n,r,l,a,s,d,c,p,m,u,g,h,S,b,A;let{visitId:v,patientId:y}=e,{data:j}=(0,T.$O)(y,"encounter_type=".concat(o.fA.PRESENTING_COMPLAINTS,"&visit=").concat(v)),{data:E}=(0,T.$O)(y,"encounter_type=".concat(o.fA.VITALS,"&visit=").concat(v)),{data:C}=(0,T.$O)(y,"encounter_type=".concat(o.fA.TRIAGE_RESULT,"&visit=").concat(v)),I=null!=(A=null==j||null==(n=j[0])||null==(t=n.obs)?void 0:t.filter(e=>e.names.some(e=>e.name===o.W.PRESENTING_COMPLAINTS)))?A:[],R=(0,es.m)(null==E||null==(r=E[0])?void 0:r.obs,o.W.TEMPERATURE),D=(0,es.m)(null==E||null==(l=E[0])?void 0:l.obs,o.W.PULSE_RATE),w=(0,es.m)(null==E||null==(a=E[0])?void 0:a.obs,o.W.HEART_RATE),O=(0,es.m)(null==E||null==(s=E[0])?void 0:s.obs,o.W.SYSTOLIC_BLOOD_PRESSURE),N=(0,es.m)(null==E||null==(d=E[0])?void 0:d.obs,o.W.DIASTOLIC_BLOOD_PRESSURE),F=(0,es.m)(null==E||null==(c=E[0])?void 0:c.obs,o.W.RESPIRATORY_RATE),_=(0,es.m)(null==E||null==(p=E[0])?void 0:p.obs,o.W.PULSE_OXIMETRY),P=(0,es.m)(null==E||null==(m=E[0])?void 0:m.obs,o.W.GLUCOSE),k=(0,es.m)(null==E||null==(u=E[0])?void 0:u.obs,o.W.AVPU),M=["Temperature: ".concat(R||" - "," \xb0C"),"Pulse: ".concat(D||" - "," bpm"),"Heart: ".concat(w||" - "," bpm"),"BP: ".concat(O||" - ","/").concat(N||" - "," mmHg"),"Respiratory: ".concat(F||" - "," breaths/min"),"Oxygen: ".concat(_||" - "," %"),"Glucose: ".concat(P||" - "),"AVPU: ".concat(k||" - ")].join("   "),L=(0,es.m)(null==C||null==(g=C[0])?void 0:g.obs,o.W.TRIAGE_RESULT),G=(0,es.m)(null==C||null==(h=C[0])?void 0:h.obs,o.W.CARE_AREA);return(0,i.jsxs)(x.default,{children:[(0,i.jsx)("h3",{children:"Triage Information"}),(0,i.jsxs)(f.A,{component:"ol",sx:{listStyleType:"upper-alpha",pl:4},children:[(0,i.jsxs)(ea.Ay,{sx:{display:"list-item"},children:[(0,i.jsx)("b",{children:"Presenting Complaints:"})," ",I.length>0?I.map((e,t)=>" (".concat(t+1,"). ")+e.value).join(", "):"None recorded"]}),(0,i.jsxs)(ea.Ay,{sx:{display:"list-item"},children:[(0,i.jsx)("b",{children:"Vital Signs:"})," ",M]}),(0,i.jsxs)(ea.Ay,{sx:{display:"list-item"},children:[(0,i.jsx)("b",{children:"Triage Category:"})," ",L]}),(0,i.jsxs)(ea.Ay,{sx:{display:"list-item"},children:[(0,i.jsx)("b",{children:"Patient Care Area:"})," ",G]})]}),(0,i.jsxs)(x.default,{style:{color:"#7f8c8d",fontSize:"14px",letterSpacing:"0.2px",marginTop:"8px",fontStyle:"italic"},children:["created by ",(null==E||null==(S=E[0])?void 0:S.created_by)||"Unknown User"," on"," ",(0,U.rX)(null==E||null==(b=E[0])?void 0:b.encounter_datetime)]})]})},ec=()=>{let{ServerTime:e}=(0,et.useServerTime)(),{params:t}=(0,d.KU)(),n=t.id,{notes:r,refresh:a}=(0,en.G)(n),{selectedVisit:c}=(0,k.E)(),[p,m]=(0,s.useState)("All"),[u,g]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[S,b]=(0,s.useState)(!1),[A,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),E=(0,s.useRef)(null),C=(0,s.useRef)(null),I=(0,s.useRef)(null),R=(0,s.useRef)(null),{handleSubmit:D}=(0,d.li)(o.fA.CLINICAL_NOTES,()=>""),w=(0,ei.useReactToPrint)({contentRef:E}),O=e=>{var t;let{data:i,isLoading:o}=(0,T.$O)(n,"encounter_type=".concat(e,"&visit=").concat(null==c?void 0:c.uuid));return i&&(null==(t=i[0])?void 0:t.obs)||[]},N=()=>{console.log("PDF generated successfully!")},F=(e=>[{title:"Continuation Notes",content:(0,i.jsx)(Y,{obs:e(o.fA.CLINICAL_NOTES)})},{title:"Monitoring Charts",content:(0,i.jsx)(q,{})},{title:"Soapier Notes",content:(0,G.Wm)(e(o.fA.NURSING_CARE_NOTES))},{title:"Primary Survey",content:(0,G.I2)({airwayObs:e(o.fA.AIRWAY_ASSESSMENT),breathingObs:e(o.fA.BREATHING_ASSESSMENT),circulationObs:e(o.fA.CIRCULATION_ASSESSMENT),disabilityObs:e(o.fA.PRIMARY_DISABILITY_ASSESSMENT),exposureObs:e(o.fA.EXPOSURE_ASSESSMENT)})},{title:"Secondary Survey",content:(0,G.ml)({generalInformationObs:e(o.fA.GENERAL_INFORMATION_ASSESSMENT),headAndNeckObs:e(o.fA.HEAD_AND_NECK_ASSESSMENT),chestObs:e(o.fA.CHEST_ASSESSMENT),abdomenAndPelvisObs:e(o.fA.ABDOMEN_AND_PELVIS_ASSESSMENT),extremitiesObs:e(o.fA.EXTREMITIES_ASSESSMENT),neurologicalObs:e(o.fA.NEUROLOGICAL_EXAMINATION_ASSESSMENT)})},{title:"Patient Management Plan",content:(0,G.l3)({nonPharmalogical:e(o.fA.NON_PHARMACOLOGICAL)})},{title:"Diagnosis",content:(0,G.K8)([...e(o.fA.OUTPATIENT_DIAGNOSIS),...e(o.fA.DIAGNOSIS)])},{title:" Laboratory or Radiology Findings",content:(0,i.jsx)(B.A,{title:"Beside Tests",data:(0,G.qm)(e(o.fA.BED_SIDE_TEST))})},{title:"Sample History",content:(0,i.jsx)(x.default,{sx:{display:"flex",flexDirection:"column",gap:3},children:[{type:o.fA.PRESENTING_COMPLAINTS,title:"-Presenting Complaints",config:W.k.PRESENTING_COMPLAINTS},{type:o.fA.ALLERGIES,title:"-Allergies",config:W.k.ALLERGIES},{type:o.fA.PRESCRIPTIONS,title:"-Medications",config:W.k.MEDICATIONS},{type:o.fA.DIAGNOSIS,title:"Prior/existing conditions",config:W.k.DIAGNOSIS},{type:o.fA.SURGICAL_HISTORY,title:"-Surgical History",config:W.k.SURGICAL_HISTORY},{type:o.fA.PATIENT_ADMISSIONS,title:"-Previous Admissions",config:W.k.ADMISSIONS},{type:o.fA.SUMMARY_ASSESSMENT,title:"-Last Meal",config:W.k.LAST_MEAL},{type:o.fA.FAMILY_MEDICAL_HISTORY,title:"-Family Medical History",config:W.k.FAMILY_HISTORY}].map(t=>(0,i.jsx)(W.$,{data:e(t.type),title:t.title,config:t.config},t.type))})},{title:"Disposition Notes",content:(0,G.rJ)([...e(o.fA.DISPOSITION),...e(o.fA.AWAITING_SPECIALTY)])}])(O).filter(e=>u?"Soapier Notes"===e.title:h?"Continuation Notes"===e.title||"Triage Information"===e.title||"Primary Survey"===e.title||"Secondary Survey"===e.title||"Patient Management Plan"===e.title||"Diagnosis"===e.title||"Investigation Plans"===e.title:S?"Surgical Notes"===e.title:A?"Gyneacology"===e.title:!y||"Medical Inpatient"===e.title);return(0,i.jsxs)(_.Z,{title:"",children:[(0,i.jsx)(l.jD,{display:"flex",justifyContent:"space-between",children:(0,i.jsx)(Q,{onAddNote:t=>{D((0,ee.gX)({"Clinical notes construct":t},e.getServerTimeString())).then(()=>a())},filterSoapierState:u,filterAETCState:h,filterSurgicalState:S,filterGyneacologyState:A,filterMedicalInpatientState:y,setFilterSoapierState:g,setFilterAETCState:f,setFilterSurgicalState:b,setFilterGyneacologyState:v,setFilterMedicalInpatientState:j,onDownload:()=>{S&&C.current?C.current.generatePDF():A&&I.current?I.current.generatePDF():y&&R.current?R.current.generatePDF():w()},surgicalData:{title:"Surgical Notes",data:[...O(o.fA.SURGICAL_NOTES_TEMPLATE_FORM)],removeObs:[]},gyneacologyData:{title:"Gyneacology",data:[...O(o.fA.GYNEACOLOGY_WARD)],removeObs:[]},medicalInpatientData:{title:"Medical Inpatient",data:[...O(o.fA.MEDICAL_IN_PATIENT)],removeObs:[]},onClickFilterButton:m})}),!S&&!A&&!y&&(0,i.jsxs)("div",{ref:E,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(l.TF,{}),(0,i.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,i.jsxs)("p",{style:{marginLeft:"10px"},children:["Report type: ",p]}),(0,i.jsx)("div",{style:{fontWeight:700,fontSize:"20px",textAlign:"center"},children:"Clinical Notes"})]})]}),(0,i.jsx)(ed,{patientId:n,visitId:c.uuid}),(0,i.jsx)(L,{columns:2,data:F})]}),S&&(0,i.jsx)(el.r,{ref:C,onPrintComplete:N,showPreview:!0}),A&&(0,i.jsx)(eo.k,{ref:I,onPrintComplete:N,showPreview:!0}),y&&(0,i.jsx)(er.I,{ref:R,onPrintComplete:N,showPreview:!0})]})};function ep(e){let{children:t,value:n,index:o,...r}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:n!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),...r,children:n===o&&(0,i.jsx)(x.default,{sx:{pt:1},children:t})})}let ex=()=>{let[e,t]=(0,s.useState)(0);return(0,i.jsxs)(x.default,{sx:{width:"100%",mt:2,pb:2},children:[(0,i.jsx)(x.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f4f4f4",borderRadius:"4px 4px 0 0",marginRight:"2px",borderBottom:"none"},children:(0,i.jsxs)(w.A,{value:e,onChange:(e,n)=>{t(n)},sx:{overflow:"scroll",width:"100%","& .MuiTabs-flexContainer":{justifyContent:"space-evenly",overflow:"scroll"}},children:[(0,i.jsx)(O.A,{label:"Monitoring Chart",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:0===e?"#DDEEDD":"#FFFFFF",fontWeight:0===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(O.A,{label:"Clinical Notes",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:1===e?"#DDEEDD":"#FFFFFF",fontWeight:1===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(O.A,{label:"Investigations",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:2===e?"#DDEEDD":"#FFFFFF",fontWeight:2===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(O.A,{label:"Medications",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:3===e?"#DDEEDD":"#FFFFFF",fontWeight:3===e?"bold":"normal",borderBottom:"none"}}),(0,i.jsx)(O.A,{label:"Results",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:4===e?"#DDEEDD":"#FFFFFF",fontWeight:4===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(O.A,{label:"Diagnosis",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:5===e?"#DDEEDD":"#FFFFFF",fontWeight:5===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(O.A,{label:"Visit History",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:6===e?"#DDEEDD":"#FFFFFF",fontWeight:6===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}})]})}),(0,i.jsx)(ep,{value:e,index:0,children:(0,i.jsx)(N.Cp,{})}),(0,i.jsx)(ep,{value:e,index:1,children:(0,i.jsx)(ec,{})}),(0,i.jsx)(ep,{value:e,index:2,children:(0,i.jsx)(N.sK,{})}),(0,i.jsx)(ep,{value:e,index:3,children:(0,i.jsx)(N.DQ,{})}),(0,i.jsx)(ep,{value:e,index:4,children:(0,i.jsx)(N.nB,{})}),(0,i.jsx)(ep,{value:e,index:5,children:(0,i.jsx)(P,{})}),(0,i.jsx)(ep,{value:e,index:6,children:(0,i.jsx)(N.sJ,{})})]})};var em=n(5387);function eu(){let{patientId:e}=(0,d.gd)(),{data:t}=(0,em.iu)(e),[n,o]=(0,s.useState)([]),{visitDate:r,setVisitDates:l,setSelectedVisit:a}=(0,k.E)();return(0,s.useEffect)(()=>{if((null==t?void 0:t.length)>0){let s=[...t.map(e=>({visit_id:e.visit_id,date_started:e.date_started,uuid:e.uuid}))].sort((e,t)=>new Date(t.date_started).getTime()-new Date(e.date_started).getTime());if(o(s),null===r&&s.length>0){var e,n,i;l(null==(e=s[0])?void 0:e.date_started),a({id:null==(n=s[0])?void 0:n.visit_id,uuid:null==(i=s[0])?void 0:i.uuid})}}},[t,r]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:n.map(e=>(0,i.jsx)(m.A,{onClick:()=>{a({id:e.visit_id,uuid:e.uuid}),l(null==e?void 0:e.date_started)},size:"large",style:{width:"100%",backgroundColor:e.date_started===r?"#DDEEDD":"",marginBottom:"8px"},variant:"outlined",children:(e=>{let t=new Date(e),n=t.getDate(),i=t.toLocaleString("en-US",{month:"short"}),o=t.getFullYear(),r=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return"".concat(n," ").concat(i,", ").concat(o," (").concat(r,")")})(e.date_started)},e.visit_id))})})}let eg=()=>{let{hasActiveVisit:e,recentVisitCloseDateTime:t,isLoading:n,isSuccess:o}=(0,d.gd)(),[r,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{setTimeout(()=>{c(!0)},1e3)},[]),(0,i.jsxs)(k.VisitDatesProvider,{children:[r&&!1===e&&(0,i.jsx)(x.default,{sx:{width:"100%",backgroundColor:"#FF2400",textAlign:"center",color:"white",padding:"10px"},children:(0,i.jsxs)(u.default,{children:["This patient doesnt have an active visit."," ",t?"The most recent visit was closed on ".concat((0,U.rX)(t)):null," "]})}),(0,i.jsxs)(l.Yr,{container:!0,style:{justifyContent:"center",marginTop:"15px",gap:"15px",margin:"5px",width:"unset"},children:[(0,i.jsxs)(l.Yr,{item:!0,lg:2.2,sm:12,children:[(0,i.jsx)(a.XU,{}),(0,i.jsx)("br",{}),(0,i.jsx)(eu,{})]}),(0,i.jsxs)(l.Yr,{item:!0,lg:8.5,sm:12,style:{minWidth:"300px"},children:[(0,i.jsx)(R,{}),(0,i.jsx)(ex,{})]})]})]})},eh=(0,r.A)(function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eg,{})})},[o.Ot.CLINICIAN,o.Ot.ADMIN,o.Ot.NURSE,o.Ot.STUDENT_CLINICIAN])}},e=>{e.O(0,[9503,6172,16,9344,8250,2225,3740,8320,3349,9306,5263,7776,3497,2141,7861,2891,1412,4018,5068,6223,2619,2502,3002,4066,9422,7774,2478,4008,5832,9625,3890,7e3,5008,7285,6511,8371,1226,45,2906,8441,1255,7358],()=>e(e.s=44468)),_N_E=e.O()}]);