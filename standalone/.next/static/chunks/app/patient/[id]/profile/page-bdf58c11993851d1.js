(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7092],{41186:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(95155),r=n(93584),o=n(87295),a=n(12115),l=n(75855),s=n(72478),d=n(15239),c=n(9877);function p(e,t){return function(n){let[s,d]=(0,a.useState)(!1),{navigateTo:p}=(0,o.cq)();(0,a.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){d(!1),p("/"),localStorage.clear();return}}d(!0)}else d(!1),localStorage.clear(),p("/")},[]);let g=(0,l.R)(t,(0,c.O)());return s?g?(0,i.jsx)(e,{...n}):(0,i.jsx)(x,{}):(0,i.jsx)(r.OverlayLoader,{open:!s})}}let x=()=>(0,i.jsx)(s.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,i.jsx)(d.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},44468:(e,t,n)=>{Promise.resolve().then(n.bind(n,98644))},98644:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eg});var i=n(95155),r=n(263),o=n(41186),a=n(72478),l=n(15008),s=n(12115),d=n(87295),c=n(99354),p=n(2300),x=n(94049),g=n(91871),m=n(25635),h=n(50119),u=n(53756),f=n(41602),S=n(73707),b=n(17681),A=n(50430),v=n(62962),y=n(63186),j=n(56164),C=n(98672),E=n(39625),T=n(66637);let I=e=>{let{patient:t}=e,[n,o]=(0,s.useState)(!1),{gender:a}=(0,d.gd)(),{patientId:l,hasActiveVisit:c}=(0,d.gd)(),{data:p,isLoading:I}=(0,T.$O)(l),{navigateTo:w}=(0,d.cq)(),[D,F]=(0,s.useState)(null),{isOnList:R}=(0,d.lT)(null==t?void 0:t.id),{setActiveStep:N}=(0,s.useContext)(C.X2),[O,k]=(0,s.useState)({templateForms:!1,consultation:!1}),[_,P]=(0,s.useState)("");(0,s.useEffect)(()=>{!I&&p&&(e=>{var t;let n=null==p?void 0:p.find(t=>{var n;return(null==t||null==(n=t.encounter_type)?void 0:n.uuid)===e});if(!n)return;let i=new Map;(n.obs||[]).forEach(e=>{let{concept_id:t,obs_datetime:n}=e,r=i.get(t);(!r||new Date(n)>new Date(r.obs_datetime))&&i.set(t,e)}),P(null==(t=Array.from(i.values())[0])?void 0:t.value)})(r.fA.OUTPATIENT_DIAGNOSIS)},[I,p]);let M=()=>{F(null)},L=e=>{M(),w(e)},G=[{label:"Medical Inpatient Admission Sheet",path:"/patient/".concat(t.id,"/medicalInpatient")},{label:"Surgical Notes",path:"/patient/".concat(t.id,"/surgicalNotes")},..."Female"===a?[{label:"Gynaecology Ward Admission",path:"/patient/".concat(t.id,"/gyneacology")}]:[]],B=[{label:"Monitoring Chart",path:"/patient/".concat(t.id,"/nursingChart")},{label:"Nursing Care Notes (SOAPIER)",path:"/patient/".concat(t.id,"/soap")},{label:"Primary Survey",path:"/patient/".concat(t.id,"/primary-assessment")},{label:"SAMPLE History",path:"/patient/".concat(t.id,"/medicalHistory")},{label:"Secondary Survey",path:"/patient/".concat(t.id,"/secondary-assessment")},{label:"Differential Diagnosis",path:"/patient/".concat(t.id,"/differential-diagnosis")},{label:"Investigations Plan",path:"/patient/".concat(t.id,"/investigations")},{label:"Final Diagnosis",path:"/patient/".concat(t.id,"/final-diagnosis")},{label:"Patient Management Plan",path:"/patient/".concat(t.id,"/patient-management-plan")},{label:"Continuation Sheet",path:"/patient/".concat(t.id,"/continuationSheet")},{label:"Disposition",path:"/patient/".concat(t.id,"/disposition")}];return(0,i.jsxs)(x.default,{children:[(0,i.jsx)("style",{children:"\n          .listItemButton {\n            gap: 10px !important;\n            line-height: 1 !important;\n            border-bottom: 1px solid #ccc !important;\n          } \n          .nestedMenuItem {\n            padding-left: 32px !important;\n          }\n        "}),(0,i.jsxs)(g.A,{sx:{backgroundColor:"#FECDCA",color:"#B42318",borderRadius:"9999px",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",textTransform:"none",maxWidth:300,justifyContent:"flex-start",paddingRight:"20px","&:hover":{backgroundColor:"#FFA6A0"}},children:[(0,i.jsx)(m.default,{component:"span",fontWeight:"bold",mr:.5,noWrap:!0,children:"Final Diagnosis:"}),(0,i.jsx)(x.default,{component:"span",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",maxWidth:"calc(100% - 130px)",verticalAlign:"bottom"},title:_,children:_})]}),(0,i.jsx)(g.A,{disabled:!c,variant:"outlined",onClick:()=>o(!0),sx:{backgroundColor:"rgb(221, 238, 221)",color:"rgb(0, 70, 0)",borderRadius:"9999px",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"Start CPR"}),(0,i.jsxs)(h.A,{variant:"contained",disabled:!c,sx:{borderRadius:"9999px",overflow:"hidden",minWidth:"130px","& .MuiButtonGroup-grouped:not(:last-of-type)":{borderRight:0}},children:[(0,i.jsx)(g.A,{sx:{backgroundColor:"#006401",color:"white",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)","&:hover":{backgroundColor:"#004d00"}},children:"Start Assessment"}),(0,i.jsx)(g.A,{onClick:e=>{F(e.currentTarget)},sx:{backgroundColor:"#008000",color:"white",borderLeft:"1px solid #135a14",fontSize:"14px",padding:"0px",minWidth:"unset",width:"40px","&:hover":{backgroundColor:"#006b00"}},children:(0,i.jsx)(m.default,{sx:{fontSize:"18px"},children:"▾"})})]}),(0,i.jsx)(u.A,{anchorEl:D,open:!!D,onClose:M,PaperProps:{style:{borderRadius:"10px",marginTop:"105px"}},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:(0,i.jsxs)(f.A,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[B.map((e,t)=>(0,i.jsxs)(S.A,{onClick:()=>L(e.path),className:"listItemButton",children:[(0,i.jsx)(j.OiG,{}),(0,i.jsx)(b.A,{primary:e.label})]},t)),(0,i.jsxs)(S.A,{onClick:()=>(e=>{k(t=>({...t,[e]:!t[e]}))})("templateForms"),className:"listItemButton",children:[(0,i.jsx)(j.OiG,{}),(0,i.jsx)(b.A,{primary:"Template Forms"}),O.templateForms?(0,i.jsx)(v.A,{}):(0,i.jsx)(y.A,{})]}),(0,i.jsx)(A.A,{in:O.templateForms,timeout:"auto",unmountOnExit:!0,children:(0,i.jsx)(f.A,{component:"div",disablePadding:!0,children:G.map((e,t)=>(0,i.jsxs)(S.A,{onClick:()=>L(e.path),className:"listItemButton nestedMenuItem",children:[(0,i.jsx)(j.OiG,{}),(0,i.jsx)(b.A,{primary:e.label})]},"template-".concat(t)))})})]})}),(0,i.jsx)(E.w8,{open:n,onClose:()=>{o(!1)}})]})},w=()=>{let{isLoading:e,vitals:t}=(0,d.zg)(),{params:n}=(0,d.KU)();return e?(0,i.jsx)(c.E7,{height:120}):(0,i.jsxs)(p.default,{elevation:3,children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.2rem",padding:"1ch"},children:"Most recent Vitals & Biometrics"}),(0,i.jsx)("div",{style:{padding:"1ch"},children:(0,i.jsx)(I,{patient:n})})]}),(0,i.jsx)("div",{style:{overflowX:"scroll",marginLeft:"10px",marginRight:"10px"},children:(0,i.jsx)(a.jD,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",padding:"1ch",minWidth:"854px"},children:t.map(e=>{let{name:t,value:n}=e;return(0,i.jsx)(D,{title:t,value:n},"".concat(n).concat(t))})})})]})},D=e=>{let{title:t,value:n}=e;return(0,i.jsx)(a.jD,{sx:{display:"flex",flexDirection:"column"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Th,{style:{marginBottom:" 15px",fontSize:"14px",padding:"10px"},variant:"caption",textAlign:"center",children:t}),(0,i.jsx)(a.Th,{sx:{fontWeight:"bold",padding:"5px"},variant:"h5",textAlign:"center",children:n})]})})};var F=n(43676),R=n(26466),N=n(24665),O=n(52375),k=n(4190);let _=()=>{let{params:e}=(0,d.KU)(),{data:t,refetch:n}=(0,T.$O)(e.id,"encounter_type=".concat(r.fA.OUTPATIENT_DIAGNOSIS)),[o,a]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(t){let e=t.flatMap(e=>e.obs.map(e=>{var t,n,i;return{id:e.obs_id.toString(),condition:null!=(i=e.value_text)?i:"",obsDatetime:e.obs_datetime||"",diagnosisType:(null==(t=e.names[0])?void 0:t.name.toLowerCase().includes("differential"))?"Differential Diagnosis":null==(n=e.names[0])?void 0:n.name,diagnosis:e.names}}));console.log({object:e}),a(e)}},[t]),(0,i.jsx)(k.Z,{title:"Diagnosis",children:(0,i.jsx)(O.q,{columns:[{label:"Condition",field:"condition"},{label:"Diagnosis Type",field:"diagnosisType"}],data:o})})};var P=n(7047);let M=e=>{let{children:t,level:n=1}=e,r=Array.isArray(t)?t:t?[t]:[];return r.length?(0,i.jsx)("div",{style:{paddingLeft:"".concat(16*n,"px")},children:r.map((e,t)=>{let r=null;return"string"==typeof(null==e?void 0:e.item)?r=e.bold?(0,i.jsx)("strong",{children:e.item}):e.item:(null==e?void 0:e.item)&&"object"==typeof e.item&&(r=(0,i.jsx)(i.Fragment,{children:Object.entries(e.item).map((t,n,r)=>{let[o,a]=t;return(0,i.jsxs)("span",{children:[e.bold?(0,i.jsx)("strong",{children:o}):o,": ",a,n<r.length-1&&", "]},n)})})),(0,i.jsxs)("div",{style:{marginBottom:"4px"},children:[r&&(0,i.jsxs)("div",{children:["- ",r]}),(null==e?void 0:e.children)&&(0,i.jsx)(M,{children:e.children,level:n+1})]},t)})}):null},L=e=>{let{data:t=[],columns:n=2}=e;return Array.isArray(t)&&0!==t.length?(0,i.jsx)("div",{style:{fontFamily:"Arial, sans-serif",lineHeight:1.6},children:(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(n,", 1fr)"),gap:"1rem"},children:Array.from({length:n}).map((e,r)=>(0,i.jsx)("div",{children:t.filter((e,t)=>t%n===r).map((e,t)=>(0,i.jsxs)("div",{style:{marginBottom:"2rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",padding:"1rem"},children:[(0,i.jsx)("h4",{style:{marginBottom:"0.5rem"},children:(0,i.jsx)("strong",{children:e.title})}),e.content&&(0,i.jsx)(i.Fragment,{children:Array.isArray(e.content)?e.content.map((e,t)=>(0,i.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#f9f9f9",borderRadius:"6px"},children:[(null==e?void 0:e.heading)&&(0,i.jsxs)("strong",{children:["- ",(null==e?void 0:e.heading)||"Untitled Section"]}),(0,i.jsx)(M,{children:null==e?void 0:e.children}),(0,i.jsx)("div",{style:{color:"#7f8c8d",fontSize:"14px",letterSpacing:"0.2px",marginTop:"8px",fontStyle:"italic"},children:e.user})]},t)):(0,i.jsx)("div",{children:e.content})})]},t))},r))})}):null};var G=n(24364),B=n(23113),W=n(83159),z=n(26301),U=n(70856);let Y=e=>{let{obs:t}=e;return t.map(e=>(0,i.jsxs)("div",{style:{marginBottom:"1ch"},children:[(0,i.jsx)("p",{style:{whiteSpace:"pre-wrap",margin:0},children:(0,i.jsx)(U.oz,{children:e.value})}),(0,i.jsxs)("div",{style:{color:"#7f8c8d",fontSize:"14px",letterSpacing:"0.2px",marginTop:"8px",fontStyle:"italic"},children:["~ ",e.created_by," -"," ",(0,z.rX)(e.obs_datetime||new Date)]})]},e.uuid))};var H=n(33077),K=n(90043),X=n(99052);function $(){let{values:e,dateTimes:t}=(0,d.L$)("Peak Expiratory Flow Rate");return(0,i.jsx)(X.b,{chartConfig:{series:[{name:"Peak Expiratory Flow Rate",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#70C1B3"]}})}function V(){let{values:e,dateTimes:t}=(0,d.L$)("Urine Dipstick Ketones");return(0,i.jsx)(X.b,{chartConfig:{series:[{name:"Urine Dipstick Ketones",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#70C1B3"]}})}let q=()=>{let e=[{title:"Blood Pressure (BP)",Component:K.BP},{title:"Temperature (\xb0C)",Component:K.hv},{title:"Heart Rate (bpm)",Component:K.vz},{title:"Respiratory Rate (breaths/min)",Component:K.lu},{title:"Oxygen Saturation (O₂ Sat)",Component:K.Rg},{title:"Glucose (mmol/L)",Component:K.d7},{title:"Peak Expiratory Flow Rate (L/min)",Component:$},{title:"Urine Dipstick Ketones",Component:V}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n          @media print {\n\n            /* Compact layout */\n            .MuiGrid-item {\n              padding: 2mm !important;\n              margin: 0 !important;\n            }\n\n            .MuiPaper-root {\n              padding: 3mm !important;\n              margin: 0 0 4mm 0 !important;\n              border: 0.3pt solid #ccc !important;\n              page-break-inside: avoid !important;\n              break-inside: avoid !important;\n              display: block !important;\n            }\n\n            /* Ensure title and chart stay together */\n            .chart-section {\n              page-break-inside: avoid !important;\n              break-inside: avoid !important;\n              display: block !important;\n              position: relative;\n            }\n\n            /* Typography smaller for print */\n            .chart-section-title {\n              font-size: 11px !important;\n              font-weight: 600 !important;\n              margin-bottom: 2mm !important;\n              color: #000 !important;\n              page-break-after: avoid !important;\n              break-after: avoid !important;\n            }\n\n            /* Charts adapt height */\n            .apexcharts-canvas {\n              height: auto !important;\n              max-height: 60mm !important;\n            }\n\n            /* Prevent splitting charts */\n            .apexcharts-graphical {\n              page-break-inside: avoid !important;\n              break-inside: avoid !important;\n            }\n\n            /* Reduce margins for print */\n            @page {\n              margin: 10mm !important;\n            }\n          }\n        "}),(0,i.jsx)(H.default,{container:!0,spacing:2,children:e.map(e=>{let{title:t,Component:n}=e;return(0,i.jsx)(H.default,{item:!0,xs:12,md:6,className:"chart-section",children:(0,i.jsxs)(p.default,{elevation:2,sx:{p:2},children:[(0,i.jsx)(m.default,{variant:"subtitle1",className:"chart-section-title",sx:{mb:1},children:t}),(0,i.jsx)(n,{})]})},t)})})]})};var J=n(38230),Z=n(88538);let Q=e=>{let{onAddNote:t,filterSoapierState:n,filterAETCState:r,filterSurgicalState:o,filterGyneacologyState:a,filterMedicalInpatientState:l,setFilterSoapierState:c,setFilterAETCState:p,setFilterSurgicalState:m,setFilterGyneacologyState:h,setFilterMedicalInpatientState:u,onDownload:f,surgicalData:S,gyneacologyData:b,medicalInpatientData:A,onClickFilterButton:v}=e,{hasActiveVisit:y}=(0,d.gd)(),[j,C]=(0,s.useState)(null),E=!!j,{gender:T}=(0,d.gd)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.default,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mb:2,width:"100%"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(g.A,{onClick:f,sx:{color:"white",backgroundColor:"primary.main",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"110px","&:hover":{backgroundColor:"rgb(0, 70, 0)"}},children:"Download PDF"}),(0,i.jsx)("span",{style:{width:"10px",borderRight:"1px solid #000",marginRight:"10px",height:"30px",paddingTop:"5px",paddingBottom:"5px"}}),(0,i.jsx)(g.A,{onClick:()=>{c(!0),p(!1),m(!1),h(!1),u(!1),v("SOAPIER")},sx:{backgroundColor:n?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"SOAPIER Notes"}),(0,i.jsx)(g.A,{onClick:()=>{p(!0),c(!1),m(!1),h(!1),u(!1),v("AETC")},sx:{backgroundColor:r?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"110px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"AETC"}),(0,i.jsx)(g.A,{onClick:()=>{m(!0),c(!1),p(!1),h(!1),u(!1)},sx:{backgroundColor:o?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"Surgical Notes"}),"Female"===T&&(0,i.jsxs)(g.A,{onClick:()=>{h(!0),m(!1),u(!1),c(!1),p(!1)},sx:{backgroundColor:a?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:["Gyneacology"," "]}),(0,i.jsxs)(g.A,{onClick:()=>{u(!0),h(!1),m(!1),c(!1),p(!1)},sx:{backgroundColor:l?"rgb(221, 238, 221)":"",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:["Medical Inpatient"," "]}),(0,i.jsx)(g.A,{onClick:()=>{c(!1),p(!1),m(!1),h(!1),u(!1),v("All")},sx:{backgroundColor:n||r||o||a||l?"":"rgb(221, 238, 221)",color:"rgb(0, 70, 0)",border:"1px solid currentColor",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",marginRight:"10px",flexGrow:1,textTransform:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"110px","&:hover":{backgroundColor:"rgb(197, 231, 197)"}},children:"All"})]})}),(0,i.jsx)(Z.default,{id:E?"simple-popover":void 0,open:E,anchorEl:j,onClose:()=>{C(null)},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,i.jsx)(J.A,{onSubmit:e=>{C(null),t(e)}})})]})};var ee=n(51267),et=n(25641),en=n(45185),ei=n(94222),er=n(62207),eo=n(95671),ea=n(88867);let el=()=>{let{ServerTime:e}=(0,et.useServerTime)(),{params:t}=(0,d.KU)(),n=t.id,{notes:o,refresh:l}=(0,en.G)(n),{selectedVisit:c}=(0,P.E)(),[p,g]=(0,s.useState)("All"),[m,h]=(0,s.useState)(!1),[u,f]=(0,s.useState)(!1),[S,b]=(0,s.useState)(!1),[A,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),C=(0,s.useRef)(null),E=(0,s.useRef)(null),I=(0,s.useRef)(null),w=(0,s.useRef)(null),{handleSubmit:D}=(0,d.li)(r.fA.CLINICAL_NOTES,()=>""),F=(0,ei.useReactToPrint)({contentRef:C}),R=e=>{var t;let{data:i,isLoading:r}=(0,T.$O)(n,"encounter_type=".concat(e,"&visit=").concat(null==c?void 0:c.uuid));return i&&(null==(t=i[0])?void 0:t.obs)||[]},N=()=>{console.log("PDF generated successfully!")},O=(e=>[{title:"Continuation Notes",content:(0,i.jsx)(Y,{obs:e(r.fA.CLINICAL_NOTES)})},{title:"Triage Information",content:[(0,G.J0)(e(r.fA.PRESENTING_COMPLAINTS)),...(0,G.l2)([...e(r.fA.VITALS),...e(r.fA.TRIAGE_RESULT)])]},{title:"Monitoring Charts",content:(0,i.jsx)(q,{})},{title:"Soapier Notes",content:(0,G.Wm)(e(r.fA.NURSING_CARE_NOTES))},{title:"Primary Survey",content:(0,G.I2)({airwayObs:e(r.fA.AIRWAY_ASSESSMENT),breathingObs:e(r.fA.BREATHING_ASSESSMENT),circulationObs:e(r.fA.CIRCULATION_ASSESSMENT),disabilityObs:e(r.fA.PRIMARY_DISABILITY_ASSESSMENT),exposureObs:e(r.fA.EXPOSURE_ASSESSMENT)})},{title:"Secondary Survey",content:(0,G.ml)({generalInformationObs:e(r.fA.GENERAL_INFORMATION_ASSESSMENT),headAndNeckObs:e(r.fA.HEAD_AND_NECK_ASSESSMENT),chestObs:e(r.fA.CHEST_ASSESSMENT),abdomenAndPelvisObs:e(r.fA.ABDOMEN_AND_PELVIS_ASSESSMENT),extremitiesObs:e(r.fA.EXTREMITIES_ASSESSMENT),neurologicalObs:e(r.fA.NEUROLOGICAL_EXAMINATION_ASSESSMENT)})},{title:"Patient Management Plan",content:(0,G.l3)({nonPharmalogical:e(r.fA.NON_PHARMACOLOGICAL)})},{title:"Diagnosis",content:(0,G.K8)([...e(r.fA.OUTPATIENT_DIAGNOSIS),...e(r.fA.DIAGNOSIS)])},{title:" Laboratory or Radiology Findings",content:(0,i.jsx)(W.A,{title:"Beside Tests",data:(0,G.qm)(e(r.fA.BED_SIDE_TEST))})},{title:"Sample History",content:(0,i.jsx)(x.default,{sx:{display:"flex",flexDirection:"column",gap:3},children:[{type:r.fA.PRESENTING_COMPLAINTS,title:"-Presenting Complaints",config:B.k.PRESENTING_COMPLAINTS},{type:r.fA.ALLERGIES,title:"-Allergies",config:B.k.ALLERGIES},{type:r.fA.PRESCRIPTIONS,title:"-Medications",config:B.k.MEDICATIONS},{type:r.fA.DIAGNOSIS,title:"Prior/existing conditions",config:B.k.DIAGNOSIS},{type:r.fA.SURGICAL_HISTORY,title:"-Surgical History",config:B.k.SURGICAL_HISTORY},{type:r.fA.PATIENT_ADMISSIONS,title:"-Previous Admissions",config:B.k.ADMISSIONS},{type:r.fA.SUMMARY_ASSESSMENT,title:"-Last Meal",config:B.k.LAST_MEAL},{type:r.fA.FAMILY_MEDICAL_HISTORY,title:"-Family Medical History",config:B.k.FAMILY_HISTORY}].map(t=>(0,i.jsx)(B.$,{data:e(t.type),title:t.title,config:t.config},t.type))})},{title:"Disposition Notes",content:(0,G.rJ)([...e(r.fA.DISPOSITION),...e(r.fA.AWAITING_SPECIALTY)])}])(R).filter(e=>m?"Soapier Notes"===e.title:u?"Continuation Notes"===e.title||"Triage Information"===e.title||"Primary Survey"===e.title||"Secondary Survey"===e.title||"Patient Management Plan"===e.title||"Diagnosis"===e.title||"Investigation Plans"===e.title:S?"Surgical Notes"===e.title:A?"Gyneacology"===e.title:!y||"Medical Inpatient"===e.title);return(0,i.jsxs)(k.Z,{title:"",children:[(0,i.jsx)(a.jD,{display:"flex",justifyContent:"space-between",children:(0,i.jsx)(Q,{onAddNote:t=>{D((0,ee.gX)({"Clinical notes construct":t},e.getServerTimeString())).then(()=>l())},filterSoapierState:m,filterAETCState:u,filterSurgicalState:S,filterGyneacologyState:A,filterMedicalInpatientState:y,setFilterSoapierState:h,setFilterAETCState:f,setFilterSurgicalState:b,setFilterGyneacologyState:v,setFilterMedicalInpatientState:j,onDownload:()=>{S&&E.current?E.current.generatePDF():A&&I.current?I.current.generatePDF():y&&w.current?w.current.generatePDF():F()},surgicalData:{title:"Surgical Notes",data:[...R(r.fA.SURGICAL_NOTES_TEMPLATE_FORM)],removeObs:[]},gyneacologyData:{title:"Gyneacology",data:[...R(r.fA.GYNEACOLOGY_WARD)],removeObs:[]},medicalInpatientData:{title:"Medical Inpatient",data:[...R(r.fA.MEDICAL_IN_PATIENT)],removeObs:[]},onClickFilterButton:g})}),!S&&!A&&!y&&(0,i.jsxs)("div",{ref:C,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.TF,{}),(0,i.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,i.jsxs)("p",{style:{marginLeft:"10px"},children:["Report type: ",p]}),(0,i.jsx)("div",{style:{fontWeight:700,fontSize:"20px",textAlign:"center"},children:"Clinical Notes"})]})]}),(0,i.jsx)(L,{columns:2,data:O})]}),S&&(0,i.jsx)(ea.r,{ref:E,onPrintComplete:N,showPreview:!0}),A&&(0,i.jsx)(er.k,{ref:I,onPrintComplete:N,showPreview:!0}),y&&(0,i.jsx)(eo.I,{ref:w,onPrintComplete:N,showPreview:!0})]})};function es(e){let{children:t,value:n,index:r,...o}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...o,children:n===r&&(0,i.jsx)(x.default,{sx:{pt:1},children:t})})}let ed=()=>{let[e,t]=(0,s.useState)(0);return(0,i.jsxs)(x.default,{sx:{width:"100%",mt:2,pb:2},children:[(0,i.jsx)(x.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f4f4f4",borderRadius:"4px 4px 0 0",marginRight:"2px",borderBottom:"none"},children:(0,i.jsxs)(F.A,{value:e,onChange:(e,n)=>{t(n)},sx:{overflow:"scroll",width:"100%","& .MuiTabs-flexContainer":{justifyContent:"space-evenly",overflow:"scroll"}},children:[(0,i.jsx)(R.A,{label:"Monitoring Chart",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:0===e?"#DDEEDD":"#FFFFFF",fontWeight:0===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(R.A,{label:"Clinical Notes",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:1===e?"#DDEEDD":"#FFFFFF",fontWeight:1===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(R.A,{label:"Investigations",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:2===e?"#DDEEDD":"#FFFFFF",fontWeight:2===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(R.A,{label:"Medications",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:3===e?"#DDEEDD":"#FFFFFF",fontWeight:3===e?"bold":"normal",borderBottom:"none"}}),(0,i.jsx)(R.A,{label:"Results",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:4===e?"#DDEEDD":"#FFFFFF",fontWeight:4===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(R.A,{label:"Diagnosis",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:5===e?"#DDEEDD":"#FFFFFF",fontWeight:5===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}}),(0,i.jsx)(R.A,{label:"Visit History",sx:{flexGrow:1,textTransform:"none",padding:"12px",background:6===e?"#DDEEDD":"#FFFFFF",fontWeight:6===e?"bold":"normal",borderBottom:"none",marginRight:"2px",borderRight:"none","&:last-child":{borderRight:"1px solid #ccc"}}})]})}),(0,i.jsx)(es,{value:e,index:0,children:(0,i.jsx)(N.Cp,{})}),(0,i.jsx)(es,{value:e,index:1,children:(0,i.jsx)(el,{})}),(0,i.jsx)(es,{value:e,index:2,children:(0,i.jsx)(N.sK,{})}),(0,i.jsx)(es,{value:e,index:3,children:(0,i.jsx)(N.DQ,{})}),(0,i.jsx)(es,{value:e,index:4,children:(0,i.jsx)(N.nB,{})}),(0,i.jsx)(es,{value:e,index:5,children:(0,i.jsx)(_,{})}),(0,i.jsx)(es,{value:e,index:6,children:(0,i.jsx)(N.sJ,{})})]})};var ec=n(5387);function ep(){let{patientId:e}=(0,d.gd)(),{data:t}=(0,ec.iu)(e),[n,r]=(0,s.useState)([]),{visitDate:o,setVisitDates:a,setSelectedVisit:l}=(0,P.E)();return(0,s.useEffect)(()=>{if((null==t?void 0:t.length)>0){let s=[...t.map(e=>({visit_id:e.visit_id,date_started:e.date_started,uuid:e.uuid}))].sort((e,t)=>new Date(t.date_started).getTime()-new Date(e.date_started).getTime());if(r(s),null===o&&s.length>0){var e,n,i;a(null==(e=s[0])?void 0:e.date_started),l({id:null==(n=s[0])?void 0:n.visit_id,uuid:null==(i=s[0])?void 0:i.uuid})}}},[t,o]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:n.map(e=>(0,i.jsx)(g.A,{onClick:()=>{l({id:e.visit_id,uuid:e.uuid}),a(null==e?void 0:e.date_started)},size:"large",style:{width:"100%",backgroundColor:e.date_started===o?"#DDEEDD":"",marginBottom:"8px"},variant:"outlined",children:(e=>{let t=new Date(e),n=t.getDate(),i=t.toLocaleString("en-US",{month:"short"}),r=t.getFullYear(),o=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return"".concat(n," ").concat(i,", ").concat(r," (").concat(o,")")})(e.date_started)},e.visit_id))})})}let ex=()=>{let{hasActiveVisit:e,recentVisitCloseDateTime:t,isLoading:n,isSuccess:r}=(0,d.gd)(),[o,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{setTimeout(()=>{c(!0)},1e3)},[]),(0,i.jsxs)(P.VisitDatesProvider,{children:[o&&!1===e&&(0,i.jsx)(x.default,{sx:{width:"100%",backgroundColor:"#FF2400",textAlign:"center",color:"white",padding:"10px"},children:(0,i.jsxs)(m.default,{children:["This patient doesnt have an active visit."," ",t?"The most recent visit was closed on ".concat((0,z.rX)(t)):null," "]})}),(0,i.jsxs)(a.Yr,{container:!0,style:{justifyContent:"center",marginTop:"15px",gap:"15px",margin:"5px",width:"unset"},children:[(0,i.jsxs)(a.Yr,{item:!0,lg:2.2,sm:12,children:[(0,i.jsx)(l.XU,{}),(0,i.jsx)("br",{}),(0,i.jsx)(ep,{})]}),(0,i.jsxs)(a.Yr,{item:!0,lg:8.5,sm:12,style:{minWidth:"300px"},children:[(0,i.jsx)(w,{}),(0,i.jsx)(ed,{})]})]})]})},eg=(0,o.A)(function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ex,{})})},[r.Ot.CLINICIAN,r.Ot.ADMIN,r.Ot.NURSE,r.Ot.STUDENT_CLINICIAN])}},e=>{e.O(0,[9503,6172,16,9344,8250,2225,3740,8320,3349,9306,5263,7776,3497,2141,7861,2891,1412,4018,5068,6223,2619,2502,3002,4816,6360,7774,2478,4008,5832,9625,3890,7e3,5008,7285,6511,8371,1226,45,2906,8441,1255,7358],()=>e(e.s=44468)),_N_E=e.O()}]);