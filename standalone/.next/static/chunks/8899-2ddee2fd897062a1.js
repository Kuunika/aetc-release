(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8899],{28383:(e,t,i)=>{"use strict";i.d(t,{B:()=>c});var l=i(95155);i(12115);var a=i(72478),s=i(35068),n=i(51267),r=i(263);let d={firstName:{name:"firstName",label:"First Name"},phoneNumber:{name:"phoneNumber",label:"Phone Number"},lastName:{name:"lastName",label:"Last Name"},dob:{name:"birthDate",label:"Estimated Age"},gender:{name:"gender",label:"Gender"},homeDistrict:{name:"homeDistrict",label:"Home District"},nationality:{name:"nationality",label:"Nationality"},homeTraditionalAuthority:{name:"homeTraditionalAuthority",label:"Home Traditional Authority"},homeVillage:{name:"homeVillage",label:"Home Village"}},o=s.Ik().shape({[d.firstName.name]:s.Yj().required().label(d.firstName.label),[d.lastName.name]:s.Yj().required().label(d.lastName.label),[d.dob.name]:s.Yj().label(d.dob.label),[d.gender.name]:s.Yj().required().label(d.gender.label),[d.homeDistrict.name]:s.Yj().label(d.homeDistrict.label),[d.homeTraditionalAuthority.name]:s.Yj().label(d.homeTraditionalAuthority.label),[d.homeVillage.name]:s.Yj().label(d.homeVillage.label)}),u=(0,n.f6)(d),c=e=>{let{onSubmit:t,init:i,fullForm:s=!0}=e,n={display:"flex","& > :first-of-type":{mr:"5px"}};return(0,l.jsx)(a.PD,{validationSchema:o,initialValues:{...u,...i},onSubmit:t,submitButton:!1,enableReinitialize:!0,children:(0,l.jsxs)(a.jD,{children:[(0,l.jsxs)(a.jD,{sx:{...n,alignItems:"end",py:"1ch"},children:[(0,l.jsx)(a.A8,{sx:{width:"100%",my:0},name:d.firstName.name,id:d.firstName.name,size:"small",label:d.firstName.label}),(0,l.jsx)(a.A8,{sx:{width:"100%",my:0,mr:"5px"},name:d.lastName.name,id:d.lastName.name,size:"small",label:d.lastName.label}),(0,l.jsx)(a.el,{width:"100%",inputSx:{m:0},name:d.gender.name,label:d.gender.label,multiple:!1,size:"small",applyPadding:!1,options:[{label:"Male",id:"M"},{label:"Female",id:"F"}]})]}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.jD,{sx:{...n},children:[(0,l.jsx)(a.el,{width:"30%",name:d.gender.name,label:d.gender.label,multiple:!1,size:"small",options:[{label:"Male",id:"Male"},{label:"Female",id:"Female"}]}),(0,l.jsx)(a.A8,{sx:{width:"100%",my:0},name:d.dob.name,id:d.dob.name,size:"small",label:d.dob.label})]}),(0,l.jsxs)(a.jD,{display:"flex",children:[(0,l.jsx)(a.el,{sx:{mr:"0.5ch"},width:"45%",size:"small",name:d.homeDistrict.name,label:d.homeDistrict.label,multiple:!1,options:r.kJ.map(e=>({id:e.district_name,label:e.district_name}))}),(0,l.jsx)(a.el,{width:"100%",size:"small",name:d.homeTraditionalAuthority.name,label:d.homeTraditionalAuthority.label,multiple:!1,options:r.ZD})]}),(0,l.jsx)(a.jD,{children:(0,l.jsx)(a.el,{width:"100%",size:"small",name:d.homeVillage.name,label:d.homeVillage.label,multiple:!1,options:r.rJ})})]}),(0,l.jsx)(a.O6,{sx:{width:"100%",height:"5ch",borderRadius:"10px",mt:"1ch"},type:"submit",onClick:()=>{},title:"search"})]})})}},30722:function(e,t,i){e.exports=function(e,t){"use strict";let i=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],l=()=>{};return function(a){function s(t){let l={},a={},s=i.map(e=>e.key);return Object.entries(t).forEach(t=>{let[i,n]=t;s.includes(i)&&e.isValidElement(n)?(l[i]=n,a[i]=" "):a[i]=n}),[l,a]}function n(e,l){Object.entries(l).forEach(l=>{let[s,n]=l,r=i.find(e=>e.key===s).getter(a),d=t.createRoot(r);d.render(n),e.__roots.push(d)})}function r(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends a{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return a.argsToParams(t);{let e={};return["title","html","icon"].forEach((i,l)=>{void 0!==t[l]&&(e[i]=t[l])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[i,a]=s(this.__params),d=a.willOpen||l,o=a.didOpen||l,u=a.didDestroy||l;return super._main(Object.assign({},a,{willOpen:e=>{n(this,i),d(e)},didOpen:e=>{setTimeout(()=>{o(e)})},didDestroy:e=>{u(e),r(this)}}))}update(e){Object.assign(this.__params,e),r(this);let[t,i]=s(this.__params);super.update(i),n(this,t)}}}}(i(12115),i(12669))},36690:(e,t,i)=>{"use strict";i.d(t,{l:()=>m});var l=i(95155),a=i(12115),s=i(72478),n=i(68100),r=i(11074),d=i(15008),o=i(263),u=i(5387),c=i(93584);let m=e=>{let{patient:t,disabled:i}=e,[n,r]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),{mutate:g,isPending:y,isSuccess:S,data:N}=(0,u.Wv)(),[E,_]=(0,a.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[D,A]=(0,a.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[T,C]=(0,a.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""});(0,a.useEffect)(()=>{O(t),I(t),R(t)},[t]),(0,a.useEffect)(()=>{S&&N&&(O(N),R(N),I(N))},[N,S]);let O=e=>{e&&_({firstName:null==e?void 0:e.given_name,lastName:null==e?void 0:e.family_name,birthDate:null==e?void 0:e.birthdate,gender:null==e?void 0:e.gender,birthDateEstimated:!!(null==e?void 0:e.birthdateEstimated)})},R=e=>{var t,i,l,a,s,n,r,d;e&&A({nationality:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.country)?s:"",district:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.address1)?n:"",village:null!=(r=null==e||null==(l=e.addresses[0])?void 0:l.address2)?r:"",traditionalAuthority:null!=(d=null==e||null==(a=e.addresses[0])?void 0:a.county_district)?d:""})},I=e=>{var t,i,l,a,s,n,r,d;e&&C({district:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.current_district)?s:"",traditionalAuthority:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.current_traditional_authority)?n:"",village:null!=(r=null==e||null==(l=e.addresses[1])?void 0:l.address1)?r:"",closeLandMark:null!=(d=null==e||null==(a=e.addresses[1])?void 0:a.address2)?d:""})};return(0,l.jsx)(s.jD,{sx:{display:"flex",mt:"1ch"},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.OverlayLoader,{open:y}),(0,l.jsx)(b,{onSubmit:e=>{let i={identifiers:[{identifier:e.identificationNumber,identifierType:o.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}],names:[{givenName:e.firstName,familyName:e.lastName}],gender:e.gender,birthdateEstimated:e.birthdateEstimated,birthdate:e.birthDate};g({id:t.uuid,data:i}),r(!1)},initialValues:{...E},onClose:()=>r(!1),open:n}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:"Demographics"}),(0,l.jsx)(h,{label:"First Name",value:E.firstName}),(0,l.jsx)(h,{label:"Last Name",value:E.lastName}),(0,l.jsx)(h,{label:"Gender",value:E.gender}),(0,l.jsx)(h,{label:"Date of birth",value:E.birthDate})]}),(0,l.jsx)(s.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>r(!0)})]}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:"Home Location"}),(0,l.jsx)(h,{label:"Country",value:D.nationality}),(0,l.jsx)(h,{label:"Home District",value:D.district}),(0,l.jsx)(h,{label:"Home Traditional Authority",value:D.traditionalAuthority}),(0,l.jsx)(h,{label:"Home Village",value:D.village})]}),(0,l.jsx)(j,{onSubmit:e=>{let i=[{address1:e.district,address2:e.village,address3:T.district,stateProvince:T.traditionalAuthority,countyDistrict:e.traditionalAuthority,cityVillage:e.traditionalAuthority,country:e.nationality,preferred:!0},{address1:T.village,address2:T.closeLandMark,countryDistrict:T.district,cityVillage:T.traditionalAuthority,preferred:!1}];g({id:t.uuid,data:{addresses:i}}),m(!1)},initialValues:D,open:d,onClose:()=>m(!1)}),(0,l.jsx)(s.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>m(!0)})]}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:"Current Location"}),(0,l.jsx)(h,{label:"Current District",value:T.district}),(0,l.jsx)(h,{label:"Current Traditional Authority",value:T.traditionalAuthority}),(0,l.jsx)(h,{label:"Current Village",value:T.village}),(0,l.jsx)(h,{label:"Close Land Mark",value:T.closeLandMark})]}),(0,l.jsx)(v,{onSubmit:e=>{var i;let l=[{address1:D.district,address2:D.village,address3:e.district,stateProvince:e.traditionalAuthority,countyDistrict:D.traditionalAuthority,cityVillage:D.traditionalAuthority,country:D.nationality,preferred:!0},{address1:e.village,address2:null==t||null==(i=t.addresses[1])?void 0:i.address2,countryDistrict:e.district,cityVillage:e.traditionalAuthority,preferred:!1}];g({id:t.uuid,data:{addresses:l}}),p(!1)},onClose:()=>p(!1),initialValues:T,open:f}),(0,l.jsx)(s.O6,{variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>p(!0)})]})]})})},x=e=>{let{children:t}=e;return(0,l.jsx)(s.sc,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,mx:"0.5ch"},children:t})},h=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(s.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(s.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(s.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})},b=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Demographics",open:t,onClose:i,children:(0,l.jsx)(n.H,{onSubmit:s,initialValues:a})})},j=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Home Location",open:t,onClose:i,children:(0,l.jsx)(d.CB,{initialValues:a,onSubmit:s})})},v=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Current Location",open:t,onClose:i,children:(0,l.jsx)(d.CB,{currentLocation:!0,initialValues:a,onSubmit:s})})}},57430:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var l=i(15485),a=i(95155);let s=(0,l.A)((0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},68471:(e,t,i)=>{"use strict";i.d(t,{$:()=>X,Q:()=>Z});var l=i(95155),a=i(93584),s=i(98672),n=i(5387),r=i(55302),d=i(12115),o=i(28383),u=i(84712),c=i(72478);i(15239);var m=i(44287),x=i(87295),h=i(56164),b=i(36690),j=i(66637),v=i(98579),f=i(263),p=i(24507),g=i(25641),y=i(35068),S=i(12409);let N=y.Ik().shape({[f.W.REFERRED_FROM]:y.Yj().label("Referee Medical Facility"),[f.W.ADDITIONAL_NOTES]:y.Yj()}),E=e=>{let{onSubmit:t,submitButton:i=!0,setContext:a=e=>{}}=e,{data:s}=(0,x.WL)(),[n,r]=(0,d.useState)("yes"),[o,u]=(0,d.useState)("");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.PD,{validationSchema:N,initialValues:{[f.W.REFERRED_FROM]:"",[f.W.ADDITIONAL_NOTES]:"yes"},onSubmit:t,submitButtonText:"submit",submitButton:i,children:[(0,l.jsx)(m.Ji,{setFormContext:a}),(0,l.jsx)(S.uQ,{children:"Health Facilities"}),(0,l.jsx)(c.el,{label:"Referral Medical Facility",name:f.W.REFERRED_FROM,getValue:u,multiple:!1,disabled:"no"==n,options:s?s.map(e=>({id:e.facility_name,label:e.facility_name})):[]}),""==o&&(0,l.jsx)(c.b1,{name:f.W.ADDITIONAL_NOTES,getValue:e=>{r(e)},label:"Is the facility you are looking for available?",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]}),"no"==n&&(0,l.jsx)(c.A8,{name:f.W.REFERRED_FROM,label:"Other Facility",id:f.W.REFERRED_FROM})]})})};var _=i(57694),D=i(84507),A=i(15008),T=i(94706),C=i(51267),O=i(94049),R=i(25635),I=i(2300);let F=e=>{let{patient:t,open:i,onClose:a}=e,{navigateTo:s}=(0,x.cq)(),[n,r]=(0,d.useState)(0),[o,u]=(0,d.useState)({});return(0,l.jsx)(c.eV,{onClose:a,open:i,title:"Remote Patient",children:(0,l.jsx)(O.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,l.jsxs)(O.default,{sx:{width:{sm:"100%",lg:"40%"}},children:[0==n&&(0,l.jsx)(P,{patient:t,next:()=>r(1)}),1==n&&(0,l.jsx)(k,{setUpdatedPatient:u,person:t,next:()=>r(2)}),2==n&&(0,l.jsx)(W,{next:()=>r(3)}),3==n&&(0,l.jsx)(L,{next:()=>r(4)}),4==n&&(0,l.jsx)(M,{next:()=>r(5)}),5==n&&(0,l.jsx)(w,{next:()=>r(6)}),6==n&&(0,l.jsx)(V,{next:()=>r(7)}),7==n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.Yc,{firstName:o.given_name,lastName:o.family_name,addresses:(null==o?void 0:o.addresses)?null==o?void 0:o.addresses:[],identifiers:o.identifiers}),(0,l.jsx)("br",{}),(0,l.jsx)(c.O6,{title:"Register More",sx:{mr:"1px"},onClick:()=>s("/registration/list")}),(0,l.jsx)(c.O6,{title:"Home",onClick:()=>s("/dashboard")})]})]})})})},P=e=>{let{patient:t,next:i}=e,{params:a}=(0,x.KU)(),[s,r]=(0,d.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[o,u]=(0,d.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[m,h]=(0,d.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""}),{mutate:b,isPending:j,isSuccess:v,data:f}=(0,n.h1)();return(0,d.useEffect)(()=>{v&&i()},[v]),(0,d.useEffect)(()=>{(e=>{e&&r({firstName:null==e?void 0:e.given_name,lastName:null==e?void 0:e.family_name,birthDate:null==e?void 0:e.birthdate,gender:null==e?void 0:e.gender,birthDateEstimated:!!(null==e?void 0:e.birthdateEstimated)})})(t),(e=>{var t,i,l,a,s,n,r,d;e&&u({nationality:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.country)?s:"",district:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.address1)?n:"",village:null!=(r=null==e||null==(l=e.addresses[0])?void 0:l.address2)?r:"",traditionalAuthority:null!=(d=null==e||null==(a=e.addresses[0])?void 0:a.county_district)?d:""})})(t),(e=>{var t,i,l,a,s,n,r,d;e&&h({district:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.current_district)?s:"",traditionalAuthority:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.current_traditional_authority)?n:"",village:null!=(r=null==e||null==(l=e.addresses[1])?void 0:l.address1)?r:"",closeLandMark:null!=(d=null==e||null==(a=e.addresses[1])?void 0:a.address2)?d:""})})(t)},[t]),(0,l.jsxs)(O.default,{children:[(0,l.jsxs)(H,{children:[(0,l.jsx)(R.default,{variant:"h5",children:"Demographics"}),(0,l.jsx)("br",{}),(0,l.jsx)(U,{label:"First Name",value:s.firstName}),(0,l.jsx)(U,{label:"Last Name",value:s.lastName}),(0,l.jsx)(U,{label:"Gender",value:s.gender}),(0,l.jsx)(U,{label:"Date of birth",value:s.birthDate})]}),(0,l.jsxs)(H,{children:[(0,l.jsx)(R.default,{variant:"h5",children:"Home Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(U,{label:"Country",value:o.nationality}),(0,l.jsx)(U,{label:"Home District",value:o.district}),(0,l.jsx)(U,{label:"Home Traditional Authority",value:o.traditionalAuthority}),(0,l.jsx)(U,{label:"Home Village",value:o.village})]}),(0,l.jsxs)(H,{children:[(0,l.jsx)(R.default,{variant:"h5",children:"Current Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(U,{label:"Current District",value:m.district}),(0,l.jsx)(U,{label:"Current Traditional Authority",value:m.traditionalAuthority}),(0,l.jsx)(U,{label:"Current Village",value:m.village}),(0,l.jsx)(U,{label:"Close Land Mark",value:m.closeLandMark})]}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"Merge",onClick:()=>{b({primary:{patient_id:null==a?void 0:a.id},secondary:[{doc_id:t.uuid}]})}})]})},k=e=>{var t,i,s,r,o,u,m,h,b,j,v,p,g,y,S,N,E;let{next:_,person:D,setUpdatedPatient:T}=e,{mutate:C,isPending:O,isSuccess:I,data:F}=(0,n.Wv)(),{mutate:P,isPending:k,isSuccess:W,data:w}=(0,n.Wv)(),{params:V}=(0,x.KU)(),[L,M]=(0,d.useState)({}),[U,B]=(0,d.useState)({}),[G,Y]=(0,d.useState)(),[z,K]=(0,d.useState)(),[q,$]=(0,d.useState)(),[J,Q]=(0,d.useState)([]);(0,d.useEffect)(()=>{I&&_()},[I]),(0,d.useEffect)(()=>{0!=Object.keys(L).length&&0!=Object.keys(U).length&&(()=>{let e=[{address1:null==L?void 0:L.district,address2:null==L?void 0:L.village,address3:null==U?void 0:U.district,stateProvince:null==U?void 0:U.traditionalAuthority,countyDistrict:null==L?void 0:L.traditionalAuthority,cityVillage:null==L?void 0:L.traditionalAuthority,country:null==L?void 0:L.nationality,preferred:!0},{address1:null==U?void 0:U.village,address2:null==U?void 0:U.closeLandMark,countryDistrict:null==U?void 0:U.district,cityVillage:null==U?void 0:U.traditionalAuthority,preferred:!1}];P({id:null==V?void 0:V.id,data:{addresses:e}})})()},[L,U]),(0,d.useEffect)(()=>{W&&(T(null==w?void 0:w.patient),_())},[W]);let X=null==(t=D.identifiers.find(e=>{var t;return(null==e||null==(t=e.identifier_type)?void 0:t.uuid)==f.W.NATIONAL_ID_IDENTIFIER_TYPE}))?void 0:t.identifier;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.OverlayLoader,{open:O}),(0,l.jsxs)(H,{children:[(0,l.jsx)(R.default,{variant:"h5",children:"Edit Demographics"}),(0,l.jsx)("br",{}),(0,l.jsx)(A.H5,{setContext:Y,submitButton:!1,initialValues:{identificationNumber:X,firstName:D.given_name,lastName:D.family_name,gender:D.gender,birthDate:D.birthdate,birthdateEstimated:!1},onSubmit:e=>{(e=>{let t={identifiers:e.identificationNumber?[{identifier:e.identificationNumber,identifierType:f.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}]:[],names:[{givenName:e.firstName,familyName:e.lastName}],gender:e.gender,birthdateEstimated:e.birthdateEstimated,birthdate:e.birthDate};C({id:null==V?void 0:V.id,data:t})})(e)}})]}),(0,l.jsxs)(H,{children:[(0,l.jsx)(R.default,{variant:"h5",children:"Home Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(A.CB,{setContext:K,initialValues:{nationality:null!=(j=null==D||null==(i=D.addresses[0])?void 0:i.country)?j:"",district:null!=(v=null==D||null==(s=D.addresses[0])?void 0:s.address1)?v:"",village:null!=(p=null==D||null==(r=D.addresses[0])?void 0:r.address2)?p:"",traditionalAuthority:null!=(g=null==D||null==(o=D.addresses[0])?void 0:o.county_district)?g:""},onSubmit:M,submitButton:!1})]}),(0,l.jsxs)(H,{children:[(0,l.jsx)(R.default,{variant:"h5",children:"Current Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(A.CB,{currentLocation:!0,setContext:$,initialValues:{district:null!=(y=null==D||null==(u=D.addresses[0])?void 0:u.current_district)?y:"",traditionalAuthority:null!=(S=null==D||null==(m=D.addresses[0])?void 0:m.current_traditional_authority)?S:"",village:null!=(N=null==D||null==(h=D.addresses[1])?void 0:h.address1)?N:"",closeLandMark:null!=(E=null==D||null==(b=D.addresses[1])?void 0:b.address2)?E:""},onSubmit:B,submitButton:!1})]}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:a}=G,{submitForm:s,errors:n,isValid:r,touched:d,dirty:o}=z,{submitForm:u,errors:c,isValid:m,touched:x,dirty:h}=q;e(),s(),u()}})]})},W=e=>{let{next:t}=e,{ServerTime:i}=(0,g.useServerTime)(),{activeVisit:s}=(0,x.gd)(),{params:n}=(0,x.KU)(),{mutate:r,isSuccess:o,isPending:u,isError:m}=(0,j.Fs)(),[h,b]=(0,d.useState)();return(0,d.useEffect)(()=>{o&&t()},[o]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(H,{children:[(0,l.jsx)(a.OverlayLoader,{open:u}),(0,l.jsx)(A._T,{submitButton:!1,setContext:b,initialValues:{},onSubmit:e=>{let t=i.getServerTimeString();r({encounterType:f.fA.SOCIAL_HISTORY,visit:s,patient:n.id,encounterDatetime:t,obs:(0,C.gX)(e,t)})}})]}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:a}=h;e()}})]})},w=e=>{let{next:t}=e,{ServerTime:i}=(0,g.useServerTime)(),[a,s]=(0,d.useState)(),{params:n}=(0,x.KU)(),{activeVisit:r}=(0,x.gd)(),{mutate:o,isSuccess:u,isPending:m,isError:h}=(0,j.Fs)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(H,{children:(0,l.jsx)(E,{setContext:s,submitButton:!1,onSubmit:e=>{let t=i.getServerTimeString();o({encounterType:f.fA.REFERRAL,visit:r,patient:n.id,encounterDatetime:t,obs:(0,C.gX)(e,t)})}})}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:i,isValid:l,touched:s,dirty:n}=a;e(),t()}})]})},V=e=>{let{next:t}=e,{ServerTime:i}=(0,g.useServerTime)(),[a,s]=(0,d.useState)(),{params:n}=(0,x.KU)(),{activeVisit:r}=(0,x.gd)(),{mutate:o,isSuccess:u,isPending:m,isError:h}=(0,j.Fs)();return(0,d.useEffect)(()=>{u&&t()},[u]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(H,{children:(0,l.jsx)(A.OE,{initialValues:{},setContext:s,submitButton:!1,onSubmit:e=>{let t=i.getServerTimeString(),l=e[f.W.PAYMENT_OPTIONS].filter(e=>e.value).map(e=>({concept:f.W.PAYMENT_OPTIONS,value:e.key,obsDatetime:t}));o({encounterType:f.fA.FINANCING,visit:r,patient:n.id,encounterDatetime:t,obs:[...(0,C.gX)(e,t),...l]})}})}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:i,isValid:l,touched:s,dirty:n}=a;e(),t()}})]})},L=e=>{let{next:t}=e,{ServerTime:i}=(0,g.useServerTime)(),[a,s]=(0,d.useState)(),[n,o]=(0,d.useState)(""),{patient:u}=(0,x.gd)(),{mutate:m,isPending:h,isSuccess:b,data:j,isError:v}=(0,r.AU)(),{mutate:f,isPending:p,isSuccess:y,isError:S,data:N}=(0,r.bJ)();return(0,d.useEffect)(()=>{y&&(i.getServerTimeString(),m({patient:null==u?void 0:u.uuid,person:null==N?void 0:N.uuid,nextOfKinRelationship:n}))},[y]),(0,d.useEffect)(()=>{b&&t()},[b]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(H,{children:(0,l.jsx)(A.tc,{initialValues:{},setContext:s,submitButton:!1,onSubmit:e=>{f(e),o(e.relationship)}})}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:s}=a;e()}})]})},M=e=>{let{next:t}=e,{params:i}=(0,x.KU)(),[a,s]=(0,d.useState)(),{mutate:n,isPending:o,isSuccess:u,isError:m,data:h}=(0,r.bJ)(),{mutate:b,isPending:j,isSuccess:v,data:p,isError:g}=(0,r.AU)();return(0,d.useEffect)(()=>{u&&b({patient:null==i?void 0:i.id,person:null==h?void 0:h.uuid,nextOfKinRelationship:f.W.GUARDIAN})},[u]),(0,d.useEffect)(()=>{v&&t()},[v]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(H,{children:(0,l.jsx)(A.tc,{isGuardian:!0,initialValues:{given_name:"",family_name:"",relationship:f.W.GUARDIAN},setContext:s,submitButton:!1,onSubmit:e=>{console.log({values:e}),n({nextOfKinFirstName:e.given_name,nextOfKinLastName:e.family_name})}})}),(0,l.jsx)(c.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:s}=a;e(),console.log(t)}})]})},H=e=>{let{children:t}=e;return(0,l.jsx)(I.default,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,my:"1ch"},children:t})},U=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(O.default,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(R.default,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(R.default,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})};var B=i(91871),G=i(28548),Y=i(65494);let z=e=>{var t,i,a,n;let{searchedPatient:r,searchResults:o,genericSearch:u}=e,{navigateTo:m}=(0,x.cq)(),{params:h}=(0,x.KU)(),[b,j]=(0,d.useState)(!1),{setRegistrationType:v,setPatient:f,patient:p}=(0,d.useContext)(s.$0),[g,y]=(0,d.useState)(""),{setPatient:S}=(0,d.useContext)(s.$0),N=()=>{S(r),m("/registration/".concat(h.id,"/new"))},E=(e,t)=>{f(e),j(!0),y(t)},_=(null==o||null==(t=o.locals)?void 0:t.length)==0&&(null==o||null==(i=o.remotes)?void 0:i.length)==0;return(0,l.jsxs)(c.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(c.Th,{variant:"h5",children:"Search Results"}),_&&(0,l.jsxs)(c.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)("br",{}),(0,l.jsx)(c.Th,{variant:"body2",children:"No patient with similar demographics found"}),(0,l.jsx)("br",{}),!u&&(0,l.jsx)(c.O6,{sx:{mr:"0.2ch",borderRadius:"1px"},variant:"secondary",title:"add new record",onClick:N})]}),(0,l.jsx)("br",{}),!_&&(0,l.jsx)(c.jD,{sx:{width:"100%"},children:!u&&(0,l.jsx)(c.O6,{sx:{mr:"0.2ch",borderRadius:"1px"},variant:"secondary",title:"add new record",onClick:N})}),(0,l.jsx)("br",{}),(0,l.jsxs)(c.jD,{sx:{width:"100%",height:"50ch",overflow:"scroll"},children:[null==o||null==(a=o.locals)?void 0:a.map(e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(K,{genericSearch:u,setOpen:e=>!u&&E(e,"local"),type:"Local",person:e},null==e?void 0:e.uuid)})),null==o||null==(n=o.remotes)?void 0:n.map(e=>(0,l.jsx)(K,{genericSearch:u,setOpen:e=>!u&&E(e,"remote"),type:"Remote",person:e},null==e?void 0:e.uuid))]}),"local"==g&&(0,l.jsx)($,{type:g,patient:p||{},onClose:()=>j(!1),open:b}),"remote"==g&&(0,l.jsx)(F,{patient:p||{},onClose:()=>j(!1),open:b})]})},K=e=>{var t,i,a,s,n;let{person:r,type:o,setOpen:u,genericSearch:m}=e,[b,j]=(0,d.useState)(!1),{navigateTo:v}=(0,x.cq)();if((0,d.useEffect)(()=>{j(!!(null==r?void 0:r.active_visit))},[r]),!r)return(0,l.jsx)(l.Fragment,{});let f=null==r||null==(t=r.identifiers)?void 0:t.find(e=>{var t;return(null==e||null==(t=e.identifier_type)?void 0:t.name)=="National id"});return(0,l.jsxs)(c.sc,{onClick:()=>{b||u(r)},sx:{display:"flex",padding:2,width:"100%",my:1,cursor:"pointer"},children:[(0,l.jsxs)(c.jD,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",mr:1},children:[(0,l.jsx)(c.jD,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#F5F5F5"},children:(0,l.jsx)(c.Th,{color:c.zQ.primary,variant:"h1",children:(0,l.jsx)(h.x$1,{})})}),(0,l.jsx)("br",{}),"Local"==o&&m&&(0,l.jsx)(T.jx,{title:"Print Barcode",icon:(0,l.jsx)(R.default,{mr:"1ch",children:(0,l.jsx)(h.SCC,{})}),variant:"primary",uuid:null==r?void 0:r.uuid}),"Local"==o&&m&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(B.A,{onClick:()=>v("/patient/".concat(r.uuid,"/profile")),sx:{mb:"1ch"},variant:"text",children:"view profile"})}),b&&!m&&(0,l.jsx)(Y.R,{patientId:"",dialogTitle:"Close Patient Visit",dialogConfirmationMsg:"Are you sure you want to close this visit?",visitId:null==r||null==(i=r.active_visit)?void 0:i.uuid,buttonTitle:"Close Visit",onDelete:()=>j(!1)})]}),(0,l.jsxs)(c.jD,{children:[(0,l.jsxs)(c.jD,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)(c.Th,{variant:"h5",children:[null==r?void 0:r.given_name," ",null==r?void 0:r.family_name]}),(0,l.jsx)(c.Th,{children:o})]}),(0,l.jsxs)(c.jD,{sx:{display:"flex"},children:[(0,l.jsx)(c.Th,{color:"GrayText",sx:{mr:1},children:"NPID:"}),(0,l.jsx)(c.Th,{color:"GrayText",children:null==f?void 0:f.identifier})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(c.jD,{sx:{display:"flex",mb:1},children:[(0,l.jsx)(q,{label:"Date of birth",value:null==r?void 0:r.birthdate}),(0,l.jsx)(q,{label:"Gender",value:null==r?void 0:r.gender})]}),(0,l.jsxs)(c.jD,{sx:{display:"flex"},children:[(0,l.jsx)(q,{label:"Home district",value:r&&r.addresses&&(null==r||null==(a=r.addresses[0])?void 0:a.address1)}),(0,l.jsx)(q,{label:"Home traditional authority",value:r&&r.addresses&&(null==r||null==(s=r.addresses[0])?void 0:s.cityVillage)}),(0,l.jsx)(q,{label:"Home village",value:r&&r.addresses&&(null==r||null==(n=r.addresses[0])?void 0:n.address2)})]})]}),(0,l.jsx)(c.jD,{sx:{ml:"1ch"},children:b&&(0,l.jsx)(G.A,{color:"success",label:"Visit"})})]})},q=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(c.jD,{sx:{display:"flex",flexDirection:"column",mr:1},children:[(0,l.jsx)(c.Th,{variant:"subtitle2",color:"#C0C0C0",sx:{mr:.5},children:t}),(0,l.jsx)(c.Th,{variant:"subtitle2",color:"#585858",children:i?i.toString():""})]})},$=e=>{let{patient:t,onClose:i,open:s,type:r="remote"}=e,[o,u]=(0,d.useState)(r),{params:m}=(0,x.KU)(),{ServerTime:h}=(0,g.useServerTime)(),{data:y}=(0,j.$O)(null==m?void 0:m.id),{data:S,isPending:N}=(0,j.$O)(null==t?void 0:t.uuid),{mutate:E,isSuccess:_}=(0,v.FD)(),{data:A,isPending:T}=(0,n.B$)(null==t?void 0:t.uuid),[C,O]=(0,d.useState)({}),[R,I]=(0,d.useState)(""),[F,P]=(0,d.useState)(!1),[k,W]=(0,d.useState)(!1),{mutateAsync:w,isPending:V,isSuccess:L,isError:M}=(0,j.jM)(),{mutateAsync:H,isPending:U,isSuccess:B,isError:G}=(0,j.jM)(),{mutateAsync:Y,isPending:z,isSuccess:K,isError:q}=(0,j.jM)(),{mutateAsync:$,isPending:X,isSuccess:Z,isError:ee,data:et}=(0,n.h1)(),{mutateAsync:ei,isPending:el,isSuccess:ea,isError:es,data:en}=(0,n.h1)(),[er,ed]=(0,d.useState)({}),[eo,eu]=(0,d.useState)({}),[ec,em]=(0,d.useState)({[f.W.REFERRED_FROM]:""});(0,d.useEffect)(()=>{O(t)},[t]),(0,d.useEffect)(()=>{ea&&u("")},[ea]),(0,d.useEffect)(()=>{let e=null==y?void 0:y.find(e=>e.encounter_type.uuid==f.fA.SCREENING_ENCOUNTER);I((0,p.m)(null==e?void 0:e.obs,f.W.IS_PATIENT_REFERRED))},[y]),(0,d.useEffect)(()=>{K&&W(!0)},[K]);let ex=async()=>{var e,i,l,a,s;let n=null==t?void 0:t.uuid,r=null==m?void 0:m.id,d=await $({primary:{patient_id:n},secondary:[{patient_id:r}]});await w({encounterType:f.fA.SOCIAL_HISTORY,visit:null==d||null==(e=d.active_visit)?void 0:e.uuid,patient:null==d?void 0:d.uuid,encounterDatetime:h.getServerTimeString(),obs:null==er||null==(i=er.obs)?void 0:i.map(e=>({concept:e.names[0].uuid,value:e.value,obsDatetime:h.getServerTimeString()}))}),await Y({encounterType:f.fA.REFERRAL,visit:null==d||null==(l=d.active_visit)?void 0:l.uuid,patient:null==d?void 0:d.uuid,encounterDatetime:h.getServerTimeString(),obs:[{concept:f.W.REFERRED_FROM,value:ec[f.W.REFERRED_FROM],obsDatetime:h.getServerTimeString()}]}),await H({encounterType:f.fA.FINANCING,visit:null==d||null==(a=d.active_visit)?void 0:a.uuid,patient:null==d?void 0:d.uuid,encounterDatetime:h.getServerTimeString(),obs:null==eo||null==(s=eo.obs)?void 0:s.map(e=>({concept:e.names[0].uuid,value:e.value,obsDatetime:h.getServerTimeString()}))})};(0,d.useEffect)(()=>{let e=null==S?void 0:S.find(e=>e.encounter_type.uuid==f.fA.FINANCING),t=null==S?void 0:S.find(e=>e.encounter_type.uuid==f.fA.SOCIAL_HISTORY);t&&ed(t),e&&eu(e)},[S]);let eh=async e=>{await em(e),await ex(),P(!1)};return(0,l.jsxs)(c.eV,{sx:{backgroundColor:"#F6F6F6"},onClose:i,open:s,title:"view patient",children:[(0,l.jsx)(a.OverlayLoader,{open:X||z||U||V||el}),(0,l.jsx)(Q,{open:k}),(0,l.jsx)(c.Th,{variant:"h4",children:"".concat(t.given_name," ").concat(t.family_name)}),(0,l.jsx)("br",{}),(0,l.jsx)(c.O6,{title:"Continue with Patient",onClick:()=>{if(R==f.W.YES)return void P(!0);ex()}}),"remote"==o&&(0,l.jsx)(c.O6,{sx:{mx:"1px"},title:"Merge Patient",onClick:()=>{let e=null==t?void 0:t.uuid;ei({primary:{patient_id:C.uuid},secondary:[{doc_id:e}]})}}),(0,l.jsx)(J,{open:F,onClose:()=>P(!1),onSubmit:eh}),(0,l.jsx)("br",{}),(0,l.jsx)(b.l,{disabled:"remote"==o,patient:t}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(D.vY,{disabled:"remote"==o,patientId:null==t?void 0:t.uuid,loading:T,relationships:A||[]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)(c.jD,{display:"flex",children:[(0,l.jsx)(D.oC,{disabled:"remote"==o,onSubmit:e=>{ed({obs:Object.keys(e).map(t=>({names:[{uuid:t}],concept:t,value:e[t],obsDatetime:h.getServerTimeString()}))})},loading:N,socialHistory:er||{}}),(0,l.jsx)(D.c4,{disabled:"remote"==o,onSubmit:e=>{var t;let i=null==(t=e[f.W.PAYMENT_OPTIONS].filter(e=>e.value)[0])?void 0:t.key;e[f.W.PAYMENT_OPTIONS]=i;let l=JSON.parse(JSON.stringify(eo)),a={"c7bcc8bd-09d5-4f98-8d58-5179f749fd99":f.W.PAYMENT_OPTIONS,"b0ffce26-2d25-449e-871e-c702e44bb37e":f.W.INSURANCE_PROVIDER,"98b08fb2-f877-45b6-a95a-db89dffefb27":f.W.INSURANCE_NUMBER,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1":f.W.INSURANCE_SCHEME,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8":f.W.INSURANCE_STATUS},s=l.obs.map(t=>{let i=e[a[t.names[0].uuid]];return{...t,value:i}});l.obs=s,eu(l)},loading:N,financing:eo||{}})]})]})},J=e=>{let{open:t,onClose:i,onSubmit:a}=e;return(0,l.jsx)(c.eV,{maxWidth:"sm",title:"Add Referral",open:t,onClose:i,children:(0,l.jsx)(E,{onSubmit:a})})},Q=e=>{let{open:t}=e,{navigateTo:i}=(0,x.cq)();return(0,l.jsx)(c.eV,{open:t,maxWidth:"sm",title:"",onClose:()=>{},children:(0,l.jsx)(_.n,{title:"Process Completed Successfully",primaryActionText:"Register More",secondaryActionText:"Go Home",onPrimaryAction:()=>{i("/registration/list")},onSecondaryAction:()=>{i("/dashboard")}})})},X=e=>{let{patient:t,genericSearch:i=!1}=e,{setSearchedPatient:r}=(0,d.useContext)(s.$0),[u,c]=(0,d.useState)({firstName:"",lastName:"",gender:""}),{refetch:m,isFetching:x,isSuccess:h,data:b,isError:j}=(0,n.L3)(u.firstName,u.lastName,u.gender),[v,f]=(0,d.useState)({});return(0,d.useEffect)(()=>{u.firstName&&m()},[u]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.B,{init:{firstName:null==t?void 0:t.given_name,lastName:null==t?void 0:t.family_name},onSubmit:e=>{f(e),c({firstName:e.firstName,lastName:e.lastName,gender:e.gender}),r({patient_id:t.patient_id,firstName:e.firstName,lastName:e.lastName,gender:e.gender})},fullForm:!1}),(0,l.jsx)("br",{}),(0,l.jsx)(a.OverlayLoader,{open:x}),(h||j)&&(0,l.jsx)(z,{genericSearch:i,searchResults:(e=>{var t;let i=null==e||null==(t=e.remotes)?void 0:t.map(e=>{var t,i;return{...e.person,identifiers:e.identifiers,patient_id:null==(t=e.identifiers[0])?void 0:t.identifier,given_name:e.person.names[0].given_name,family_name:e.person.names[0].family_name,addresses:e.addresses,uuid:null==(i=e.identifiers[1])?void 0:i.identifier}});return e?{remotes:i,locals:e.locals}:{remotes:[],locals:[]}})(b),searchedPatient:v})]})},Z=e=>{let{genericSearch:t=!0}=e,[i,s]=(0,d.useState)(""),{refetch:n,isFetching:o,isSuccess:c,data:m,isError:x}=(0,r.Ov)(i);return(0,d.useEffect)(()=>{i&&n()},[i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.OverlayLoader,{open:o}),(0,l.jsx)(u.c,{onSubmit:e=>s(e.npid)}),(c||x)&&(0,l.jsx)(z,{genericSearch:t,searchResults:m||{remotes:[],locals:[]},searchedPatient:m})]})}},84507:(e,t,i)=>{"use strict";i.d(t,{c4:()=>x,vY:()=>h,oC:()=>m});var l=i(95155),a=i(5387),s=i(72478),n=i(12115),r=i(263),d=i(24507),o=i(15008),u=i(4474),c=i(55302);let m=e=>{let{socialHistory:t,loading:i,onSubmit:a,disabled:o}=e,[c,m]=(0,n.useState)(!1),x=(0,d.m)(null==t?void 0:t.obs,r.W.MARITAL_STATUS),h=(0,d.m)(null==t?void 0:t.obs,r.W.RELIGION),f=(0,d.m)(null==t?void 0:t.obs,r.W.OCCUPATION),p=(0,d.m)(null==t?void 0:t.obs,r.W.METHOD_OF_TRANSPORTATION),g=(0,d.m)(null==t?void 0:t.obs,r.W.HIGHEST_EDUCATION);return i?(0,l.jsx)(s.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})}):(0,l.jsxs)(b,{children:[(0,l.jsx)(v,{onSubmit:e=>{a(e),m(!1)},initialValues:{[r.W.MARITAL_STATUS]:x,[r.W.RELIGION]:h,[r.W.OCCUPATION]:f,[r.W.METHOD_OF_TRANSPORTATION]:p,[r.W.HIGHEST_EDUCATION]:g},open:c,onClose:()=>m(!1)}),(0,l.jsx)(s.Th,{variant:"h5",children:"Social History"}),(0,l.jsx)(j,{label:"Marital Status",value:x}),(0,l.jsx)(j,{label:"Religion",value:h}),(0,l.jsx)(j,{label:"Occupation",value:f}),(0,l.jsx)(j,{label:"Transportation",value:p}),(0,l.jsx)(j,{label:"Highest Education",value:g}),(0,l.jsx)(s.O6,{disabled:o,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>m(!0)})]})},x=e=>{let{financing:t,loading:i,onSubmit:a,disabled:o}=e,[c,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)({paymentOptions:"",insuranceProvider:"",insuranceNumber:"",insuranceScheme:"",insuranceStatus:""});if((0,n.useEffect)(()=>{let e=(0,d.m)(null==t?void 0:t.obs,"c7bcc8bd-09d5-4f98-8d58-5179f749fd99"),i=(0,d.m)(null==t?void 0:t.obs,"b0ffce26-2d25-449e-871e-c702e44bb37e"),l=(0,d.m)(null==t?void 0:t.obs,"98b08fb2-f877-45b6-a95a-db89dffefb27");h({paymentOptions:e,insuranceProvider:i,insuranceNumber:l,insuranceScheme:(0,d.m)(null==t?void 0:t.obs,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1"),insuranceStatus:(0,d.m)(null==t?void 0:t.obs,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8")})},[t]),i)return(0,l.jsx)(s.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})});let{paymentOptions:v,insuranceProvider:p,insuranceNumber:g,insuranceScheme:y,insuranceStatus:S}=x;return(0,l.jsxs)(b,{children:[(0,l.jsx)(f,{onSubmit:e=>{a(e),m(!1)},initialValues:{[r.W.PAYMENT_OPTIONS]:[v],[r.W.INSURANCE_PROVIDER]:p,[r.W.INSURANCE_NUMBER]:g,[r.W.INSURANCE_STATUS]:S,[r.W.INSURANCE_SCHEME]:y},open:c,onClose:()=>m(!1)}),(0,l.jsx)(s.Th,{variant:"h5",children:"Financing"}),(0,l.jsx)(j,{label:"Payment Option",value:v}),(0,l.jsx)(j,{label:"Insurance Provider",value:p}),(0,l.jsx)(j,{label:"Insurance Number",value:g}),(0,l.jsx)(j,{label:"Insurance Scheme",value:y}),(0,l.jsx)(j,{label:"Insurance Status",value:S}),(0,l.jsx)(s.O6,{disabled:o,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>m(!0)})]})},h=e=>{let{patientId:t,disabled:i}=e,{data:d,isPending:o,refetch:m}=(0,a.B$)(t),[x,h]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),{data:g,isPending:y}=(0,a.vi)(),[S,N]=(0,n.useState)({}),[E,_]=(0,n.useState)(""),{mutate:D,isPending:A,isSuccess:T,isError:C,data:O}=(0,c.bJ)(),{mutateAsync:R,isSuccess:I,data:F}=(0,a.Wv)(),{mutate:P,isPending:k,isSuccess:W,data:w,isError:V}=(0,c.AU)(),[L,M]=(0,n.useState)(!0),[H,U]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{T&&O&&P({patient:t,person:null==O?void 0:O.uuid,nextOfKinRelationship:E})},[T]),(0,n.useEffect)(()=>{W&&(m(),f(!1),M(!0),U(!1))},[W]),o||y||A||k)return(0,l.jsx)(s.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})});let B=null==d?void 0:d.map(e=>{let t=e.relationship,i=null==g?void 0:g.find(e=>e.relationship_type_id==t),l=null==g?void 0:g.find(e=>e.a_is_to_b==(null==i?void 0:i.b_is_to_a));return{given_name:e.person_b.names[0].given_name,family_name:e.person_b.names[0].family_name,relationship:null==i?void 0:i.b_is_to_a,relationshipUUID:null==l?void 0:l.uuid,person:e.person_b.uuid}}),G=e=>{_(e.relationship),D({nextOfKinFirstName:e.given_name,nextOfKinLastName:e.family_name})},Y=async e=>{let t={identifiers:[],names:[{givenName:e.given_name,familyName:e.family_name}]};await R({id:e.person,data:t}),m(),h(!1),M(!0),U(!1)};return(0,l.jsxs)(s.jD,{sx:{display:"flex",width:(null==B?void 0:B.length)==1?"50%":"100%"},children:[(0,l.jsx)(p,{onSubmit:L?Y:G,initialValues:{...S,...H?{relationship:r.W.GUARDIAN}:{}},open:x,isGuardian:H,onClose:()=>{h(!1),M(!0),U(!1)}}),(0,l.jsx)(p,{onSubmit:L?Y:G,isGuardian:!0,initialValues:{relationship:r.W.GUARDIAN},open:v,onClose:()=>{f(!1),M(!0),U(!1)}}),null==B?void 0:B.map(e=>{var t;return(0,l.jsxs)(b,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:(null==(t=e.relationship)?void 0:t.toLowerCase())=="guardian"?"Guardian Information":"Next Of Kin Information"}),(0,l.jsx)(j,{label:"First Name",value:e.given_name}),(0,l.jsx)(j,{label:"Last Name",value:e.family_name}),(0,l.jsx)(j,{label:"Relationship",value:e.relationship}),(0,l.jsx)(s.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>{var t;h(!0),(null==(t=e.relationship)?void 0:t.toLowerCase())=="guardian"&&U(!0),N({...e,relationship:e.relationshipUUID})}})]})}),(0,l.jsxs)(l.Fragment,{children:[(null==B?void 0:B.length)==0&&(0,l.jsx)(s.O6,{sx:{alignSelf:"flex-start",mr:"1px"},title:"Add Next Of Kin",onClick:()=>{M(!1),h(!0)}}),((null==B?void 0:B.length)==1||(null==B?void 0:B.length)==0)&&(0,l.jsx)(s.O6,{disabled:i,sx:{alignSelf:"flex-start"},title:"Add Guardian",onClick:()=>{M(!1),f(!0)}})]})]})},b=e=>{let{children:t}=e;return(0,l.jsx)(s.sc,{sx:{p:"1ch",flex:1,mx:"0.5ch"},children:t})},j=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(s.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(s.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(s.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})},v=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(s.eV,{maxWidth:"sm",title:"Edit Social History",open:t,onClose:i,children:(0,l.jsx)(o._T,{initialValues:a,onSubmit:n})})},f=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(s.eV,{maxWidth:"sm",title:"Edit Financing",open:t,onClose:i,children:(0,l.jsx)(o.OE,{initialValues:a,onSubmit:n})})},p=e=>{let{open:t,onClose:i,initialValues:a,isGuardian:n,onSubmit:r}=e;return(0,l.jsx)(s.eV,{maxWidth:"sm",title:"Edit Relationships",open:t,onClose:i,children:(0,l.jsx)(o.tc,{isGuardian:n,initialValues:a,onSubmit:r})})}},84712:(e,t,i)=>{"use strict";i.d(t,{c:()=>u});var l=i(95155);i(12115);var a=i(72478),s=i(35068),n=i(51267);let r={npid:{name:"npid",label:"NPID"}},d=s.Ik().shape({[r.npid.name]:s.Yj().required().label(r.npid.label)}),o=(0,n.f6)(r),u=e=>{let{onSubmit:t,init:i}=e;return(0,l.jsx)(a.PD,{validationSchema:d,initialValues:{...o,...i},onSubmit:t,submitButton:!1,children:(0,l.jsxs)(a.jD,{children:[(0,l.jsx)(a.A8,{sx:{width:"100%",my:0},name:r.npid.name,id:r.npid.name,size:"small",label:r.npid.label}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(a.O6,{sx:{width:"100%",height:"5ch",borderRadius:"10px"},type:"submit",onClick:()=>{},title:"search"})]})})}},88842:(e,t,i)=>{"use strict";i.d(t,{g:()=>u});var l=i(95155),a=i(12115),s=i(43676),n=i(26466),r=i(94049);function d(e){let{children:t,value:i,index:a,...s}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:i!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),...s,children:i===a&&(0,l.jsx)(r.default,{children:t})})}function o(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function u(e){let{demographics:t,npid:i}=e,[u,c]=a.useState(0);return(0,l.jsxs)(r.default,{sx:{width:"100%"},children:[(0,l.jsx)(r.default,{children:(0,l.jsxs)(s.A,{value:u,onChange:(e,t)=>{c(t)},"aria-label":"basic tabs example",centered:!0,children:[(0,l.jsx)(n.A,{label:"Demographics",...o(0)}),(0,l.jsx)(n.A,{label:"NPID",...o(1)})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(d,{value:u,index:0,children:t}),(0,l.jsx)(d,{value:u,index:1,children:i})]})}},98624:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});var l=i(95155),a=i(87295),s=i(72478),n=i(56164);let r=e=>{let{title:t,link:i}=e,{navigateTo:r}=(0,a.cq)(),d={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,l.jsxs)(s.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,l.jsxs)(s.jD,{onClick:()=>r(i),sx:{display:"flex",cursor:"pointer"},children:[(0,l.jsx)(s.Th,{children:(0,l.jsx)(n.oWm,{})}),(0,l.jsx)(s.Th,{sx:d,children:"Go back"})]}),(0,l.jsx)(s.Th,{sx:d,children:t}),(0,l.jsxs)(s.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(n.M4e,{}),(0,l.jsx)(s.Th,{sx:d,children:"Need any help?"})]})]})}}}]);