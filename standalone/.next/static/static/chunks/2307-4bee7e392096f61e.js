"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2307],{9990:(e,a,r)=>{r.d(a,{O:()=>n});var l=r(93292),t=r(22454);let n=()=>(0,t.I)({queryKey:["roles"],queryFn:()=>(0,l.UK)("/roles?paginate=false").then(e=>e.data),enabled:!0})},41186:(e,a,r)=>{r.d(a,{A:()=>m});var l=r(95155),t=r(93584),n=r(87295),s=r(12115),o=r(75855),i=r(72478),d=r(15239),u=r(9877);function m(e,a){return function(r){let[i,d]=(0,s.useState)(!1),{navigateTo:m}=(0,n.cq)();(0,s.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let a=parseInt(e);if(Math.floor((new Date().getTime()-a)%36e5/6e4)>60){d(!1),m("/"),localStorage.clear();return}}d(!0)}else d(!1),localStorage.clear(),m("/")},[]);let f=(0,o.R)(a,(0,u.O)());return i?f?(0,l.jsx)(e,{...r}):(0,l.jsx)(c,{}):(0,l.jsx)(t.OverlayLoader,{open:!i})}}let c=()=>(0,l.jsx)(i.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,l.jsx)(d.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},45910:(e,a,r)=>{r.d(a,{CF:()=>o,J$:()=>i,ec:()=>u,gw:()=>d,nu:()=>s});var l=r(51472),t=r(80549),n=r(22454);let s=()=>(0,t.n)({mutationFn:e=>{let a=e.role.map(e=>({name:e.id})),r={username:e.userName,password:e.password,person:{gender:"Male",age:47,birthdate:"1970-01-01T00:00:00.000+0100",birthdateEstimated:!1,dead:!1,deathDate:null,causeOfDeath:null,names:[{givenName:e.firstName,familyName:e.lastName}]},roles:a};return(0,l.kg)(r).then(e=>e.data)}}),o=()=>(0,n.I)({queryKey:["users"],queryFn:()=>(0,l.lo)().then(e=>e.data),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),i=e=>(0,n.I)({queryKey:["search",e],queryFn:()=>(0,l.OV)(e).then(e=>e.data),enabled:!1}),d=()=>(0,t.n)({mutationFn:e=>{let a={username:e.userName,roles:e.role.map(e=>({name:e.label})),password:e.password};return(0,l.TK)(e.userId,a).then(e=>e.data)}}),u=()=>(0,t.n)({mutationFn:e=>{let a={user:{current_password:e.password,password:e.newPassword}};return(0,l.f3)(e.userId,a).then(e=>e.data)}})},51472:(e,a,r)=>{r.d(a,{OV:()=>o,TK:()=>d,f3:()=>u,kg:()=>n,kl:()=>i,lo:()=>s});var l=r(93292);let t="/users",n=e=>(0,l.vt)(e,t),s=()=>(0,l.UK)("".concat(t,"?paginate=false")),o=e=>(0,l.UK)(t+"?paginate=false&username="+e),i=e=>(0,l.HD)(e,t),d=(e,a)=>(0,l.hc)(e,a,t),u=(e,a)=>(0,l.yo)(e,t,a)},63262:(e,a,r)=>{r.d(a,{q:()=>M,H:()=>w});var l=r(95155),t=r(87295),n=r(45910),s=r(94049),o=r(4474),i=r(9562),d=r(33077),u=r(29767),m=r(84578),c=r(73741),f=r(25635),p=r(80777),h=r(28548),x=r(1151),g=r(87647),v=r(12115);let b=(0,r(15485).A)((0,l.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var y=r(14915);let j=e=>{let a=0;for(let r=0;r<e.length;r++)a=e.charCodeAt(r)+((a<<5)-a);let r=a%360;return"hsl(".concat(r,", 70%, 80%)")},w=()=>{let{navigateTo:e}=(0,t.cq)(),{data:a,isLoading:r}=(0,n.CF)(),[w,A]=(0,v.useState)(""),[C,N]=(0,v.useState)(1),k=(0,v.useMemo)(()=>a?a.filter(e=>{var a,r,l,t,n;let s="".concat(null==e||null==(r=e.person)||null==(a=r.names[0])?void 0:a.given_name," ").concat(null==e||null==(t=e.person)||null==(l=t.names[0])?void 0:l.family_name).toLowerCase();return(null==e||null==(n=e.username)?void 0:n.toLowerCase().includes(w.toLowerCase()))||s.includes(w.toLowerCase())}):[],[a,w]),S=Math.ceil(k.length/8),R=k.slice((C-1)*8,8*C);return r?(0,l.jsx)(s.default,{display:"flex",justifyContent:"center",mt:4,children:(0,l.jsx)(o.A,{})}):(0,l.jsxs)(s.default,{children:[(0,l.jsx)(s.default,{mb:2,display:"flex",justifyContent:"space-between",children:(0,l.jsx)(i.A,{size:"small",placeholder:"Search user...",value:w,onChange:e=>{N(1),A(e.target.value)},sx:{width:"300px"}})}),(0,l.jsx)(d.default,{container:!0,spacing:2,children:R.map(a=>{var r,t,n,o,i;let g=null==a?void 0:a.uuid,v=(null==a||null==(r=a.user_roles)?void 0:r.map(e=>{var a;return null==e||null==(a=e.role)?void 0:a.role}).filter(Boolean))||[],w=(null==a||null==(n=a.person)||null==(t=n.names[0])?void 0:t.given_name)||"",A=(null==a||null==(i=a.person)||null==(o=i.names[0])?void 0:o.family_name)||"",C=(null==a?void 0:a.username)||"User";return(0,l.jsx)(d.default,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,l.jsxs)(u.A,{sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)(m.A,{sx:{flexGrow:1},children:[(0,l.jsxs)(s.default,{display:"flex",alignItems:"center",mb:1,children:[(0,l.jsx)(c.A,{sx:{bgcolor:j(C),mr:2},children:C.charAt(0).toUpperCase()}),(0,l.jsx)(f.default,{variant:"h6",fontWeight:600,children:C})]}),(0,l.jsxs)(f.default,{variant:"body2",color:"text.secondary",children:[w," ",A]}),(0,l.jsx)(p.A,{direction:"row",spacing:1,flexWrap:"wrap",mt:1,children:v.length>0?v.map((e,a)=>(0,l.jsx)(h.A,{label:e,size:"small",sx:{backgroundColor:j(e),fontSize:"12px"}},a)):(0,l.jsx)(f.default,{variant:"body2",color:"text.secondary",children:"â€” No roles"})})]}),(0,l.jsxs)(s.default,{sx:{display:"flex",justifyContent:"flex-end",gap:1,p:1},children:[(0,l.jsx)(x.default,{color:"primary",size:"small",onClick:()=>{},children:(0,l.jsx)(b,{fontSize:"small"})}),(0,l.jsx)(x.default,{color:"secondary",size:"small",onClick:()=>e("config/users/".concat(g)),children:(0,l.jsx)(y.A,{fontSize:"small"})})]})]})},g)})}),S>1&&(0,l.jsx)(s.default,{display:"flex",justifyContent:"center",mt:3,children:(0,l.jsx)(g.A,{count:S,page:C,onChange:(e,a)=>N(a),color:"primary"})})]})};var A=r(9990),C=r(72478),N=r(35068),k=r(91871);let S={userName:{name:"userName",label:"Username"},firstName:{name:"firstName",label:"First Name"},lastName:{name:"lastName",label:"Last Name"},password:{name:"password",label:"Password"},passwordConfirmation:{name:"passwordConfirmation",label:"Password Confirmation"},role:{name:"role",label:"Roles"}},R=N.Ik({[S.userName.name]:N.Yj().required().label(S.userName.label),[S.firstName.name]:N.Yj().required().label(S.firstName.label),[S.lastName.name]:N.Yj().required().label(S.lastName.label),[S.password.name]:N.Yj().required().label(S.password.label),[S.role.name]:N.YO().required().label(S.role.label),[S.passwordConfirmation.name]:N.Yj().required().oneOf([N.KR(S.password.name)],"Passwords must match").label(S.passwordConfirmation.label)}),M=e=>{let{initialValues:a,onSubmit:r}=e,{isLoading:t,data:s}=(0,A.O)(),[o,i]=(0,v.useState)(""),{refetch:d,data:u,isFetching:m}=(0,n.J$)(o);(0,v.useEffect)(()=>{o&&d()},[o]);let c=(null==u?void 0:u.length)==0?"username is available":"username already taken";return(0,l.jsxs)(C.PD,{initialValues:a,validationSchema:R,onSubmit:r,submitButton:!1,children:[(0,l.jsx)(C.A8,{name:S.userName.name,label:S.userName.label,id:S.userName.name,sx:{width:"100%"},getValue:e=>i(e)}),m&&(0,l.jsx)(q,{}),(null==o?void 0:o.length)>0&&!m&&(0,l.jsx)(f.default,{fontWeight:600,variant:"body1",my:"1ch",children:c}),(0,l.jsxs)(C.jD,{sx:{display:"flex"},children:[(0,l.jsx)(C.A8,{name:S.password.name,label:S.password.label,id:S.password.name,type:"password",sx:{width:"100%",mr:"1ch"}}),(0,l.jsx)(C.A8,{name:S.passwordConfirmation.name,label:S.passwordConfirmation.label,id:S.passwordConfirmation.name,type:"password",sx:{width:"100%"}})]}),(0,l.jsxs)(C.jD,{sx:{display:"flex"},children:[(0,l.jsx)(C.A8,{name:S.firstName.name,label:S.firstName.label,id:S.firstName.name,sx:{width:"100%",mr:"1ch"}}),(0,l.jsx)(C.A8,{name:S.lastName.name,label:S.lastName.label,id:S.lastName.name,sx:{width:"100%"}})]}),(0,l.jsx)(C.el,{label:"Roles",name:S.role.name,options:s?s.map(e=>({id:e.role,label:e.role})):[]}),(0,l.jsx)(k.A,{variant:"contained",disabled:u&&(null==u?void 0:u.length)>0,type:"submit",children:"Submit"})]})};function q(){return(0,l.jsx)(s.default,{sx:{display:"flex"},children:(0,l.jsx)(o.A,{})})}},73741:(e,a,r)=>{r.d(a,{A:()=>b});var l=r(12115),t=r(2821),n=r(57001),s=r(48116),o=r(66964),i=r(16625),d=r(15485),u=r(95155);let m=(0,d.A)((0,u.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var c=r(85795),f=r(95195);function p(e){return(0,f.Ay)("MuiAvatar",e)}(0,c.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var h=r(77765);let x=(0,s.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,a)=>{let{ownerState:r}=e;return[a.root,a[r.variant],r.colorDefault&&a.colorDefault]}})((0,o.A)(e=>{let{theme:a}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(a.vars||a).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(a.vars||a).palette.background.default,...a.vars?{backgroundColor:a.vars.palette.Avatar.defaultBg}:{backgroundColor:a.palette.grey[400],...a.applyStyles("dark",{backgroundColor:a.palette.grey[600]})}}}]}})),g=(0,s.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,a)=>a.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),v=(0,s.Ay)(m,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,a)=>a.fallback})({width:"75%",height:"75%"}),b=l.forwardRef(function(e,a){let r=(0,i.b)({props:e,name:"MuiAvatar"}),{alt:s,children:o,className:d,component:m="div",slots:c={},slotProps:f={},imgProps:b,sizes:y,src:j,srcSet:w,variant:A="circular",...C}=r,N=null,k={...r,component:m,variant:A},S=function(e){let{crossOrigin:a,referrerPolicy:r,src:t,srcSet:n}=e,[s,o]=l.useState(!1);return l.useEffect(()=>{if(!t&&!n)return;o(!1);let e=!0,l=new Image;return l.onload=()=>{e&&o("loaded")},l.onerror=()=>{e&&o("error")},l.crossOrigin=a,l.referrerPolicy=r,l.src=t,n&&(l.srcset=n),()=>{e=!1}},[a,r,t,n]),s}({...b,..."function"==typeof f.img?f.img(k):f.img,src:j,srcSet:w}),R=j||w,M=R&&"error"!==S;k.colorDefault=!M,delete k.ownerState;let q=(e=>{let{classes:a,variant:r,colorDefault:l}=e;return(0,n.A)({root:["root",r,l&&"colorDefault"],img:["img"],fallback:["fallback"]},p,a)})(k),[I,D]=(0,h.A)("img",{className:q.img,elementType:g,externalForwardedProps:{slots:c,slotProps:{img:{...b,...f.img}}},additionalProps:{alt:s,src:j,srcSet:w,sizes:y},ownerState:k});return N=M?(0,u.jsx)(I,{...D}):o||0===o?o:R&&s?s[0]:(0,u.jsx)(v,{ownerState:k,className:q.fallback}),(0,u.jsx)(x,{as:m,className:(0,t.A)(q.root,d),ref:a,...C,ownerState:k,children:N})})},84578:(e,a,r)=>{r.d(a,{A:()=>f});var l=r(12115),t=r(2821),n=r(57001),s=r(48116),o=r(16625),i=r(85795),d=r(95195);function u(e){return(0,d.Ay)("MuiCardContent",e)}(0,i.A)("MuiCardContent",["root"]);var m=r(95155);let c=(0,s.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,a)=>a.root})({padding:16,"&:last-child":{paddingBottom:24}}),f=l.forwardRef(function(e,a){let r=(0,o.b)({props:e,name:"MuiCardContent"}),{className:l,component:s="div",...i}=r,d={...r,component:s},f=(e=>{let{classes:a}=e;return(0,n.A)({root:["root"]},u,a)})(d);return(0,m.jsx)(c,{as:s,className:(0,t.A)(f.root,l),ownerState:d,ref:a,...i})})},93584:(e,a,r)=>{r.d(a,{OverlayLoader:()=>s});var l=r(95155);r(12115);var t=r(93526),n=r(4474);function s(e){let{open:a}=e;return(0,l.jsx)("div",{children:(0,l.jsx)(t.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:a,children:(0,l.jsx)(n.A,{color:"inherit"})})})}}}]);