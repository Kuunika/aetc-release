(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{12409:(e,t,i)=>{"use strict";i.d(t,{VQ:()=>s,kC:()=>n,sL:()=>r,uQ:()=>o});var a=i(95155),l=i(72478);let r=e=>{let{children:t,id:i}=e;return(0,a.jsx)(l.Th,{id:i,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:t})},s=e=>{let{children:t}=e;return(0,a.jsx)(l.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:t})},n=e=>{let{children:t,sx:i}=e;return(0,a.jsx)(l.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...i},children:t})},o=e=>{let{children:t}=e;return(0,a.jsx)(l.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:t})}},41186:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var a=i(95155),l=i(93584),r=i(87295),s=i(12115),n=i(75855),o=i(72478),c=i(15239),d=i(9877);function u(e,t){return function(i){let[o,c]=(0,s.useState)(!1),{navigateTo:u}=(0,r.cq)();(0,s.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){c(!1),u("/"),localStorage.clear();return}}c(!0)}else c(!1),localStorage.clear(),u("/")},[]);let h=(0,n.R)(t,(0,d.O)());return o?h?(0,a.jsx)(e,{...i}):(0,a.jsx)(x,{}):(0,a.jsx)(l.OverlayLoader,{open:!o})}}let x=()=>(0,a.jsx)(o.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,a.jsx)(c.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},54150:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>C});var a=i(95155),l=i(12115),r=i(87295),s=i(53756),n=i(86973),o=i(72478),c=i(263),d=i(94049),u=i(1151),x=i(26301),h=i(98579),f=i(81013),p=i(78470),g=i(97998),m=i(94054);let j=()=>{let[e,t]=(0,l.useState)(!1),[i,s]=(0,l.useState)(""),[n,u]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),{navigateTo:j}=(0,r.cq)(),{gender:S}=(0,r.gd)(),{mutate:_,isSuccess:C}=(0,h.FD)(),{paginationModel:A,patients:w,searchText:N,setSearchText:T,setPaginationModel:b,loading:I,totalPages:D,refetch:k,totalEntries:E}=(0,f.a)("disposition"),[F,z]=(0,l.useState)(""),V=(0,m.d)(F,500);(0,l.useEffect)(()=>{T(V)},[V]),(0,l.useEffect)(()=>{C&&(k(),console.log("Visit closed successfully, refreshing data..."))},[C,k]);let O=[{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"gender",headerName:"Gender"},{field:"waiting",headerName:"Aggregated Time",flex:1,renderCell:e=>(0,a.jsx)(o.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Disposed By",flex:1},{field:"patient_care_area",flex:1,headerName:"Patient Care Area"},{field:"disposition_type",headerName:"Disposition Type",flex:1},{field:"destination",headerName:"Destination",flex:1},{field:"action",headerName:"Actions",flex:1.2,renderCell:e=>(0,a.jsx)(d.default,{display:"flex",gap:1,children:(0,a.jsx)(v,{patient:e.row,onVisitClosed:k})})}],P=null==w?void 0:w.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,dispositionType:e.disposition_type,actor:(0,a.jsx)(o.uT,{encounterType:c.fA.DISPOSITION,patientId:e.id}),aggregate:(0,a.jsx)(o.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,a.jsx)(o.VJ,{arrival_time:null==e?void 0:e.latest_encounter_time}),actionName:"Disposed By",action:(0,a.jsx)(y,{patient:e,setDeleted:e=>g(e),triage:e.triage_result,visitId:e.visit_uuid,id:e.uuid,onVisitClosed:k}),age:"".concat((0,x.Cb)(e.birthdate),"yrs"),triageResult:e.triage_result}));return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.vP,{columns:O,data:(null==w?void 0:w.length)?{data:w.map(e=>({id:e.uuid,...e})),page:A.page,per_page:A.pageSize,total_pages:D,totalEntries:E}:{data:[],page:1,per_page:10,total_pages:0,totalEntries:0},searchText:F,setSearchString:z,setPaginationModel:b,paginationModel:A,loading:I,formatForMobileView:P||[]})})},v=e=>{var t;let{patient:i,onVisitClosed:o}=e,{navigateTo:c}=(0,r.cq)(),[x,f]=l.useState(null),{mutate:m,isSuccess:j}=(0,h.FD)(),{gender:v}=(0,r.gd)();return(0,l.useEffect)(()=>{j&&o()},[j,o]),(0,a.jsxs)(d.default,{display:"flex",gap:1,children:[(0,a.jsx)(p.A,{title:"View Profile",arrow:!0,children:(0,a.jsx)(u.default,{onClick:()=>c("/patient/".concat(i.id,"/profile")),"aria-label":"view profile",sx:{color:"green"},children:(0,a.jsx)(g.gSK,{})})}),(0,a.jsx)(p.A,{title:"Close Visit",arrow:!0,children:(0,a.jsx)(u.default,{onClick:()=>{i.visit_uuid?m(i.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",sx:{color:"grey"},children:(0,a.jsx)(g.axc,{})})}),(0,a.jsx)(p.A,{title:"Template Forms",arrow:!0,children:(0,a.jsx)(u.default,{onClick:e=>{f(e.currentTarget)},"aria-label":"template forms",sx:{color:"#015E85"},children:(0,a.jsx)(g.t69,{})})}),(0,a.jsxs)(s.A,{id:"basic-menu",anchorEl:x,open:!!x,onClose:()=>{f(null)},children:[(0,a.jsx)(n.A,{onClick:()=>c("/patient/".concat(i.id,"/medicalInpatient")),children:"Medical Inpatient Admission Sheet"}),(0,a.jsx)(n.A,{onClick:()=>c("/patient/".concat(i.id,"/surgicalNotes")),children:"Surgical Notes"}),(null==(t=i.gender)?void 0:t.toLowerCase())==="female"&&(0,a.jsx)(n.A,{onClick:()=>c("/patient/".concat(i.id,"/gyneacology")),children:"Gyneacology Ward Admission"})]})]})},y=e=>{let{id:t,visitId:i,triage:c,setDeleted:x,patient:f,showCPR:m,onCPR:j,onVisitClosed:v}=e,{navigateTo:y}=(0,r.cq)(),[S,_]=l.useState(null),{mutate:C,isSuccess:A}=(0,h.FD)();(0,l.useEffect)(()=>{A&&v()},[A,v]);let w=()=>{_(null)};return(0,a.jsxs)(d.default,{sx:{display:"flex",flexDirection:"column",flex:"1"},children:[(0,a.jsx)(o.jD,{sx:{borderRadius:"2px",width:"100%",height:"5ch",backgroundColor:"red"==c?"#B42318":"yellow"==c?"#ede207":"green"==c?"#016302":"",marginY:1}}),(0,a.jsxs)(d.default,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[(0,a.jsx)(p.A,{title:"Close Visit",arrow:!0,children:(0,a.jsx)(u.default,{onClick:()=>{f.visit_uuid?C(f.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",size:"small",sx:{color:"#015E85"},children:(0,a.jsx)(g.axc,{})})}),(0,a.jsx)(p.A,{title:"Template Forms",arrow:!0,children:(0,a.jsx)(u.default,{onClick:e=>{_(e.currentTarget)},"aria-label":"template forms",size:"small",sx:{color:"#015E85"},children:(0,a.jsx)(g.t69,{})})}),(0,a.jsx)(p.A,{title:"View Profile",arrow:!0,children:(0,a.jsx)(u.default,{onClick:()=>y("/patient/".concat(f.id,"/profile")),"aria-label":"view profile",size:"small",sx:{color:"#015E85"},children:(0,a.jsx)(g.gSK,{})})}),m&&(0,a.jsx)(p.A,{title:"Initiate CPR",arrow:!0,children:(0,a.jsx)(u.default,{onClick:j,"aria-label":"initiate CPR",size:"small",color:"error",children:(0,a.jsx)(g.szJ,{})})})]}),(0,a.jsxs)(s.A,{id:"card-action-menu",anchorEl:S,open:!!S,onClose:w,children:[(0,a.jsx)(n.A,{onClick:()=>{y("/patient/".concat(t,"/medicalInpatient")),w()},children:"Medical Inpatient Admission Sheet"}),(0,a.jsx)(n.A,{onClick:()=>{y("/patient/".concat(t,"/surgicalNotes")),w()},children:"Surgical Notes"}),(0,a.jsx)(n.A,{onClick:()=>{y("/patient/".concat(t,"/gyneacology")),w()},children:"Gyneacology Ward Admission"})]})]})};var S=i(12409),_=i(98624);let C=(0,i(41186).A)(function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.V,{title:"Disposition/Specialty",link:"/dashboard"}),(0,a.jsxs)(o.Yr,{container:!0,children:[(0,a.jsx)(o.Yr,{xs:0,lg:0,item:!0}),(0,a.jsxs)(o.Yr,{xs:12,lg:12,sx:{display:"flex",flexDirection:"column"},item:!0,children:[(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)(S.sL,{children:["Disposition List"," "]}),(0,a.jsx)(S.VQ,{children:"This is a list of all patients whose visit has been completed."}),(0,a.jsx)(S.kC,{sx:{mx:1,p:0},children:(0,a.jsx)(j,{})})]}),(0,a.jsx)(o.Yr,{xs:0,lg:0,item:!0})]})]})},[c.Ot.ADMIN,c.Ot.CLINICIAN,c.Ot.NURSE])},68623:(e,t,i)=>{Promise.resolve().then(i.bind(i,54150))},81013:(e,t,i)=>{"use strict";i.d(t,{a:()=>r});var a=i(12115),l=i(31345);let r=(e,t)=>{let[i,l]=(0,a.useState)({page:0,pageSize:10}),[r,n]=(0,a.useState)(""),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(0),[f,p]=(0,a.useState)(0),[g,m]=(0,a.useState)(!1),j=(0,a.useCallback)(async()=>{let a;u(!0),g&&(a=new Date().toISOString().split("T")[0]);try{let l=await s(e,i.pageSize,r,i.page+1,a||"",t);c(l.data.data),h(l.data.total_pages),p(l.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{u(!1)}},[e,i.pageSize,r,i.page,g]);return(0,a.useEffect)(()=>{j()},[j]),{loading:d,patients:o,paginationModel:i,setPaginationModel:l,searchText:r,setSearchText:n,totalPages:x,totalEntries:f,setOnSwitch:m,refetch:(0,a.useCallback)(()=>{j()},[j])}},s=async(e,t,i,a,r,s)=>{let n="category=".concat(e,"&page=").concat(a,"&page_size=").concat(t,"&search=").concat(i,"&date=").concat(r);return s&&(n="category=".concat(e,"&paginate=false&patient_care_area=").concat(encodeURIComponent(s))),await (0,l.P8)(n)}},93584:(e,t,i)=>{"use strict";i.d(t,{OverlayLoader:()=>s});var a=i(95155);i(12115);var l=i(93526),r=i(4474);function s(e){let{open:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(l.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:t,children:(0,a.jsx)(r.A,{color:"inherit"})})})}},94054:(e,t,i)=>{"use strict";i.d(t,{d:()=>l});var a=i(12115);function l(e,t){let[i,l]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let i=setTimeout(()=>l(e),t);return()=>clearTimeout(i)},[e,t]),i}},98579:(e,t,i)=>{"use strict";i.d(t,{b2:()=>c,FD:()=>d,qv:()=>u});var a=i(25641),l=i(93292);let r="visits",s=(e,t)=>(0,l.hc)(e,t,r);var n=i(99776),o=i(80549);let c=()=>{let e=(0,n.jE)();return(0,o.n)({mutationFn:e=>(0,l.vt)(e,r).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},d=()=>{let{ServerTime:e}=(0,a.useServerTime)(),t=async t=>s(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,o.n)({mutationFn:t})},u=e=>{let t=(0,n.jE)();return(0,o.n)({mutationFn:e=>s(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},98624:(e,t,i)=>{"use strict";i.d(t,{V:()=>n});var a=i(95155),l=i(87295),r=i(72478),s=i(56164);let n=e=>{let{title:t,link:i}=e,{navigateTo:n}=(0,l.cq)(),o={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,a.jsxs)(r.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,a.jsxs)(r.jD,{onClick:()=>n(i),sx:{display:"flex",cursor:"pointer"},children:[(0,a.jsx)(r.Th,{children:(0,a.jsx)(s.oWm,{})}),(0,a.jsx)(r.Th,{sx:o,children:"Go back"})]}),(0,a.jsx)(r.Th,{sx:o,children:t}),(0,a.jsxs)(r.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(s.M4e,{}),(0,a.jsx)(r.Th,{sx:o,children:"Need any help?"})]})]})}}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,2141,7861,2891,1412,4018,7774,2478,8441,1255,7358],()=>e(e.s=68623)),_N_E=e.O()}]);