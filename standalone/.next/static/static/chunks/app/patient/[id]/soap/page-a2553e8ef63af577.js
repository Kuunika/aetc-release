(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3436],{7923:(e,a,l)=>{"use strict";l.d(a,{U:()=>j,k:()=>P});var i=l(95155),t=l(72478),n=l(51267),r=l(25641),o=l(87295),s=l(66637),c=l(94049),u=l(2300),d=l(25635),m=l(9562),p=l(91871),b=l(35068),h=l(12115),E=l(95582),S=l(320),O=l(31459),A=l(53206),v=l(90702),x=l(34505),I=l(263);let R={name:"",formulation:"",medication_dose:0,medication_dose_unit:"",medication_route:"",medication_frequency:"",medication_duration:0,medication_duration_unit:""},T=[{id:I.W.TABLET,label:"Tablet"},{id:I.W.VIAL,label:"Vial"},{id:I.W.INTRAVENOUS,label:"Intravenous"},{id:I.W.POWDER,label:"Powder"},{id:I.W.SOLUTION,label:"Solution"},{id:I.W.EYE_OINTMENT,label:"Eye Ointment"},{id:I.W.CREAM,label:"Cream"},{id:I.W.EYE_DROPS,label:"Eye Drops"},{id:I.W.OINTMENT,label:"Ointment"},{id:I.W.INHALER,label:"Inhaler"},{id:I.W.SUPPOSITORY,label:"Suppository"},{id:I.W.PESSARY,label:"Pessary"},{id:I.W.SUSPENSION,label:"Suspension"},{id:I.W.SHAMPOO,label:"Shampoo"},{id:I.W.EAR_DROPS,label:"Ear Drops"},{id:I.W.EYE_PASTE,label:"Eye Paste"}],_=[{id:"STAT",label:"STAT"},{id:I.W.ONCE_A_DAY,label:"24 Hourly (OD) - Once a day "},{id:I.W.TWICE_A_DAY,label:"12 Hourly (BID) - Twice a day"},{id:I.W.THREE_TIMES_A_DAY,label:"8 Hourly (TID) - Three times a day"},{id:I.W.FOUR_TIMES_A_DAY,label:"6 Hourly (QID) - Four times a day"},{id:I.W.SIX_TIMES_A_DAY,label:"4 Hourly (OD) - Six times a day "},{id:I.W.ONCE_A_WEEK,label:"Once a week"},{id:I.W.ONCE_A_MONTH,label:"Once a month"},{id:I.W.OTHER,label:"Other"}],f=["Milligrams (mg)","Micrograms (\xb5g)","Grams (g)","International Units (IU)","Milliliters (ml)","Millimoles (mmol)"],y={subjective:{name:I.W.SUBJECTIVE,label:"Subjective",bold:!0},objective:{name:"objective",label:"Objective",type:"title",bold:!0,children:[{concept:I.W.MEDICAL_RECORD_OBSERVATIONS,label:"General/Other observation"},{concept:I.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic"},{concept:I.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},{concept:I.W.PULSE_RATE,label:"Pulse Rate"},{concept:I.W.RESPIRATORY_RATE,label:"Respiratory Rate"},{concept:I.W.BLOOD_OXYGEN_SATURATION,label:"SPO2"},{concept:I.W.TEMPERATURE,label:"Temperature"}]},systolic:{child:!0,name:I.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic"},diastolic:{child:!0,name:I.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},pulseRate:{child:!0,name:I.W.PULSE_RATE,label:"Pulse Rate"},respiratoryRate:{child:!0,name:I.W.RESPIRATORY_RATE,label:"Respiratory Rate"},spo:{child:!0,name:I.W.BLOOD_OXYGEN_SATURATION,label:"SPO2"},temperature:{child:!0,name:I.W.TEMPERATURE,label:"Temperature"},assessment:{name:I.W.ASSESSMENT,label:"Assessment"},plan:{name:I.W.PLAN,label:"Plan"},evaluation:{name:I.W.EVALUATION,label:"Evaluation"},replan:{name:I.W.REPLAN,label:"Replan"},proceduresConfig:{name:I.W.PROCEDURES,label:"Procedures",multiple:!0,type:"string",hasGroupMembers:!0,bold:!0},supportiveCareConfig:{name:I.W.SUPPORTIVE_CARE,label:"supportive Care",multiple:!0,type:"string",hasGroupMembers:!0,bold:!0}},j=y,N=[{value:I.W.INTRAVENOUS_CANNULATION,label:"Intravenous Cannulation"},{value:I.W.CATHETERIZATION_URETHRAL,label:"Urethral Catheterization"},{value:I.W.SUCTIONING,label:"Suctioning"},{value:I.W.OROPHARYNGEAL_AIRWAY_INSERTION,label:"Oropharyngeal Airway Insertion"},{value:I.W.NASOPHARYNGEAL_AIRWAY_INSERTION,label:"Nasopharyngeal Airway Insertion"},{value:I.W.LARYNGEAL_MASK_AIRWAY_INSERTION,label:"Laryngeal Mask Airway Insertion"},{value:I.W.NASOGASTRIC_TUBE_INSERTION,label:"Nasogastric Tube Insertion"},{value:I.W.OTHER,label:"Other (Specify)"}],W=[{value:I.W.WOUND_DRESSING,label:"Wound Dressing"},{value:I.W.PATIENT_EDUCATION,label:"Patient Education"},{value:I.W.COUNSELLING,label:"Counselling"},{value:I.W.FEEDING,label:"Feeding"},{value:I.W.OXYGENATION,label:"Oxygenation"},{value:I.W.TEPID_SPONGING,label:"Tepid Sponging"},{value:I.W.ELECTROCARDIOGRAPHY_MONITORING,label:"Electrocardiography (ECG) Monitoring"},{value:I.W.TURNING_PATIENTS,label:"Turning Patients"},{value:I.W.ORAL_CARE,label:"Oral Care"},{value:I.W.OTHER,label:"Other (Specify)"}],g=b.Ik().shape({[y.subjective.name]:b.Yj().required(y.subjective.label),[y.objective.name]:b.Yj().required(y.objective.label),[y.assessment.name]:b.Yj().required(y.assessment.label),[y.plan.name]:b.Yj().required(y.plan.label),[y.evaluation.name]:b.Yj().required(y.evaluation.label),[y.replan.name]:b.Yj().required(y.replan.label),procedures:b.YO().of(b.Ik().shape({key:b.Yj().required(),value:b.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one procedure must be selected"),otherProcedureSpecify:b.Yj().nullable().when("procedures",{is:e=>e.some(e=>e.key===I.W.OTHER),then:e=>e.required("Please specify the other procedure")}),supportiveCare:b.YO().of(b.Ik().shape({key:b.Yj().required(),value:b.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one supportive care option must be selected"),otherSupportiveCareSpecify:b.Yj().nullable().when("supportiveCare",{is:e=>e.some(e=>e.key===I.W.OTHER),then:e=>e.required("Please specify the other supportive care")}),[y.spo.name]:b.ai().min(0).max(100).required().label(y.spo.label),[y.respiratoryRate.name]:b.ai().min(0).max(90).required().label(y.respiratoryRate.label),[y.systolic.name]:b.ai().min(0).max(300).required().label(y.systolic.label),[y.diastolic.name]:b.ai().min(0).max(300).required().label(y.diastolic.label),[y.temperature.name]:b.ai().min(20).max(45).required().label(y.temperature.label)}),D=(0,n.f6)(y);D.medications=[R],D.procedures=[],D.supportiveCare=[],D.otherProcedureSpecify="",D.otherSupportiveCareSpecify="";let P=()=>{let{ServerTime:e}=(0,r.useServerTime)(),{activeVisit:a,patientId:l}=(0,o.gd)(),[b,j]=(0,h.useState)({}),{mutate:P,isPending:C,isSuccess:M}=(0,s.jM)(),[U,w]=(0,h.useState)({medications:[]}),[Y,L]=(0,h.useState)([]),{medicationOptions:G,loadingDrugs:k}=(0,x.A)(),q=["Paracetamol","Ibuprofen","Diclofenac sodium 75mg/ml, 3ml","Diclofenac sodium Slow Release","Diclofenac sodium","Salbutamol","Salbutamol sulphate","Salbutamol solution for nebulising 5mg/ml","Salbutamol sulphate aerosol inhalation, 100mcg/dose, 200 doses","Oxytocin","Dextrose 50%,","Aspirin","Prednisolone","Diazepam"],[H,V]=(0,h.useState)({otherProcedure:!1,otherSupportiveCare:!1}),{navigateBack:F}=(0,o.cq)(),{handleSubmit:B}=(0,o.li)(I.fA.NURSING_CARE_NOTES,()=>F());(0,h.useEffect)(()=>{L(G.filter(e=>q.includes(e.label)))},[G]);let z=i=>{let t=e.getServerTimeString(),n=i.map(a=>({concept:I.W.DRUG_GIVEN,value:a.name,obsDateTime:t,groupMembers:[{concept:I.W.MEDICATION_DOSE,value:a.medication_dose,obsDateTime:t},{concept:I.W.MEDICATION_ROUTE,value:a.medication_route,obsDatetime:e.getServerTimeString()},{concept:I.W.DESCRIPTION,value:"soapier",obsDateTime:t}]}));P({encounterType:I.fA.SOAPIER_DISPENSING,visit:a,patient:l,encounterDatetime:t,obs:n})},X=async i=>{let t=e.getServerTimeString(),n=[{concept:I.W.PROCEDURES,value:I.W.PROCEDURES,obsDatetime:t,groupMembers:(i.procedures||[]).filter(e=>!0===e.value).map(e=>({concept:e.key,value:e.key===I.W.OTHER?i.otherProcedureSpecify:e.key,obsDatetime:t}))},{concept:I.W.SUPPORTIVE_CARE,value:I.W.SUPPORTIVE_CARE,obsDatetime:t,groupMembers:(i.supportiveCare||[]).filter(e=>!0===e.value).map(e=>({concept:e.key,value:e.key===I.W.OTHER?i.otherSupportiveCareSpecify:e.key,obsDatetime:t}))}];P({encounterType:I.fA.NURSING_CARE_NOTES,visit:a,patient:l,encounterDatetime:t,obs:n})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(v.h,{loading:C||k,children:(0,i.jsx)(t.PD,{initialValues:D,validationSchema:g,onSubmit:i=>{let{procedures:t,supportiveCare:r,medications:o,otherProcedureSpecify:s,otherSupportiveCareSpecify:c,...u}=i;(i=>{if(0===i.length)return;z(i);let t=e.getServerTimeString(),n=i.map(e=>({concept:I.W.DRUG_GIVEN,value:e.name,obsDateTime:t,groupMembers:[{concept:I.W.MEDICATION_FORMULATION,value:e.formulation,obsDateTime:t,coded:!0},{concept:I.W.MEDICATION_DOSE,value:e.medication_dose,obsDateTime:t},{concept:I.W.MEDICATION_DOSE_UNIT,value:e.medication_dose_unit,obsDateTime:t},{concept:I.W.MEDICATION_FREQUENCY,value:e.medication_frequency,coded:!0,obsDateTime:t},{concept:I.W.MEDICATION_DURATION,value:e.medication_duration,obsDateTime:t},{concept:I.W.MEDICATION_DURATION_UNIT,value:e.medication_duration_unit,obsDateTime:t},{concept:I.W.DESCRIPTION,value:"soapier",obsDateTime:t}]}));P({encounterType:I.fA.SOAPIER_PRESCRIPTION,visit:a,patient:l,encounterDatetime:t,obs:n}),U.medications=[R]})(o),X({procedures:t,supportiveCare:r,otherProcedureSpecify:s,otherSupportiveCareSpecify:c}),B((0,n.gX)(u,e.getServerTimeString()))},submitButton:!1,children:e=>{let{values:a,setFieldValue:l}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(c.default,{children:[(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",children:y.subjective.label}),(0,i.jsx)(t.A8,{label:"",name:y.subjective.name,multiline:!0,id:y.subjective.name,rows:3,sx:{width:"100%",mt:0}})]}),(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",children:"Objective"}),(0,i.jsxs)("div",{style:{marginLeft:"50px"},children:[(0,i.jsx)(d.default,{children:y.objective.label}),(0,i.jsx)(t.A8,{label:"",name:y.objective.name,multiline:!0,id:y.objective.name,rows:3,sx:{width:"100%"}}),(0,i.jsx)(d.default,{children:"Vital signs"}),(0,i.jsxs)(t.m2,{children:[(0,i.jsx)(t.A8,{name:y.spo.name,label:y.spo.label,id:y.spo.name,sx:{width:"100%"},unitOfMeasure:"%"}),(0,i.jsx)(t.A8,{name:y.systolic.name,label:y.systolic.label,id:y.systolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"}),(0,i.jsx)(t.A8,{name:y.diastolic.name,label:y.diastolic.label,id:y.diastolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"}),(0,i.jsx)(t.A8,{name:y.respiratoryRate.name,label:y.respiratoryRate.label,id:y.respiratoryRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,i.jsx)(t.A8,{name:y.pulseRate.name,label:y.pulseRate.label,id:y.pulseRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,i.jsx)(t.A8,{name:y.temperature.name,label:y.temperature.label,id:y.temperature.name,sx:{width:"100%"},unitOfMeasure:"\xb0C"})]})]})]}),(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",children:y.assessment.label}),(0,i.jsx)(t.A8,{label:"",name:y.assessment.name,multiline:!0,id:y.assessment.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",children:y.plan.label}),(0,i.jsx)(t.A8,{label:"",name:y.plan.name,multiline:!0,id:y.plan.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",sx:{mb:2},children:"Intervention/Implementation"}),(0,i.jsxs)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:[" ","Non-pharmacological management"," "]}),(0,i.jsx)("div",{style:{maxWidth:"900px"},children:(0,i.jsxs)(t.GE,{direction:"row",children:[(0,i.jsxs)(t.jD,{sx:{bgcolor:"white",padding:"0.5ch",mb:"2ch",width:"90%"},children:[(0,i.jsx)("h4",{children:"Procedures"}),(0,i.jsx)(t.Z3,{name:"procedures",allowFilter:!1,options:N,getValue:e=>V(a=>({...a,otherProcedure:e.some(e=>e.key===I.W.OTHER&&e.value)}))}),H.otherProcedure&&(0,i.jsx)(t.A8,{id:"otherProcedureSpecify",label:"Specify Other Procedure",name:"otherProcedureSpecify",placeholder:"Specify the procedure"})]}),(0,i.jsxs)(t.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"90%"},children:[(0,i.jsx)("h4",{children:"Supportive Care"}),(0,i.jsx)(t.Z3,{name:"supportiveCare",allowFilter:!1,options:W,getValue:e=>V(a=>({...a,otherSupportiveCare:e.some(e=>e.key===I.W.OTHER&&e.value)}))}),H.otherSupportiveCare&&(0,i.jsx)(t.A8,{id:"otherSupportiveCareSpecify",label:"Specify Other Supportive Care",name:"otherSupportiveCareSpecify",placeholder:"Specify the care"})]})]})}),(0,i.jsx)("h4",{style:{marginBottom:"1ch"},children:"Pharmacological management"}),(0,i.jsx)(t.fP,{getValues:w}),(0,i.jsx)(E.ED,{name:"medications",children:e=>{let{push:n,remove:r}=e;return(0,i.jsx)(S.A,{items:a.medications,setItems:e=>l("medications",e),newItem:R,renderFields:(e,a)=>{var n;return(0,i.jsxs)(c.default,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",width:"100%"},children:[(0,i.jsx)(t.el,{name:"medications[".concat(a,"].name"),label:"Medication Name",options:Y,getValue:e=>l("medications[".concat(a,"].name"),e),multiple:!1}),(0,i.jsx)(t.el,{name:"medications[".concat(a,"].formulation"),label:"Formulation",options:T,getValue:e=>l("medications[".concat(a,"].formulation"),e),sx:{flex:1},multiple:!1}),(0,i.jsx)(t.pj,{id:"medications[".concat(a,"].medication_dose"),label:"Dose",name:"medications[".concat(a,"].medication_dose"),unitName:"medications[".concat(a,"].medication_dose_unit"),unitOptions:f,placeholder:"e.g., 500",inputIcon:(0,i.jsx)(O.gaX,{})}),b[a]?(0,i.jsx)(t.A8,{id:"medications[".concat(a,"].medication_frequency"),name:"medications[".concat(a,"].medication_frequency"),label:"Specify frequency",sx:{flex:1}}):(0,i.jsx)(t.el,{name:"medications[".concat(a,"].medication_frequency"),label:"Frequency",options:_,getValue:e=>{"Other"===e&&j(e=>({...e,[a]:!0})),l("medications[".concat(a,"].medication_frequency"),e)},multiple:!1}),(null==U||null==(n=U.medications[a])?void 0:n.medication_frequency)!="STAT"&&(0,i.jsx)(t.pj,{id:"medications[".concat(a,"].medication_duration"),name:"medications[".concat(a,"].medication_duration"),unitName:"medications[".concat(a,"].medication_duration_unit"),label:"Duration",unitOptions:I.bH,placeholder:"e.g. 7",inputIcon:(0,i.jsx)(A.YmN,{}),sx:{flex:1}}),(0,i.jsx)(m.A,{id:"medications[".concat(a,"].medication_route"),name:"medications[".concat(a,"].medication_route"),label:"Route",fullWidth:!0,variant:"outlined"})]})}})}}),(0,i.jsx)("br",{})]}),(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",children:y.evaluation.label}),(0,i.jsx)(t.A8,{label:"",name:y.evaluation.name,multiline:!0,id:y.evaluation.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsxs)(u.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(d.default,{variant:"h6",children:y.replan.label}),(0,i.jsx)(t.A8,{label:"",name:y.replan.name,multiline:!0,id:y.replan.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsx)(p.A,{variant:"contained",type:"submit",children:"Submit"})]})})}})})})}},30356:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>s});var i=l(95155),t=l(72478),n=l(94049),r=l(25635),o=l(7923);function s(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.TF,{}),(0,i.jsx)(t.MG,{children:(0,i.jsxs)(n.default,{sx:{ml:2,mr:2},children:[(0,i.jsx)(n.default,{sx:{display:"flex",alignItems:"center"},children:(0,i.jsx)(t.oq,{})}),(0,i.jsx)(r.default,{variant:"h4",children:"SOAPIER"}),(0,i.jsx)("br",{}),(0,i.jsx)(o.k,{})]})})]})}},51267:(e,a,l)=>{"use strict";l.d(a,{iE:()=>n,Zt:()=>d,iL:()=>u,f6:()=>s,gX:()=>c,ZM:()=>m,k$:()=>p}),l(33115);var i=l(68407),t=l.n(i);let n=e=>{let{title:a,text:l,icon:i,onConfirm:n,confirmButtonText:r,cancelButtonText:o="Cancel"}=e;t().fire({title:a,text:l,icon:i,showCancelButton:!0,confirmButtonColor:"#006401",confirmButtonText:r,cancelButtonText:o}).then(e=>{e.isConfirmed&&n()})};var r=l(263),o=l(26301);let s=e=>Object.keys(e).reduce((a,l)=>(a[e[l].name]="",a),{}),c=(e,a)=>Object.keys(e).map(l=>({concept:l,value:e[l],obsDatetime:a})),u=(e,a,l)=>{let i=Object.keys(e).map(a=>({concept:e[a].name,label:e[a].label})),t=a.map(e=>({concept:e.id,label:e.label}));return[...i,...l.map(e=>({concept:e.value,label:e.label})),...t]},d=async e=>(await o.Fh.initialize(),e.map(e=>({concept:r.W.IMAGE_PART_NAME,value:e.label,obsDateTime:o.Fh.getServerTimeString(),groupMembers:e.formData.obs}))),m=function(e,a,l){return arguments.length>3&&void 0!==arguments[3]&&arguments[3],Array.isArray(e)?e.map(e=>({concept:a,value:e.id,obsDatetime:l})):[]},p=async(e,a,l)=>(await o.Fh.initialize(),Object.entries(a).map(a=>{let[i,t]=a,n=Object.keys(e).find(a=>e[a].name===i);if(!n)return null;let r=e[n].name,s=e[n].coded;return Array.isArray(t)&&t.every(e=>e&&void 0!==e.id)?t.map(e=>({key:r,value:e.id,coded:s})):{concept:r,value:t,coded:s,obsDatetime:l||o.Fh.getServerTimeString()}}).flat().filter(Boolean))},90702:(e,a,l)=>{"use strict";l.d(a,{h:()=>r});var i=l(95155),t=l(94049),n=l(4474);let r=e=>{let{loading:a,children:l,height:r="100%"}=e;return(0,i.jsxs)(t.default,{sx:{position:"relative",width:"100%",height:r},children:[a&&(0,i.jsx)(t.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,i.jsx)(n.A,{})}),(0,i.jsx)(t.default,{sx:{opacity:a?.5:1,pointerEvents:a?"none":"auto"},children:l})]})}},92356:(e,a,l)=>{Promise.resolve().then(l.bind(l,30356))}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,8320,3349,2141,7861,2891,1412,4018,5068,7774,2478,8441,1255,7358],()=>e(e.s=92356)),_N_E=e.O()}]);