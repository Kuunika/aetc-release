(()=>{var e={};e.id=8618,e.ids=[8618],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},13670:(e,t,i)=>{"use strict";i.d(t,{b2:()=>c,FD:()=>u,qv:()=>m});var a=i(44504),r=i(60579);let n="visits",s=e=>(0,r.vt)(e,n),l=(e,t)=>(0,r.hc)(e,t,n);var o=i(8693),d=i(54050);let c=()=>{let e=(0,o.jE)();return(0,d.n)({mutationFn:e=>s(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},u=()=>{let{ServerTime:e}=(0,a.useServerTime)(),t=async t=>l(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,d.n)({mutationFn:t})},m=e=>{let t=(0,o.jE)();return(0,d.n)({mutationFn:e=>l(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19194:(e,t,i)=>{"use strict";i.d(t,{q:()=>D});var a=i(60687);i(43210);var r=i(24857),n=i(68730),s=i(2351),l=i(7850),o=i(69612),d=i(27621),c=i(71953),u=i(12040),m=i(58706),p=i(109);let h=(0,p.Ay)(r.A)(({theme:e})=>({borderRadius:e.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:e.shadows[3],position:"relative"})),x=(0,p.Ay)(n.A)(({theme:e})=>({borderCollapse:"separate",borderSpacing:"0px 4px"})),A=(0,p.Ay)(s.A)(({theme:e})=>({fontWeight:500,padding:"12px 16px",borderBottom:"none",color:e.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"})),b=(0,p.Ay)(A)(({theme:e})=>({fontSize:"0.9rem",fontWeight:"bold",backgroundColor:e.palette.background.default,textTransform:"uppercase"})),E=(0,p.Ay)(l.A)(({theme:e})=>({backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:e.palette.grey[100]},boxShadow:e.shadows[1]})),S=(0,p.Ay)("div")(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1})),D=({columns:e,data:t,actions:i=!1,getSelectedRow:r,loading:n=!1})=>(0,a.jsx)(h,{children:(0,a.jsxs)(x,{stickyHeader:!0,children:[(0,a.jsx)(o.A,{children:(0,a.jsxs)(l.A,{children:[e.map((e,t)=>(0,a.jsx)(b,{children:e.label},t)),i&&(0,a.jsx)(b,{children:"Actions"})]})}),(0,a.jsx)(d.A,{children:n?(0,a.jsx)(l.A,{children:(0,a.jsx)(s.A,{colSpan:e.length+ +!!i,children:(0,a.jsx)(S,{children:(0,a.jsx)(c.A,{})})})}):t.map((t,n)=>(0,a.jsxs)(E,{onClick:()=>r&&r(t),children:[e.map((e,i)=>(0,a.jsx)(u.A,{title:t[e.field],arrow:!0,children:(0,a.jsx)(A,{children:t[e.field]})},i)),i&&(0,a.jsxs)(A,{children:[(0,a.jsx)(m.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,a.jsx)(m.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},n))})]})})},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31561:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Q});var a=i(60687),r=i(43210),n=i(75018),s=i(30485),l=i(42938),o=i(61939),d=i(62116),c=i(76990),u=i(29702),m=i(44504),p=i(35009);let h=s.Ik({facilityName:s.Yj().required("Facility Name is required"),reason:s.Yj().required("Reason for Transfer is required")}),x={facilityName:"",reason:""};function A({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutate:i}=(0,d.jM)(),[s,h]=(0,r.useState)(void 0),{data:x}=(0,c.iu)(t.id),{ServerTime:A}=(0,m.useServerTime)(),E=async a=>{let r=A.getServerTimeString(),n=[{concept:l.W.TRANSFER_OUT,value:l.W.TRANSFER_OUT,obsDatetime:r,groupMembers:[{concept:l.W.FACILITY_NAME,value:a.facilityName,obsDatetime:r},{concept:l.W.REASON_FOR_TRANSFER,value:a.reason,obsDatetime:r}]}],o={encounterType:l.fA.DISPOSITION,visit:s?.uuid,patient:t.id,encounterDatetime:r,obs:n};try{await i(o),e()}catch(e){console.error("Error submitting Transfer information: ",e)}},S=[{id:"transferForm",title:(0,a.jsx)("h2",{children:"Transfer Out"}),content:(0,a.jsx)(b,{handleSubmit:E})},{id:"medication",title:(0,a.jsx)("h2",{children:"Medication"}),content:(0,a.jsx)(u.a,{})}];return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(p.M,{sections:S})})})}function b({handleSubmit:e}){return(0,a.jsx)(n.PD,{initialValues:x,validationSchema:h,onSubmit:e,submitButtonText:"Submit",children:(0,a.jsx)(n.sc,{sx:{p:3},children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"facilityName",name:"facilityName",label:"Facility Name",placeholder:"Enter Facility Name",sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"reason",name:"reason",label:"Reason for Transfer",placeholder:"Provide reason for transfer",rows:4,multiline:!0,sx:{width:"100%"}})})]})})})}var E=i(67332);let S=s.Ik({lastSeenLocation:s.Yj().required("Last Seen Location is required"),dateAbsconded:s.p6().required("Date of Absconding is required"),timeAbsconded:s.Yj().required("Time of Absconding is required")}),D={lastSeenLocation:"",dateAbsconded:"",timeAbsconded:""};function _({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutate:i}=(0,d.jM)(),[s,h]=(0,r.useState)(void 0),{data:x}=(0,c.iu)(t.id),{ServerTime:A}=(0,m.useServerTime)(),b=async a=>{let r=A.getServerTimeString(),n=[{concept:l.W.ABSCONDED,value:l.W.ABSCONDED,obsDatetime:r,groupMembers:[{concept:l.W.LAST_SEEN_LOCATION,value:a.lastSeenLocation,obsDatetime:r},{concept:l.W.DATE_OF_ABSCONDING,value:a.dateAbsconded,obsDatetime:r},{concept:l.W.TIME_OF_ABSCONDING,value:a.timeAbsconded,obsDatetime:r}]}],o={encounterType:l.fA.DISPOSITION,visit:s?.uuid,patient:t.id,encounterDatetime:r,obs:n};try{await i(o),e()}catch(e){console.error("Error submitting Absconded information: ",e)}},E=[{id:"abscondedForm",title:(0,a.jsx)("h2",{children:"Absconded Form"}),content:(0,a.jsx)(T,{handleSubmit:b})},{id:"medication",title:(0,a.jsx)("h2",{children:"Medication"}),content:(0,a.jsx)(u.a,{})}];return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(p.M,{sections:E})})})}function T({handleSubmit:e}){return(0,a.jsx)(n.PD,{initialValues:D,validationSchema:S,onSubmit:e,submitButtonText:"Submit",children:(0,a.jsx)(n.sc,{sx:{p:3},children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"lastSeenLocation",name:"lastSeenLocation",label:"Last Seen Location",placeholder:"Enter the last known location",sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.bZ,{name:"dateAbsconded",label:"Date of Absconding",sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.YZ,{name:"timeAbsconded",label:"Time of Absconding",sx:{width:"100%"}})})]})})})}function f({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutate:i}=(0,d.jM)(),{ServerTime:s}=(0,m.useServerTime)(),[h,x]=(0,r.useState)(void 0),{data:A}=(0,c.iu)(t.id),b=async a=>{let r=s.getServerTimeString(),n=[{concept:l.W.ADMISSION,value:l.W.ADMISSION,obsDatetime:r,groupMembers:[{concept:l.W.WARD,value:a.wardName,obsDatetime:r},{concept:l.W.BED_NUMBER,value:a.bedNumber,obsDatetime:r},{concept:l.W.REASON_FOR_ADMISSION,value:a.reasonForAdmission,obsDatetime:r},{concept:l.W.SPECIALITY_DEPARTMENT,value:a.specialtyInvolved,obsDatetime:r}]}],o={encounterType:l.fA.DISPOSITION,visit:h?.uuid,patient:t.id,encounterDatetime:r,obs:n};try{await i(o),e()}catch(e){console.error("Error submitting Admission information: ",e)}},E=[{id:"admission",title:(0,a.jsx)("h2",{children:"Admission"}),content:(0,a.jsx)(j,{onSubmit:b})},{id:"medications",title:(0,a.jsx)("h2",{children:"Prescribe Medications"}),content:(0,a.jsx)(u.a,{})}];return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(p.M,{sections:E})})})}let N={wardName:"",bedNumber:"",reasonForAdmission:"",specialtyInvolved:""},I=s.Ik({wardName:s.Yj().required("Ward Name is required"),reasonForAdmission:s.Yj().required("Reason for Admission is required"),specialtyInvolved:s.Yj().required("Specialty Involved is required")}),R=[{id:l.W.ONE_A_LABOUR_WARD,label:"1A Labour ward"},{id:l.W.MAIN_LABOUR_WARD,label:"Main Labour ward"},{id:l.W.ANTENATAL_WARD,label:"Antenatal ward"},{id:l.W.POST_NATAL_WARD,label:"Post natal ward"},{id:l.W.GYNAECOLOGY_WARD_MAIN,label:"Gynaecology ward- Main"},{id:l.W.THREE_B_MALE_MEDICAL,label:"3B Male medical"},{id:l.W.THREE_B_HDU,label:"3B High Dependency Unit"},{id:l.W.MSF_WARD_GYNAECOLOGY,label:"MSF ward - Gynaecology"},{id:l.W.THREE_C_COMBINED_MALE_AND_FEMALE_MEDICAL,label:"3C Combined male and female medical"},{id:l.W.SIX_A_ORTHOPAEDIC_MALE,label:"6A Orthopaedic male"},{id:l.W.TWO_A_ONCOLOGY_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"2A Oncology Ward (General ward/High Dependency Unit)"},{id:l.W.TWO_B_RENAL_AND_DERMATOLOGY_WARD,label:"2B Renal and Dermatology Ward"},{id:l.W.SIX_A_FEMALE_ORTHOPAEDIC_WARD,label:"6A Female Orthopaedic Ward"},{id:l.W.FOUR_A_FEMALE_MEDICAL_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"4A Female Medical Ward (General ward/High Dependency Unit)"},{id:l.W.GYNECOLOGY_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"Gynecology Ward (General ward/High Dependency Unit)"},{id:l.W.LABOUR_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"Labour Ward (General ward/High Dependency Unit)"},{id:l.W.THREE_B_FEMALE_MEDICAL_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"3B Female Medical Ward (General ward/High Dependency Unit)"},{id:l.W.THREE_A_TB_WARD,label:"3A TB Ward"},{id:l.W.THREE_A_HDRU_HIGH_DEPENDENCY_RESPIRATORY_UNIT,label:"3A HDRU (High Dependency Respiratory Unit)"},{id:l.W.FIVE_A_MALE_SURGICAL_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"5A Male Surgical Ward (General ward/High Dependency Unit)"},{id:l.W.FIVE_B_FEMALE_SURGICAL_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"5B Female Surgical Ward (General ward/High Dependency Unit)"},{id:l.W.FIVE_B_ORTHOPAEDIC_WARD,label:"5B Orthopaedic Ward"},{id:l.W.FIVE_B_NEUROSURGICAL_WARD_GENERAL_WARD_HIGH_DEPENDENCY_UNIT,label:"5B Neurosurgical Ward (General ward/High Dependency Unit)"},{id:l.W.INTENSIVE_CARE_UNIT_ICU,label:"Intensive Care Unit (ICU)"},{id:l.W.THEATRE,label:"Theatre"},{id:l.W.ENT,label:"ENT"},{id:l.W.OPHTHALMOLOGY,label:"Ophthalmology"}],O=[{id:l.W.MEDICINE,label:"Medicine"},{id:l.W.GENERAL_SURGERY,label:"General Surgery"},{id:l.W.ORTHOPEDICS,label:"Orthopedics"},{id:l.W.NEUROSURGERY,label:"Neurosurgery"},{id:l.W.EAR_NOSE_AND_THROAT_ENT,label:"Ear, Nose, and Throat (ENT)"},{id:l.W.DENTAL_AND_MAXILLOFACIAL_SURGERY,label:"Dental and Maxillofacial Surgery"},{id:l.W.OPHTHALMOLOGY,label:"Ophthalmology"},{id:l.W.PSYCHIATRY,label:"Psychiatry"},{id:l.W.GYNAECOLOGY_AND_OBSTETRICS,label:"Gynecology and Obstetrics"},{id:l.W.CRITICAL_CARE,label:"Critical Care"},{id:l.W.ONCOLOGY,label:"Oncology"}];function j({onSubmit:e}){let{gender:t}=(0,o.gd)(),[i,s]=(0,r.useState)(R);return(0,a.jsx)(n.PD,{initialValues:N,validationSchema:I,onSubmit:e,submitButtonText:"Submit",children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.Yr,{item:!0,xs:12,lg:6,children:(0,a.jsx)(n.el,{name:"wardName",label:"Ward Name",options:i,multiple:!1})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,lg:6,children:(0,a.jsx)(n.A8,{id:"bedNumber",name:"bedNumber",label:"Bed Number",placeholder:"Enter Bed Number",sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"reasonForAdmission",name:"reasonForAdmission",label:"Reason for Admission",placeholder:"Provide reason for admission",rows:4,multiline:!0,sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.el,{name:"specialtyInvolved",label:"Specialty Involved",options:O,multiple:!1})})]})})}let W=[{id:l.W.MEDICINE,label:"Medicine"},{id:l.W.GENERAL_SURGERY,label:"General Surgery"},{id:l.W.ORTHOPEDICS,label:"Orthopedics"},{id:l.W.NEUROSURGERY,label:"Neurosurgery"},{id:l.W.EAR_NOSE_AND_THROAT_ENT,label:"Ear, Nose, and Throat (ENT)"},{id:l.W.DENTAL_AND_MAXILLOFACIAL_SURGERY,label:"Dental and Maxillofacial Surgery"},{id:l.W.OPHTHALMOLOGY,label:"Ophthalmology"},{id:l.W.PSYCHIATRY,label:"Psychiatry"},{id:l.W.GYNAECOLOGY_AND_OBSTETRICS,label:"Gynecology and Obstetrics"},{id:l.W.CRITICAL_CARE,label:"Critical Care"},{id:l.W.ONCOLOGY,label:"Oncology"}],v=s.Ik({specialtyDepartment:s.Yj().required("Specialty Department is required"),reasonForReview:s.Yj().required("Reason for Review is required"),reviewDate:s.p6().required("Date Scheduled for Review is required")}),y={specialtyDepartment:"",reasonForReview:"",reviewDate:""};function g({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutateAsync:i}=(0,d.jM)(),[s,h]=(0,r.useState)(void 0),{data:x}=(0,c.iu)(t.id),{init:A,ServerTime:b}=(0,m.useServerTime)(),{navigateTo:E}=(0,o.cq)(),S=async e=>{let a=b.getServerTimeString(),r=[{concept:l.W.AWAITING_SPECIALITY_REVIEW,value:l.W.AWAITING_SPECIALITY_REVIEW,obsDatetime:a,groupMembers:[{concept:l.W.SPECIALITY_DEPARTMENT,value:e.specialtyDepartment,obsDatetime:a},{concept:l.W.REASON_FOR_REQUEST,value:e.reasonForReview,obsDatetime:a},{concept:l.W.DATE,value:e.reviewDate,obsDatetime:a}]}],n={encounterType:l.fA.AWAITING_SPECIALTY,visit:s?.uuid,patient:t.id,encounterDatetime:a,obs:r};try{await i(n),E("/awaiting-specialty")}catch(e){console.error("Error submitting Awaiting Speciality Review info:",e)}},D=[{id:"awaitingSpecialty",title:(0,a.jsx)("h2",{children:"Awaiting Specialty Review"}),content:(0,a.jsx)(C,{onSubmit:S})},{id:"medications",title:(0,a.jsx)("h2",{children:"Prescribe Medications"}),content:(0,a.jsx)(u.a,{})}];return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(p.M,{sections:D})})})}function C({onSubmit:e}){return(0,a.jsx)(n.sc,{sx:{p:3},children:(0,a.jsx)(n.PD,{initialValues:y,validationSchema:v,onSubmit:e,submitButtonText:"Submit",children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.el,{name:"specialtyDepartment",label:"Specialty Department",options:W,multiple:!1})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"reasonForReview",name:"reasonForReview",label:"Reason for Review",sx:{width:"100%"},multiline:!0,rows:4,placeholder:"Provide reason for review"})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.bZ,{name:"reviewDate",label:"Date Scheduled for Review",sx:{width:"100%"}})})]})})})}let Y=[{id:l.W.QECH,label:"QECH"},{id:l.W.COM,label:"COM"},{id:l.W.MTHUNZI,label:"Mthunzi"},{id:l.W.OTHER,label:"Other (Specify)"}],w=[{id:l.W.RELATIONSHIP_SPOUSE,label:"Spouse"},{id:l.W.RELATIONSHIP_PARENT,label:"Parent"},{id:l.W.RELATIONSHIP_SIBLING,label:"Sibling"},{id:l.W.RELATIONSHIP_UNCLE,label:"Uncle"},{id:l.W.RELATIONSHIP_COUSIN,label:"Cousin"},{id:l.W.RELATIONSHIP_OTHER,label:"Other"}],M=s.Ik({causeOfDeath:s.Yj().required("Cause of Death is required"),familyInformed:s.Yj().required("Please specify if family has been informed"),relationshipToDeceased:s.Yj().required("Relationship to Deceased is required"),mortuary:s.Yj().required("Mortuary is required"),lastOfficeConducted:s.Yj().required("Last office status is required"),healthWorkerName:s.Yj().required("Name of health worker is required"),lastOfficeDate:s.p6().required("Date and Time of Last Office is required")}),P={causeOfDeath:"",familyInformed:"",relationshipToDeceased:"",mortuary:"",lastOfficeConducted:"",healthWorkerName:"",lastOfficeDate:""};function L({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutate:i}=(0,d.jM)(),[s,h]=(0,r.useState)(void 0),{data:x}=(0,c.iu)(t.id),{ServerTime:A}=(0,m.useServerTime)(),b=async a=>{let r=A.getServerTimeString(),n=[{concept:l.W.DEATH,value:l.W.DEATH,obsDatetime:r,groupMembers:[{concept:l.W.CAUSE_OF_DEATH,value:a.causeOfDeath,obsDatetime:r},{concept:l.W.FAMILY_INFORMED,value:a.familyInformed,obsDatetime:r},{concept:l.W.RELATIONSHIP_TO_DECEASED,value:a.relationshipToDeceased,obsDatetime:r},{concept:l.W.MORTUARY,value:a.mortuary,obsDatetime:r},{concept:l.W.LAST_OFFICE_CONDUCTED,value:a.lastOfficeConducted,obsDatetime:r},{concept:l.W.NAME_OF_HEALTH_WORKER_WHO_CONDUCTED_LAST_OFFICE,value:a.healthWorkerName,obsDatetime:r},{concept:l.W.DATE_OF_LAST_OFFICE,value:a.lastOfficeDate,obsDatetime:r}]}],o={encounterType:l.fA.DISPOSITION,visit:s?.uuid,patient:t.id,encounterDatetime:r,obs:n};try{await i(o),e()}catch(e){console.error("Error submitting Death form information: ",e)}},E=[{id:"deathForm",title:(0,a.jsx)("h2",{children:"Death Form"}),content:(0,a.jsx)(F,{handleSubmit:b})},{id:"medication",title:(0,a.jsx)("h2",{children:"Medication"}),content:(0,a.jsx)(u.a,{})}];return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(p.M,{sections:E})})})}function F({handleSubmit:e}){return(0,a.jsx)(n.PD,{initialValues:P,validationSchema:M,onSubmit:e,submitButtonText:"Submit",children:(0,a.jsx)(n.sc,{sx:{p:3},children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"causeOfDeath",name:"causeOfDeath",label:"Cause of Death",placeholder:"Enter the cause of death",rows:4,multiline:!0,sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.b1,{name:"familyInformed",label:"Has the family been informed?",options:[{value:l.W.YES,label:"Yes"},{value:l.W.NO,label:"No"}]})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.el,{name:"relationshipToDeceased",label:"If yes, relationship to deceased",options:w,sx:{width:"100%"},multiple:!1})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.el,{name:"mortuary",label:"Mortuary to take the deceased",options:Y,sx:{width:"100%"},multiple:!1})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.b1,{name:"lastOfficeConducted",label:"Was the last office conducted?",options:[{value:l.W.YES,label:"Yes"},{value:l.W.NO,label:"No"}]})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.A8,{id:"healthWorkerName",name:"healthWorkerName",label:"Name of Health Worker who conducted the last office",placeholder:"Enter health worker's name",sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,md:6,children:(0,a.jsx)(n.bZ,{name:"lastOfficeDate",label:"Date of Last Office",sx:{width:"100%"}})})]})})})}let U=s.Ik({reasonForRefusal:s.Yj().required("Reason for refusal is required"),plansToReturn:s.Yj().required("Please select plans to return for treatment"),dateOfRefusal:s.p6().required("Date of refusal is required"),witnessName:s.Yj().required("Witness name is required")}),H={reasonForRefusal:"",plansToReturn:"",dateOfRefusal:"",witnessName:""};function q({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutate:i}=(0,d.jM)(),[s,h]=(0,r.useState)(void 0),{data:x}=(0,c.iu)(t.id),{ServerTime:A}=(0,m.useServerTime)(),b=async a=>{let r=A.getServerTimeString(),n=[{concept:l.W.REFUSED_HOSPITAL_TREATMENT,value:l.W.REFUSED_HOSPITAL_TREATMENT,obsDatetime:r,groupMembers:[{concept:l.W.REASON_FOR_REFUSAL,value:a.reasonForRefusal,obsDatetime:r},{concept:l.W.PLANS_TO_RETURN_FOR_TREATMENT,value:a.plansToReturn,obsDatetime:r},{concept:l.W.DATE_OF_REFUSAL,value:a.dateOfRefusal,obsDatetime:r},{concept:l.W.WITNESS_NAME,value:a.witnessName,obsDatetime:r}]}],o={encounterType:l.fA.DISPOSITION,visit:s?.uuid,patient:t.id,encounterDatetime:r,obs:n};try{await i(o),e()}catch(e){console.error("Error submitting Refused Treatment information: ",e)}},E=[{id:"refusedForm",title:(0,a.jsx)("h2",{children:"Refused Treatment Form"}),content:(0,a.jsx)(G,{handleSubmit:b})},{id:"medication",title:(0,a.jsx)("h2",{children:"Medication"}),content:(0,a.jsx)(u.a,{})}];return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(p.M,{sections:E})})})}function G({handleSubmit:e}){return(0,a.jsx)(n.PD,{initialValues:H,validationSchema:U,onSubmit:e,submitButtonText:"Submit",children:(0,a.jsx)(n.sc,{sx:{p:3},children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.A8,{id:"reasonForRefusal",name:"reasonForRefusal",label:"Reason for Refusal",placeholder:"Enter the reason for refusal",multiline:!0,rows:3,sx:{width:"100%"}}),(0,a.jsx)(n.b1,{name:"plansToReturn",label:"Plans to Return for Treatment",options:[{value:l.W.YES,label:"Yes"},{value:l.W.NO,label:"No"}],sx:{width:"100%"}}),(0,a.jsx)(n.bZ,{name:"dateOfRefusal",label:"Date of Refusal",width:"100%",sx:{my:"1rem"}}),(0,a.jsx)(n.A8,{id:"witnessName",name:"witnessName",label:"Witness Name",placeholder:"Enter name of witness",sx:{width:"100%"}})]})})})}var B=i(13670);let k=[{value:l.W.YES,label:"Yes"},{value:l.W.NO,label:"No"}],V=s.Ik({expectedDuration:s.ai().min(1,"Duration must be at least 1 hour").required("Expected Duration is required"),vitalSignsMonitoring:s.Yj().required("Vital Signs Monitoring option is required"),additionalNotes:s.Yj()}),K={expectedDuration:"",vitalSignsMonitoring:"",additionalNotes:""};function z({openPatientSummary:e}){let{params:t}=(0,o.KU)(),{mutate:i}=(0,d.jM)(),[s,p]=(0,r.useState)(void 0),{data:h}=(0,c.iu)(t.id),{mutate:x,isSuccess:A}=(0,B.FD)(),{navigateTo:b}=(0,o.cq)(),{init:E,ServerTime:S}=(0,m.useServerTime)(),D=async a=>{let r=S.getServerTimeString(),n=[{concept:l.W.SHORT_STAY,value:l.W.SHORT_STAY,obsDatetime:r,groupMembers:[{concept:l.W.EXPECTED_DURATION,value:a.expectedDuration,obsDatetime:r},{concept:l.W.VITAL_SIGNS,value:a.vitalSignsMonitoring,obsDatetime:r},{concept:l.W.SOAP_NOTES,value:a.additionalNotes,obsDatetime:r}]}],o={encounterType:l.fA.DISPOSITION,visit:s?.uuid,patient:t.id,encounterDatetime:r,obs:n};try{await i(o),e()}catch(e){console.error("Error submitting Short Stay information: ",e)}};return(0,a.jsx)(n.Yr,{container:!0,spacing:2,children:(0,a.jsxs)(n.Yr,{item:!0,xs:12,lg:8,children:[(0,a.jsx)(u.a,{}),(0,a.jsxs)(n.sc,{sx:{p:3},children:[(0,a.jsx)("h2",{children:"2. Short Stay Form"}),(0,a.jsx)(n.PD,{initialValues:K,validationSchema:V,onSubmit:D,submitButtonText:"Submit",children:(0,a.jsxs)(n.Yr,{container:!0,spacing:2,children:[(0,a.jsx)(n.Yr,{item:!0,xs:12,lg:6,children:(0,a.jsx)(n.A8,{id:"expectedDuration",name:"expectedDuration",label:"Expected Duration (in hours)",placeholder:"e.g., 2",type:"number",sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,lg:6,children:(0,a.jsx)(n.b1,{name:"vitalSignsMonitoring",label:"Will include vital signs monitoring?",options:k,sx:{width:"100%"}})}),(0,a.jsx)(n.Yr,{item:!0,xs:12,children:(0,a.jsx)(n.A8,{id:"additionalNotes",name:"additionalNotes",label:"Additional Notes (SOAP/Continuation Sheets)",placeholder:"Enter additional notes or observations",rows:4,multiline:!0,sx:{width:"100%"}})})]})})]})]})})}var X=i(20287);let $=[{id:l.W.DISCHARGE_HOME,label:"Discharge home"},{id:l.W.ADMISSION,label:"Admission"},{id:l.W.AWAITING_SPECIALITY_REVIEW,label:"Awaiting specialty review"},{id:l.W.DEATH,label:"Death"},{id:l.W.ABSCONDED,label:"Absconded"},{id:l.W.REFUSED_HOSPITAL_TREATMENT,label:"Refused hospital treatment"},{id:l.W.TRANSFER_OUT,label:"Transfer Out"}],Q=function(){let{navigateTo:e}=(0,o.cq)(),[t,i]=(0,r.useState)({dischargeNotes:"",dischargePlan:"",followUpDetails:"",followUpPlan:"",clinic:"",homeCareInstructions:""}),[s,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),m=()=>{d(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.TF,{}),(0,a.jsx)(n.oq,{}),(0,a.jsxs)(n.Yr,{container:!0,spacing:2,mt:"2ch",sx:{ml:16},children:[(0,a.jsx)(X.p,{initialNotes:t,onClose:()=>e("/dispositions"),open:s}),(0,a.jsx)(n.Yr,{item:!0,xs:12,lg:9,children:(0,a.jsxs)(n.sc,{elevation:0,sx:{p:"1ch"},children:[(0,a.jsx)("h2",{children:"Disposition"}),(0,a.jsxs)("select",{value:c||"",onChange:e=>u(e.target.value),style:{padding:"8px",width:"100%",marginBottom:"20px",fontSize:"16px"},children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select Disposition Option"}),$.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label},e.id))]}),(0,a.jsx)("div",{style:{marginTop:"20px"},children:(()=>{switch(c){case l.W.DISCHARGE_HOME:return(0,a.jsx)(E.Ay,{setInitialNotes:i,openPatientSummary:m});case l.W.AWAITING_SPECIALITY_REVIEW:return(0,a.jsx)(g,{openPatientSummary:m});case l.W.ADMISSION:return(0,a.jsx)(f,{openPatientSummary:m});case l.W.SHORT_STAY:return(0,a.jsx)(z,{openPatientSummary:m});case l.W.TRANSFER_OUT:return(0,a.jsx)(A,{openPatientSummary:m});case l.W.DEATH:return(0,a.jsx)(L,{openPatientSummary:m});case l.W.ABSCONDED:return(0,a.jsx)(_,{openPatientSummary:m});case l.W.REFUSED_HOSPITAL_TREATMENT:return(0,a.jsx)(q,{openPatientSummary:m});default:return null}})()})]})})]})]})}},33873:e=>{"use strict";e.exports=require("path")},35009:(e,t,i)=>{"use strict";i.d(t,{M:()=>c});var a=i(60687),r=i(43210),n=i(92438),s=i(38963),l=i(22286),o=i(78590),d=i(89061);function c({sections:e}){let[t,i]=r.useState(!1),c=e=>(t,a)=>{i(!!a&&e)};return(0,a.jsx)("div",{children:e.map(({id:e,title:i,content:r})=>(0,a.jsxs)(n.A,{expanded:t===e,onChange:c(e),children:[(0,a.jsx)(l.A,{expandIcon:(0,a.jsx)(d.Odn,{}),"aria-controls":`${e}-content`,id:`${e}-header`,children:(0,a.jsx)(o.default,{sx:{width:"33%",flexShrink:0,fontWeight:600},children:i})}),(0,a.jsx)(s.A,{children:r})]},e))})}},42533:(e,t,i)=>{"use strict";i.d(t,{fS:()=>E,G5:()=>b,Xt:()=>x,Jl:()=>h,RO:()=>A});var a=i(42938),r=i(60579),n=i(62116);let s=e=>c(e),l=()=>c(a.W.INVESTIGATIONS),o=e=>(0,r.vt)(e,"/lab/orders"),d=e=>(0,r.UK)(`/lab/orders?patient=${e}`),c=async e=>{let t=await (0,n.cr)(e);return(0,r.UK)(`/concepts/${t?.data[0].uuid}/set_members?paginate=false`)};var u=i(29494),m=i(8693),p=i(54050);let h=e=>{let t=async()=>s(e).then(e=>e.data.filter(e=>e.names.length>0&&e.names.some(e=>e?.name)).map(e=>({...e,name:e.names.find(e=>e?.name)?.name})).sort((e,t)=>e.name.localeCompare(t.name)));return(0,u.I)({queryKey:["testTypes",e],queryFn:t,enabled:!0})},x=()=>{let e=async()=>l().then(e=>e.data.sort((e,t)=>e.names[0].name.localeCompare(t.names[0].name)));return(0,u.I)({queryKey:["getSpecimenTypes"],queryFn:e,enabled:!0})},A=e=>{let t=async()=>d(e).then(e=>e.data);return(0,u.I)({queryKey:["patientsOrder",e],queryFn:t,enabled:!0})},b=e=>{let t=async()=>c(e).then(e=>e.data);return(0,u.I)({queryKey:["concept-setMembers",e],queryFn:t,enabled:!1})},E=e=>{let t=(0,m.jE)();return(0,p.n)({mutationFn:e=>o(e).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patientsOrder"]})}})}},46055:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var a=i(31658);let r=async e=>[{type:"image/x-icon",sizes:"305x298",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},53041:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});let a=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/patient/[id]/disposition/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/patient/[id]/disposition/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57470:(e,t,i)=>{Promise.resolve().then(i.bind(i,31561))},60931:(e,t,i)=>{"use strict";i.d(t,{h:()=>s});var a=i(60687),r=i(28274),n=i(71953);let s=({loading:e,children:t,height:i="100%"})=>(0,a.jsxs)(r.default,{sx:{position:"relative",width:"100%",height:i},children:[e&&(0,a.jsx)(r.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,a.jsx)(n.A,{})}),(0,a.jsx)(r.default,{sx:{opacity:e?.5:1,pointerEvents:e?"none":"auto"},children:t})]})},62198:(e,t,i)=>{Promise.resolve().then(i.bind(i,53041))},62764:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var a=i(60687),r=i(60931),n=i(19194),s=i(42938),l=i(48807),o=i(94482),d=i(99108),c=i(61939),u=i(62116),m=i(50772),p=i(43210);let h=({setRow:e,encounterType:t=s.fA.PRESCRIPTIONS,medicationLabelTitle:i,showPrintButton:h=!0})=>{let{patientId:x,activeVisitId:A}=(0,c.gd)(),{setZpl:b,setOpen:E}=(0,l.m)(),{selectedVisit:S}=(0,o.E)(),{data:D,isPending:_}=(0,u.$O)(x,`encounter_type=${t}&visit=${S?.uuid}`),[T,f]=(0,p.useState)([]),N=(e,t)=>e?.children?.find(e=>e.names&&e.names[0].name==t)?.value;return(0,p.useEffect)(()=>{let e=D?.filter(e=>e.visit_id==Number(A));if(!e||0==e.length)return void f([]);f(e[0]?.obs.filter(e=>e?.names&&e?.names[0].name==s.W.DRUG_GIVEN).map(e=>{let t=N(e,s.l8.MEDICATION_DURATION_UNIT),i=N(e,s.W.MEDICATION_DOSE),a=N(e,s.l8.DESCRIPTION),r=N(e,s.l8.MEDICATION_FORMULATION),n=N(e,s.l8.MEDICATION_DOSE_UNIT),l=N(e,s.l8.MEDICATION_FREQUENCY),o=N(e,s.l8.MEDICATION_DURATION)+" "+t,d=e.value_coded_uuid;return{medicationName:e.value,durationUnit:t,dose:i,doseUnits:n,frequency:l,duration:o,formulation:r,description:a,prescribedBy:e.created_by,medicationUUID:d}}).filter(e=>"current"==e.description))},[D]),(0,a.jsxs)(r.h,{loading:_,children:[h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{onClick:()=>{let e=(0,d.B)(T,i);E(e),b(e)},variant:"contained",children:"Print Medications"}),(0,a.jsx)("br",{})]}),(0,a.jsx)(n.q,{getSelectedRow:e,columns:[{label:"Medication Name",field:"medicationName"},{label:"Dose",field:"dose"},{label:"Frequency",field:"frequency"},{label:"Duration",field:"duration"},{label:"Formulation",field:"formulation"},{label:"Prescriber",field:"prescribedBy"}],data:T})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},75030:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=i(65239),r=i(48088),n=i(88170),s=i.n(n),l=i(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let d={children:["",{children:["patient",{children:["[id]",{children:["disposition",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,53041)),"/Users/pk/App/hwis/aetc/app/patient/[id]/disposition/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(i.bind(i,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/pk/App/hwis/aetc/app/patient/[id]/disposition/page.tsx"],u={require:i,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/patient/[id]/disposition/page",pathname:"/patient/[id]/disposition",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},76831:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var a=i(62116),r=i(29494);let n=e=>{let t=async()=>{let t=await (0,a.P$)(e);return t.data?.length?t.data[0].set_members.map(({names:e})=>({name:e[0]?.name||"Unknown",uuid:e[0]?.uuid||"N/A"})):[]};return(0,r.I)({queryKey:[e],queryFn:t,enabled:!!e})}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),a=t.X(0,[4447,6724,346,1658,485,8142,4138,1146,287,7332],()=>i(75030));module.exports=a})();