(()=>{var e={};e.id=7991,e.ids=[7991],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5608:(e,t,r)=>{"use strict";r.d(t,{VQ:()=>n,kC:()=>l,sL:()=>a,uQ:()=>o});var s=r(60687),i=r(75018);let a=({children:e,id:t})=>(0,s.jsx)(i.Th,{id:t,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:e}),n=({children:e})=>(0,s.jsx)(i.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:e}),l=({children:e,sx:t})=>(0,s.jsx)(i.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...t},children:e}),o=({children:e})=>(0,s.jsx)(i.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:e})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},13670:(e,t,r)=>{"use strict";r.d(t,{b2:()=>d,FD:()=>u,qv:()=>p});var s=r(44504),i=r(60579);let a="visits",n=e=>(0,i.vt)(e,a),l=(e,t)=>(0,i.hc)(e,t,a);var o=r(8693),c=r(54050);let d=()=>{let e=(0,o.jE)();return(0,c.n)({mutationFn:e=>n(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},u=()=>{let{ServerTime:e}=(0,s.useServerTime)(),t=async t=>l(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,c.n)({mutationFn:t})},p=e=>{let t=(0,o.jE)();return(0,c.n)({mutationFn:e=>l(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23818:(e,t,r)=>{"use strict";r.d(t,{n:()=>d});var s=r(60687);r(43210);var i=r(109),a=r(28274),n=r(1556),l=r(12058),o=r(75018);let c=(0,i.Ay)(n.A)(({theme:e})=>({height:10,borderRadius:5,[`&.${l.A.colorPrimary}`]:{backgroundColor:e.palette.grey["light"===e.palette.mode?200:800]},[`& .${l.A.bar}`]:{borderRadius:5,backgroundColor:e.palette.primary}}));function d({message:e,progress:t}){return(0,s.jsxs)(a.default,{sx:{flexGrow:1},children:[(0,s.jsx)(c,{variant:"determinate",value:t}),(0,s.jsx)(o.Th,{fontStyle:"italic",children:e})]})}},27616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/triage/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/triage/page.tsx","default")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34987:(e,t,r)=>{"use strict";r.d(t,{R:()=>u});var s=r(60687),i=r(43210),a=r(75018),n=r(13670),l=r(23641),o=r(12040),c=r(58706),d=r(18299);let u=({patientId:e,visitId:t,onDelete:r,sx:u,dialogTitle:p="Abscond Patient",dialogConfirmationMsg:x="Are you sure the patient absconded?",buttonTitle:h="Abscond"})=>{let{mutate:m,isPending:g,isSuccess:f}=(0,n.FD)(),[j,v]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{f&&r()},[f]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{title:"Mark as absconded",arrow:!0,children:(0,s.jsx)(c.default,{onClick:()=>{v(!0)},"aria-label":"abscond",children:(0,s.jsx)(d.axc,{})})}),(0,s.jsxs)(a.eV,{maxWidth:"sm",title:p,open:j,onClose:()=>v(!1),children:[(0,s.jsx)(l.OverlayLoader,{open:g}),(0,s.jsx)(a.Th,{children:x}),(0,s.jsx)("br",{}),(0,s.jsx)(a.O6,{title:"Yes",onClick:()=>{m(t)}}),(0,s.jsx)(a.O6,{sx:{ml:.3},variant:"secondary",title:"No",onClick:()=>v(!1)})]})]})}},39580:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var s=r(43210),i=r(92592);let a=(e,t)=>{let[r,i]=(0,s.useState)({page:0,pageSize:10}),[a,l]=(0,s.useState)(""),[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[p,x]=(0,s.useState)(0),[h,m]=(0,s.useState)(0),[g,f]=(0,s.useState)(!1),j=(0,s.useCallback)(async()=>{let s;u(!0),g&&(s=new Date().toISOString().split("T")[0]);try{let i=await n(e,r.pageSize,a,r.page+1,s||"",t);c(i.data.data),x(i.data.total_pages),m(i.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{u(!1)}},[e,r.pageSize,a,r.page,g]);return(0,s.useEffect)(()=>{j()},[j]),{loading:d,patients:o,paginationModel:r,setPaginationModel:i,searchText:a,setSearchText:l,totalPages:p,totalEntries:h,setOnSwitch:f,refetch:(0,s.useCallback)(()=>{j()},[j])}},n=async(e,t,r,s,a,n)=>{let l=`category=${e}&page=${s}&page_size=${t}&search=${r}&date=${a}`;return n&&(l=`category=${e}&paginate=false&patient_care_area=${encodeURIComponent(n)}`),await (0,i.P8)(l)}},40035:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var s=r(43210);function i(e,t){let[r,i]=(0,s.useState)(e);return r}},50977:(e,t,r)=>{Promise.resolve().then(r.bind(r,27616))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55822:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(65239),i=r(48088),a=r(88170),n=r.n(a),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c={children:["",{children:["triage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,27616)),"/Users/pk/App/hwis/aetc/app/triage/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/pk/App/hwis/aetc/app/triage/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/triage/page",pathname:"/triage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68114:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(60687),i=r(40589),a=r(75018),n=r(5608),l=r(85121),o=r(77391),c=r(42938);let d=(0,o.A)(function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.V,{title:"Patients waiting for Triage",link:"/dashboard"}),(0,s.jsxs)(a.Yr,{container:!0,children:[(0,s.jsx)(a.Yr,{xs:0,lg:0,item:!0}),(0,s.jsxs)(a.Yr,{xs:12,lg:12,sx:{display:"flex",flexDirection:"column",mx:"2ch"},item:!0,children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(n.sL,{children:"Patients waiting for Triage"}),(0,s.jsx)(n.VQ,{children:"This is a list of all patients that went through registration successfully and waiting for triage."}),(0,s.jsx)(n.kC,{sx:{p:0},children:(0,s.jsx)(i.uM,{})})]}),(0,s.jsx)(a.Yr,{lg:0,item:!0})]})]})},[c.Ot.CLINICIAN,c.Ot.NURSE,c.Ot.ADMIN,c.Ot.STUDENT_CLINICIAN])},74075:e=>{"use strict";e.exports=require("zlib")},76831:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var s=r(62116),i=r(29494);let a=e=>{let t=async()=>{let t=await (0,s.P$)(e);return t.data?.length?t.data[0].set_members.map(({names:e})=>({name:e[0]?.name||"Unknown",uuid:e[0]?.uuid||"N/A"})):[]};return(0,i.I)({queryKey:[e],queryFn:t,enabled:!!e})}},77575:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var s=r(60687),i=r(75018),a=r(30474);let n=({error:e,onPrimaryAction:t,onSecondaryAction:r})=>(0,s.jsxs)(i.jD,{sx:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)(a.default,{width:150,height:150,src:"/error.png",alt:"error"}),(0,s.jsx)("br",{}),(0,s.jsxs)(i.Th,{variant:"body2",children:["Error occurred whilst ",(0,s.jsx)("strong",{children:e})]}),(0,s.jsx)("br",{}),(0,s.jsxs)(i.jD,{sx:{display:"flex"},children:[(0,s.jsx)(i.O6,{onClick:t,title:"retry",sx:{mr:"0.5ch"}}),(0,s.jsx)(i.O6,{onClick:r,title:"cancel",variant:"secondary"})]})]})},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82373:(e,t,r)=>{"use strict";r.d(t,{WL:()=>C,Yc:()=>h,k2:()=>S,jx:()=>m});var s=r(60687),i=r(75018),a=r(50727),n=r(43210),l=r(69587),o=r(80222),c=r(12040),d=r(58706),u=r(12755),p=r(42503),x=r(92592);let h=({firstName:e,lastName:t,identifiers:r,addresses:c})=>{let[d,p]=(0,n.useState)("http://localhost:3000"),[x,h]=(0,n.useState)(()=>{}),{data:m,isLoading:g}=(0,u.Ay)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.Nt,{printer:d,setTriggerFunc:e=>h(e),value:(0,o.lA)(r),children:[(0,s.jsx)(i.Th,{fontWeight:"600",variant:"h4",children:`${e} ${t} ~ ${(0,o.lA)(r)}`}),(0,s.jsx)(i.Th,{fontSize:30,children:c&&c[0]?`${c[0]?.address1}, ${c[0]?.address2}, ${c[0]?.address3}`:""})]}),(0,s.jsx)("br",{}),(0,s.jsx)(l.x,{getValue:e=>{p(e)},label:"Select Printer",options:m?m?.map(e=>({value:e.ip_address,label:e.name})):[]}),(0,s.jsx)("br",{}),(0,s.jsx)(i.O6,{sx:{color:"#000"},title:"Print Barcode",variant:"text",onClick:()=>{let e=x();"function"==typeof e&&e()}})]})},m=({uuid:e,sx:t,onClose:r,variant:a="secondary",title:l="Print",icon:o})=>{let[u,m]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null),j=async()=>{if(e){let t=await (0,x.kb)(e);f(t?.data)}};return(0,n.useEffect)(()=>{u&&j()},[u]),(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)(c.A,{title:"Print",arrow:!0,children:(0,s.jsx)(d.default,{onClick:()=>m(!0),"aria-label":"Print",sx:{color:"#015E85"},children:(0,s.jsx)(p.ebz,{})})}),!o&&(0,s.jsx)(i.O6,{size:"small",variant:a,sx:{fontSize:"12px",ml:"1px",...t},title:l,icon:o,onClick:()=>m(!0)}),(0,s.jsx)(i.eV,{open:u,onClose:()=>{m(!1),r&&r()},title:"Print Patient Barcode",children:g&&(0,s.jsx)(h,{firstName:g.given_name,lastName:g.family_name,addresses:g.addresses,identifiers:g.identifiers})})]})};var g=r(35127),f=r(62116),j=r(50772),v=r(42938),y=r(37322),b=r(88794);let S=e=>(0,s.jsx)(g.GenericDialog,{maxWidth:"sm",open:e.open,onClose:e.onClose,title:"Print Triage details",children:(0,s.jsx)(a.Wd,{presentingComplaints:e.presentingComplaints,triageCategory:e.triageCategory,date:e.date,arrivalTime:e.arrivalTime,referredFrom:e.referredFrom,triagedBy:e.triagedBy,vitals:e.vitals})}),C=({patientId:e,activeVisitId:t,arrivalDateTime:r})=>{let{data:i,isLoading:a}=(0,f.$O)(e,`encounter_type=${v.fA.REFERRAL}`),{data:l,isLoading:c}=(0,f.$O)(e,`encounter_type=${v.fA.VITALS}`),{data:d,isLoading:u}=(0,f.$O)(e,`encounter_type=${v.fA.PRESENTING_COMPLAINTS}`),{data:p,isLoading:x}=(0,f.$O)(e,`encounter_type=${v.fA.TRIAGE_RESULT}`),[h,m]=(0,n.useState)([]),[g,C]=(0,n.useState)(""),[A,k]=(0,n.useState)(""),[P,D]=(0,n.useState)(""),[T,_]=(0,n.useState)(""),[q,w]=(0,n.useState)(""),[E,$]=(0,n.useState)(!1);(0,n.useEffect)(()=>{R()},[i,d,p,l]);let R=()=>{let e=I(i);k(e?(0,o.m)(e?.obs,v.W.REFERRED_FROM):"");let t=I(d);console.log({presentingComplaints:t}),C(t?.obs.reduce((e,t)=>""==e?t.value:e+","+t.value,""));let r=I(p);D(r?.obs[0].value),_((0,b.rX)(r?.encounter_datetime)),w(r?.created_by);let s=I(l)?.obs??[];m([{name:y.D.saturationRate.short,value:(0,o.m)(s,y.D.saturationRate.name)},{name:y.D.heartRate.short,value:(0,o.m)(s,y.D.heartRate.name)},{name:y.D.bloodPressure.short,value:`${(0,o.m)(s,y.D.bloodPressure.name)}/${(0,o.m)(s,y.D.bloodPressureDiastolic.name)}`},{name:y.D.respiratoryRate.short,value:(0,o.m)(s,y.D.respiratoryRate.name)},{name:y.D.temperature.short,value:(0,o.m)(s,y.D.temperature.name)},{name:y.D.avpu.label,value:(0,o.m)(s,y.D.avpu.name)},{name:`${y.D.glucose.label}(${(0,o.m)(s,y.D.units.name)}`,value:(0,o.m)(s,y.D.glucose.name)}])},I=e=>e?.find(e=>e.visit.uuid==t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{variant:"text",sx:{fontSize:"12px",color:"ButtonText",textTransform:"capitalize",textAlign:"left"},onClick:()=>$(!0),children:"Triage"}),(0,s.jsx)(S,{arrivalTime:(0,b.rX)(r),open:E,onClose:()=>$(!1),triageCategory:P,triagedBy:q,referredFrom:A,date:T,presentingComplaints:g,vitals:h})]})}},83997:e=>{"use strict";e.exports=require("tty")},85121:(e,t,r)=>{"use strict";r.d(t,{V:()=>l});var s=r(60687),i=r(61939),a=r(75018),n=r(89061);let l=({title:e,link:t})=>{let{navigateTo:r}=(0,i.cq)(),l={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,s.jsxs)(a.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,s.jsxs)(a.jD,{onClick:()=>r(t),sx:{display:"flex",cursor:"pointer"},children:[(0,s.jsx)(a.Th,{children:(0,s.jsx)(n.oWm,{})}),(0,s.jsx)(a.Th,{sx:l,children:"Go back"})]}),(0,s.jsx)(a.Th,{sx:l,children:e}),(0,s.jsxs)(a.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(n.M4e,{}),(0,s.jsx)(a.Th,{sx:l,children:"Need any help?"})]})]})}},87425:(e,t,r)=>{Promise.resolve().then(r.bind(r,68114))},91645:e=>{"use strict";e.exports=require("net")},93251:(e,t,r)=>{"use strict";r.d(t,{n:()=>o});var s=r(60687),i=r(28274),a=r(78590),n=r(89061),l=r(75018);function o({title:e,primaryActionText:t,secondaryActionText:r,onPrimaryAction:o,onSecondaryAction:c,printButton:d}){return(0,s.jsx)(i.default,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",children:(0,s.jsxs)(i.default,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(a.default,{variant:"h1",color:"green",children:(0,s.jsx)(n.cxC,{})}),(0,s.jsx)(a.default,{variant:"h5",fontWeight:"500",children:e}),(0,s.jsxs)(i.default,{mt:"2ch",sx:{display:"flex"},children:[(0,s.jsx)(l.O6,{onClick:o,title:t}),(0,s.jsx)(l.O6,{variant:"secondary",sx:{ml:"0.5ch"},onClick:c,title:r}),d]})]})})}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,6724,346,1658,485,7567,8142,7549,2503,74,1146,4431,8431,6318,5806,3458],()=>r(55822));module.exports=s})();