(()=>{var e={};e.id=5368,e.ids=[5368],e.modules={746:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u={children:["",{children:["triage",{children:["[id]",{children:["start",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,94443)),"/Users/pk/App/hwis/aetc/app/triage/[id]/start/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20800)),"/Users/pk/App/hwis/aetc/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,52608)),"/Users/pk/App/hwis/aetc/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/pk/App/hwis/aetc/app/triage/[id]/start/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/triage/[id]/start/page",pathname:"/triage/[id]/start",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4984:(e,t,r)=>{Promise.resolve().then(r.bind(r,94443))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},13670:(e,t,r)=>{"use strict";r.d(t,{b2:()=>d,FD:()=>c,qv:()=>p});var s=r(44504),a=r(60579);let i="visits",n=e=>(0,a.vt)(e,i),o=(e,t)=>(0,a.hc)(e,t,i);var l=r(8693),u=r(54050);let d=()=>{let e=(0,l.jE)();return(0,u.n)({mutationFn:e=>n(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},c=()=>{let{ServerTime:e}=(0,s.useServerTime)(),t=async t=>o(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,u.n)({mutationFn:t})},p=e=>{let t=(0,l.jE)();return(0,u.n)({mutationFn:e=>o(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23818:(e,t,r)=>{"use strict";r.d(t,{n:()=>d});var s=r(60687);r(43210);var a=r(109),i=r(28274),n=r(1556),o=r(12058),l=r(75018);let u=(0,a.Ay)(n.A)(({theme:e})=>({height:10,borderRadius:5,[`&.${o.A.colorPrimary}`]:{backgroundColor:e.palette.grey["light"===e.palette.mode?200:800]},[`& .${o.A.bar}`]:{borderRadius:5,backgroundColor:e.palette.primary}}));function d({message:e,progress:t}){return(0,s.jsxs)(i.default,{sx:{flexGrow:1},children:[(0,s.jsx)(u,{variant:"determinate",value:t}),(0,s.jsx)(l.Th,{fontStyle:"italic",children:e})]})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34987:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var s=r(60687),a=r(43210),i=r(75018),n=r(13670),o=r(23641),l=r(12040),u=r(58706),d=r(18299);let c=({patientId:e,visitId:t,onDelete:r,sx:c,dialogTitle:p="Abscond Patient",dialogConfirmationMsg:x="Are you sure the patient absconded?",buttonTitle:m="Abscond"})=>{let{mutate:h,isPending:f,isSuccess:g}=(0,n.FD)(),[v,j]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{g&&r()},[g]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{title:"Mark as absconded",arrow:!0,children:(0,s.jsx)(u.default,{onClick:()=>{j(!0)},"aria-label":"abscond",children:(0,s.jsx)(d.axc,{})})}),(0,s.jsxs)(i.eV,{maxWidth:"sm",title:p,open:v,onClose:()=>j(!1),children:[(0,s.jsx)(o.OverlayLoader,{open:f}),(0,s.jsx)(i.Th,{children:x}),(0,s.jsx)("br",{}),(0,s.jsx)(i.O6,{title:"Yes",onClick:()=>{h(t)}}),(0,s.jsx)(i.O6,{sx:{ml:.3},variant:"secondary",title:"No",onClick:()=>j(!1)})]})]})}},39580:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var s=r(43210),a=r(92592);let i=(e,t)=>{let[r,a]=(0,s.useState)({page:0,pageSize:10}),[i,o]=(0,s.useState)(""),[l,u]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),[p,x]=(0,s.useState)(0),[m,h]=(0,s.useState)(0),[f,g]=(0,s.useState)(!1),v=(0,s.useCallback)(async()=>{let s;c(!0),f&&(s=new Date().toISOString().split("T")[0]);try{let a=await n(e,r.pageSize,i,r.page+1,s||"",t);u(a.data.data),x(a.data.total_pages),h(a.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{c(!1)}},[e,r.pageSize,i,r.page,f]);return(0,s.useEffect)(()=>{v()},[v]),{loading:d,patients:l,paginationModel:r,setPaginationModel:a,searchText:i,setSearchText:o,totalPages:p,totalEntries:m,setOnSwitch:g,refetch:(0,s.useCallback)(()=>{v()},[v])}},n=async(e,t,r,s,i,n)=>{let o=`category=${e}&page=${s}&page_size=${t}&search=${r}&date=${i}`;return n&&(o=`category=${e}&paginate=false&patient_care_area=${encodeURIComponent(n)}`),await (0,a.P8)(o)}},39832:(e,t,r)=>{Promise.resolve().then(r.bind(r,83773))},40035:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var s=r(43210);function a(e,t){let[r,a]=(0,s.useState)(e);return r}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},76831:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});var s=r(62116),a=r(29494);let i=e=>{let t=async()=>{let t=await (0,s.P$)(e);return t.data?.length?t.data[0].set_members.map(({names:e})=>({name:e[0]?.name||"Unknown",uuid:e[0]?.uuid||"N/A"})):[]};return(0,a.I)({queryKey:[e],queryFn:t,enabled:!!e})}},77575:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var s=r(60687),a=r(75018),i=r(30474);let n=({error:e,onPrimaryAction:t,onSecondaryAction:r})=>(0,s.jsxs)(a.jD,{sx:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)(i.default,{width:150,height:150,src:"/error.png",alt:"error"}),(0,s.jsx)("br",{}),(0,s.jsxs)(a.Th,{variant:"body2",children:["Error occurred whilst ",(0,s.jsx)("strong",{children:e})]}),(0,s.jsx)("br",{}),(0,s.jsxs)(a.jD,{sx:{display:"flex"},children:[(0,s.jsx)(a.O6,{onClick:t,title:"retry",sx:{mr:"0.5ch"}}),(0,s.jsx)(a.O6,{onClick:r,title:"cancel",variant:"secondary"})]})]})},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82373:(e,t,r)=>{"use strict";r.d(t,{WL:()=>C,Yc:()=>m,k2:()=>S,jx:()=>h});var s=r(60687),a=r(75018),i=r(50727),n=r(43210),o=r(69587),l=r(80222),u=r(12040),d=r(58706),c=r(12755),p=r(42503),x=r(92592);let m=({firstName:e,lastName:t,identifiers:r,addresses:u})=>{let[d,p]=(0,n.useState)("http://localhost:3000"),[x,m]=(0,n.useState)(()=>{}),{data:h,isLoading:f}=(0,c.Ay)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.Nt,{printer:d,setTriggerFunc:e=>m(e),value:(0,l.lA)(r),children:[(0,s.jsx)(a.Th,{fontWeight:"600",variant:"h4",children:`${e} ${t} ~ ${(0,l.lA)(r)}`}),(0,s.jsx)(a.Th,{fontSize:30,children:u&&u[0]?`${u[0]?.address1}, ${u[0]?.address2}, ${u[0]?.address3}`:""})]}),(0,s.jsx)("br",{}),(0,s.jsx)(o.x,{getValue:e=>{p(e)},label:"Select Printer",options:h?h?.map(e=>({value:e.ip_address,label:e.name})):[]}),(0,s.jsx)("br",{}),(0,s.jsx)(a.O6,{sx:{color:"#000"},title:"Print Barcode",variant:"text",onClick:()=>{let e=x();"function"==typeof e&&e()}})]})},h=({uuid:e,sx:t,onClose:r,variant:i="secondary",title:o="Print",icon:l})=>{let[c,h]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),v=async()=>{if(e){let t=await (0,x.kb)(e);g(t?.data)}};return(0,n.useEffect)(()=>{c&&v()},[c]),(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(u.A,{title:"Print",arrow:!0,children:(0,s.jsx)(d.default,{onClick:()=>h(!0),"aria-label":"Print",sx:{color:"#015E85"},children:(0,s.jsx)(p.ebz,{})})}),!l&&(0,s.jsx)(a.O6,{size:"small",variant:i,sx:{fontSize:"12px",ml:"1px",...t},title:o,icon:l,onClick:()=>h(!0)}),(0,s.jsx)(a.eV,{open:c,onClose:()=>{h(!1),r&&r()},title:"Print Patient Barcode",children:f&&(0,s.jsx)(m,{firstName:f.given_name,lastName:f.family_name,addresses:f.addresses,identifiers:f.identifiers})})]})};var f=r(35127),g=r(62116),v=r(50772),j=r(42938),y=r(37322),b=r(88794);let S=e=>(0,s.jsx)(f.GenericDialog,{maxWidth:"sm",open:e.open,onClose:e.onClose,title:"Print Triage details",children:(0,s.jsx)(i.Wd,{presentingComplaints:e.presentingComplaints,triageCategory:e.triageCategory,date:e.date,arrivalTime:e.arrivalTime,referredFrom:e.referredFrom,triagedBy:e.triagedBy,vitals:e.vitals})}),C=({patientId:e,activeVisitId:t,arrivalDateTime:r})=>{let{data:a,isLoading:i}=(0,g.$O)(e,`encounter_type=${j.fA.REFERRAL}`),{data:o,isLoading:u}=(0,g.$O)(e,`encounter_type=${j.fA.VITALS}`),{data:d,isLoading:c}=(0,g.$O)(e,`encounter_type=${j.fA.PRESENTING_COMPLAINTS}`),{data:p,isLoading:x}=(0,g.$O)(e,`encounter_type=${j.fA.TRIAGE_RESULT}`),[m,h]=(0,n.useState)([]),[f,C]=(0,n.useState)(""),[A,P]=(0,n.useState)(""),[k,_]=(0,n.useState)(""),[q,D]=(0,n.useState)(""),[$,w]=(0,n.useState)(""),[E,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{T()},[a,d,p,o]);let T=()=>{let e=O(a);P(e?(0,l.m)(e?.obs,j.W.REFERRED_FROM):"");let t=O(d);console.log({presentingComplaints:t}),C(t?.obs.reduce((e,t)=>""==e?t.value:e+","+t.value,""));let r=O(p);_(r?.obs[0].value),D((0,b.rX)(r?.encounter_datetime)),w(r?.created_by);let s=O(o)?.obs??[];h([{name:y.D.saturationRate.short,value:(0,l.m)(s,y.D.saturationRate.name)},{name:y.D.heartRate.short,value:(0,l.m)(s,y.D.heartRate.name)},{name:y.D.bloodPressure.short,value:`${(0,l.m)(s,y.D.bloodPressure.name)}/${(0,l.m)(s,y.D.bloodPressureDiastolic.name)}`},{name:y.D.respiratoryRate.short,value:(0,l.m)(s,y.D.respiratoryRate.name)},{name:y.D.temperature.short,value:(0,l.m)(s,y.D.temperature.name)},{name:y.D.avpu.label,value:(0,l.m)(s,y.D.avpu.name)},{name:`${y.D.glucose.label}(${(0,l.m)(s,y.D.units.name)}`,value:(0,l.m)(s,y.D.glucose.name)}])},O=e=>e?.find(e=>e.visit.uuid==t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{variant:"text",sx:{fontSize:"12px",color:"ButtonText",textTransform:"capitalize",textAlign:"left"},onClick:()=>R(!0),children:"Triage"}),(0,s.jsx)(S,{arrivalTime:(0,b.rX)(r),open:E,onClose:()=>R(!1),triageCategory:k,triagedBy:$,referredFrom:A,date:q,presentingComplaints:f,vitals:m})]})}},83773:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(60687),a=r(75018),i=r(41110),n=r(77391),o=r(42938);let l=(0,n.A)(function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.TF,{}),(0,s.jsx)(a.MG,{children:(0,s.jsx)(i.A,{})})]})},[o.Ot.CLINICIAN,o.Ot.NURSE,o.Ot.ADMIN])},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},93251:(e,t,r)=>{"use strict";r.d(t,{n:()=>l});var s=r(60687),a=r(28274),i=r(78590),n=r(89061),o=r(75018);function l({title:e,primaryActionText:t,secondaryActionText:r,onPrimaryAction:l,onSecondaryAction:u,printButton:d}){return(0,s.jsx)(a.default,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",children:(0,s.jsxs)(a.default,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(i.default,{variant:"h1",color:"green",children:(0,s.jsx)(n.cxC,{})}),(0,s.jsx)(i.default,{variant:"h5",fontWeight:"500",children:e}),(0,s.jsxs)(a.default,{mt:"2ch",sx:{display:"flex"},children:[(0,s.jsx)(o.O6,{onClick:l,title:t}),(0,s.jsx)(o.O6,{variant:"secondary",sx:{ml:"0.5ch"},onClick:u,title:r}),d]})]})})}},94443:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pk/App/hwis/aetc/app/triage/[id]/start/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pk/App/hwis/aetc/app/triage/[id]/start/page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,6724,346,1658,485,7567,8142,7549,2503,74,1146,4431,8431,6318,5806,3458],()=>r(746));module.exports=s})();