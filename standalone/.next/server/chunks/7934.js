"use strict";exports.id=7934,exports.ids=[7934],exports.modules={37242:(a,b,c)=>{c.d(b,{SE:()=>v,Nt:()=>r,Wd:()=>t});var d=c(21124),e=c(38301),f=c(50175),g=c.n(f),h=c(80350),i=c(28288),j=c(29685),k=c.n(j),l=c(12989),m=c(81637),n=c(79515),o=c(46468),p=c(81604);let q=({getValue:a})=>{let[b,c]=(0,e.useState)("http://localhost:3000"),{data:f,isLoading:g}=(0,p.Ay)();return(0,e.useEffect)(()=>{a(b)},[b]),(0,d.jsx)(o.x,{getValue:a=>{c(a)},label:"Select Printer",options:f?f?.map(a=>({value:a.ip_address,label:a.name})):[]})},r=({value:a,children:b,setTriggerFunc:c,printer:f,orderDate:j})=>{let k=(0,e.useRef)(null);return(0,e.useEffect)(()=>{let a=async()=>{let a=document.getElementById("barcode");a&&s("test",await i.mo(a),f)};c(()=>a)},[f]),(0,d.jsx)(h.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,d.jsx)("div",{id:"barcode",children:(0,d.jsxs)(h.jD,{sx:{pb:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},ref:k,children:[b,(0,d.jsx)(g(),{width:6,height:120,margin:0,displayValue:!1,value:a})]})})})},s=async(a,b,c)=>{let d=b.toDataURL("image/png");try{let a=await k().encode(d),b=`^XA^FO20,20${a}^XZ`;await l.A.post(`${c}/print`,{zpl:b})}catch(a){console.error("Error encoding image to ZPL:",a)}},t=({presentingComplaints:a,vitals:b,date:c,arrivalTime:f,referredFrom:g,triageCategory:j,triagedBy:k})=>{let[l,p]=(0,e.useState)(""),[r,t]=(0,e.useState)(""),v=async()=>{let a=document.getElementById("triage");a&&s("test",await i.mo(a),l)};return(0,d.jsxs)(m.default,{children:[(0,d.jsx)("div",{id:"triage",children:(0,d.jsx)(h.jD,{sx:{p:"5px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,d.jsxs)(m.default,{sx:{width:"100%"},children:[(0,d.jsxs)(n.default,{variant:"body2",mr:"1ch",children:["Arrival Date Time: ",f]}),(0,d.jsxs)(m.default,{sx:{display:"flex",width:"100%"},children:[(0,d.jsxs)(n.default,{variant:"body2",mr:"1ch",children:["Triage Date Time: ",c]}),(0,d.jsxs)(n.default,{variant:"body2",children:["Referred From: ",g]})]}),(0,d.jsxs)(m.default,{sx:{display:"flex"},children:[(0,d.jsxs)(n.default,{mr:"1ch",variant:"body1",children:["Category: ",j]}),(0,d.jsxs)(n.default,{variant:"body1",children:["Reason: ",r]})]}),(0,d.jsxs)(n.default,{sx:{mt:"1ch"},variant:"subtitle1",children:["Presenting Complaints: ",a," "]}),(0,d.jsx)(h.jD,{sx:{display:"flex",border:"dashed",my:"1ch"},children:b.map(({name:a,value:b})=>(0,d.jsx)(u,{title:a,value:b},`${b}${a}`))}),(0,d.jsxs)(n.default,{variant:"body1",children:["Triaged By: ",k]})]})})}),(0,d.jsx)(o.x,{getValue:a=>t(a),label:"Reasons for triage category:",options:[{value:"Vitals above/below threshold",label:"Vitals above/below threshold"},{value:"Airway/Breathing compromised",label:"Airway/Breathing compromised"},{value:"Blood circulation compromised",label:"Blood circulation compromised"},{value:"Disability",label:"Disability"},{value:"Persistent pain and other concerns ",label:"Persistent pain and other concerns "}]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)(q,{getValue:a=>p(a)}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)(h.O6,{onClick:v,title:"print"})]})},u=({title:a,value:b})=>(0,d.jsxs)(h.jD,{sx:{mx:"0.5ch",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,d.jsx)(h.Th,{variant:"h6",textAlign:"center",children:a}),(0,d.jsx)(h.Th,{variant:"h6",children:b})]}),v=({value:a,children:b,setTriggerFunc:c,printer:f,orderDate:h,test:j,fullName:k,gender:l,description:m})=>{let n=(0,e.useRef)(null);return(0,e.useEffect)(()=>{c(async()=>{let a=document.getElementById("barcode");if(a){let b=await i.mo(a),c=document.createElement("canvas");c.width=700,c.height=160;let d=c.getContext("2d");if(d){d.fillStyle="#ffffff",d.fillRect(0,0,700,160);let a=b.width/b.height,e=700,g=700/a;g>160&&(e=(g=160)*a);let h=(700-e)/2,i=(160-g)/2;d.drawImage(b,0,0,b.width,b.height,h,i,e,g),s("test",c,f)}}})},[f,c]),(0,d.jsxs)("div",{id:"barcode",ref:n,style:{display:"flex",flexDirection:"column",paddingLeft:"5ch"},children:[(0,d.jsxs)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:[k,"(",l,")~",m]}),(0,d.jsx)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:h}),(0,d.jsx)(g(),{width:1,height:45,margin:0,displayValue:!1,value:a}),(0,d.jsx)("b",{style:{fontSize:"0.5rem"},children:j})]})}},47949:(a,b,c)=>{c.d(b,{D:()=>j,u:()=>q});var d=c(21124),e=c(38301),f=c(80350),g=c(48936),h=c(95745),i=c(16316);let j={temperature:{name:h.W.TEMPERATURE,label:"Body Temperature",short:"Temp"},pulseRate:{name:h.W.PULSE_RATE,label:"Pulse Rate",short:"PR"},respiratoryRate:{name:h.W.RESPIRATORY_RATE,label:"Respiratory rate",short:"RR"},saturationRate:{name:h.W.BLOOD_OXYGEN_SATURATION,label:"Oxygen Saturation",short:"SPO2"},heartRate:{name:h.W.HEART_RATE,label:"Heart rate",short:"HR"},bloodPressure:{name:h.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic",short:"BP"},bloodPressureDiastolic:{name:h.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},motorResponse:{name:h.W.MOTOR_RESPONSE,label:"Motor Response"},eyeOpeningResponse:{name:h.W.EYE_OPENING_RESPONSE,label:"Eye Opening Response"},verbalResponse:{name:h.W.VERBAL_RESPONSE,label:"Verbal Response"},calculatedGCS:{name:"calculatedGCS",label:"Calculated GCS"},glucose:{name:h.W.GLUCOSE,label:"Glucose"},units:{name:h.W.ADDITIONAL_NOTES,label:"Units"},avpu:{name:h.W.AVPU,label:"AVPU"},pulseOximetry:{name:h.W.PULSE_OXIMETRY,label:"Pulse Oximetry",short:"SPO"}},k=g.Ik({[j.respiratoryRate.name]:g.ai().min(0).max(90).label(j.respiratoryRate.label),[j.saturationRate.name]:g.ai().required().min(20).max(100).label(j.saturationRate.label),[j.bloodPressure.name]:g.ai().min(0).max(300).required().label(j.bloodPressure.label),[j.bloodPressureDiastolic.name]:g.ai().min(0).max(300).required().label(j.bloodPressureDiastolic.label),[j.heartRate.name]:g.ai().required().label(j.heartRate.label).min(0).max(400),[j.temperature.name]:g.ai().min(20).max(45).required().label(j.temperature.label),[j.eyeOpeningResponse.name]:g.Yj().required().label(j.eyeOpeningResponse.label),[j.motorResponse.name]:g.Yj().required().label(j.motorResponse.label),[j.verbalResponse.name]:g.Yj().required().label(j.verbalResponse.label),[j.glucose.name]:g.ai().typeError("Glucose must be a number").min(0).max(1e3).label(j.glucose.label),[j.avpu.name]:g.Yj().label(j.avpu.label),[j.units.name]:g.Yj().required().label(j.units.label)}),l=[{label:"Spontaneous",value:"Spontaneous",weight:4},{label:"To Speech",value:"To Speech",weight:3},{label:"To Pain",value:"To Pain",weight:2},{label:"No Response",value:"No Response",weight:1}],m=[{label:"Obeying Commands",value:"Obeying Commands",weight:6},{label:"Localising",value:"Localising",weight:5},{label:"Withdraw",value:"Withdraw",weight:4},{label:"Normal Flexion",value:"Normal Flexion",weight:3},{label:"Extension",value:"Extension",weight:2},{label:"None",value:"None",weight:1}],n=[{label:"Oriented",value:"Oriented",weight:5},{label:"Confused",value:"Confused",weight:4},{label:"Inappropriate Words",value:"Inappropriate Words",weight:3},{label:"Incomprehensible sounds",value:"Incomprehensible sounds",weight:2},{label:"None",value:"None",weight:1}],o=[{id:"Alert",label:"Alert"},{id:"Verbal",label:"Verbal"},{id:"Pain",label:"Pain"},{id:"Unresponsive",label:"Unresponsive"}],p={[j.temperature.name]:[{operator:"<",value:34,result:h.So.RED,bound:0},{operator:">",value:39.9,result:h.So.RED,bound:100},{operator:"combined",operator1:">=",value:37.5,operator2:"<=",value2:39.9,result:h.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:34.1,operator2:"<=",value2:35.4,result:h.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:35.5,operator2:"<=",value2:37.4,result:h.So.GREEN,bound:0}],[j.heartRate.name]:[{operator:">",value:110,result:h.So.YELLOW,value2:0,bound:130},{operator:"<",value:50,result:h.So.YELLOW,bound:40},{operator:"<",value:40,result:h.So.RED,bound:0},{operator:">",value:130,result:h.So.RED,bound:1e3},{operator:"combined",operator1:">=",value:60,operator2:"<=",value2:100,result:h.So.GREEN,bound:0}],[j.respiratoryRate.name]:[{operator:">",value:30,result:h.So.RED,bound:100},{operator:"<",value:8,result:h.So.RED,bound:0},{operator:"combined",operator1:">=",value:21,operator2:"<=",value2:30,result:h.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:8,operator2:"<=",value2:11,result:h.So.YELLOW,bound:0},{operator:"combined",operator1:">=",value:12,operator2:"<=",value2:20,result:h.So.GREEN,bound:0}],[j.saturationRate.name]:[{operator:"<",value:90,result:h.So.RED,bound:0},{operator:"<=",value:93,result:h.So.YELLOW,bound:90},{operator:"combined",operator1:">=",value:94,operator2:"<=",value2:100,result:h.So.GREEN,bound:0}],[j.glucose.name]:[{operator:"<",value:40,result:h.So.RED,bound:0},{operator:"<",value:60,result:h.So.YELLOW,bound:40},{operator:"combined",operator1:">=",value:70,operator2:"<=",value2:140,result:h.So.GREEN,bound:0}]};function q({initialValues:a,onSubmit:b,triageResult:c,setTriageResult:g,continueTriage:h,previous:q,getFormValues:r}){let{addKeyToFlow:s}=(0,e.useContext)(i.gd),[t,u]=(0,e.useState)({}),[v,w]=(0,e.useState)(0),x=(a,b)=>{if(""==b)return void g("",a);p[a]?.forEach(c=>{let d=Number(b);switch(c.operator){case"<":d<c.value&&d>=c?.bound&&g(c.result,a);return;case">":d>c.value&&d<=c.bound&&g(c.result,a);return;case"=":d==c.value&&g(c.result,a);return;case"combined":c?.value2&&d>=c.value&&d<=c.value2&&g(c.result,a);return;default:return null}})},y=a=>"red"===c&&!t[a]&&!h,z=(a,b)=>{let c=b.find(b=>b.value==a);return c?c.weight:0};return(0,d.jsxs)(f.PD,{onSubmit:b,validationSchema:k,initialValues:{...a,[j.units.name]:"mmol/l"},submitButtonText:"next",submitButton:!1,getFormValues:r,children:[(0,d.jsx)(f.fP,{getValues:u}),(0,d.jsx)(f.kI,{title:"Oxygen Saturation and Heart Rate",children:(0,d.jsxs)(f.Vp,{mr:"1ch",children:[(0,d.jsx)(f.A8,{id:j.saturationRate.name,name:j.saturationRate.name,label:j.saturationRate.label,disabled:y(j.saturationRate.name),handleBlurEvent:a=>{if(""==a)return;let b=Number(a);b<90&&g("red",j.saturationRate.name),b>=94&&g("green",j.saturationRate.name),b>=90&&b<94&&g("yellow",j.saturationRate.name)},unitOfMeasure:"%",sx:{width:"100%",m:0}}),(0,d.jsx)(f.A8,{id:j.heartRate.name,name:j.heartRate.name,label:j.heartRate.label,disabled:y(j.heartRate.name),unitOfMeasure:"bpm",handleBlurEvent:a=>{if(""==a)return;let b=Number(a);(b>129||b<40)&&(s({heart:"red"}),g("red",j.heartRate.name)),(b>=101&&b<=129||b>=40&&b<=59)&&(s({heart:"yellow"}),g("yellow",j.heartRate.name)),b>=60&&b<=100&&(s({heart:"green"}),g("green",j.heartRate.name))},sx:{width:"100%",m:0}})]})}),(0,d.jsx)(f.kI,{title:"Blood Pressure (mmHg))",children:(0,d.jsxs)(f.Vp,{mr:"1ch",children:[(0,d.jsx)(f.A8,{id:j.bloodPressure.name,name:j.bloodPressure.name,label:j.bloodPressure.label,disabled:y(j.bloodPressure.name),helperTextWidth:"10ch",sx:{width:"10ch"},handleBlurEvent:a=>{if(""==a)return;let b=Number(a);if(b>200||b<80){s({systolic:"red"}),g("red",j.bloodPressure.name);return}if(b>=81&&b<=89||b>=150&&b<=200){g("yellow",j.bloodPressure.name),s({systolic:"yellow"});return}if(b>=90||b>89&&b<=149){g("green",j.bloodPressure.name),s({systolic:"green"});return}}}),(0,d.jsx)(f.A8,{id:j.bloodPressureDiastolic.name,name:j.bloodPressureDiastolic.name,label:j.bloodPressureDiastolic.label,sx:{width:"10ch"},helperTextWidth:"10ch",disabled:y(j.bloodPressureDiastolic.name),handleBlurEvent:a=>{if(""==a)return;let b=Number(a);b>119&&(s({diastolic:"red"}),g("red",j.bloodPressureDiastolic.name)),b>=100&&b<=119&&(s({diastolic:"yellow"}),g("yellow",j.bloodPressureDiastolic.name)),b<100&&(s({diastolic:"green"}),g("green",j.bloodPressureDiastolic.name))}})]})}),(0,d.jsxs)(f.kI,{title:"Respiratory and Temperature",children:[(0,d.jsxs)(f.Vp,{mr:"1ch",children:[(0,d.jsx)(f.A8,{id:j.respiratoryRate.name,name:j.respiratoryRate.name,label:j.respiratoryRate.label,handleBlurEvent:a=>{""!=a&&x(j.respiratoryRate.name,a)},disabled:y(j.respiratoryRate.name),unitOfMeasure:"bs/m",sx:{width:"100%",m:0}}),(0,d.jsx)(f.A8,{id:j.temperature.name,name:j.temperature.name,label:j.temperature.label,disabled:y(j.temperature.name),handleBlurEvent:a=>{""!=a&&x(j.temperature.name,a)},unitOfMeasure:"\xb0C",sx:{width:"100%",m:0}})]}),(0,d.jsxs)(f.Vp,{sx:{mt:"1ch"},mr:"2px",children:[(0,d.jsx)(f.el,{width:"40%",multiple:!1,name:j.units.name,options:[{id:"mmol/l",label:"mmol/l"},{id:"mg/dl",label:"mg/dl"}],label:j.units.label}),(0,d.jsx)(f.A8,{id:j.glucose.name,name:j.glucose.name,label:j.glucose.label,sx:{width:"100%",m:0},disabled:y(j.glucose.name),handleBlurEvent:a=>{if(""==a)return;let b=Number(a),c=t[j.units.name];s({glucose:`${b} ${c}`}),"mmol/l"==c&&((b<3||b>30)&&g("red",j.glucose.name),(b>=3.1&&b<=3.8||b>11.1&&b<=29.9)&&g("yellow",j.glucose.name),b>=3.9&&b<=11.1&&g("green",j.glucose.name)),"mg/dl"==c&&((b<54.054||b>540.54)&&g("red",j.glucose.name),(b>=55.8558&&b<=68.4684||b>199.9998&&b<=538.7382)&&g("yellow",j.glucose.name),b>=70.2702&&b<=199.9998&&g("green",j.glucose.name))},unitOfMeasure:t[j.units.name]})]})]}),(0,d.jsxs)(f.kI,{last:!0,title:"GCS",children:[(0,d.jsxs)(f.Vp,{sx:{alignItems:"start"},children:[(0,d.jsx)(f.b1,{name:j.motorResponse.name,label:j.motorResponse.label,options:m,disabled:y(j.motorResponse.name),row:!1}),(0,d.jsx)(f.b1,{name:j.verbalResponse.name,label:j.verbalResponse.label,options:n,disabled:y(j.verbalResponse.name),row:!1}),(0,d.jsx)(f.b1,{name:j.eyeOpeningResponse.name,label:j.eyeOpeningResponse.label,options:l,disabled:y(j.eyeOpeningResponse.name),row:!1})]}),(0,d.jsx)("br",{}),(0,d.jsxs)(f.Th,{fontWeight:"800",variant:"body2",children:["(M",z(t[j.motorResponse.name],m)," ","V",z(t[j.verbalResponse.name],n)," ","E",z(t[j.eyeOpeningResponse.name],l),") ",v,"/15"]}),(0,d.jsx)(f.el,{name:j.avpu.name,options:o,label:j.avpu.label,sx:{my:"1ch"},multiple:!1,disabled:y(j.avpu.name)})]}),(0,d.jsx)("br",{}),(0,d.jsxs)(f.jD,{children:[(0,d.jsx)(f.O6,{sx:{m:.5},title:"previous",variant:"secondary",type:"button",onClick:q}),(0,d.jsx)(f.O6,{sx:{m:.5},title:"next",type:"submit",onClick:()=>{}})]})]})}}};