"use strict";exports.id=3195,exports.ids=[3195],exports.modules={21603:(e,s,n)=>{n.d(s,{N:()=>l});var t=n(60687),r=n(78590),i=n(43210);let l=({data:e})=>{let[s,n]=(0,i.useState)([]),l={pH:"",PCO2:"mmHg",PO2:"mmHg","Base Excess":"mmol/L",ctHb:"g/dL",SO2E:"%",FO2HBE:"%",FHHBE:"%",FmetHb:"%","Creatine kinase":"mmol/L",CNA:"mmol/L",CA2:"mmol/L",CCL:"mmol/L",cGlu:"mmol/L",cLac:"mmol/L",ctBil:"\xb5mol/L","pH (T)":"","pCO₂ (T)":"mmHg","pO₂ (T)":"mmHg",P50E:"",BaseExcess:"mmol/L",HCO3:"mmol/L","Anion Gapc":"mmol/L",MOSMC:"mmol/kg"};(0,i.useEffect)(()=>{if(e.length>0){let s=Object.values(e),t=e=>e.filter(e=>{let s=e.names?.[0]?.name==="Description",n=e.value??e.value_text??e.value_numeric,t=!isNaN(Number(n))&&null!=n&&""!==n;return!(s&&t)}).map(e=>({...e,children:e.children?t(e.children):[]}));n(s.filter(e=>e.children&&e.children.length>0).map(e=>({...e,children:e.children?t(e.children):[]})).sort((e,s)=>{let n=new Date(e.obs_datetime).getTime();return new Date(s.obs_datetime).getTime()-n}))}},[e]);let a=e=>{let s=l[e]??"";return`${s?` ${s}`:""}`},d=(e,s=0)=>{let n=e.children?.length>0;return(0,t.jsxs)("div",{style:{marginLeft:16*s},children:[(0,t.jsxs)(r.default,{sx:{color:"#777",fontWeight:400,lineHeight:1.5},children:[n?(0,t.jsx)("b",{children:e.names?.[0]?.name==="Description"?"":`${e.names?.[0]?.name} `}):(0,t.jsx)("b",{children:e.names?.[0]?.name==="Description"?"":`${e.names?.[0]?.name} : `}),e.value_text?(0,t.jsxs)(t.Fragment,{children:[n?(0,t.jsx)("b",{children:e.value_text}):e.value_text,(0,t.jsx)("span",{children:a(e.names?.[0]?.name)})]}):(0,t.jsxs)(t.Fragment,{children:[n?(0,t.jsx)("b",{children:e.value??e.value_numeric??"N/A"}):e.value??e.value_numeric??"N/A",(0,t.jsx)("span",{children:a(e.names?.[0]?.name)})]})]}),n&&(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"},children:e.children.map(e=>d(e,s+1))})]},e.obs_id)};return(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.2rem"},children:0===s.length?(0,t.jsx)(r.default,{children:"No results available"}):s.map(e=>d(e,1))})}},51040:(e,s,n)=>{n.d(s,{M:()=>E});var t=n(60687),r=n(61939),i=n(42533),l=n(75018),a=n(50727),d=n(76990),o=n(43210),c=n(28274),x=n(50772),h=n(71072),u=n(51110),m=n(20981),g=n(68730),p=n(69612),j=n(7850),y=n(2351),v=n(27621),f=n(47121),b=n(78590),_=n(69587),N=n(88794),R=n(12755);let E=()=>{let{data:e}=(0,R.Ay)(),s=(0,o.useRef)(null),{params:n}=(0,r.KU)(),{data:E}=(0,d.GN)(n.id),{data:k}=(0,i.RO)(n?.id),[A,D]=(0,o.useState)(!1),[w,C]=(0,o.useState)({sampleType:"",ascension:"",tests:"",orderDate:"",requestingTechnician:"",description:""}),[P,S]=(0,o.useState)("http://localhost:3000"),[F,T]=(0,o.useState)(!1),[I,H]=(0,o.useState)([{name:"",value:"",testName:""}]),$=(0,o.useCallback)((e,s)=>{H(e.map(e=>({name:e.indicator.name,value:e.value,testName:s}))),T(!0)},[]),M=(0,o.useCallback)(()=>{T(!1)},[]),O=(0,o.useCallback)(e=>{s.current=e},[]),B=[{field:"specimen",headerName:"Specimen",flex:1,renderCell:e=>e.row.specimen.name},{field:"test",headerName:"Test(s)",flex:1,renderCell:e=>e.row.test.name},{field:"requesting_clinician",headerName:"Ordered By",flex:1},{field:"status",headerName:"Status",flex:1},{field:"accessionNumber",headerName:"Accession Number",flex:1,renderCell:e=>e.row.accession_number},{field:"action",headerName:"Action",flex:1,renderCell:e=>(0,t.jsx)(c.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{disabled:!(e.row.test.result&&e.row.test.result.length>0),variant:"contained",onClick:()=>{$(e.row.test.result,e.row.test.name)},sx:{width:"48%",padding:"4px 8px"},children:"View"}),(0,t.jsxs)(h.A,{open:F,onClose:M,maxWidth:"sm",fullWidth:!0,children:[(0,t.jsxs)(u.A,{children:["Test results for ",I[0].testName]}),(0,t.jsx)(m.A,{children:(0,t.jsxs)(g.A,{children:[(0,t.jsx)(p.A,{children:(0,t.jsxs)(j.A,{children:[(0,t.jsx)(y.A,{children:"Measure"}),(0,t.jsx)(y.A,{children:"Result"})]})}),(0,t.jsx)(v.A,{children:I.map((e,s)=>(0,t.jsxs)(j.A,{children:[(0,t.jsx)(y.A,{children:e.name}),(0,t.jsx)(y.A,{children:e.value})]},s))})]})}),(0,t.jsx)(f.A,{children:(0,t.jsx)(x.A,{onClick:M,color:"primary",children:"Close"})})]}),(0,t.jsx)(l.O6,{title:"print",variant:"secondary",onClick:()=>{D(!0),C({sampleType:e.row.specimen.name,ascension:e.row.accession_number,orderDate:(0,N.kh)(e.row.order_date),tests:e.row.test.name,requestingTechnician:e.row.requesting_clinician,description:e.row.comment_to_fulfiller})},sx:{width:"48%",padding:"4px 8px"}})]})})}],L=k?.flatMap(e=>e.tests.map(s=>({...e,id:s.id,test:s,status:s.result?"Results Available":"Waiting for result(s)"})))||[];return(0,t.jsxs)(t.Fragment,{children:[0===L.length?(0,t.jsx)(b.default,{children:"No lab orders added"}):(0,t.jsx)(l.WE,{height:"25ch",showTopBar:!1,rowHeight:25,rows:L,columns:B}),(0,t.jsx)(l.eV,{maxWidth:"sm",open:A,onClose:()=>D(!1),title:"Preview Barcode",children:(0,t.jsxs)(l.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(a.SE,{printer:P,orderDate:w.orderDate,setTriggerFunc:O,value:w.ascension,test:`${w.tests}|${w.ascension}|${w.requestingTechnician.split(" ")[1]}`,fullName:`${E?.given_name} ${E?.family_name}`,gender:E?.gender,description:w.description,children:(0,t.jsx)(t.Fragment,{})}),(0,t.jsx)("br",{}),(0,t.jsx)(_.x,{getValue:e=>{S(e)},label:"Select Printer",options:e?e?.map(e=>({value:e.ip_address,label:e.name})):[]}),(0,t.jsx)("br",{}),(0,t.jsx)(l.O6,{title:"Print Barcode",onClick:()=>{s.current&&"function"==typeof s.current&&(s.current(),D(!1))}})]})})]})}},51516:(e,s,n)=>{n.d(s,{E:()=>l});var t=n(60687),r=n(75018),i=n(78590);let l=({rows:e})=>{let s=[];return 0==s.length?(0,t.jsx)(i.default,{children:"No results available"}):(0,t.jsx)(r.WE,{rowHeight:25,rows:s,columns:[{field:"test",headerName:"Test",flex:1},{field:"result",headerName:"result",flex:1}]})}},60120:(e,s,n)=>{n.d(s,{r:()=>j});var t=n(60687),r=n(76180),i=n.n(r),l=n(43210),a=n(30859),d=n(42938),o=n(61939),c=n(76990),x=n(62116),h=n(75018),u=n(21603),m=n(51516),g=n(62764);let p=({presentingInfo:e,pastMedicalHistory:s,reviewOfSystems:n,physicalExam:r,clerkInfo:i,gynaeHistory:a,setRow:c,showPatientInfo:p=!1})=>{let[j,y]=(0,l.useState)([]),{params:v}=(0,o.KU)(),f=v.id,{data:b,isLoading:_}=(0,x.$O)(f,`encounter_type=${d.fA.BED_SIDE_TEST}`);if((0,l.useEffect)(()=>{!_&&b&&y(b?.[0]?.obs??[])},[b,_]),[...e.complaints,e.history,e.surgicalHistory,e.surgicalProcedure,...e.familyHistory,e.allergies,e.differentialDiagnosis,e.notes,e.smoking.status,e.smoking.duration,e.alcoholIntake,e.recreationalDrugs,...s,...Object.values(n).flat(),...Object.values(r),i.additionalNotes,i.clerkName,i.designation,i.signature].every(e=>Array.isArray(e)?0===e.length:"string"==typeof e&&!e.trim()))return(0,t.jsxs)(t.Fragment,{children:[p&&(0,t.jsx)(h.TF,{}),(0,t.jsx)("h1",{style:{textAlign:"center",marginBottom:"20px"},children:"Surgical Notes"}),(0,t.jsx)("p",{style:{fontStyle:"italic",color:"gray"},children:"Surgical Notes not recorded."})]});let N=()=>r.temperature||r.pulseRate||r.bloodPressure||r.respiratoryRate,R=()=>r.eyes||r.mouth||r.neck,E=()=>r.chest||r.endocrine||r.abdominal,k=()=>r.motorResponse||r.verbalResponse||r.eyeResponse,A=()=>r.cranialNerves||r.grossMotor||r.sensation||r.pulsations||r.rectalExamination||r.extremities;return(0,t.jsxs)("div",{children:[p&&(0,t.jsx)(h.TF,{}),(0,t.jsx)("h1",{style:{textAlign:"center",marginBottom:"20px"},children:"Surgical Notes"}),(e.complaints.length>0||e.history)&&(0,t.jsxs)(t.Fragment,{children:[e.complaints.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Presenting Complaints:"})," ",e.complaints.map((e,s)=>`(${s+1}) ${e.complaint}${e.duration?` - Duration: ${e.duration}`:""}`).join(", ")]}),e.history&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"History of Presenting Complaint:"})," ",e.history]}),(0,t.jsx)("hr",{})]}),s.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{children:"Past Medical History"}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Condition"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"On Treatment"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Medication"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Medication Dose"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Reason for Request"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Medication Duration"})]})}),(0,t.jsx)("tbody",{children:s.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.condition}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.onTreatment}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.medication}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.medicationDose}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.reasonForRequest}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.medicationDuration})]},s))})]})]}),(e.surgicalHistory||e.surgicalProcedure||e.familyHistory.length>0||e.allergies)&&(0,t.jsxs)(t.Fragment,{children:[e.surgicalHistory&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Surgical History:"})," ",e.surgicalHistory]}),e.surgicalProcedure&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Surgical Procedure:"})," ",e.surgicalProcedure]}),e.familyHistory.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Family History:"})," ",e.familyHistory.map((e,s)=>`(${s+1}) ${e}`).join(", ")]}),e.allergies&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Allergies:"})," ",e.allergies]}),(0,t.jsx)("hr",{})]}),(a.isPregnant||a.lnmp||a.gestationalAge||a.parity)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{children:"Gynae History"}),a.isPregnant&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Is Patient Pregnant:"})," ",a.isPregnant]}),a.lnmp&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"LNMP:"})," ",a.lnmp]}),a.gestationalAge&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Gestational Age:"})," ",a.gestationalAge]}),a.parity&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Parity:"})," ",a.parity]}),(0,t.jsx)("hr",{})]}),(e.smoking.status||e.smoking.duration||e.alcoholIntake||e.recreationalDrugs||Object.values(n).some(e=>e.length>0))&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{children:"Social History & Review of Systems"}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Social History"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Review of Systems"})]})}),(0,t.jsxs)("tbody",{children:[(e.smoking.status||n.general.length>0)&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.smoking.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Smoking Status:"})," ",e.smoking.status]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:n.general.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"General:"})," ",n.general.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})})]}),"Yes"===e.smoking.status&&e.smoking.duration||n.ent.length>0?(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"Yes"===e.smoking.status&&e.smoking.duration&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Cigarettes per day:"})," ",e.smoking.duration]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:n.ent.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"ENT:"})," ",n.ent.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})})]}):null,(e.alcoholIntake||n.endocrine.length>0)&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.alcoholIntake&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Alcohol Intake:"})," ",e.alcoholIntake," units per day"]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:n.endocrine.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Endocrine:"})," ",n.endocrine.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})})]}),(e.recreationalDrugs||n.cardiac.length>0)&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:e.recreationalDrugs&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Recreational Drugs:"})," ",e.recreationalDrugs]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:n.cardiac.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Cardiac:"})," ",n.cardiac.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})})]}),n.respiratory.length>0&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,t.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,t.jsx)("strong",{children:"Respiratory:"})," ",n.respiratory.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})]}),n.gastrointestinal.length>0&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,t.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,t.jsx)("strong",{children:"Gastrointestinal:"})," ",n.gastrointestinal.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})]}),n.genitourinary.length>0&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,t.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,t.jsx)("strong",{children:"Genitourinary:"})," ",n.genitourinary.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})]}),n.musculoskeletal.length>0&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,t.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,t.jsx)("strong",{children:"Musculoskeletal:"})," ",n.musculoskeletal.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})]}),n.neurologic.length>0&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,t.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,t.jsx)("strong",{children:"Neurologic:"})," ",n.neurologic.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})]}),n.psychiatric.length>0&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,t.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:[(0,t.jsx)("strong",{children:"Psychiatric:"})," ",n.psychiatric.map((e,s)=>`(${s+1}) ${e}`).join(", ")]})]})]})]})]}),(r.generalCondition||N()||R()||E()||k()||A())&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{children:"Physical Examination"}),r.generalCondition&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"General Condition:"})," ",r.generalCondition]}),N()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:"Vitals"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"10px",flexWrap:"wrap"},children:[r.temperature&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Temperature:"})," ",r.temperature]}),r.pulseRate&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Pulse Rate:"})," ",r.pulseRate," bpm"]}),r.bloodPressure&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Blood Pressure:"})," ",r.bloodPressure," mmHg"]}),r.respiratoryRate&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Respiratory Rate:"})," ",r.respiratoryRate," breaths/min"]})]})]}),R()&&(0,t.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"10px",flexWrap:"wrap"},children:[r.eyes&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Eyes:"})," ",r.eyes]}),r.mouth&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Mouth:"})," ",r.mouth]}),r.neck&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Neck:"})," ",r.neck]})]}),E()&&(0,t.jsxs)(t.Fragment,{children:[r.chest&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Chest Examination:"})," ",r.chest]}),r.endocrine&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Endocrine Examination:"})," ",r.endocrine]}),r.abdominal&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Abdominal Examination:"})," ",r.abdominal]})]}),(0,t.jsx)("hr",{}),k()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:"Glasgow Coma Scale (GCS)"}),r.motorResponse&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Motor Response:"})," ",r.motorResponse]}),r.verbalResponse&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Verbal Response:"})," ",r.verbalResponse]}),r.eyeResponse&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Eye Response:"})," ",r.eyeResponse]}),(0,t.jsx)("hr",{})]}),A()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:"Additional Examinations & Extremities"}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Additional Examinations"}),(0,t.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Extremities"})]})}),(0,t.jsxs)("tbody",{children:[(r.cranialNerves||r.pulsations)&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.cranialNerves&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Cranial Nerves:"})," ",r.cranialNerves]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.pulsations&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Pulsations:"})," ",r.pulsations]})})]}),(r.grossMotor||r.rectalExamination)&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.grossMotor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Gross Motor:"})," ",r.grossMotor]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.rectalExamination&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Rectal Examination:"})," ",r.rectalExamination]})})]}),(r.sensation||r.extremities)&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.sensation&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Sensation:"})," ",r.sensation]})}),(0,t.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:r.extremities&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("strong",{children:"Extremities:"})," ",r.extremities]})})]})]})]})]})]}),e.differentialDiagnosis&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Working Differential Diagnosis:"})," ",e.differentialDiagnosis]})]}),(0,t.jsx)("hr",{}),(0,t.jsx)("h2",{children:"Investigations"}),(0,t.jsx)("h3",{children:"Bedside Results"}),(0,t.jsx)(u.N,{data:j}),(0,t.jsx)("h3",{children:"Lab Results"}),(0,t.jsx)(m.E,{rows:[]}),e.notes&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Additional Investigation Notes:"})," ",e.notes]})]}),(0,t.jsx)("hr",{}),(0,t.jsx)("h2",{children:"Medications"}),(0,t.jsx)(g.Z,{setRow:c,showPrintButton:!1}),(i.additionalNotes||i.clerkName||i.designation||i.signature)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{}),(0,t.jsx)("h2",{children:"Clerking Details"}),i.additionalNotes&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Additional Notes:"})," ",i.additionalNotes]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"10px",flexWrap:"wrap"},children:[i.clerkName&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Clerk Name:"})," ",i.clerkName]}),i.designation&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Designation:"})," ",i.designation]}),i.signature&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Signature:"})," ",i.signature]})]})]})]})},j=(0,l.forwardRef)(({onPrintComplete:e,showPreview:s=!1},n)=>{let[r,h]=(0,l.useState)(null),{params:u}=(0,o.KU)(),{data:m}=(0,c.iu)(u.id),{data:g}=(0,x.$O)(u.id),[j,y]=(0,l.useState)(void 0),[v,f]=(0,l.useState)({clerkName:"",designation:"",signature:"",additionalNotes:""}),[b,_]=(0,l.useState)({complaints:[],history:"",surgicalHistory:"",surgicalProcedure:"",familyHistory:[],allergies:"",differentialDiagnosis:"",notes:"",smoking:{status:"",duration:""},alcoholIntake:"",recreationalDrugs:""}),[N,R]=(0,l.useState)({isPregnant:"",lnmp:"",gestationalAge:"",parity:""}),[E,k]=(0,l.useState)({general:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]}),[A,D]=(0,l.useState)({generalCondition:"",temperature:"",pulseRate:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdominal:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:"",extremities:""}),[w,C]=(0,l.useState)([]),P=(0,l.useRef)(null),S=(0,a.useReactToPrint)({contentRef:P,onAfterPrint:e});return(0,l.useImperativeHandle)(n,()=>({generatePDF:()=>{S()}})),(0,l.useEffect)(()=>{if(!g)return;let e=g?.filter(e=>e.encounter_type&&e.encounter_type.uuid===d.fA.SURGICAL_NOTES_TEMPLATE_FORM).sort((e,s)=>new Date(s.encounter_datetime).getTime()-new Date(e.encounter_datetime).getTime())[0];if(e&&e.obs){let s={clerkName:"",designation:"",signature:"",additionalNotes:""},n={complaints:[],history:"",surgicalHistory:"",surgicalProcedure:"",familyHistory:[],allergies:"",differentialDiagnosis:"",notes:"",smoking:{status:"",duration:""},alcoholIntake:"",recreationalDrugs:""},t={isPregnant:"",lnmp:"",gestationalAge:"",parity:""},r={general:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]},i={generalCondition:"",temperature:"",pulseRate:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdominal:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:"",extremities:""};e.obs.forEach(e=>{let l=e.names&&e.names.length>0?e.names[0].name:null;if("Clerk name"===l)s.clerkName=e.value||e.value_text||"";else if("Designation"===l)s.designation=e.value||e.value_text||"";else if("Signature"===l)s.signature=e.value||e.value_text||"";else if("Additional Notes"===l)s.additionalNotes=e.value||e.value_text||"";else if("B-HCG"===l)t.isPregnant=e.value||e.value_text||"";else if("LNMP"===l)t.lnmp=e.value||e.value_text||"";else if("Gestational age"===l)t.gestationalAge=e.value||e.value_text||"";else if("Parity"===l)t.parity=e.value||e.value_text||"";else if("Presenting Complaints"===l)e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.value||e.value_text||"",t="";if(e.children&&e.children.length>0){let s=e.children.find(e=>e.names&&e.names.length>0&&"Duration"===e.names[0].name);s&&(t=s.value||s.value_text||"")}s&&n.complaints.push({complaint:s,duration:t})});else if("Presenting history"===l)n.history=e.value||e.value_text||"";else if("Surgical Procedure"===l)n.surgicalHistory=e.value||e.value_text||"";else if("Procedures"===l)n.surgicalProcedure=e.value||e.value_text||"";else if(l?.startsWith("Family History")){let s=e.value||e.value_text||"";s&&n.familyHistory.push(s)}else if("Allergic reaction"===l)n.allergies=e.value||e.value_text||"";else if("Attempted/ Differential Diagnosis"===l)n.differentialDiagnosis=e.value||e.value_text||"";else if("Clinician notes"===l)n.notes=e.value||e.value_text||"";else if("Patient smokes"===l){if(n.smoking.status=e.value||e.value_text||"",e.children&&e.children.length>0){let s=e.children.find(e=>e.names&&e.names.length>0&&"Expected Duration"===e.names[0].name);s&&(n.smoking.duration=s.value||s.value_text||"")}}else"Alcohol intake"===l?n.alcoholIntake=e.value||e.value_text||"":"Recreational drug"===l?n.recreationalDrugs=e.value||e.value_text||"":"Review of systems, general"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.general.push(s)}):"Review of systems ENT"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.ent.push(s)}):"Review of systems  endocrine"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.endocrine.push(s)}):"Review of systems cardiac"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.cardiac.push(s)}):"Severe Respiratory"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.respiratory.push(s)}):"Review Of Systems Gastrointestinal"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.gastrointestinal.push(s)}):"Review Of Systems Genitourinary"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.genitourinary.push(s)}):"Review of systems musculoskeletal"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.musculoskeletal.push(s)}):"Review of systems neurologic"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.neurologic.push(s)}):"Review of systems psychiatric"===l?e.children&&e.children.length>0&&e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;s&&r.psychiatric.push(s)}):"General condition"===l?i.generalCondition=e.value||"":"Temperature (c)"===l?i.temperature=e.value_numeric?`${e.value_numeric}\xb0C`:e.value||"":"Pulse Rate"===l?i.pulseRate=e.value_text||e.value||"":"Blood Pressure Measured"===l?i.bloodPressure=e.value_text||e.value||"":"Respiratory rate"===l?i.respiratoryRate=e.value_text||e.value||"":"Eyes"===l?i.eyes=e.value_text||e.value||"":"Mouth"===l?i.mouth=e.value_text||e.value||"":"Neck"===l?i.neck=e.value_text||e.value||"":"Chest examination"===l?i.chest=e.value_text||e.value||"":"Endocrine examination"===l?i.endocrine=e.value_text||e.value||"":"Abdominal examination"===l?i.abdominal=e.value_text||e.value||"":"Motor response"===l?i.motorResponse=e.value_text||e.value||"":"Verbal Response"===l?i.verbalResponse=e.value_text||e.value||"":"Eye Opening response"===l?i.eyeResponse=e.value_text||e.value||"":"Cranial erves"===l?i.cranialNerves=e.value_text||e.value||"":"Gross motor"===l?i.grossMotor=e.value_text||e.value||"":"Sensation"===l?i.sensation=e.value_text||e.value||"":"Pulsations"===l?i.pulsations=e.value_text||e.value||"":"Rectal examination"===l?i.rectalExamination=e.value_text||e.value||"":"Extremities"===l&&(i.extremities=e.value_text||e.value||"")}),!s.clerkName&&e.created_by&&(s.clerkName=e.created_by),f(s),_(n),R(t),k(r),D(i)}let s=[];g.forEach(e=>{e.obs&&e.obs.forEach(e=>{if("Condition"===(e.names&&e.names.length>0?e.names[0].name:null)&&e.children&&e.children.length>0){let n={condition:e.value||e.value_text||"",onTreatment:"",medication:"",medicationDose:"",reasonForRequest:"",medicationDuration:""};e.children.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;"On treatment"===s?n.onTreatment=e.value||e.value_text||"":"Medication"===s?n.medication=e.value||e.value_text||"":"Medication Dose"===s?n.medicationDose=e.value||e.value_text||"":"Reason for request"===s?n.reasonForRequest=e.value||e.value_text||"":"Medication Duration"===s&&(n.medicationDuration=e.value||e.value_text||"")}),s.push(n)}})}),C(s)},[g]),(0,t.jsxs)("div",{ref:P,className:"jsx-a11c19d41d611344 print-only-wrapper",children:[(0,t.jsx)("div",{className:"jsx-a11c19d41d611344 "+((s?"print-preview":"print-only")||""),children:(0,t.jsx)(p,{presentingInfo:b,pastMedicalHistory:w,reviewOfSystems:E,physicalExam:A,clerkInfo:v,gynaeHistory:N,setRow:h,showPatientInfo:!0})}),(0,t.jsx)(i(),{id:"a11c19d41d611344",children:"@media print{.print-only.jsx-a11c19d41d611344{display:block!important}}.print-only.jsx-a11c19d41d611344{display:none}.print-preview.jsx-a11c19d41d611344{display:block;border:1px solid#e0e0e0;margin:20px 0;padding:20px;background:white;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}"})]})})},62764:(e,s,n)=>{n.d(s,{Z:()=>m});var t=n(60687),r=n(60931),i=n(19194),l=n(42938),a=n(48807),d=n(94482),o=n(99108),c=n(61939),x=n(62116),h=n(50772),u=n(43210);let m=({setRow:e,encounterType:s=l.fA.PRESCRIPTIONS,medicationLabelTitle:n,showPrintButton:m=!0})=>{let{patientId:g,activeVisitId:p}=(0,c.gd)(),{setZpl:j,setOpen:y}=(0,a.m)(),{selectedVisit:v}=(0,d.E)(),{data:f,isPending:b}=(0,x.$O)(g,`encounter_type=${s}&visit=${v?.uuid}`),[_,N]=(0,u.useState)([]),R=(e,s)=>e?.children?.find(e=>e.names&&e.names[0].name==s)?.value;return(0,u.useEffect)(()=>{let e=f?.filter(e=>e.visit_id==Number(p));if(!e||0==e.length)return void N([]);N(e[0]?.obs.filter(e=>e?.names&&e?.names[0].name==l.W.DRUG_GIVEN).map(e=>{let s=R(e,l.l8.MEDICATION_DURATION_UNIT),n=R(e,l.W.MEDICATION_DOSE),t=R(e,l.l8.DESCRIPTION),r=R(e,l.l8.MEDICATION_FORMULATION),i=R(e,l.l8.MEDICATION_DOSE_UNIT),a=R(e,l.l8.MEDICATION_FREQUENCY),d=R(e,l.l8.MEDICATION_DURATION)+" "+s,o=e.value_coded_uuid;return{medicationName:e.value,durationUnit:s,dose:n,doseUnits:i,frequency:a,duration:d,formulation:r,description:t,prescribedBy:e.created_by,medicationUUID:o}}).filter(e=>"current"==e.description))},[f]),(0,t.jsxs)(r.h,{loading:b,children:[m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{onClick:()=>{let e=(0,o.B)(_,n);y(e),j(e)},variant:"contained",children:"Print Medications"}),(0,t.jsx)("br",{})]}),(0,t.jsx)(i.q,{getSelectedRow:e,columns:[{label:"Medication Name",field:"medicationName"},{label:"Dose",field:"dose"},{label:"Frequency",field:"frequency"},{label:"Duration",field:"duration"},{label:"Formulation",field:"formulation"},{label:"Prescriber",field:"prescribedBy"}],data:_})]})}}};