"use strict";exports.id=5351,exports.ids=[5351],exports.modules={28961:(e,i,t)=>{t.d(i,{c4:()=>h,vY:()=>m,oC:()=>x});var a=t(60687),s=t(76990),n=t(75018),l=t(43210),r=t(42938),d=t(80222),o=t(43102),c=t(71953),u=t(92248);let x=({socialHistory:e,loading:i,onSubmit:t,disabled:s})=>{let[o,u]=(0,l.useState)(!1),x=(0,d.m)(e?.obs,r.W.MARITAL_STATUS),h=(0,d.m)(e?.obs,r.W.RELIGION),m=(0,d.m)(e?.obs,r.W.OCCUPATION),p=(0,d.m)(e?.obs,r.W.METHOD_OF_TRANSPORTATION),y=(0,d.m)(e?.obs,r.W.HIGHEST_EDUCATION);return i?(0,a.jsx)(n.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(c.A,{})}):(0,a.jsxs)(b,{children:[(0,a.jsx)(f,{onSubmit:e=>{t(e),u(!1)},initialValues:{[r.W.MARITAL_STATUS]:x,[r.W.RELIGION]:h,[r.W.OCCUPATION]:m,[r.W.METHOD_OF_TRANSPORTATION]:p,[r.W.HIGHEST_EDUCATION]:y},open:o,onClose:()=>u(!1)}),(0,a.jsx)(n.Th,{variant:"h5",children:"Social History"}),(0,a.jsx)(j,{label:"Marital Status",value:x}),(0,a.jsx)(j,{label:"Religion",value:h}),(0,a.jsx)(j,{label:"Occupation",value:m}),(0,a.jsx)(j,{label:"Transportation",value:p}),(0,a.jsx)(j,{label:"Highest Education",value:y}),(0,a.jsx)(n.O6,{disabled:s,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>u(!0)})]})},h=({financing:e,loading:i,onSubmit:t,disabled:s})=>{let[o,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)({paymentOptions:"",insuranceProvider:"",insuranceNumber:"",insuranceScheme:"",insuranceStatus:""});if((0,l.useEffect)(()=>{let i=(0,d.m)(e?.obs,"c7bcc8bd-09d5-4f98-8d58-5179f749fd99"),t=(0,d.m)(e?.obs,"b0ffce26-2d25-449e-871e-c702e44bb37e"),a=(0,d.m)(e?.obs,"98b08fb2-f877-45b6-a95a-db89dffefb27");h({paymentOptions:i,insuranceProvider:t,insuranceNumber:a,insuranceScheme:(0,d.m)(e?.obs,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1"),insuranceStatus:(0,d.m)(e?.obs,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8")})},[e]),i)return(0,a.jsx)(n.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(c.A,{})});let{paymentOptions:m,insuranceProvider:f,insuranceNumber:y,insuranceScheme:v,insuranceStatus:g}=x;return(0,a.jsxs)(b,{children:[(0,a.jsx)(p,{onSubmit:e=>{t(e),u(!1)},initialValues:{[r.W.PAYMENT_OPTIONS]:[m],[r.W.INSURANCE_PROVIDER]:f,[r.W.INSURANCE_NUMBER]:y,[r.W.INSURANCE_STATUS]:g,[r.W.INSURANCE_SCHEME]:v},open:o,onClose:()=>u(!1)}),(0,a.jsx)(n.Th,{variant:"h5",children:"Financing"}),(0,a.jsx)(j,{label:"Payment Option",value:m}),(0,a.jsx)(j,{label:"Insurance Provider",value:f}),(0,a.jsx)(j,{label:"Insurance Number",value:y}),(0,a.jsx)(j,{label:"Insurance Scheme",value:v}),(0,a.jsx)(j,{label:"Insurance Status",value:g}),(0,a.jsx)(n.O6,{disabled:s,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>u(!0)})]})},m=({patientId:e,disabled:i})=>{let{data:t,isPending:d,refetch:o}=(0,s.B$)(e),[x,h]=(0,l.useState)(!1),[m,f]=(0,l.useState)(!1),{data:p,isPending:v}=(0,s.vi)(),[g,S]=(0,l.useState)({}),[A,N]=(0,l.useState)(""),{mutate:C,isPending:_,isSuccess:E,isError:T,data:D}=(0,u.bJ)(),{mutateAsync:I,isSuccess:O,data:W}=(0,s.Wv)(),{mutate:V,isPending:R,isSuccess:L,data:U,isError:w}=(0,u.AU)(),[H,P]=(0,l.useState)(!0),[G,k]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{E&&D&&V({patient:e,person:D?.uuid,nextOfKinRelationship:A})},[E]),(0,l.useEffect)(()=>{L&&(o(),f(!1),P(!0),k(!1))},[L]),d||v||_||R)return(0,a.jsx)(n.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(c.A,{})});let F=t?.map(e=>{let i=e.relationship,t=p?.find(e=>e.relationship_type_id==i),a=p?.find(e=>e.a_is_to_b==t?.b_is_to_a);return{given_name:e.person_b.names[0].given_name,family_name:e.person_b.names[0].family_name,relationship:t?.b_is_to_a,relationshipUUID:a?.uuid,person:e.person_b.uuid}}),M=e=>{N(e.relationship),C({nextOfKinFirstName:e.given_name,nextOfKinLastName:e.family_name})},z=async e=>{let i={identifiers:[],names:[{givenName:e.given_name,familyName:e.family_name}]};await I({id:e.person,data:i}),o(),h(!1),P(!0),k(!1)};return(0,a.jsxs)(n.jD,{sx:{display:"flex",width:F?.length==1?"50%":"100%"},children:[(0,a.jsx)(y,{onSubmit:H?z:M,initialValues:{...g,...G?{relationship:r.W.GUARDIAN}:{}},open:x,isGuardian:G,onClose:()=>{h(!1),P(!0),k(!1)}}),(0,a.jsx)(y,{onSubmit:H?z:M,isGuardian:!0,initialValues:{relationship:r.W.GUARDIAN},open:m,onClose:()=>{f(!1),P(!0),k(!1)}}),F?.map(e=>(0,a.jsxs)(b,{children:[(0,a.jsx)(n.Th,{variant:"h5",children:e.relationship?.toLowerCase()=="guardian"?"Guardian Information":"Next Of Kin Information"}),(0,a.jsx)(j,{label:"First Name",value:e.given_name}),(0,a.jsx)(j,{label:"Last Name",value:e.family_name}),(0,a.jsx)(j,{label:"Relationship",value:e.relationship}),(0,a.jsx)(n.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>{h(!0),e.relationship?.toLowerCase()=="guardian"&&k(!0),S({...e,relationship:e.relationshipUUID})}})]})),(0,a.jsxs)(a.Fragment,{children:[F?.length==0&&(0,a.jsx)(n.O6,{sx:{alignSelf:"flex-start",mr:"1px"},title:"Add Next Of Kin",onClick:()=>{P(!1),h(!0)}}),(F?.length==1||F?.length==0)&&(0,a.jsx)(n.O6,{disabled:i,sx:{alignSelf:"flex-start"},title:"Add Guardian",onClick:()=>{P(!1),f(!0)}})]})]})},b=({children:e})=>(0,a.jsx)(n.sc,{sx:{p:"1ch",flex:1,mx:"0.5ch"},children:e}),j=({label:e,value:i})=>(0,a.jsxs)(n.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,a.jsx)(n.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:e}),(0,a.jsx)(n.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]}),f=({open:e,onClose:i,initialValues:t,onSubmit:s})=>(0,a.jsx)(n.eV,{maxWidth:"sm",title:"Edit Social History",open:e,onClose:i,children:(0,a.jsx)(o._T,{initialValues:t,onSubmit:s})}),p=({open:e,onClose:i,initialValues:t,onSubmit:s})=>(0,a.jsx)(n.eV,{maxWidth:"sm",title:"Edit Financing",open:e,onClose:i,children:(0,a.jsx)(o.OE,{initialValues:t,onSubmit:s})}),y=({open:e,onClose:i,initialValues:t,isGuardian:s,onSubmit:l})=>(0,a.jsx)(n.eV,{maxWidth:"sm",title:"Edit Relationships",open:e,onClose:i,children:(0,a.jsx)(o.tc,{isGuardian:s,initialValues:t,onSubmit:l})})},32039:(e,i,t)=>{t.d(i,{l:()=>x});var a=t(60687),s=t(43210),n=t(75018),l=t(62013),r=t(35127),d=t(43102),o=t(42938),c=t(76990),u=t(23641);let x=({patient:e,disabled:i})=>{let[t,l]=(0,s.useState)(!1),[r,d]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),{mutate:y,isPending:v,isSuccess:g,data:S}=(0,c.Wv)(),[A,N]=(0,s.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[C,_]=(0,s.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[E,T]=(0,s.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""});(0,s.useEffect)(()=>{D(e),O(e),I(e)},[e]),(0,s.useEffect)(()=>{g&&S&&(D(S),I(S),O(S))},[S,g]);let D=e=>{e&&N({firstName:e?.given_name,lastName:e?.family_name,birthDate:e?.birthdate,gender:e?.gender,birthDateEstimated:!!e?.birthdateEstimated})},I=e=>{e&&_({nationality:e?.addresses[0]?.country??"",district:e?.addresses[0]?.address1??"",village:e?.addresses[0]?.address2??"",traditionalAuthority:e?.addresses[0]?.county_district??""})},O=e=>{e&&T({district:e?.addresses[0]?.current_district??"",traditionalAuthority:e?.addresses[0]?.current_traditional_authority??"",village:e?.addresses[1]?.address1??"",closeLandMark:e?.addresses[1]?.address2??""})};return(0,a.jsx)(n.jD,{sx:{display:"flex",mt:"1ch"},children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.OverlayLoader,{open:v}),(0,a.jsx)(b,{onSubmit:i=>{let t={identifiers:[{identifier:i.identificationNumber,identifierType:o.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}],names:[{givenName:i.firstName,familyName:i.lastName}],gender:i.gender,birthdateEstimated:i.birthdateEstimated,birthdate:i.birthDate};y({id:e.uuid,data:t}),l(!1)},initialValues:{...A},onClose:()=>l(!1),open:t}),(0,a.jsxs)(h,{children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Th,{variant:"h5",children:"Demographics"}),(0,a.jsx)(m,{label:"First Name",value:A.firstName}),(0,a.jsx)(m,{label:"Last Name",value:A.lastName}),(0,a.jsx)(m,{label:"Gender",value:A.gender}),(0,a.jsx)(m,{label:"Date of birth",value:A.birthDate})]}),(0,a.jsx)(n.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>l(!0)})]}),(0,a.jsxs)(h,{children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Th,{variant:"h5",children:"Home Location"}),(0,a.jsx)(m,{label:"Country",value:C.nationality}),(0,a.jsx)(m,{label:"Home District",value:C.district}),(0,a.jsx)(m,{label:"Home Traditional Authority",value:C.traditionalAuthority}),(0,a.jsx)(m,{label:"Home Village",value:C.village})]}),(0,a.jsx)(j,{onSubmit:i=>{let t=[{address1:i.district,address2:i.village,address3:E.district,stateProvince:E.traditionalAuthority,countyDistrict:i.traditionalAuthority,cityVillage:i.traditionalAuthority,country:i.nationality,preferred:!0},{address1:E.village,address2:E.closeLandMark,countryDistrict:E.district,cityVillage:E.traditionalAuthority,preferred:!1}];y({id:e.uuid,data:{addresses:t}}),d(!1)},initialValues:C,open:r,onClose:()=>d(!1)}),(0,a.jsx)(n.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>d(!0)})]}),(0,a.jsxs)(h,{children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Th,{variant:"h5",children:"Current Location"}),(0,a.jsx)(m,{label:"Current District",value:E.district}),(0,a.jsx)(m,{label:"Current Traditional Authority",value:E.traditionalAuthority}),(0,a.jsx)(m,{label:"Current Village",value:E.village}),(0,a.jsx)(m,{label:"Close Land Mark",value:E.closeLandMark})]}),(0,a.jsx)(f,{onSubmit:i=>{let t=[{address1:C.district,address2:C.village,address3:i.district,stateProvince:i.traditionalAuthority,countyDistrict:C.traditionalAuthority,cityVillage:C.traditionalAuthority,country:C.nationality,preferred:!0},{address1:i.village,address2:e?.addresses[1]?.address2,countryDistrict:i.district,cityVillage:i.traditionalAuthority,preferred:!1}];y({id:e.uuid,data:{addresses:t}}),p(!1)},onClose:()=>p(!1),initialValues:E,open:x}),(0,a.jsx)(n.O6,{variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>p(!0)})]})]})})},h=({children:e})=>(0,a.jsx)(n.sc,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,mx:"0.5ch"},children:e}),m=({label:e,value:i})=>(0,a.jsxs)(n.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,a.jsx)(n.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:e}),(0,a.jsx)(n.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]}),b=({open:e,onClose:i,initialValues:t,onSubmit:s})=>(0,a.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Demographics",open:e,onClose:i,children:(0,a.jsx)(l.H,{onSubmit:s,initialValues:t})}),j=({open:e,onClose:i,initialValues:t,onSubmit:s})=>(0,a.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Home Location",open:e,onClose:i,children:(0,a.jsx)(d.CB,{initialValues:t,onSubmit:s})}),f=({open:e,onClose:i,initialValues:t,onSubmit:s})=>(0,a.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Current Location",open:e,onClose:i,children:(0,a.jsx)(d.CB,{currentLocation:!0,initialValues:t,onSubmit:s})})}};