(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6812],{6964:(e,t,i)=>{"use strict";i.d(t,{$:()=>Z,Q:()=>ee});var l=i(95155),a=i(15377),s=i(3525);let n=e=>{var t;let i=null==e||null==(t=e.remotes)?void 0:t.map(e=>{var t,i;return{...e.person,identifiers:e.identifiers,patient_id:null==(t=e.identifiers[0])?void 0:t.identifier,given_name:e.person.names[0].given_name,family_name:e.person.names[0].family_name,addresses:e.addresses,uuid:null==(i=e.identifiers[1])?void 0:i.identifier}});return e?{remotes:i,locals:e.locals}:{remotes:[],locals:[]}};var r=i(9890),d=i(14120),o=i(12115),u=i(98622),c=i(95425),m=i(59487);i(66766);var x=i(53976),h=i(70482),b=i(33881),j=i(94713),v=i(83436),f=i(75363),p=i(23312),g=i(53988),y=i(49262),S=i(37129),N=i(21022);let E=S.Ik().shape({[p.W.REFERRED_FROM]:S.Yj().label("Referee Medical Facility"),[p.W.ADDITIONAL_NOTES]:S.Yj()}),_=e=>{let{onSubmit:t,submitButton:i=!0,setContext:a=e=>{}}=e,{data:s}=(0,h.WL)(),[n,r]=(0,o.useState)("yes"),[d,u]=(0,o.useState)("");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(m.PD,{validationSchema:E,initialValues:{[p.W.REFERRED_FROM]:"",[p.W.ADDITIONAL_NOTES]:"yes"},onSubmit:t,submitButtonText:"submit",submitButton:i,children:[(0,l.jsx)(x.Ji,{setFormContext:a}),(0,l.jsx)(N.uQ,{children:"Health Facilities"}),(0,l.jsx)(m.el,{label:"Referral Medical Facility",name:p.W.REFERRED_FROM,getValue:u,multiple:!1,disabled:"no"==n,options:s?s.map(e=>({id:e.facility_name,label:e.facility_name})):[]}),""==d&&(0,l.jsx)(m.b1,{name:p.W.ADDITIONAL_NOTES,getValue:e=>{r(e)},label:"Is the facility you are looking for available?",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]}),"no"==n&&(0,l.jsx)(m.A8,{name:p.W.REFERRED_FROM,label:"Other Facility",id:p.W.REFERRED_FROM})]})})};var D=i(87911),A=i(23933),T=i(96527),C=i(67678),O=i(42281),R=i(52269),I=i(9670),F=i(81063);let P=e=>{let{patient:t,open:i,onClose:a}=e,{navigateTo:s}=(0,h.cq)(),[n,r]=(0,o.useState)(0),[d,u]=(0,o.useState)({});return(0,l.jsx)(m.eV,{onClose:a,open:i,title:"Remote Patient",children:(0,l.jsx)(R.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,l.jsxs)(R.default,{sx:{width:{sm:"100%",lg:"40%"}},children:[0==n&&(0,l.jsx)(k,{patient:t,next:()=>r(1)}),1==n&&(0,l.jsx)(W,{setUpdatedPatient:u,person:t,next:()=>r(2)}),2==n&&(0,l.jsx)(w,{next:()=>r(3)}),3==n&&(0,l.jsx)(M,{next:()=>r(4)}),4==n&&(0,l.jsx)(H,{next:()=>r(5)}),5==n&&(0,l.jsx)(V,{next:()=>r(6)}),6==n&&(0,l.jsx)(L,{next:()=>r(7)}),7==n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.Yc,{firstName:d.given_name,lastName:d.family_name,addresses:(null==d?void 0:d.addresses)?null==d?void 0:d.addresses:[],identifiers:d.identifiers}),(0,l.jsx)("br",{}),(0,l.jsx)(m.O6,{title:"Register More",sx:{mr:"1px"},onClick:()=>s("/registration/list")}),(0,l.jsx)(m.O6,{title:"Home",onClick:()=>s("/dashboard")})]})]})})})},k=e=>{let{patient:t,next:i}=e,{params:a}=(0,h.KU)(),[s,n]=(0,o.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[d,u]=(0,o.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[c,x]=(0,o.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""}),b=e=>{var t,i,l,a,s,n,r,d;e&&u({nationality:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.country)?s:"",district:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.address1)?n:"",village:null!=(r=null==e||null==(l=e.addresses[0])?void 0:l.address2)?r:"",traditionalAuthority:null!=(d=null==e||null==(a=e.addresses[0])?void 0:a.county_district)?d:""})},j=e=>{var t,i,l,a,s,n,r,d;e&&x({district:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.current_district)?s:"",traditionalAuthority:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.current_traditional_authority)?n:"",village:null!=(r=null==e||null==(l=e.addresses[1])?void 0:l.address1)?r:"",closeLandMark:null!=(d=null==e||null==(a=e.addresses[1])?void 0:a.address2)?d:""})},v=e=>{e&&n({firstName:null==e?void 0:e.given_name,lastName:null==e?void 0:e.family_name,birthDate:null==e?void 0:e.birthdate,gender:null==e?void 0:e.gender,birthDateEstimated:!!(null==e?void 0:e.birthdateEstimated)})},{mutate:f,isPending:p,isSuccess:g,data:y}=(0,r.h1)();return(0,o.useEffect)(()=>{g&&i()},[g]),(0,o.useEffect)(()=>{v(t),b(t),j(t)},[t]),(0,l.jsxs)(R.default,{children:[(0,l.jsxs)(U,{children:[(0,l.jsx)(I.default,{variant:"h5",children:"Demographics"}),(0,l.jsx)("br",{}),(0,l.jsx)(B,{label:"First Name",value:s.firstName}),(0,l.jsx)(B,{label:"Last Name",value:s.lastName}),(0,l.jsx)(B,{label:"Gender",value:s.gender}),(0,l.jsx)(B,{label:"Date of birth",value:s.birthDate})]}),(0,l.jsxs)(U,{children:[(0,l.jsx)(I.default,{variant:"h5",children:"Home Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(B,{label:"Country",value:d.nationality}),(0,l.jsx)(B,{label:"Home District",value:d.district}),(0,l.jsx)(B,{label:"Home Traditional Authority",value:d.traditionalAuthority}),(0,l.jsx)(B,{label:"Home Village",value:d.village})]}),(0,l.jsxs)(U,{children:[(0,l.jsx)(I.default,{variant:"h5",children:"Current Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(B,{label:"Current District",value:c.district}),(0,l.jsx)(B,{label:"Current Traditional Authority",value:c.traditionalAuthority}),(0,l.jsx)(B,{label:"Current Village",value:c.village}),(0,l.jsx)(B,{label:"Close Land Mark",value:c.closeLandMark})]}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"Merge",onClick:()=>{f({primary:{patient_id:null==a?void 0:a.id},secondary:[{doc_id:t.uuid}]})}})]})},W=e=>{var t,i,s,n,d,u,c,x,b,j,v,f,g,y,S,N,E;let{next:_,person:D,setUpdatedPatient:A}=e,{mutate:C,isPending:O,isSuccess:R,data:F}=(0,r.Wv)(),{mutate:P,isPending:k,isSuccess:W,data:w}=(0,r.Wv)(),{params:V}=(0,h.KU)(),[L,M]=(0,o.useState)({}),[H,B]=(0,o.useState)({}),[G,Y]=(0,o.useState)(),[z,K]=(0,o.useState)(),[q,$]=(0,o.useState)(),[J,Q]=(0,o.useState)([]);(0,o.useEffect)(()=>{R&&_()},[R]);let X=e=>{let t={identifiers:e.identificationNumber?[{identifier:e.identificationNumber,identifierType:p.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}]:[],names:[{givenName:e.firstName,familyName:e.lastName}],gender:e.gender,birthdateEstimated:e.birthdateEstimated,birthdate:e.birthDate};C({id:null==V?void 0:V.id,data:t})},Z=()=>{let e=[{address1:null==L?void 0:L.district,address2:null==L?void 0:L.village,address3:null==H?void 0:H.district,stateProvince:null==H?void 0:H.traditionalAuthority,countyDistrict:null==L?void 0:L.traditionalAuthority,cityVillage:null==L?void 0:L.traditionalAuthority,country:null==L?void 0:L.nationality,preferred:!0},{address1:null==H?void 0:H.village,address2:null==H?void 0:H.closeLandMark,countryDistrict:null==H?void 0:H.district,cityVillage:null==H?void 0:H.traditionalAuthority,preferred:!1}];P({id:null==V?void 0:V.id,data:{addresses:e}})};(0,o.useEffect)(()=>{0!=Object.keys(L).length&&0!=Object.keys(H).length&&Z()},[L,H]),(0,o.useEffect)(()=>{W&&(A(null==w?void 0:w.patient),_())},[W]);let ee=null==(t=D.identifiers.find(e=>{var t;return(null==e||null==(t=e.identifier_type)?void 0:t.uuid)==p.W.NATIONAL_ID_IDENTIFIER_TYPE}))?void 0:t.identifier;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.OverlayLoader,{open:O}),(0,l.jsxs)(U,{children:[(0,l.jsx)(I.default,{variant:"h5",children:"Edit Demographics"}),(0,l.jsx)("br",{}),(0,l.jsx)(T.H5,{setContext:Y,submitButton:!1,initialValues:{identificationNumber:ee,firstName:D.given_name,lastName:D.family_name,gender:D.gender,birthDate:D.birthdate,birthdateEstimated:!1},onSubmit:e=>{X(e)}})]}),(0,l.jsxs)(U,{children:[(0,l.jsx)(I.default,{variant:"h5",children:"Home Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(T.CB,{setContext:K,initialValues:{nationality:null!=(j=null==D||null==(i=D.addresses[0])?void 0:i.country)?j:"",district:null!=(v=null==D||null==(s=D.addresses[0])?void 0:s.address1)?v:"",village:null!=(f=null==D||null==(n=D.addresses[0])?void 0:n.address2)?f:"",traditionalAuthority:null!=(g=null==D||null==(d=D.addresses[0])?void 0:d.county_district)?g:""},onSubmit:M,submitButton:!1})]}),(0,l.jsxs)(U,{children:[(0,l.jsx)(I.default,{variant:"h5",children:"Current Location"}),(0,l.jsx)("br",{}),(0,l.jsx)(T.CB,{currentLocation:!0,setContext:$,initialValues:{district:null!=(y=null==D||null==(u=D.addresses[0])?void 0:u.current_district)?y:"",traditionalAuthority:null!=(S=null==D||null==(c=D.addresses[0])?void 0:c.current_traditional_authority)?S:"",village:null!=(N=null==D||null==(x=D.addresses[1])?void 0:x.address1)?N:"",closeLandMark:null!=(E=null==D||null==(b=D.addresses[1])?void 0:b.address2)?E:""},onSubmit:B,submitButton:!1})]}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:a}=G,{submitForm:s,errors:n,isValid:r,touched:d,dirty:o}=z,{submitForm:u,errors:c,isValid:m,touched:x,dirty:h}=q;e(),s(),u()}})]})},w=e=>{let{next:t}=e,{ServerTime:i}=(0,y.useServerTime)(),{activeVisit:s}=(0,h.gd)(),{params:n}=(0,h.KU)(),{mutate:r,isSuccess:d,isPending:u,isError:c}=(0,v.Fs)(),[x,b]=(0,o.useState)();return(0,o.useEffect)(()=>{d&&t()},[d]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(U,{children:[(0,l.jsx)(a.OverlayLoader,{open:u}),(0,l.jsx)(T._T,{submitButton:!1,setContext:b,initialValues:{},onSubmit:e=>{let t=i.getServerTimeString();r({encounterType:p.fA.SOCIAL_HISTORY,visit:s,patient:n.id,encounterDatetime:t,obs:(0,O.gX)(e,t)})}})]}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:a}=x;e()}})]})},V=e=>{let{next:t}=e,{ServerTime:i}=(0,y.useServerTime)(),[a,s]=(0,o.useState)(),{params:n}=(0,h.KU)(),{activeVisit:r}=(0,h.gd)(),{mutate:d,isSuccess:u,isPending:c,isError:x}=(0,v.Fs)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U,{children:(0,l.jsx)(_,{setContext:s,submitButton:!1,onSubmit:e=>{let t=i.getServerTimeString();d({encounterType:p.fA.REFERRAL,visit:r,patient:n.id,encounterDatetime:t,obs:(0,O.gX)(e,t)})}})}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:i,isValid:l,touched:s,dirty:n}=a;e(),t()}})]})},L=e=>{let{next:t}=e,{ServerTime:i}=(0,y.useServerTime)(),[a,s]=(0,o.useState)(),{params:n}=(0,h.KU)(),{activeVisit:r}=(0,h.gd)(),{mutate:d,isSuccess:u,isPending:c,isError:x}=(0,v.Fs)();return(0,o.useEffect)(()=>{u&&t()},[u]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U,{children:(0,l.jsx)(T.OE,{initialValues:{},setContext:s,submitButton:!1,onSubmit:e=>{let t=i.getServerTimeString(),l=e[p.W.PAYMENT_OPTIONS].filter(e=>e.value).map(e=>({concept:p.W.PAYMENT_OPTIONS,value:e.key,obsDatetime:t}));d({encounterType:p.fA.FINANCING,visit:r,patient:n.id,encounterDatetime:t,obs:[...(0,O.gX)(e,t),...l]})}})}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:i,isValid:l,touched:s,dirty:n}=a;e(),t()}})]})},M=e=>{let{next:t}=e,{ServerTime:i}=(0,y.useServerTime)(),[a,s]=(0,o.useState)(),[n,r]=(0,o.useState)(""),{patient:u}=(0,h.gd)(),{mutate:c,isPending:x,isSuccess:b,data:j,isError:v}=(0,d.AU)(),{mutate:f,isPending:p,isSuccess:g,isError:S,data:N}=(0,d.bJ)();return(0,o.useEffect)(()=>{g&&(i.getServerTimeString(),c({patient:null==u?void 0:u.uuid,person:null==N?void 0:N.uuid,nextOfKinRelationship:n}))},[g]),(0,o.useEffect)(()=>{b&&t()},[b]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U,{children:(0,l.jsx)(T.tc,{initialValues:{},setContext:s,submitButton:!1,onSubmit:e=>{f(e),r(e.relationship)}})}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:s}=a;e()}})]})},H=e=>{let{next:t}=e,{params:i}=(0,h.KU)(),[a,s]=(0,o.useState)(),{mutate:n,isPending:r,isSuccess:u,isError:c,data:x}=(0,d.bJ)(),{mutate:b,isPending:j,isSuccess:v,data:f,isError:g}=(0,d.AU)();return(0,o.useEffect)(()=>{u&&b({patient:null==i?void 0:i.id,person:null==x?void 0:x.uuid,nextOfKinRelationship:p.W.GUARDIAN})},[u]),(0,o.useEffect)(()=>{v&&t()},[v]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U,{children:(0,l.jsx)(T.tc,{isGuardian:!0,initialValues:{given_name:"",family_name:"",relationship:p.W.GUARDIAN},setContext:s,submitButton:!1,onSubmit:e=>{console.log({values:e}),n({nextOfKinFirstName:e.given_name,nextOfKinLastName:e.family_name})}})}),(0,l.jsx)(m.O6,{sx:{width:"100%",borderRadius:"1ch"},title:"submit",onClick:()=>{let{submitForm:e,errors:t,isValid:i,touched:l,dirty:s}=a;e(),console.log(t)}})]})},U=e=>{let{children:t}=e;return(0,l.jsx)(F.default,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,my:"1ch"},children:t})},B=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(R.default,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(I.default,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(I.default,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})};var G=i(39347),Y=i(20071),z=i(22769);let K=e=>{var t,i,a,n;let{searchedPatient:r,searchResults:d,genericSearch:u}=e,{navigateTo:c}=(0,h.cq)(),{params:x}=(0,h.KU)(),[b,j]=(0,o.useState)(!1),{setRegistrationType:v,setPatient:f,patient:p}=(0,o.useContext)(s.$0),[g,y]=(0,o.useState)(""),{setPatient:S}=(0,o.useContext)(s.$0),N=()=>{S(r),c("/registration/".concat(x.id,"/new"))},E=(e,t)=>{f(e),j(!0),y(t)},_=(null==d||null==(t=d.locals)?void 0:t.length)==0&&(null==d||null==(i=d.remotes)?void 0:i.length)==0;return(0,l.jsxs)(m.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(m.Th,{variant:"h5",children:"Search Results"}),_&&(0,l.jsxs)(m.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)("br",{}),(0,l.jsx)(m.Th,{variant:"body2",children:"No patient with similar demographics found"}),(0,l.jsx)("br",{}),!u&&(0,l.jsx)(m.O6,{sx:{mr:"0.2ch",borderRadius:"1px"},variant:"secondary",title:"add new record",onClick:N})]}),(0,l.jsx)("br",{}),!_&&(0,l.jsx)(m.jD,{sx:{width:"100%"},children:!u&&(0,l.jsx)(m.O6,{sx:{mr:"0.2ch",borderRadius:"1px"},variant:"secondary",title:"add new record",onClick:N})}),(0,l.jsx)("br",{}),(0,l.jsxs)(m.jD,{sx:{width:"100%",height:"50ch",overflow:"scroll"},children:[null==d||null==(a=d.locals)?void 0:a.map(e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(q,{genericSearch:u,setOpen:e=>!u&&E(e,"local"),type:"Local",person:e},null==e?void 0:e.uuid)})),null==d||null==(n=d.remotes)?void 0:n.map(e=>(0,l.jsx)(q,{genericSearch:u,setOpen:e=>!u&&E(e,"remote"),type:"Remote",person:e},null==e?void 0:e.uuid))]}),"local"==g&&(0,l.jsx)(J,{type:g,patient:p||{},onClose:()=>j(!1),open:b}),"remote"==g&&(0,l.jsx)(P,{patient:p||{},onClose:()=>j(!1),open:b})]})},q=e=>{var t,i,a,s,n;let{person:r,type:d,setOpen:u,genericSearch:c}=e,[x,j]=(0,o.useState)(!1),{navigateTo:v}=(0,h.cq)();if((0,o.useEffect)(()=>{j(!!(null==r?void 0:r.active_visit))},[r]),!r)return(0,l.jsx)(l.Fragment,{});let f=null==r||null==(t=r.identifiers)?void 0:t.find(e=>{var t;return(null==e||null==(t=e.identifier_type)?void 0:t.name)=="National id"});return(0,l.jsxs)(m.sc,{onClick:()=>{x||u(r)},sx:{display:"flex",padding:2,width:"100%",my:1,cursor:"pointer"},children:[(0,l.jsxs)(m.jD,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",mr:1},children:[(0,l.jsx)(m.jD,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#F5F5F5"},children:(0,l.jsx)(m.Th,{color:m.zQ.primary,variant:"h1",children:(0,l.jsx)(b.x$1,{})})}),(0,l.jsx)("br",{}),"Local"==d&&c&&(0,l.jsx)(C.jx,{title:"Print Barcode",icon:(0,l.jsx)(I.default,{mr:"1ch",children:(0,l.jsx)(b.SCC,{})}),variant:"primary",uuid:null==r?void 0:r.uuid}),"Local"==d&&c&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(G.A,{onClick:()=>v("/patient/".concat(r.uuid,"/profile")),sx:{mb:"1ch"},variant:"text",children:"view profile"})}),x&&!c&&(0,l.jsx)(z.R,{patientId:"",dialogTitle:"Close Patient Visit",dialogConfirmationMsg:"Are you sure you want to close this visit?",visitId:null==r||null==(i=r.active_visit)?void 0:i.uuid,buttonTitle:"Close Visit",onDelete:()=>j(!1)})]}),(0,l.jsxs)(m.jD,{children:[(0,l.jsxs)(m.jD,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)(m.Th,{variant:"h5",children:[null==r?void 0:r.given_name," ",null==r?void 0:r.family_name]}),(0,l.jsx)(m.Th,{children:d})]}),(0,l.jsxs)(m.jD,{sx:{display:"flex"},children:[(0,l.jsx)(m.Th,{color:"GrayText",sx:{mr:1},children:"NPID:"}),(0,l.jsx)(m.Th,{color:"GrayText",children:null==f?void 0:f.identifier})]}),(0,l.jsx)("br",{}),(0,l.jsxs)(m.jD,{sx:{display:"flex",mb:1},children:[(0,l.jsx)($,{label:"Date of birth",value:null==r?void 0:r.birthdate}),(0,l.jsx)($,{label:"Gender",value:null==r?void 0:r.gender})]}),(0,l.jsxs)(m.jD,{sx:{display:"flex"},children:[(0,l.jsx)($,{label:"Home district",value:r&&r.addresses&&(null==r||null==(a=r.addresses[0])?void 0:a.address1)}),(0,l.jsx)($,{label:"Home traditional authority",value:r&&r.addresses&&(null==r||null==(s=r.addresses[0])?void 0:s.cityVillage)}),(0,l.jsx)($,{label:"Home village",value:r&&r.addresses&&(null==r||null==(n=r.addresses[0])?void 0:n.address2)})]})]}),(0,l.jsx)(m.jD,{sx:{ml:"1ch"},children:x&&(0,l.jsx)(Y.A,{color:"success",label:"Visit"})})]})},$=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(m.jD,{sx:{display:"flex",flexDirection:"column",mr:1},children:[(0,l.jsx)(m.Th,{variant:"subtitle2",color:"#C0C0C0",sx:{mr:.5},children:t}),(0,l.jsx)(m.Th,{variant:"subtitle2",color:"#585858",children:i?i.toString():""})]})},J=e=>{let{patient:t,onClose:i,open:s,type:n="remote"}=e,[d,u]=(0,o.useState)(n),{params:c}=(0,h.KU)(),{ServerTime:x}=(0,y.useServerTime)(),{data:b}=(0,v.$O)(null==c?void 0:c.id),{data:S,isPending:N}=(0,v.$O)(null==t?void 0:t.uuid),{mutate:E,isSuccess:_}=(0,f.FD)(),{data:D,isPending:T}=(0,r.B$)(null==t?void 0:t.uuid),[C,O]=(0,o.useState)({}),[R,I]=(0,o.useState)(""),[F,P]=(0,o.useState)(!1),[k,W]=(0,o.useState)(!1),{mutateAsync:w,isPending:V,isSuccess:L,isError:M}=(0,v.jM)(),{mutateAsync:H,isPending:U,isSuccess:B,isError:G}=(0,v.jM)(),{mutateAsync:Y,isPending:z,isSuccess:K,isError:q}=(0,v.jM)(),{mutateAsync:$,isPending:J,isSuccess:Z,isError:ee,data:et}=(0,r.h1)(),{mutateAsync:ei,isPending:el,isSuccess:ea,isError:es,data:en}=(0,r.h1)(),[er,ed]=(0,o.useState)({}),[eo,eu]=(0,o.useState)({}),[ec,em]=(0,o.useState)({[p.W.REFERRED_FROM]:""});(0,o.useEffect)(()=>{O(t)},[t]),(0,o.useEffect)(()=>{ea&&u("")},[ea]),(0,o.useEffect)(()=>{let e=null==b?void 0:b.find(e=>e.encounter_type.uuid==p.fA.SCREENING_ENCOUNTER);I((0,g.m)(null==e?void 0:e.obs,p.W.IS_PATIENT_REFERRED))},[b]),(0,o.useEffect)(()=>{K&&W(!0)},[K]);let ex=async()=>{var e,i,l,a,s;let n=null==t?void 0:t.uuid,r=null==c?void 0:c.id,d=await $({primary:{patient_id:n},secondary:[{patient_id:r}]});await w({encounterType:p.fA.SOCIAL_HISTORY,visit:null==d||null==(e=d.active_visit)?void 0:e.uuid,patient:null==d?void 0:d.uuid,encounterDatetime:x.getServerTimeString(),obs:null==er||null==(i=er.obs)?void 0:i.map(e=>({concept:e.names[0].uuid,value:e.value,obsDatetime:x.getServerTimeString()}))}),await Y({encounterType:p.fA.REFERRAL,visit:null==d||null==(l=d.active_visit)?void 0:l.uuid,patient:null==d?void 0:d.uuid,encounterDatetime:x.getServerTimeString(),obs:[{concept:p.W.REFERRED_FROM,value:ec[p.W.REFERRED_FROM],obsDatetime:x.getServerTimeString()}]}),await H({encounterType:p.fA.FINANCING,visit:null==d||null==(a=d.active_visit)?void 0:a.uuid,patient:null==d?void 0:d.uuid,encounterDatetime:x.getServerTimeString(),obs:null==eo||null==(s=eo.obs)?void 0:s.map(e=>({concept:e.names[0].uuid,value:e.value,obsDatetime:x.getServerTimeString()}))})};(0,o.useEffect)(()=>{let e=null==S?void 0:S.find(e=>e.encounter_type.uuid==p.fA.FINANCING),t=null==S?void 0:S.find(e=>e.encounter_type.uuid==p.fA.SOCIAL_HISTORY);t&&ed(t),e&&eu(e)},[S]);let eh=async e=>{await em(e),await ex(),P(!1)};return(0,l.jsxs)(m.eV,{sx:{backgroundColor:"#F6F6F6"},onClose:i,open:s,title:"view patient",children:[(0,l.jsx)(a.OverlayLoader,{open:J||z||U||V||el}),(0,l.jsx)(X,{open:k}),(0,l.jsx)(m.Th,{variant:"h4",children:"".concat(t.given_name," ").concat(t.family_name)}),(0,l.jsx)("br",{}),(0,l.jsx)(m.O6,{title:"Continue with Patient",onClick:()=>{if(R==p.W.YES)return void P(!0);ex()}}),"remote"==d&&(0,l.jsx)(m.O6,{sx:{mx:"1px"},title:"Merge Patient",onClick:()=>{let e=null==t?void 0:t.uuid;ei({primary:{patient_id:C.uuid},secondary:[{doc_id:e}]})}}),(0,l.jsx)(Q,{open:F,onClose:()=>P(!1),onSubmit:eh}),(0,l.jsx)("br",{}),(0,l.jsx)(j.l,{disabled:"remote"==d,patient:t}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(A.vY,{disabled:"remote"==d,patientId:null==t?void 0:t.uuid,loading:T,relationships:D||[]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)(m.jD,{display:"flex",children:[(0,l.jsx)(A.oC,{disabled:"remote"==d,onSubmit:e=>{ed({obs:Object.keys(e).map(t=>({names:[{uuid:t}],concept:t,value:e[t],obsDatetime:x.getServerTimeString()}))})},loading:N,socialHistory:er||{}}),(0,l.jsx)(A.c4,{disabled:"remote"==d,onSubmit:e=>{var t;let i=null==(t=e[p.W.PAYMENT_OPTIONS].filter(e=>e.value)[0])?void 0:t.key;e[p.W.PAYMENT_OPTIONS]=i;let l=JSON.parse(JSON.stringify(eo)),a={"c7bcc8bd-09d5-4f98-8d58-5179f749fd99":p.W.PAYMENT_OPTIONS,"b0ffce26-2d25-449e-871e-c702e44bb37e":p.W.INSURANCE_PROVIDER,"98b08fb2-f877-45b6-a95a-db89dffefb27":p.W.INSURANCE_NUMBER,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1":p.W.INSURANCE_SCHEME,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8":p.W.INSURANCE_STATUS},s=l.obs.map(t=>{let i=e[a[t.names[0].uuid]];return{...t,value:i}});l.obs=s,eu(l)},loading:N,financing:eo||{}})]})]})},Q=e=>{let{open:t,onClose:i,onSubmit:a}=e;return(0,l.jsx)(m.eV,{maxWidth:"sm",title:"Add Referral",open:t,onClose:i,children:(0,l.jsx)(_,{onSubmit:a})})},X=e=>{let{open:t}=e,{navigateTo:i}=(0,h.cq)();return(0,l.jsx)(m.eV,{open:t,maxWidth:"sm",title:"",onClose:()=>{},children:(0,l.jsx)(D.n,{title:"Process Completed Successfully",primaryActionText:"Register More",secondaryActionText:"Go Home",onPrimaryAction:()=>{i("/registration/list")},onSecondaryAction:()=>{i("/dashboard")}})})},Z=e=>{let{patient:t,genericSearch:i=!1}=e,{setSearchedPatient:d}=(0,o.useContext)(s.$0),[c,m]=(0,o.useState)({firstName:"",lastName:"",gender:""}),{refetch:x,isFetching:h,isSuccess:b,data:j,isError:v}=(0,r.L3)(c.firstName,c.lastName,c.gender),[f,p]=(0,o.useState)({});return(0,o.useEffect)(()=>{c.firstName&&x()},[c]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.B,{init:{firstName:null==t?void 0:t.given_name,lastName:null==t?void 0:t.family_name},onSubmit:e=>{p(e),m({firstName:e.firstName,lastName:e.lastName,gender:e.gender}),d({patient_id:t.patient_id,firstName:e.firstName,lastName:e.lastName,gender:e.gender})},fullForm:!1}),(0,l.jsx)("br",{}),(0,l.jsx)(a.OverlayLoader,{open:h}),(b||v)&&(0,l.jsx)(K,{genericSearch:i,searchResults:n(j),searchedPatient:f})]})},ee=e=>{let{genericSearch:t=!0}=e,[i,s]=(0,o.useState)(""),{refetch:n,isFetching:r,isSuccess:u,data:m,isError:x}=(0,d.Ov)(i);return(0,o.useEffect)(()=>{i&&n()},[i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.OverlayLoader,{open:r}),(0,l.jsx)(c.c,{onSubmit:e=>s(e.npid)}),(u||x)&&(0,l.jsx)(K,{genericSearch:t,searchResults:m||{remotes:[],locals:[]},searchedPatient:m})]})}},23933:(e,t,i)=>{"use strict";i.d(t,{c4:()=>x,vY:()=>h,oC:()=>m});var l=i(95155),a=i(9890),s=i(59487),n=i(12115),r=i(23312),d=i(53988),o=i(96527),u=i(89915),c=i(14120);let m=e=>{let{socialHistory:t,loading:i,onSubmit:a,disabled:o}=e,[c,m]=(0,n.useState)(!1),x=(0,d.m)(null==t?void 0:t.obs,r.W.MARITAL_STATUS),h=(0,d.m)(null==t?void 0:t.obs,r.W.RELIGION),f=(0,d.m)(null==t?void 0:t.obs,r.W.OCCUPATION),p=(0,d.m)(null==t?void 0:t.obs,r.W.METHOD_OF_TRANSPORTATION),g=(0,d.m)(null==t?void 0:t.obs,r.W.HIGHEST_EDUCATION);return i?(0,l.jsx)(s.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})}):(0,l.jsxs)(b,{children:[(0,l.jsx)(v,{onSubmit:e=>{a(e),m(!1)},initialValues:{[r.W.MARITAL_STATUS]:x,[r.W.RELIGION]:h,[r.W.OCCUPATION]:f,[r.W.METHOD_OF_TRANSPORTATION]:p,[r.W.HIGHEST_EDUCATION]:g},open:c,onClose:()=>m(!1)}),(0,l.jsx)(s.Th,{variant:"h5",children:"Social History"}),(0,l.jsx)(j,{label:"Marital Status",value:x}),(0,l.jsx)(j,{label:"Religion",value:h}),(0,l.jsx)(j,{label:"Occupation",value:f}),(0,l.jsx)(j,{label:"Transportation",value:p}),(0,l.jsx)(j,{label:"Highest Education",value:g}),(0,l.jsx)(s.O6,{disabled:o,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>m(!0)})]})},x=e=>{let{financing:t,loading:i,onSubmit:a,disabled:o}=e,[c,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)({paymentOptions:"",insuranceProvider:"",insuranceNumber:"",insuranceScheme:"",insuranceStatus:""});if((0,n.useEffect)(()=>{let e=(0,d.m)(null==t?void 0:t.obs,"c7bcc8bd-09d5-4f98-8d58-5179f749fd99"),i=(0,d.m)(null==t?void 0:t.obs,"b0ffce26-2d25-449e-871e-c702e44bb37e"),l=(0,d.m)(null==t?void 0:t.obs,"98b08fb2-f877-45b6-a95a-db89dffefb27");h({paymentOptions:e,insuranceProvider:i,insuranceNumber:l,insuranceScheme:(0,d.m)(null==t?void 0:t.obs,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1"),insuranceStatus:(0,d.m)(null==t?void 0:t.obs,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8")})},[t]),i)return(0,l.jsx)(s.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})});let{paymentOptions:v,insuranceProvider:p,insuranceNumber:g,insuranceScheme:y,insuranceStatus:S}=x;return(0,l.jsxs)(b,{children:[(0,l.jsx)(f,{onSubmit:e=>{a(e),m(!1)},initialValues:{[r.W.PAYMENT_OPTIONS]:[v],[r.W.INSURANCE_PROVIDER]:p,[r.W.INSURANCE_NUMBER]:g,[r.W.INSURANCE_STATUS]:S,[r.W.INSURANCE_SCHEME]:y},open:c,onClose:()=>m(!1)}),(0,l.jsx)(s.Th,{variant:"h5",children:"Financing"}),(0,l.jsx)(j,{label:"Payment Option",value:v}),(0,l.jsx)(j,{label:"Insurance Provider",value:p}),(0,l.jsx)(j,{label:"Insurance Number",value:g}),(0,l.jsx)(j,{label:"Insurance Scheme",value:y}),(0,l.jsx)(j,{label:"Insurance Status",value:S}),(0,l.jsx)(s.O6,{disabled:o,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>m(!0)})]})},h=e=>{let{patientId:t,disabled:i}=e,{data:d,isPending:o,refetch:m}=(0,a.B$)(t),[x,h]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),{data:g,isPending:y}=(0,a.vi)(),[S,N]=(0,n.useState)({}),[E,_]=(0,n.useState)(""),{mutate:D,isPending:A,isSuccess:T,isError:C,data:O}=(0,c.bJ)(),{mutateAsync:R,isSuccess:I,data:F}=(0,a.Wv)(),{mutate:P,isPending:k,isSuccess:W,data:w,isError:V}=(0,c.AU)(),[L,M]=(0,n.useState)(!0),[H,U]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{T&&O&&P({patient:t,person:null==O?void 0:O.uuid,nextOfKinRelationship:E})},[T]),(0,n.useEffect)(()=>{W&&(m(),f(!1),M(!0),U(!1))},[W]),o||y||A||k)return(0,l.jsx)(s.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})});let B=null==d?void 0:d.map(e=>{let t=e.relationship,i=null==g?void 0:g.find(e=>e.relationship_type_id==t),l=null==g?void 0:g.find(e=>e.a_is_to_b==(null==i?void 0:i.b_is_to_a));return{given_name:e.person_b.names[0].given_name,family_name:e.person_b.names[0].family_name,relationship:null==i?void 0:i.b_is_to_a,relationshipUUID:null==l?void 0:l.uuid,person:e.person_b.uuid}}),G=e=>{_(e.relationship),D({nextOfKinFirstName:e.given_name,nextOfKinLastName:e.family_name})},Y=async e=>{let t={identifiers:[],names:[{givenName:e.given_name,familyName:e.family_name}]};await R({id:e.person,data:t}),m(),h(!1),M(!0),U(!1)};return(0,l.jsxs)(s.jD,{sx:{display:"flex",width:(null==B?void 0:B.length)==1?"50%":"100%"},children:[(0,l.jsx)(p,{onSubmit:L?Y:G,initialValues:{...S,...H?{relationship:r.W.GUARDIAN}:{}},open:x,isGuardian:H,onClose:()=>{h(!1),M(!0),U(!1)}}),(0,l.jsx)(p,{onSubmit:L?Y:G,isGuardian:!0,initialValues:{relationship:r.W.GUARDIAN},open:v,onClose:()=>{f(!1),M(!0),U(!1)}}),null==B?void 0:B.map(e=>{var t;return(0,l.jsxs)(b,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:(null==(t=e.relationship)?void 0:t.toLowerCase())=="guardian"?"Guardian Information":"Next Of Kin Information"}),(0,l.jsx)(j,{label:"First Name",value:e.given_name}),(0,l.jsx)(j,{label:"Last Name",value:e.family_name}),(0,l.jsx)(j,{label:"Relationship",value:e.relationship}),(0,l.jsx)(s.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>{var t;h(!0),(null==(t=e.relationship)?void 0:t.toLowerCase())=="guardian"&&U(!0),N({...e,relationship:e.relationshipUUID})}})]})}),(0,l.jsxs)(l.Fragment,{children:[(null==B?void 0:B.length)==0&&(0,l.jsx)(s.O6,{sx:{alignSelf:"flex-start",mr:"1px"},title:"Add Next Of Kin",onClick:()=>{M(!1),h(!0)}}),((null==B?void 0:B.length)==1||(null==B?void 0:B.length)==0)&&(0,l.jsx)(s.O6,{disabled:i,sx:{alignSelf:"flex-start"},title:"Add Guardian",onClick:()=>{M(!1),f(!0)}})]})]})},b=e=>{let{children:t}=e;return(0,l.jsx)(s.sc,{sx:{p:"1ch",flex:1,mx:"0.5ch"},children:t})},j=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(s.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(s.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(s.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})},v=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(s.eV,{maxWidth:"sm",title:"Edit Social History",open:t,onClose:i,children:(0,l.jsx)(o._T,{initialValues:a,onSubmit:n})})},f=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(s.eV,{maxWidth:"sm",title:"Edit Financing",open:t,onClose:i,children:(0,l.jsx)(o.OE,{initialValues:a,onSubmit:n})})},p=e=>{let{open:t,onClose:i,initialValues:a,isGuardian:n,onSubmit:r}=e;return(0,l.jsx)(s.eV,{maxWidth:"sm",title:"Edit Relationships",open:t,onClose:i,children:(0,l.jsx)(o.tc,{isGuardian:n,initialValues:a,onSubmit:r})})}},34149:function(e,t,i){e.exports=function(e,t){"use strict";let i=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],l=()=>{};return function(a){function s(t){let l={},a={},s=i.map(e=>e.key);return Object.entries(t).forEach(t=>{let[i,n]=t;s.includes(i)&&e.isValidElement(n)?(l[i]=n,a[i]=" "):a[i]=n}),[l,a]}function n(e,l){Object.entries(l).forEach(l=>{let[s,n]=l,r=i.find(e=>e.key===s).getter(a),d=t.createRoot(r);d.render(n),e.__roots.push(d)})}function r(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends a{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return a.argsToParams(t);{let e={};return["title","html","icon"].forEach((i,l)=>{void 0!==t[l]&&(e[i]=t[l])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[i,a]=s(this.__params),d=a.willOpen||l,o=a.didOpen||l,u=a.didDestroy||l;return super._main(Object.assign({},a,{willOpen:e=>{n(this,i),d(e)},didOpen:e=>{setTimeout(()=>{o(e)})},didDestroy:e=>{u(e),r(this)}}))}update(e){Object.assign(this.__params,e),r(this);let[t,i]=s(this.__params);super.update(i),n(this,t)}}}}(i(12115),i(12669))},52701:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var l=i(76856),a=i(95155);let s=(0,l.A)((0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},73897:(e,t,i)=>{"use strict";i.d(t,{g:()=>u});var l=i(95155),a=i(12115),s=i(44192),n=i(80460),r=i(52269);function d(e){let{children:t,value:i,index:a,...s}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:i!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),...s,children:i===a&&(0,l.jsx)(r.default,{children:t})})}function o(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function u(e){let{demographics:t,npid:i}=e,[u,c]=a.useState(0);return(0,l.jsxs)(r.default,{sx:{width:"100%"},children:[(0,l.jsx)(r.default,{children:(0,l.jsxs)(s.A,{value:u,onChange:(e,t)=>{c(t)},"aria-label":"basic tabs example",centered:!0,children:[(0,l.jsx)(n.A,{label:"Demographics",...o(0)}),(0,l.jsx)(n.A,{label:"NPID",...o(1)})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(d,{value:u,index:0,children:t}),(0,l.jsx)(d,{value:u,index:1,children:i})]})}},94713:(e,t,i)=>{"use strict";i.d(t,{l:()=>m});var l=i(95155),a=i(12115),s=i(59487),n=i(25061),r=i(48339),d=i(96527),o=i(23312),u=i(9890),c=i(15377);let m=e=>{let{patient:t,disabled:i}=e,[n,r]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),{mutate:g,isPending:y,isSuccess:S,data:N}=(0,u.Wv)(),[E,_]=(0,a.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[D,A]=(0,a.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[T,C]=(0,a.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""});(0,a.useEffect)(()=>{O(t),I(t),R(t)},[t]),(0,a.useEffect)(()=>{S&&N&&(O(N),R(N),I(N))},[N,S]);let O=e=>{e&&_({firstName:null==e?void 0:e.given_name,lastName:null==e?void 0:e.family_name,birthDate:null==e?void 0:e.birthdate,gender:null==e?void 0:e.gender,birthDateEstimated:!!(null==e?void 0:e.birthdateEstimated)})},R=e=>{var t,i,l,a,s,n,r,d;e&&A({nationality:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.country)?s:"",district:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.address1)?n:"",village:null!=(r=null==e||null==(l=e.addresses[0])?void 0:l.address2)?r:"",traditionalAuthority:null!=(d=null==e||null==(a=e.addresses[0])?void 0:a.county_district)?d:""})},I=e=>{var t,i,l,a,s,n,r,d;e&&C({district:null!=(s=null==e||null==(t=e.addresses[0])?void 0:t.current_district)?s:"",traditionalAuthority:null!=(n=null==e||null==(i=e.addresses[0])?void 0:i.current_traditional_authority)?n:"",village:null!=(r=null==e||null==(l=e.addresses[1])?void 0:l.address1)?r:"",closeLandMark:null!=(d=null==e||null==(a=e.addresses[1])?void 0:a.address2)?d:""})};return(0,l.jsx)(s.jD,{sx:{display:"flex",mt:"1ch"},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.OverlayLoader,{open:y}),(0,l.jsx)(b,{onSubmit:e=>{let i={identifiers:[{identifier:e.identificationNumber,identifierType:o.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}],names:[{givenName:e.firstName,familyName:e.lastName}],gender:e.gender,birthdateEstimated:e.birthdateEstimated,birthdate:e.birthDate};g({id:t.uuid,data:i}),r(!1)},initialValues:{...E},onClose:()=>r(!1),open:n}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:"Demographics"}),(0,l.jsx)(h,{label:"First Name",value:E.firstName}),(0,l.jsx)(h,{label:"Last Name",value:E.lastName}),(0,l.jsx)(h,{label:"Gender",value:E.gender}),(0,l.jsx)(h,{label:"Date of birth",value:E.birthDate})]}),(0,l.jsx)(s.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>r(!0)})]}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:"Home Location"}),(0,l.jsx)(h,{label:"Country",value:D.nationality}),(0,l.jsx)(h,{label:"Home District",value:D.district}),(0,l.jsx)(h,{label:"Home Traditional Authority",value:D.traditionalAuthority}),(0,l.jsx)(h,{label:"Home Village",value:D.village})]}),(0,l.jsx)(j,{onSubmit:e=>{let i=[{address1:e.district,address2:e.village,address3:T.district,stateProvince:T.traditionalAuthority,countyDistrict:e.traditionalAuthority,cityVillage:e.traditionalAuthority,country:e.nationality,preferred:!0},{address1:T.village,address2:T.closeLandMark,countryDistrict:T.district,cityVillage:T.traditionalAuthority,preferred:!1}];g({id:t.uuid,data:{addresses:i}}),m(!1)},initialValues:D,open:d,onClose:()=>m(!1)}),(0,l.jsx)(s.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>m(!0)})]}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Th,{variant:"h5",children:"Current Location"}),(0,l.jsx)(h,{label:"Current District",value:T.district}),(0,l.jsx)(h,{label:"Current Traditional Authority",value:T.traditionalAuthority}),(0,l.jsx)(h,{label:"Current Village",value:T.village}),(0,l.jsx)(h,{label:"Close Land Mark",value:T.closeLandMark})]}),(0,l.jsx)(v,{onSubmit:e=>{var i;let l=[{address1:D.district,address2:D.village,address3:e.district,stateProvince:e.traditionalAuthority,countyDistrict:D.traditionalAuthority,cityVillage:D.traditionalAuthority,country:D.nationality,preferred:!0},{address1:e.village,address2:null==t||null==(i=t.addresses[1])?void 0:i.address2,countryDistrict:e.district,cityVillage:e.traditionalAuthority,preferred:!1}];g({id:t.uuid,data:{addresses:l}}),p(!1)},onClose:()=>p(!1),initialValues:T,open:f}),(0,l.jsx)(s.O6,{variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>p(!0)})]})]})})},x=e=>{let{children:t}=e;return(0,l.jsx)(s.sc,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,mx:"0.5ch"},children:t})},h=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(s.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(s.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(s.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})},b=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Demographics",open:t,onClose:i,children:(0,l.jsx)(n.H,{onSubmit:s,initialValues:a})})},j=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Home Location",open:t,onClose:i,children:(0,l.jsx)(d.CB,{initialValues:a,onSubmit:s})})},v=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Current Location",open:t,onClose:i,children:(0,l.jsx)(d.CB,{currentLocation:!0,initialValues:a,onSubmit:s})})}},95425:(e,t,i)=>{"use strict";i.d(t,{c:()=>u});var l=i(95155);i(12115);var a=i(59487),s=i(37129),n=i(42281);let r={npid:{name:"npid",label:"NPID"}},d=s.Ik().shape({[r.npid.name]:s.Yj().required().label(r.npid.label)}),o=(0,n.f6)(r),u=e=>{let{onSubmit:t,init:i}=e;return(0,l.jsx)(a.PD,{validationSchema:d,initialValues:{...o,...i},onSubmit:t,submitButton:!1,children:(0,l.jsxs)(a.jD,{children:[(0,l.jsx)(a.A8,{sx:{width:"100%",my:0},name:r.npid.name,id:r.npid.name,size:"small",label:r.npid.label}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(a.O6,{sx:{width:"100%",height:"5ch",borderRadius:"10px"},type:"submit",onClick:()=>{},title:"search"})]})})}},98622:(e,t,i)=>{"use strict";i.d(t,{B:()=>c});var l=i(95155);i(12115);var a=i(59487),s=i(37129),n=i(42281),r=i(23312);let d={firstName:{name:"firstName",label:"First Name"},phoneNumber:{name:"phoneNumber",label:"Phone Number"},lastName:{name:"lastName",label:"Last Name"},dob:{name:"birthDate",label:"Estimated Age"},gender:{name:"gender",label:"Gender"},homeDistrict:{name:"homeDistrict",label:"Home District"},nationality:{name:"nationality",label:"Nationality"},homeTraditionalAuthority:{name:"homeTraditionalAuthority",label:"Home Traditional Authority"},homeVillage:{name:"homeVillage",label:"Home Village"}},o=s.Ik().shape({[d.firstName.name]:s.Yj().required().label(d.firstName.label),[d.lastName.name]:s.Yj().required().label(d.lastName.label),[d.dob.name]:s.Yj().label(d.dob.label),[d.gender.name]:s.Yj().required().label(d.gender.label),[d.homeDistrict.name]:s.Yj().label(d.homeDistrict.label),[d.homeTraditionalAuthority.name]:s.Yj().label(d.homeTraditionalAuthority.label),[d.homeVillage.name]:s.Yj().label(d.homeVillage.label)}),u=(0,n.f6)(d),c=e=>{let{onSubmit:t,init:i,fullForm:s=!0}=e,n={display:"flex","& > :first-of-type":{mr:"5px"}};return(0,l.jsx)(a.PD,{validationSchema:o,initialValues:{...u,...i},onSubmit:t,submitButton:!1,enableReinitialize:!0,children:(0,l.jsxs)(a.jD,{children:[(0,l.jsxs)(a.jD,{sx:{...n,alignItems:"end",py:"1ch"},children:[(0,l.jsx)(a.A8,{sx:{width:"100%",my:0},name:d.firstName.name,id:d.firstName.name,size:"small",label:d.firstName.label}),(0,l.jsx)(a.A8,{sx:{width:"100%",my:0,mr:"5px"},name:d.lastName.name,id:d.lastName.name,size:"small",label:d.lastName.label}),(0,l.jsx)(a.el,{width:"100%",inputSx:{m:0},name:d.gender.name,label:d.gender.label,multiple:!1,size:"small",applyPadding:!1,options:[{label:"Male",id:"M"},{label:"Female",id:"F"}]})]}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.jD,{sx:{...n},children:[(0,l.jsx)(a.el,{width:"30%",name:d.gender.name,label:d.gender.label,multiple:!1,size:"small",options:[{label:"Male",id:"Male"},{label:"Female",id:"Female"}]}),(0,l.jsx)(a.A8,{sx:{width:"100%",my:0},name:d.dob.name,id:d.dob.name,size:"small",label:d.dob.label})]}),(0,l.jsxs)(a.jD,{display:"flex",children:[(0,l.jsx)(a.el,{sx:{mr:"0.5ch"},width:"45%",size:"small",name:d.homeDistrict.name,label:d.homeDistrict.label,multiple:!1,options:r.kJ.map(e=>({id:e.district_name,label:e.district_name}))}),(0,l.jsx)(a.el,{width:"100%",size:"small",name:d.homeTraditionalAuthority.name,label:d.homeTraditionalAuthority.label,multiple:!1,options:r.ZD})]}),(0,l.jsx)(a.jD,{children:(0,l.jsx)(a.el,{width:"100%",size:"small",name:d.homeVillage.name,label:d.homeVillage.label,multiple:!1,options:r.rJ})})]}),(0,l.jsx)(a.O6,{sx:{width:"100%",height:"5ch",borderRadius:"10px",mt:"1ch"},type:"submit",onClick:()=>{},title:"search"})]})})}},99653:(e,t,i)=>{"use strict";i.d(t,{V:()=>r});var l=i(95155),a=i(70482),s=i(59487),n=i(33881);let r=e=>{let{title:t,link:i}=e,{navigateTo:r}=(0,a.cq)(),d={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,l.jsxs)(s.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,l.jsxs)(s.jD,{onClick:()=>r(i),sx:{display:"flex",cursor:"pointer"},children:[(0,l.jsx)(s.Th,{children:(0,l.jsx)(n.oWm,{})}),(0,l.jsx)(s.Th,{sx:d,children:"Go back"})]}),(0,l.jsx)(s.Th,{sx:d,children:t}),(0,l.jsxs)(s.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(n.M4e,{}),(0,l.jsx)(s.Th,{sx:d,children:"Need any help?"})]})]})}}}]);