"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9625],{39625:(e,a,l)=>{l.d(a,{kn:()=>ew,ng:()=>e1,w8:()=>X,_G:()=>ec,ze:()=>eT,Q5:()=>ef,$q:()=>eC,mX:()=>ev,HN:()=>eZ,CG:()=>Q,FB:()=>ep,qG:()=>ej});var n=l(95155),i=l(72478),t=l(263),s=l(51267),r=l(12115),o=l(35068),m=l(31616),b=l(94049),d=l(25635),u=l(10492),c=l(90702),h=l(25641),p=l(87295),A=l(34505),E=l(31459);let S={rhythm:{name:t.W.RHYTHM,label:"Rhythm"},shockEnergy:{name:t.W.SHOCK_ENERGY,label:"Shock Energy"},medication:{name:t.W.MEDICATION,label:"Medication"},dose:{name:t.W.MEDICATION_DOSE,label:"Dose"},route:{name:t.W.MEDICATION_ROUTE,label:"Route"},doseUnit:{name:t.W.MEDICATION_DOSE_UNIT,label:"Unit"},interventions:{name:t.W.INTERVENTION_LIST,label:"Interventions"},occurrences:{name:t.W.OCCURRENCES,label:"Occurrences (E.g., ROSC, Vomit)"},time:{name:t.W.TIME,label:"Time"},reversibleCauses:{name:t.W.REVERSIBLE_CAUSES,label:"Reversible Causes"},other:{name:t.W.OTHER,label:"Other Interventions"}},I=[{label:"PEA",id:t.W.PEA},{label:"VF",id:t.W.VF},{label:"VT",id:t.W.VT},{label:"Asys",id:t.W.ASYS}],R=["Milligrams (mg)","Micrograms (\xb5g)","Grams (g)","International Units (IU)","Milliliters (ml)","Millimoles (mmol)"],x=[{label:"IV Access",id:t.W.IV_ACCESS},{label:"Intubation",id:t.W.INTUBATION},{label:"POCUS",id:t.W.POCUS},{label:"ABG",id:t.W.ABG},{id:t.W.POSITIONING,label:"Positioning"},{id:t.W.C_SPINE_STABILIZATION,label:"C-Spine Stabilization"},{id:t.W.SUCTIONING,label:"Suctioning"},{id:t.W.FOREIGN_BODY_REMOVAL,label:"Foreign body removal"},{id:t.W.INSERTION_OF_GUEDEL,label:'Insertion of airway "Guedel"'},{id:t.W.OXYGEN_GIVEN,label:"Oxygen therapy"},{id:t.W.BAG_AND_MASK,label:"Bag and mask"},{id:t.W.INTERCOSTAL_DRAINAGE,label:"Intercostal drainage"},{id:t.W.INTAKE_FLUIDS,label:"Intake Fluids"},{id:t.W.HEMORRHAGE_CONTROL,label:"Hemorrhage control"},{id:t.W.BLOOD_SAMPLE,label:"Blood sample"},{id:t.W.CATHETER,label:"Catheter"},{id:t.W.TRANSFUSION,label:"Transfusion"},{id:t.W.NG_INSERTION,label:"NG Insertion"},{id:t.W.SUTURING,label:"Suturing"},{id:t.W.KEEP_WARM,label:"Keep warm"},{id:t.W.OTHER,label:"Other"}],N=[{label:"Intraosseous",id:t.W.INTRAOSSEOUS},{label:"Intravenous",id:t.W.INTRAVENOUS},{label:"Oral",id:t.W.ORAL},{label:"Intramuscular",id:t.W.INTRAMUSCULAR},{label:"Subcutaneous",id:t.W.SUBCUTANEOUS},{label:"Infiltration",id:t.W.INFILTRATION},{label:"Intrathecal",id:t.W.INTRATHECAL},{label:"Dermal",id:t.W.DERMAL},{label:"Inhaled",id:"Inh  aled"}],T=[{label:"Hypoxia",id:t.W.HYPOXIA},{label:"Hypovolemia",id:t.W.HYPOVOLEMIA},{label:"Hyperkalaemia",id:t.W.HYPERKALAEMIA},{label:"Hypokalaemia",id:t.W.HYPOKALAEMIA},{label:"Hypothermia",id:t.W.HYPOTHERMIA},{label:"Tension Pneumothorax",id:t.W.TENSION_PNEUMOTHORAX},{label:"Tamponade, Cadiac",id:t.W.TAMPONADE_CARDIAC},{label:"Toxins",id:t.W.TOXINS},{label:"Thrombosis, Pulmonary",id:t.W.THROMBOSIS_PULMONARY},{label:"Thrombosis, Coronary",id:t.W.THROMBOSIS_CORONARY},{label:"Hydrogen Ions (Acidosis)",id:t.W.HYDROGEN_ION_ACIDOSIS}],g=o.Ik().shape({[S.rhythm.name]:o.YO().required().label(S.rhythm.label),[S.shockEnergy.name]:o.ai().required().min(0).max(360).label(S.shockEnergy.label),[S.medication.name]:o.Yj().required().label(S.medication.label),[S.dose.name]:o.Yj().required().label(S.dose.label),[S.route.name]:o.Yj().label(S.route.label),[S.doseUnit.name]:o.Yj().required().label(S.doseUnit.label),[S.interventions.name]:o.YO().required().label(S.interventions.label),[S.occurrences.name]:o.Yj().required().label(S.occurrences.label),[S.time.name]:o.Yj().required().label(S.time.label),[S.reversibleCauses.name]:o.YO().required().label(S.reversibleCauses.label),[S.other.name]:o.Yj().label(S.other.label)}),O=e=>{var a;let{patientUuid:l,visitUuid:o,onSubmitRecord:m}=e,{ServerTime:b}=(0,h.useServerTime)(),[d,u]=(0,r.useState)({}),{handleSubmit:c,isLoading:O}=(0,p.li)(t.fA.CPR,()=>{},l,o),{medicationOptions:j}=(0,A.A)();return(0,r.useEffect)(()=>{m(O)},[O]),(0,n.jsx)(i.PD,{initialValues:{...(0,s.f6)(S),[S.interventions.name]:[]},validationSchema:g,onSubmit:(e,a)=>{let l={...e},n=b.getServerTimeString(),i=(0,s.ZM)(l[S.rhythm.name],S.rhythm.name,n),r=(0,s.ZM)(l[S.interventions.name],S.interventions.name,n),o=(0,s.ZM)(l[S.reversibleCauses.name],S.reversibleCauses.name,n);delete l[S.rhythm.name],delete l[S.interventions.name],delete l[S.reversibleCauses.name];let m=(0,s.gX)(l,n);c([{concept:t.W.CPR_RECORD,value:n,groupMembers:[...r,...i,...m,...o],obsDateTime:n}]),a.resetForm()},submitButtonText:"Add Record",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.fP,{getValues:u}),(0,n.jsx)(i.gj,{sx:{my:"1ch"},name:S.time.name,label:S.time.label}),(0,n.jsx)(i.el,{name:S.rhythm.name,label:S.rhythm.label,options:I,size:"small",sx:{width:"100%"}}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:S.shockEnergy.name,label:S.shockEnergy.label,id:"shockEnergy",sx:{width:"100%"}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.el,{name:S.medication.name,label:"Medication Name",options:j,multiple:!1}),(0,n.jsx)(i.pj,{id:S.dose.name,label:S.dose.label,name:S.dose.name,unitName:S.doseUnit.name,unitOptions:R,placeholder:"e.g., 500",sx:{m:0},inputIcon:(0,n.jsx)(E.gaX,{})}),(0,n.jsx)(i.el,{multiple:!1,name:S.route.name,label:S.route.label,options:N,sx:{width:"100%"}})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:S.interventions.name,label:S.interventions.label,options:x,sx:{width:"100%"}}),(null==(a=d[S.interventions.name])?void 0:a.find(e=>e.id==t.W.OTHER))&&(0,n.jsx)(i.A8,{name:S.other.name,label:S.other.label,id:S.other.name,rows:5,sx:{width:"100%"},multiline:!0}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{multiline:!0,rows:5,name:S.occurrences.name,label:S.occurrences.label,id:"occurrences",sx:{width:"100%"}}),(0,n.jsx)(i.el,{name:S.reversibleCauses.name,label:S.reversibleCauses.label,options:T,multiple:!0,width:"100%"})]})})};var j=l(45910),W=l(91871);let _={reasonsCprStopped:{name:t.W.REASON_CPR_STOPPED,label:"Reason CPR Stopped"},otherReason:{name:t.W.OTHER,label:"Other Reason"},dispositionAfterCpr:{name:t.W.DISPOSITION_AFTER_CPR,label:"Disposition After CPR"},outcome:{name:t.W.OUTCOME,label:"Outcome"},spo:{name:t.W.SPO2,label:"SPO2"},oxygen:{name:t.W.OXYGEN_GIVEN,label:"Oxygen"},respiratoryRate:{name:t.W.RESPIRATORY_RATE,label:"Respiratory Rate"},systolic:{name:t.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic"},diastolic:{name:t.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},pulseRate:{name:t.W.PULSE_RATE,label:"Pulse Rate"},temperature:{name:t.W.TEMPERATURE,label:"Temperature"},motorResponse:{name:t.W.MOTOR_RESPONSE,label:"Motor Response"},eyeOpeningResponse:{name:t.W.EYE_OPENING_RESPONSE,label:"Eye Opening Response"},verbalResponse:{name:t.W.VERBAL_RESPONSE,label:"Verbal Response"},teamLeader:{name:t.W.TEAM_LEADER,label:"Team Leader"},teamMembers:{name:t.W.TEAM_MEMBERS,label:"Team Members"},cause:{name:t.W.CAUSE,label:"Likely or known cause of cardiac arrest"},timeStopped:{name:t.W.CPR_TIME_STOPPED,label:"CPR Time Stopped"},specify:{name:t.W.SPECIFY,label:"Specify Disposition"}},f=o.Ik().shape({[_.reasonsCprStopped.name]:o.Yj().required().label(_.reasonsCprStopped.label),[_.specify.name]:o.Yj().label(_.specify.label),[_.otherReason.name]:o.Yj().when(_.reasonsCprStopped.name,{is:e=>e===t.W.OTHER,then:e=>e.required().label(_.otherReason.label)}).label(_.otherReason.label),[_.dispositionAfterCpr.name]:o.Yj().required().label(_.dispositionAfterCpr.label),[_.spo.name]:o.ai().min(0).max(100).label(_.spo.label),[_.oxygen.name]:o.Yj().label(_.oxygen.label),[_.outcome.name]:o.Yj().label(_.outcome.label),[_.respiratoryRate.name]:o.ai().min(0).max(90).label(_.respiratoryRate.label),[_.systolic.name]:o.ai().min(0).max(300).label(_.systolic.label),[_.diastolic.name]:o.ai().min(0).max(300).label(_.diastolic.label),[_.temperature.name]:o.ai().min(20).max(45).label(_.temperature.label),[_.pulseRate.name]:o.ai().min(0).max(220).label(_.pulseRate.label),[_.eyeOpeningResponse.name]:o.Yj().label(_.eyeOpeningResponse.label),[_.motorResponse.name]:o.Yj().label(_.motorResponse.label),[_.verbalResponse.name]:o.Yj().label(_.verbalResponse.label),[_.teamLeader.name]:o.Yj().required().label(_.teamLeader.label),[_.teamMembers.name]:o.YO().required().label(_.teamMembers.label),[_.cause.name]:o.Yj().required().label(_.cause.label),[_.timeStopped.name]:o.Yj().required().label(_.timeStopped.label)}),C=[{label:"ROSC",id:t.W.ROSC},{label:"Team decision to stop",id:t.W.TEAM_DECISION_TO_STOP},{label:"DNA CPR document found",id:t.W.DNA_CPR_DOCUMENT_FOUND},{label:"Other",id:t.W.OTHER}],y=[{label:"Resuscitation room",id:t.W.RESUSCITATION_ROOM},{label:"ICU",id:t.W.ICU},{label:"HDU Specify",id:t.W.HDU_SPECIFY},{label:"General Ward Specify",id:t.W.GENERAL_WARD_SPECIFY},{label:"Mortuary",id:t.W.MORTUARY}],v=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],P=[{label:"Spontaneous",value:"Spontaneous",weight:4},{label:"To Speech",value:"To Speech",weight:3},{label:"To Pain",value:"To Pain",weight:2},{label:"No Response",value:"No Response",weight:1}],L=[{label:"Obeying Commands",value:"Obeying Commands",weight:6},{label:"Localising",value:"Localising",weight:5},{label:"Withdraw",value:"Withdraw",weight:4},{label:"Normal Flexion",value:"Normal Flexion",weight:3},{label:"Extension",value:"Extension",weight:2},{label:"None",value:"None",weight:1}],M=[{label:"Oriented",value:"Oriented",weight:5},{label:"Confused",value:"Confused",weight:4},{label:"Inappropriate Words",value:"Inappropriate Words",weight:3},{label:"Incomprehensible sounds",value:"Incomprehensible sounds",weight:2},{label:"None",value:"None",weight:1}],D=[{label:"Death",id:t.W.DEATH},{label:"ROSC",id:t.W.ROSC}],Y=e=>{let{onSubmit:a,formRef:l,triggerValidate:r}=e,{data:o,isLoading:m}=(0,j.CF)(),b=null==o?void 0:o.map(e=>({label:e.person.names[0].family_name+" "+e.person.names[0].given_name,id:e.uuid})),u=(e,a)=>{let l=a.find(a=>a.value==e);return l?l.weight:0};return(0,n.jsx)(i.PD,{initialValues:(0,s.f6)(_),validationSchema:f,onSubmit:a,submitButton:!1,ref:l,children:e=>{let{values:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A8,{name:_.cause.name,label:_.cause.label,id:_.cause.name,multiline:!0,rows:4,sx:{width:"100%"}}),(0,n.jsx)(i.YZ,{name:_.timeStopped.name,label:_.timeStopped.label}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:_.reasonsCprStopped.name,label:_.reasonsCprStopped.label,options:C,multiple:!1}),(0,n.jsx)("br",{}),a[_.reasonsCprStopped.name]==t.W.OTHER&&(0,n.jsx)(i.A8,{multiline:!0,rows:5,name:_.otherReason.name,label:_.otherReason.label,sx:{width:"100%"},id:_.otherReason.name}),(0,n.jsx)("br",{}),(0,n.jsx)(d.default,{variant:"h6",children:"Vital signs after ROSC"}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.A8,{name:_.spo.name,label:_.spo.label,id:_.spo.name,sx:{width:"100%"},unitOfMeasure:"%"}),(0,n.jsx)(i.b1,{name:_.oxygen.name,label:_.oxygen.label,options:v,row:!0}),(0,n.jsx)(i.A8,{name:_.systolic.name,label:_.systolic.label,id:_.systolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"}),(0,n.jsx)(i.A8,{name:_.diastolic.name,label:_.diastolic.label,id:_.diastolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"})]}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.A8,{name:_.respiratoryRate.name,label:_.respiratoryRate.label,id:_.respiratoryRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,n.jsx)(i.A8,{name:_.pulseRate.name,label:_.pulseRate.label,id:_.pulseRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,n.jsx)(i.A8,{name:_.temperature.name,label:_.temperature.label,id:_.temperature.name,sx:{width:"100%"},unitOfMeasure:"\xb0C"})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:_.motorResponse.name,label:_.motorResponse.label,options:L,row:!1}),(0,n.jsx)(i.b1,{name:_.verbalResponse.name,label:_.verbalResponse.label,options:M,row:!1}),(0,n.jsx)(i.b1,{name:_.eyeOpeningResponse.name,label:_.eyeOpeningResponse.label,options:P,row:!1})]}),(0,n.jsxs)(d.default,{fontWeight:"800",variant:"body2",children:["(M",u(a[_.motorResponse.name],L)," V",u(a[_.verbalResponse.name],M)," E",u(a[_.eyeOpeningResponse.name],P),")"," ",u(a[_.motorResponse.name],L)+u(a[_.verbalResponse.name],M)+u(a[_.eyeOpeningResponse.name],P),"/15"]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:_.outcome.name,label:_.outcome.label,options:D,multiple:!1}),(0,n.jsx)("br",{}),(0,n.jsx)(i.m2,{children:(0,n.jsx)(i.el,{name:_.dispositionAfterCpr.name,label:_.dispositionAfterCpr.label,options:y.filter(e=>a[_.outcome.name]==t.W.DEATH?e.id==t.W.MORTUARY:a[_.outcome.name]==t.W.ROSC?e.id!=t.W.MORTUARY:void 0),multiple:!1})}),[t.W.HDU_SPECIFY,t.W.GENERAL_WARD_SPECIFY,t.W.MORTUARY].includes(a[_.dispositionAfterCpr.name])&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:_.specify.name,label:_.specify.label,id:_.specify.name,sx:{width:"100%"}})]}),(0,n.jsx)("br",{}),(0,n.jsx)(d.default,{variant:"h6",children:"Resuscitation Team"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:_.teamLeader.name,label:_.teamLeader.label,options:null!=b?b:[],multiple:!1}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:_.teamMembers.name,label:_.teamMembers.label,options:null!=b?b:[]}),(0,n.jsx)("br",{}),(0,n.jsx)(W.A,{onClick:r,variant:"contained",fullWidth:!0,children:"Finish CPR"})]})}})},w={cardiacArrest:{name:t.W.CARDIAC_ARREST,label:"Witnessed Cardiac Arrest"},site:{name:t.W.SITE,label:"SITE"},specify:{name:t.W.SPECIFY,label:"Specify"},time:{name:t.W.TIME,label:"Time of Call"},date:{name:t.W.DATE_OF_CPR,label:"Date of Call"}},U=[{label:"Rescitation",value:t.W.RESUSCITATION},{label:"Short Stay",value:t.W.SHORT_STAY},{label:"Gynae Bench",value:t.W.GYNAE_BENCH},{label:"Isolation Room",value:t.W.ISOLATION},{label:"Trauma",value:t.W.TRAUMA},{label:"Medical Bench",value:t.W.MEDICAL_BENCH},{label:"Surgical Bench",value:t.W.SURGICAL_BENCH},{label:"SSW",value:t.W.SSW},{label:"Priority Area",value:t.W.PRIORITY},{label:"Other",value:t.W.OTHER}],H=[{label:"Yes",value:t.W.YES},{label:"No",value:t.W.NO}],B=(0,s.f6)(w),G=o.Ik().shape({[w.cardiacArrest.name]:o.Yj().required().label(w.cardiacArrest.label),[w.site.name]:o.Yj().required().label(w.site.label),[w.specify.name]:o.Yj().when(w.site.name,{is:e=>e===t.W.OTHER,then:e=>e.required().label(w.specify.label)})}),V=e=>{let{onSubmit:a,formRef:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.PD,{onSubmit:a,initialValues:B,validationSchema:G,submitButton:!1,ref:l,children:e=>{let{values:a,setFieldValue:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.W9,{width:"100%",name:w.date.name,label:w.date.label}),(0,n.jsx)(i.gj,{sx:{my:"1ch"},name:w.time.name,label:w.time.label}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.b1,{name:w.site.name,label:w.site.label,options:U,row:!0}),(0,n.jsx)(i.b1,{options:H,label:w.cardiacArrest.label,name:w.cardiacArrest.name,row:!0})]}),a[w.site.name]==t.W.OTHER&&(0,n.jsx)(i.A8,{size:"small",name:w.specify.name,label:w.specify.label,id:w.specify.name,sx:{width:"100%"}})]})}})})};var F=l(52375),k=l(24507),z=l(66637);let q=(e,a)=>{let{data:l,isLoading:n,isRefetching:i}=(0,z.$O)(e),t=null==l?void 0:l.find(e=>e.encounter_type.uuid===a),[s,o]=(0,r.useState)([]);return(0,r.useEffect)(()=>{t&&o(t.obs)},[t]),{dataObs:s,isLoading:i||n}},K=e=>{let{patientId:a,submittingRecord:l}=e,{dataObs:i,isLoading:s}=q(a,t.fA.CPR),r=i.filter(e=>e.children.length>0&&e.names.find(e=>e.name.toLowerCase()==t.W.CPR_RECORD.toLowerCase()));console.log("records",r);let o=r.map(e=>{let{children:a}=e,l=(0,k.m)(a,t.W.TIME),n=(0,k.m)(a,t.W.SHOCK_ENERGY),i=(0,k.m)(a,t.W.MEDICATION),s=(0,k.m)(a,t.W.MEDICATION_DOSE),r=(0,k.m)(a,t.W.MEDICATION_ROUTE),o=(0,k.m)(a,t.W.MEDICATION_DOSE_UNIT),m=(0,k.m)(a,t.W.OCCURRENCES),b=a.filter(e=>{var a;return null==e||null==(a=e.names)?void 0:a.some(e=>e.name.toLowerCase()===t.W.INTERVENTION_LIST.toLowerCase())}).map(e=>e.value).join(", ");return{time:l,shockEnergy:n,medicationName:i,dose:s,doseUnit:o,occurrences:m,interventionList:b,rhythm:a.filter(e=>{var a;return null==e||null==(a=e.names)?void 0:a.some(e=>e.name.toLowerCase()===t.W.RHYTHM.toLowerCase())}).map(e=>e.value).join(", "),causes:a.filter(e=>{var a;return null==e||null==(a=e.names)?void 0:a.some(e=>e.name.toLowerCase()===t.W.REVERSIBLE_CAUSES.toLowerCase())}).map(e=>e.value).join(", "),route:r}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{variant:"h5",children:"Records"}),(0,n.jsx)("br",{}),(0,n.jsx)(F.q,{columns:[{label:"Time",field:"time"},{label:"Shock Energy",field:"shockEnergy"},{label:"Medication Name",field:"medicationName"},{label:"Dose",field:"dose"},{label:"Route",field:"route"},{label:"Dose Unit",field:"doseUnit"},{label:"Occurrences",field:"occurrences"},{label:"Intervention List",field:"interventionList"},{label:"Rhythm",field:"rhythm"},{label:"Reversible Causes",field:"causes"}],loading:s||l,data:o})]})},Z=e=>{let{onClose:a,patientuuid:l,visituuid:i}=e,{ServerTime:o}=(0,h.useServerTime)(),{patientId:m,activeVisit:b}=(0,p.gd)(),[d,u]=(0,r.useState)(!1),{handleSubmit:c}=(0,p.li)(t.fA.CPR,()=>{a()},l,i),A=(0,r.useRef)(null),E=(0,r.useRef)(null),{dataObs:S,isLoading:I}=q(l,t.fA.CPR),R=async()=>{var e,a,l,n,i,t,s,r;await (null==A||null==(a=A.current)?void 0:a.setTouched(Object.keys(null==A||null==(e=A.current)?void 0:e.values).reduce((e,a)=>(e[a]=!0,e),{}))),await (null==E||null==(n=E.current)?void 0:n.setTouched(Object.keys(null==E||null==(l=E.current)?void 0:l.values).reduce((e,a)=>(e[a]=!0,e),{})));let o=await (null==A||null==(i=A.current)?void 0:i.validateForm()),m=await (null==E||null==(t=E.current)?void 0:t.validateForm());if(Object.keys(o).length>0||Object.keys(m).length>0)return void console.log("Validation failed:",{basicFormErrors:o,endFormErrors:m});await (null==A||null==(s=A.current)?void 0:s.submitForm()),await (null==E||null==(r=E.current)?void 0:r.submitForm())};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{formRef:A,onSubmit:()=>{}}),(0,n.jsx)("br",{}),(0,n.jsx)(K,{submittingRecord:d,patientId:l||m}),(0,n.jsx)(O,{onSubmitRecord:u,visitUuid:i||b,patientUuid:l||m}),(0,n.jsx)("br",{}),(0,n.jsx)(Y,{triggerValidate:R,formRef:E,onSubmit:()=>{let e=o.getServerTimeString(),a=(0,s.gX)(A.current.values,e),l={...E.current.values},n=(0,s.ZM)(l[t.W.TEAM_MEMBERS],t.W.TEAM_MEMBERS,e);delete l[t.W.TEAM_MEMBERS];let i=(0,s.gX)(l,e),r=S.filter(e=>e.children.length>0&&e.names.find(e=>e.name.toLowerCase()==t.W.CPR_RECORD.toLowerCase())).map(e=>({concept:t.W.CPR_RECORD,value:e.value,obsDatetime:e.obs_datetime,groupMembers:e.children.map(e=>({concept:e.names[0].name,value:e.value,obsDatetime:e.obs_datetime}))}));c([{concept:t.W.CPR,value:e,obsDatetime:e,groupMembers:[...i,...n,...a,...r]}])}})]})},X=e=>{let{open:a,onClose:l,patientuuid:t,visituuid:s}=e;return(0,n.jsx)(i.eV,{maxWidth:"md",open:a,title:"CPR",onClose:l,children:(0,n.jsx)(Z,{visituuid:s,patientuuid:t,onClose:l})})};var J=l(48027);let $={bleedingInfo:{name:t.W.IS_PATIENT_ACTIVELY_BLEEDING,label:"Is the patient actively bleeding",children:[{concept:t.W.ACTION_DONE,label:"Action Done"}]},pulseInfo:{name:t.W.IS_THE_PATIENT_HAVE_PULSE,label:"Does the patient have a pulse",children:[{concept:t.W.PULSE_RATE,label:"Pulse rate"},{concept:t.W.PULSE_RATE_WEAK,label:"Pulse strength"},{concept:t.W.REGULAR_RHYTHM,label:"Pulse rhythm"},{concept:t.W.CAPILLARY_REFILL_TIME,label:"Capillary refill time"}]},mucousMembranesInfo:{name:t.W.MUCOUS_MEMBRANES,label:"Mucous membranes",children:[{type:"string",multiple:!0,concept:t.W.MUCOUS_ABNORMAL,label:"Mucous Abnormal"}]},bloodPressureMeasured:{name:t.W.BLOOD_PRESSURE_MEASURED,label:"Blood pressure measured",children:[{concept:t.W.SYSTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Systolic"},{concept:t.W.DIASTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Diastolic"},{name:t.W.REASON_NOT_RECORDED,label:"Reason BP Is unrecordable"},{name:t.W.DESCRIPTION,label:"Reason Not Done"}]},traumatizedInfo:{name:t.W.IS_PATIENT_TRAUMATIZED,label:"Is the patient injured",children:[{name:t.W.IS_PELVIS_STABLE,label:"Is the pelvis unstable"},{name:t.W.IS_FEMUR_TIBIA_NORMAL,label:"is the femur and tibia normal",children:[{concept:t.W.IMAGE_PART_NAME,label:"Leg Image",image:!0,parentConcept:t.W.IS_FEMUR_TIBIA_NORMAL}]}]},intravenousAccess:{name:t.W.PATIENT_INTRAVENOUS,label:"Does the patient need intravenous access",children:[{multiple:!0,type:"string",concept:t.W.SIZE_OF_CATHETER,label:"Size of intravenous catheter"},{multiple:!0,type:"string",concept:t.W.CANNULATION_SITE,label:"Cannulation Site"},{multiple:!0,type:"string",concept:t.W.DIAGRAM_CANNULATION_SITE,label:"Cannulation Site"}]},abnormalitiesInfo:{name:t.W.IS_THERE_ANY_OTHER_ABNOMALITIES,label:"Is there any other abnormalities?",children:[{concept:t.W.IMAGE_PART_NAME,label:"Abdomen Image",image:!0,parentConcept:t.W.IS_THERE_ANY_OTHER_ABNOMALITIES}]},abdnomenDistention:{name:t.W.HEADACHE,label:"Is there abdominal distention?"},assessPeripheries:{name:t.W.ASSESS_PERIPHERIES,label:"Assess peripheries"},pulseStrength:{child:!0,name:t.W.PULSE_RATE_WEAK,label:"Pulse strength"},pulseRhythm:{child:!0,name:t.W.REGULAR_RHYTHM,label:"Pulse rhythm"},bloodPressureSystolic:{child:!0,name:t.W.SYSTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Systolic"},bloodPressureDiastolic:{child:!0,name:t.W.DIASTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Diastolic"},capillaryInfo:{child:!0,name:t.W.CAPILLARY_REFILL_TIME,label:"Capillary refill time"},pelvisInfo:{child:!0,name:t.W.IS_PELVIS_STABLE,label:"Is the pelvis unstable?"},catheterInfo:{child:!0,name:t.W.SIZE_OF_CATHETER,label:"Size of intravenous catheter"},femurAndTibiaNormalInfo:{child:!0,name:t.W.IS_FEMUR_TIBIA_NORMAL,label:"is the femur and tibia normal?"},bleedingActionDone:{child:!0,name:t.W.ACTION_DONE,label:"Action done"},anyOtherAbnormalities:{name:t.W.IS_THERE_ANY_OTHER_ABNOMALITIES,label:"Is There Any Other Abnormalites"},additionalNotes:{name:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},reasonNotRecorded:{child:!0,name:t.W.REASON_NOT_RECORDED,label:"Reason BP Is unrecordable"},reasonNotDone:{child:!0,name:t.W.DESCRIPTION,label:"Reason Not Done"},mucousAbnormal:{name:t.W.MUCOUS_ABNORMAL,label:"Mucous Abnormal"},bloodPressureNotDoneOther:{name:t.W.SPECIFY,label:"Specify"},siteOfCannulation:{child:!0,name:t.W.CANNULATION_SITE,label:"Cannulation Site"},diagramCannulationSite:{name:t.W.DIAGRAM_CANNULATION_SITE,label:"Cannulation Site"},pulse:{child:!0,name:t.W.HEART_RATE,label:"Pulse rate"},centralLineCannulationSite:{name:t.W.CENTRAL_LINE_CANNULATION_SITE,label:"Cannulation Site (Central Line)"}},Q=$,ee=o.Ik({[$.bleedingInfo.name]:o.Yj().label($.bleedingInfo.label),[$.pulseInfo.name]:o.Yj().label($.pulseInfo.label),[$.pulseStrength.name]:o.Yj().label($.pulseStrength.label),[$.pulseRhythm.name]:o.Yj().label($.pulseRhythm.label),[$.bleedingActionDone.name]:o.Yj().label($.bleedingActionDone.label),[$.bloodPressureSystolic.name]:o.ai().min(0).max(300).label($.bloodPressureSystolic.label),[$.bloodPressureDiastolic.name]:o.ai().min(0).max(300).label($.bloodPressureDiastolic.label),[$.intravenousAccess.name]:o.Yj().label($.intravenousAccess.label),[$.traumatizedInfo.name]:o.Yj().label($.traumatizedInfo.label),[$.abnormalitiesInfo.name]:o.Yj().label($.abnormalitiesInfo.label),[$.capillaryInfo.name]:o.Yj().label($.capillaryInfo.label),[$.abdnomenDistention.name]:o.Yj().label($.abdnomenDistention.label),[$.pelvisInfo.name]:o.Yj().label($.pelvisInfo.label),[$.mucousMembranesInfo.name]:o.Yj().label($.mucousMembranesInfo.label),[$.catheterInfo.name]:o.YO().label($.catheterInfo.label),[$.femurAndTibiaNormalInfo.name]:o.Yj().label($.femurAndTibiaNormalInfo.label),[$.anyOtherAbnormalities.name]:o.Yj().label($.anyOtherAbnormalities.label),[$.additionalNotes.name]:o.Yj().label($.additionalNotes.label),[$.assessPeripheries.name]:o.Yj().label($.assessPeripheries.label),[$.reasonNotDone.name]:o.Yj().label($.reasonNotDone.label),[$.mucousAbnormal.name]:o.YO().label($.mucousAbnormal.label),[$.bloodPressureNotDoneOther.name]:o.Yj().label($.bloodPressureNotDoneOther.label),[$.siteOfCannulation.name]:o.YO().label($.siteOfCannulation.label),[$.diagramCannulationSite.name]:o.YO().label($.diagramCannulationSite.label),[$.pulse.name]:o.ai().label($.pulse.label),[$.centralLineCannulationSite.name]:o.Yj().label($.centralLineCannulationSite.label)}),ea=(0,s.f6)($),el=[{label:"14G",id:t.W.G14},{label:"16G",id:t.W.G16},{label:"18G",id:t.W.G18},{label:"20G",id:t.W.G20},{label:"22G",id:t.W.G22},{label:"Central Line",id:t.W.CENTRAL_LINE}],en=[{label:"Normal",value:t.W.NORMAL},{label:"Abnormal",value:t.W.ABNORMAL}],ei=[{label:"Pale",id:t.W.PALE},{label:"Dry",id:t.W.DRY},{label:"Cyanosis",id:t.W.CYANOSIS},{label:"Jaundice",id:t.W.JAUNDICE}],et=[{label:"Weak",value:t.W.WEAK},{label:"Strong",value:t.W.STRONG_REGULAR}],es=[{label:"Regular",value:t.W.REGULAR_RHYTHM},{label:"Irregular",value:t.W.IRREGULAR}],er=[{label:"Less than 3 seconds",value:t.W.LESS_THAN_3_SECONDS},{label:"3 seconds",value:t.W.THREE_SECONDS},{label:"More than 3 seconds",value:t.W.MORE_THAN_THREE_SECONDS}],eo=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],em=[{label:"Patient uncooperative",id:t.W.PATIENT_UNCOOPERATIVE},{label:"Machine not available",id:t.W.MACHINE_NOT_AVAILABLE},{label:"Batteries not available",id:t.W.BATTERIES_NOT_AVAILABLE},{label:"No inappropriately sized cuff",id:t.W.INAPPROPRIATELY_SIZED_CUFF},{label:"No power supply",id:t.W.NO_POWER_SUPPLY},{label:"Other",id:t.W.OTHER}],eb=[{label:"Left",id:t.W.LEFT},{label:"Right",id:t.W.RIGHT}],ed=[{label:"Antecubital fossa",id:t.W.ANTECUBITAL_FOSSA},{label:"Hand",id:t.W.HAND},{label:"Wrist",id:t.W.WRIST},{label:"Forearm",id:t.W.FOREARM},{label:"Foot",id:t.W.FOOT},{label:"External Jugular",id:t.W.EXTERNAL_JUGULAR}],eu=[{id:t.W.FEMORAL,label:"Femoral"},{id:t.W.SUBCLAVIAN,label:"Subclavian"},{id:t.W.INTERNAL_JUGULAR,label:"Internal Jugular"}],ec=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),{gender:o}=(0,p.gd)(),[A,E]=(0,r.useState)({}),[S,I]=(0,r.useState)([]),[R,x]=(0,r.useState)([]),[N,T]=(0,r.useState)([]),[g,O]=(0,r.useState)(!1),[j,W]=(0,r.useState)(!1),{handleSubmit:_,isLoading:f,isSuccess:C}=(0,u.l)(t.fA.CIRCULATION_ASSESSMENT,a),y=async e=>{let a={...e},n=l.getServerTimeString(),i=[{concept:$.abnormalitiesInfo.name,value:a[$.abnormalitiesInfo.name],obsDatetime:n,groupMembers:await (0,s.Zt)(S)},{concept:$.femurAndTibiaNormalInfo.name,value:a[$.femurAndTibiaNormalInfo.name],obsDatetime:n,groupMembers:await (0,s.Zt)(R)}],t=(0,s.ZM)(a[$.mucousAbnormal.name],$.mucousAbnormal.name,n,!0),r=(0,s.ZM)(a[$.catheterInfo.name],$.catheterInfo.name,n,!0),o=(0,s.ZM)(a[$.siteOfCannulation.name],$.siteOfCannulation.name,n,!0),m=(0,s.ZM)(a[$.diagramCannulationSite.name],$.diagramCannulationSite.name,n,!0);delete a[$.abnormalitiesInfo.name],delete a[$.femurAndTibiaNormalInfo.name],delete a[$.mucousAbnormal.name],delete a[$.catheterInfo.name],delete a[$.siteOfCannulation.name],delete a[$.diagramCannulationSite.name],await _([...await (0,s.k$)($,a,n),...i,...t,...r,...o,...m])},v=(e,a)=>!!Array.isArray(e)&&e.find(e=>e.id==a);return(0,n.jsx)(c.h,{loading:f,children:!j&&(0,n.jsxs)(i.PD,{validationSchema:ee,initialValues:ea,onSubmit:y,submitButtonText:"next",children:[(0,n.jsx)(i.fP,{getValues:E}),(0,n.jsxs)(i.kI,{title:"Bleeding and Pulse Rate",children:[(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:$.bleedingInfo.name,label:$.bleedingInfo.label,options:eo}),(0,n.jsx)(i.b1,{name:$.pulseInfo.name,label:$.pulseInfo.label,options:eo,getValue:e=>{e==t.NO&&O(!0)}})]}),A[$.bleedingInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.bL,{message:"Apply pressure"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{multiline:!0,rows:3,sx:{width:"100%"},name:$.bleedingActionDone.name,id:$.bleedingActionDone.name,label:$.bleedingActionDone.label})]}),A[$.pulseInfo.name]==t.NO&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.bL,{message:"Start cardiopulmonary resuscitation"}),(0,n.jsx)(X,{open:g,onClose:()=>O(!1)})]}),A[$.pulseInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:$.pulse.name,id:$.pulse.name,label:$.pulse.label,sx:{width:"100%"}}),(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:$.pulseStrength.name,label:$.pulseStrength.label,options:et}),(0,n.jsx)(i.b1,{name:$.pulseRhythm.name,label:$.pulseRhythm.label,options:es}),(0,n.jsx)(i.b1,{name:$.capillaryInfo.name,label:$.capillaryInfo.label,options:er})]})]})]}),(0,n.jsxs)(i.kI,{title:"Mucous and Peripherals",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:$.mucousMembranesInfo.name,label:$.mucousMembranesInfo.label,options:en}),(0,n.jsx)(i.b1,{name:$.assessPeripheries.name,label:$.assessPeripheries.label,options:[{label:"Cold and clammy",value:"cold and clammy"},{label:"Warm",value:"warm"}]})]}),A[$.mucousMembranesInfo.name]==t.W.ABNORMAL&&(0,n.jsx)(i.el,{label:"Mucus Abnormal",name:$.mucousAbnormal.name,options:ei})]}),(0,n.jsxs)(i.kI,{title:"Blood Pressure",children:[(0,n.jsx)(i.Vp,{sx:{alignItems:"flex-start"},children:(0,n.jsx)(i.b1,{name:$.bloodPressureMeasured.name,label:$.bloodPressureMeasured.label,options:[{label:"Done",value:t.W.DONE},{label:"Not Done",value:t.W.NOT_DONE},{label:"BP Unrecordable",value:t.W.BP_NOT_RECORDABLE}]})}),A[$.bloodPressureMeasured.name]==t.W.NOT_DONE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.el,{multiple:!1,name:$.reasonNotDone.name,label:$.reasonNotDone.label,options:em}),A[$.reasonNotDone.name]==t.W.OTHER&&(0,n.jsx)(i.A8,{multiline:!0,rows:3,name:$.bloodPressureNotDoneOther.name,id:$.bloodPressureNotDoneOther.name,label:$.bloodPressureNotDoneOther.label,sx:{width:"100%",mt:"1ch"}})]}),A[$.bloodPressureMeasured.name]==t.W.BP_NOT_RECORDABLE&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:$.reasonNotRecorded.name,label:$.reasonNotRecorded.label,id:$.reasonNotRecorded.name})}),A[$.bloodPressureMeasured.name]==t.W.DONE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"mmHg",name:$.bloodPressureSystolic.name,label:$.bloodPressureSystolic.label,id:$.bloodPressureSystolic.name}),(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"mmHg",name:$.bloodPressureDiastolic.name,label:$.bloodPressureDiastolic.label,id:$.bloodPressureDiastolic.name})]}),A[$.bloodPressureSystolic.name]&&A[$.bloodPressureDiastolic.name]&&(0,n.jsx)(b.default,{children:(0,n.jsxs)(d.default,{variant:"subtitle1",sx:{color:65>Math.round((2*Number(A[$.bloodPressureDiastolic.name])+Number(A[$.bloodPressureSystolic.name]))/3)?"red":"inherit"},children:["Mean Arterial Pressure:"," ",Math.round((2*Number(A[$.bloodPressureDiastolic.name])+Number(A[$.bloodPressureSystolic.name]))/3)," ","mmHg"]})}),(0,n.jsx)("br",{})]})]}),(0,n.jsxs)(i.kI,{title:"Circulation Specific Trauma",children:[(0,n.jsx)(i.b1,{row:!0,name:$.traumatizedInfo.name,label:$.traumatizedInfo.label,options:eo}),A[$.traumatizedInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.b1,{row:!0,name:$.pelvisInfo.name,label:$.pelvisInfo.label,options:eo}),A[$.pelvisInfo.name]==t._Y&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.bL,{message:"apply pelvic binder"})}),(0,n.jsx)(i.b1,{row:!0,name:$.femurAndTibiaNormalInfo.name,label:$.femurAndTibiaNormalInfo.label,options:eo}),A[$.femurAndTibiaNormalInfo.name]==t.NO&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Male"==o&&(0,n.jsx)(m.oj,{imageSection:$.femurAndTibiaNormalInfo.name,imageEncounter:t.fA.CIRCULATION_ASSESSMENT,onValueChange:x,form:"deformity"}),"Female"==o&&(0,n.jsx)(m.tD,{imageSection:$.femurAndTibiaNormalInfo.name,imageEncounter:t.fA.CIRCULATION_ASSESSMENT,onValueChange:x,form:"deformity"}),(0,n.jsx)("br",{})]})]})]}),(0,n.jsxs)(i.kI,{title:"Intravenous",children:[(0,n.jsx)(i.b1,{name:$.intravenousAccess.name,label:$.intravenousAccess.label,options:eo}),A[$.intravenousAccess.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{multiple:!0,name:$.catheterInfo.name,label:$.catheterInfo.label,options:el}),(0,n.jsx)("br",{}),v(A[$.catheterInfo.name],t.W.CENTRAL_LINE)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{variant:"h6",children:"Central Line"}),(0,n.jsx)(i.el,{multiple:!1,name:$.centralLineCannulationSite.name,label:$.centralLineCannulationSite.label,options:eu}),(0,n.jsx)("br",{})]}),(0,n.jsx)(i.el,{multiple:!0,name:$.siteOfCannulation.name,label:$.siteOfCannulation.label,options:eb}),v(A[$.siteOfCannulation.name],t.W.LEFT)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{my:2,variant:"h6",children:"Left"}),(0,n.jsx)(i.el,{name:$.diagramCannulationSite.name,label:$.diagramCannulationSite.label,options:ed})]}),v(A[$.siteOfCannulation.name],t.W.RIGHT)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{my:2,variant:"h6",children:"Right"}),(0,n.jsx)(i.el,{name:$.diagramCannulationSite.name,label:$.diagramCannulationSite.label,options:ed})]}),(0,n.jsx)("br",{})]})]}),(0,n.jsxs)(i.kI,{last:!0,title:"Circulation Specific Abdominal Findings",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:$.abdnomenDistention.name,label:$.abdnomenDistention.label,options:eo}),(0,n.jsx)(i.b1,{name:$.abnormalitiesInfo.name,label:$.abnormalitiesInfo.label,options:eo})]}),A[$.abnormalitiesInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Male"==o&&(0,n.jsx)(m.GJ,{formNameSection:"other",onValueChange:I}),"Female"==o&&(0,n.jsx)(J.W,{formNameSection:"other",onValueChange:I}),(0,n.jsx)("br",{})]}),(0,n.jsx)(i.A8,{sx:{width:"100%",m:0},name:$.additionalNotes.name,label:$.additionalNotes.label,id:$.additionalNotes.name,rows:5,multiline:!0})]})]})})},eh={eyeOpening:{name:t.W.EYE_OPENING_RESPONSE,label:"Eye Opening Response"},verbalResponse:{name:t.W.VERBAL_RESPONSE,label:"Best Verbal Response"},motorResponse:{name:t.W.MOTOR_RESPONSE,label:"Best Motor Response"},gcs:{name:t.W.GCS,label:"GCS"},focalNeurology:{name:t.W.FOCAL_NEUROLOGY,label:"Focal Neurology"},postureInfo:{name:t.W.POSTURE,label:"Posture"},bloodGlocose:{name:t.W.BLOOD_GLUCOSE,label:"Patient's Random Blood Glucose"},seizureInfo:{name:t.W.ACTIVE_SEIZURES,label:"Is the patient having Seizures"},leftPupilSize:{name:t.W.LEFT_PUPIL_SIZE,label:"Left Pupil Size"},rightPupilSize:{name:t.W.RIGHT_PUPIL_SIZE,label:"Right Pupil Size"},leftPupilReaction:{name:t.W.LEFT_PUPIL_REACTION,label:"Left Pupil Reaction"},rightPupilReaction:{name:t.W.RIGHT_PUPIL_REACTION,label:"Right Pupil Reaction"},units:{name:"units",label:"Units"}},ep=eh,eA=o.Ik({[eh.eyeOpening.name]:o.Yj().required().label(eh.eyeOpening.label),[eh.verbalResponse.name]:o.Yj().required().label(eh.verbalResponse.label),[eh.motorResponse.name]:o.Yj().required().label(eh.motorResponse.label),[eh.focalNeurology.name]:o.Yj().required().label(eh.focalNeurology.label),[eh.postureInfo.name]:o.Yj().required().label(eh.postureInfo.label),[eh.bloodGlocose.name]:o.ai().min(0).max(1e3).label(eh.bloodGlocose.label),[eh.seizureInfo.name]:o.Yj().required().label(eh.seizureInfo.label),[eh.rightPupilReaction.name]:o.Yj().label(eh.rightPupilReaction.label),[eh.rightPupilSize.name]:o.Yj().label(eh.rightPupilSize.label),[eh.leftPupilReaction.name]:o.Yj().label(eh.leftPupilReaction.label),[eh.leftPupilSize.name]:o.Yj().label(eh.leftPupilSize.label),[eh.units.name]:o.Yj().label(eh.units.label)}),eE={...(0,s.f6)(eh),[eh.units.name]:"mmol/l"},eS=[{label:"Spontaneously",value:"4"},{label:"To Speech",value:"3"},{label:"To Pain",value:"2"},{label:"No Response",value:"1"}],eI=[{label:"Oriented To Time, Place and Person  ",value:"5"},{label:"Confused",value:"4"},{label:"Inappropriate Words",value:"3"},{label:"Incomprehensible Words",value:"2"},{label:"No Response",value:"1"}],eR=[{label:"Obey Commands",value:"6"},{label:"Moves to Localized Pain ",value:"5"},{label:"Flexion Withdrawal from Pain",value:"4"},{label:"Abnormal  Flexion (Decorticate)",value:"3"},{label:"Abnormal  Extension (Decerbrate)",value:"2"},{label:"No Response",value:"1"}],ex=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],eN=[{id:"mmol/l",label:"mmol/l"},{id:"mg/dl",label:"mg/dl"}],eT=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),[o,m]=(0,r.useState)(),[p,A]=(0,r.useState)(),[E,S]=(0,r.useState)(),[I,R]=(0,r.useState)(!1),[x,N]=(0,r.useState)({}),{handleSubmit:T,isLoading:g,isSuccess:O}=(0,u.l)(t.fA.PRIMARY_DISABILITY_ASSESSMENT,a),j=Number(o||0)+Number(p||0)+Number(E||0);return(0,n.jsx)(c.h,{loading:g,children:!I&&(0,n.jsxs)(i.PD,{validationSchema:eA,initialValues:eE,onSubmit:e=>{let a=l.getServerTimeString(),n=[{concept:t.W.EYES,value:"Left Eye",obsDateTime:a,groupMembers:[{concept:t.W.PUPIL_SIZE,value:e[eh.leftPupilSize.name],obsDateTime:a},...e[eh.leftPupilReaction.name]?[{concept:t.W.PUPIL_REACTION,value:e[eh.leftPupilReaction.name],obsDateTime:a}]:[],,]},{concept:t.W.EYES,value:"Right Eye",obsDateTime:a,groupMembers:[{concept:t.W.PUPIL_SIZE,value:e[eh.rightPupilSize.name],obsDateTime:a},...e[eh.leftPupilReaction.name]?[{concept:t.W.PUPIL_REACTION,value:e[eh.rightPupilReaction.name],obsDateTime:a}]:[]]}];delete e[eh.leftPupilSize.name],delete e[eh.leftPupilReaction.name],delete e[eh.rightPupilSize.name],delete e[eh.rightPupilReaction.name];let i=Number(o||0)+Number(p||0)+Number(E||0);T([...(0,s.gX)({...e,[t.W.GCS]:i},a),...n])},submitButtonText:"next",children:[(0,n.jsx)(i.fP,{getValues:N}),(0,n.jsxs)(i.kI,{title:"GCS",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:eh.eyeOpening.name,label:eh.eyeOpening.label,options:eS,getValue:e=>m(e)}),(0,n.jsxs)("p",{children:[eh.eyeOpening.label,": ",o]})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:eh.verbalResponse.name,label:eh.verbalResponse.label,options:eI,getValue:e=>A(e)}),(0,n.jsxs)("p",{children:[eh.verbalResponse.label,": ",p]})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:eh.motorResponse.name,label:eh.motorResponse.label,options:eR,getValue:e=>S(e)}),(0,n.jsxs)("p",{children:[eh.motorResponse.label,": ",E]})]}),(0,n.jsx)("br",{}),(0,n.jsx)(b.default,{children:(0,n.jsxs)(i.Th,{children:["Total Score: ",j]})})]}),(0,n.jsxs)(i.kI,{title:"Pupillary Response",children:[(0,n.jsx)(d.default,{children:"Right Eye"}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:eh.rightPupilSize.name,label:eh.rightPupilSize.label,id:eh.rightPupilSize.name,unitOfMeasure:"mm"}),(0,n.jsx)(i.b1,{name:eh.rightPupilReaction.name,label:eh.rightPupilReaction.label,row:!0,options:ex})]}),(0,n.jsx)("br",{}),(0,n.jsx)(d.default,{children:"Left Eye"}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:eh.leftPupilSize.name,label:eh.leftPupilSize.label,id:eh.leftPupilSize.name,unitOfMeasure:"mm"}),(0,n.jsx)(i.b1,{name:eh.leftPupilReaction.name,label:eh.leftPupilReaction.label,row:!0,options:ex})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:eh.focalNeurology.name,sx:{m:0,width:"100%"},label:eh.focalNeurology.label,rows:5,multiline:!0,id:eh.focalNeurology.name})]}),(0,n.jsxs)(i.kI,{last:!0,title:"Additional findings and Glucose",children:[(0,n.jsx)(i.Vp,{mr:"1ch",children:(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:eh.postureInfo.name,label:eh.postureInfo.label,id:eh.postureInfo.name})}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.el,{sx:{m:0,width:"30%"},multiple:!1,name:eh.units.name,options:eN,label:eh.units.label}),(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:eh.bloodGlocose.name,label:eh.bloodGlocose.label,id:eh.bloodGlocose.name,unitOfMeasure:x[eh.units.name]||"mmol/l"})]}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.b1,{name:eh.seizureInfo.name,label:eh.seizureInfo.label,options:ex})})]})]})})};var eg=l(5387);let eO={temperatureInfo:{name:t.W.TEMPERATURE,label:"Temperature"},additionalNotes:{name:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},image:{name:t.W.IMAGE_PART_NAME,label:"Image",image:!0}},ej=eO,eW=o.Ik({[eO.temperatureInfo.name]:o.ai().required().min(20).max(45).label(eO.temperatureInfo.label),[eO.additionalNotes.name]:o.Yj().label(eO.additionalNotes.label)}),e_=(0,s.f6)(eO),ef=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),{params:o}=(0,p.KU)(),{data:A,isLoading:E}=(0,eg.GN)(null==o?void 0:o.id),[S,I]=(0,r.useState)({}),[R,x]=(0,r.useState)([]),[N,T]=(0,r.useState)([]),[g,O]=(0,r.useState)(!1),{handleSubmit:j,isLoading:W,isSuccess:_}=(0,u.l)(t.fA.EXPOSURE_ASSESSMENT,a),f=async e=>{let a={...e},n=l.getServerTimeString(),i=[{concept:t.W.IMAGE_PART_NAME,value:"full body anterior",obsDatetime:n,groupMembers:[...await (0,s.Zt)(R)]},{concept:t.W.IMAGE_PART_NAME,value:"full body posterior",obsDatetime:n,groupMembers:[...await (0,s.Zt)(N)]},{concept:t.W.NOTES,value:g?"Normal":"Abnormalities",obsDatetime:n}];j([...(0,s.gX)(a,n),...i])},C=A&&(null==A?void 0:A.gender);return(0,n.jsx)(c.h,{loading:W,children:!g&&(0,n.jsxs)(i.PD,{validationSchema:eW,initialValues:e_,onSubmit:f,submitButtonText:"submit",children:[(0,n.jsx)(i.fP,{getValues:I}),(0,n.jsx)(i.A8,{sx:{width:"100%"},name:eO.temperatureInfo.name,label:eO.temperatureInfo.label,id:eO.temperatureInfo.name,unitOfMeasure:"\xb0C"}),(0,n.jsx)("br",{}),!g&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{color:"grey",variant:"h5",children:"Select areas with rash, injuries and other abnormalities"}),(0,n.jsx)("br",{})," ","Male"==C&&(0,n.jsxs)(b.default,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.Jc,{onValueChange:x})}),(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.ug,{onValueChange:T})})]}),"Female"==C&&(0,n.jsxs)(b.default,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.Wk,{onValueChange:x})}),(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.YP,{onValueChange:T})})]})]}),(0,n.jsx)(i.A8,{sx:{width:"100%"},name:eO.additionalNotes.name,label:eO.additionalNotes.label,id:eO.additionalNotes.name,rows:5,multiline:!0})]})})},eC=()=>{let[e,a]=(0,r.useState)(0),{navigateBackToProfile:l,navigateTo:s}=(0,p.cq)(),{params:o}=(0,p.KU)(),m=[{id:1,label:"Airway Assessment",encounter:t.fA.AIRWAY_ASSESSMENT},{id:11,label:"Breathing Assessment",encounter:t.fA.BREATHING_ASSESSMENT},{id:2,label:"Circulation Assessment",encounter:t.fA.CIRCULATION_ASSESSMENT},{id:3,label:"Disability Assessment",encounter:t.fA.PRIMARY_DISABILITY_ASSESSMENT},{id:4,label:"Exposure Assessment",encounter:t.fA.EXPOSURE_ASSESSMENT}];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.RG,{setActive:a,title:"Primary Survey",steps:m,active:e,onBack:()=>l(),showSubmittedStatus:!0,children:[(0,n.jsx)(ew,{onSubmit:()=>{a(1)}}),(0,n.jsx)(e1,{onSubmit:()=>{a(2)}}),(0,n.jsx)(ec,{onSubmit:()=>{a(3)}}),(0,n.jsx)(eT,{onSubmit:()=>{a(4)}}),(0,n.jsx)(ef,{onSubmit:()=>{s("/patient/".concat(o.id,"/medicalHistory"))}})]})})},ey={isAirwayPatent:{name:t.W.AIRWAY_PATENT,label:"Is Airway Patent",type:"string",options:{[t._Y]:"Patent",[t.NO]:"Not Patent",[t.W.THREATENED]:"Threatened"},children:[{multiple:!0,concept:t.W.AIRWAY_REASON,label:"Reason",type:"string"},{multiple:!0,concept:t.W.AIRWAY_OPENING_INTERVENTION,label:"Airway Opening Intervention",type:"string"}]},isPatientInjured:{name:t.W.PATIENT_INJURED,label:"Is Patient Injured",type:"string",options:{[t._Y]:"Injured",[t.NO]:"Not Injured"},children:[{type:"string",concept:t.W.NECK_COLLAR_APPLIED,label:"Neck Collar Applied",options:{[t._Y]:"Neck collar applied",[t.NO]:"Neck collar not applied",[t.W.NOT_INDICATED]:"No indication of neck collar"}},{type:"string",concept:t.W.HEAD_BLOCKS_APPLIED,label:"Head Blocks Applied"}]},neckCollar:{name:t.W.NECK_COLLAR_APPLIED,label:"Neck Collar Applied",child:!0},weakness:{name:t.W.WEAKNESS,label:"Weakness"},headBlocks:{name:t.W.HEAD_BLOCKS_APPLIED,label:"Head Blocks Applied",child:!0},airWayThreatenedReason:{name:t.W.AIRWAY_REASON,label:"Reason",child:!0},otherReason:{name:t.W.OTHER,label:"Specify"},intervention:{name:t.W.AIRWAY_OPENING_INTERVENTION,label:"Airway Opening Intervention"},nasopharyngealSize:{name:t.W.NASOPHARYNGEAL_AIRWAY,label:"Nasopharyngeal Airway Size"},oropharyngealSize:{name:t.W.OROPHARYNGEAL_AIRWAY,label:"Oropharyngeal Airway Size"}},ev=ey,eP=o.Ik().shape({[ey.isAirwayPatent.name]:o.Yj().required().label(ey.isAirwayPatent.label),[ey.headBlocks.name]:o.Yj().label(ey.headBlocks.label),[ey.neckCollar.name]:o.Yj().label(ey.neckCollar.label),[ey.airWayThreatenedReason.name]:o.YO().label(ey.airWayThreatenedReason.label),[ey.intervention.name]:o.YO().label(ey.intervention.label),[ey.weakness.name]:o.Yj().label(ey.weakness.label),[ey.nasopharyngealSize.name]:o.Yj().label(ey.nasopharyngealSize.label),[ey.oropharyngealSize.name]:o.Yj().label(ey.oropharyngealSize.label),[ey.otherReason.name]:o.Yj().when(ey.airWayThreatenedReason.name,(e,a)=>e[0]==t.W.OTHER?a.required():a).label(ey.otherReason.label)}),eL=[{id:t.W.SECRETION,label:"Secretions - blood, vomit, other"},{id:t.W.TONGUE_SWELLING,label:"Tongue swelling"},{id:t.W.NECK_SWELLING,label:"Neck swelling"},{id:t.W.NECK_HAEMATOMA,label:"Neck haematoma"},{id:t.W.TONGUE_FALLING_BACK,label:"Tongue falling back"},{id:t.W.OTHER,label:"Other"}],eM=[{id:t.W.SUCTIONING_DONE,label:"Suctioning Done"},{id:t.W.JAW_THRUST_MANOEUVER,label:"Jaw thrust manoeuver"},{id:t.W.HEAD_TILT_CHIN_LIFT,label:"Head tilt/chin lift"},{id:t.W.OROPHARYNGEAL,label:"Airway adjunct (Oropharyngeal airway and size / nasopharyngeal airway)"},{id:"Laryngeal mask airway (LMA) insertion",label:"Laryngeal mask airway (LMA) insertion"},{id:"Endotracheal intubation",label:"Endotracheal intubation"},{id:"Performed Cricothyroidotomy(Surgical Airway)",label:"Performed Cricothyroidotomy(Surgical Airway)"},{id:"Performed tracheostomy",label:"Performed tracheostomy"}],eD=(0,s.f6)(ey),eY=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],ew=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),[o,m]=(0,r.useState)({}),{handleSubmit:b,isLoading:d}=(0,u.l)(t.fA.AIRWAY_ASSESSMENT,a),[p,A]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!1),[I,R]=(0,r.useState)(!1),x=async e=>{let a={...e},n=a[ey.intervention.name],i=[],t=l.getServerTimeString();Array.isArray(n)&&(i=n.map(e=>({concept:ey.intervention.name,value:e.id,obsDatetime:t})));let r=a[ey.airWayThreatenedReason.name],o=[];Array.isArray(r)&&(o=r.map(e=>({concept:ey.airWayThreatenedReason.name,value:e.id,obsDatetime:t}))),delete a[ey.airWayThreatenedReason.name],delete a[ey.intervention.name],await b([...await (0,s.k$)(ey,a,t),...i,...o])};return(0,n.jsx)(c.h,{loading:d,children:!p&&(0,n.jsxs)(i.PD,{validationSchema:eP,initialValues:eD,onSubmit:x,submitButtonText:"Next",children:[(0,n.jsx)("br",{}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.fP,{getValues:m}),(0,n.jsxs)(i.kI,{title:"Airway Patent",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:ey.isAirwayPatent.name,label:ey.isAirwayPatent.label,options:[...eY,{label:"Threatened",value:t.W.THREATENED}]}),(0,n.jsx)(i.b1,{name:ey.isPatientInjured.name,label:ey.isPatientInjured.label,options:eY})]}),(o[ey.isAirwayPatent.name]===t.W.THREATENED||o[ey.isAirwayPatent.name]===t.W.NO)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Vp,{sx:{my:"1ch"},children:(0,n.jsx)(i.el,{name:ey.airWayThreatenedReason.name,label:ey.airWayThreatenedReason.label,options:eL,getValue:e=>{S(!!e.find(e=>e.id==t.W.OTHER))},multiple:!0})}),E&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:ey.otherReason.name,label:ey.otherReason.label,id:ey.otherReason.name})})]})]})]}),(0,n.jsx)("br",{}),o[ey.isPatientInjured.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.bL,{message:"Please stabilize the C-Spine"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.kI,{last:!0,title:"Neck Collar and Head Blocks",children:(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:ey.neckCollar.name,label:ey.neckCollar.label,options:[...eY,{label:"Not Indicated",value:t.W.NOT_INDICATED}]}),(0,n.jsx)(i.b1,{name:ey.headBlocks.name,label:ey.headBlocks.label,options:eY})]})}),(0,n.jsx)("br",{})]}),(o[ey.isAirwayPatent.name]===t.NO||o[ey.isAirwayPatent.name]===t.W.THREATENED)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.kI,{last:!0,title:"Interventions",children:[(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.el,{name:ey.intervention.name,label:ey.intervention.label,options:eM,multiple:!0,getValue:e=>{R(!!e.find(e=>e.id==t.W.OROPHARYNGEAL))}})}),(0,n.jsx)("br",{}),I&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:ey.nasopharyngealSize.name,label:ey.nasopharyngealSize.label+"(CM)",options:[{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"}]}),(0,n.jsx)(i.b1,{name:ey.oropharyngealSize.name,label:ey.oropharyngealSize.label+" (MM)",options:[{value:"80",label:"80"},{value:"90",label:"90"},{value:"100",label:"100"},{value:"110",label:"110"},{value:"120",label:"120"}]})]})})]})})]})]})})};var eU=l(51135),eH=l(1921),eB=l(43398),eG=l(61783),eV=l(13216),eF=l(29198),ek=l(51214),ez=l(77033),eq=l(34125);let eK={isPatientBreathing:{name:t.W.IS_BREATHING_ABNORMAL,label:"Is Patient Breathing",type:"string",options:{[t._Y]:"breathing",[t.NO]:"not breathing"},children:[{concept:t.W.START_TIME,label:"Start Time"},{concept:t.W.END_TIME,label:"End Time"},{multiple:!0,type:"string",concept:t.W.DEVICE_USED_FOR_INTERVENTION,label:"Device used for intervention"},{concept:t.W.RESPIRATORY_RATE,label:"Respiratory Rate"},{concept:t.W.OXYGEN_SATURATION,label:"Oxygen Saturation"},{concept:t.W.PATIENT_NEED_OXYGEN,label:"Patient Need Oxygen",children:[{concept:t.W.OXYGEN_SOURCE,label:"Oxygen Source"}]},{concept:t.W.OXYGEN_GIVEN,label:"Oxygen Given"},{concept:t.W.DEVICE_USED,label:"Device Used"},{concept:t.W.IS_TRACHEA_CENTRAL,label:"Is Trachea Central"},{concept:t.W.SIDE_DEVIATED,label:"Which side is it deviated to"},{concept:t.W.CHEST_WALL_ABNORMALITY,label:"Chest Wall Abnormality",children:[{concept:t.W.IMAGE_PART_NAME,label:"Chest Wall Abnormality Image",image:!0,parentConcept:t.W.CHEST_WALL_ABNORMALITY}]},{concept:t.W.CHEST_EXPANSION,label:"Chest Expansion"},{concept:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},{concept:t.W.DESCRIPTION,label:"Description of Abnormality"},{concept:t.W.PERCUSSION,label:"Percussion",children:[{concept:t.W.IMAGE_PART_NAME,label:"Percussion Image",image:!0,parentConcept:t.W.PERCUSSION}]},{concept:t.W.BREATHING_SOUNDS,label:"Breath Sounds",children:[{concept:t.W.IMAGE_PART_NAME,label:"Breath Sounds Image",image:!0,parentConcept:t.W.BREATHING_SOUNDS}]}]},startTimeIntervention:{child:!0,name:t.W.START_TIME,label:"Start Time"},finishTimeIntervention:{child:!0,name:t.W.END_TIME,label:"End Time"},deviceForIntervention:{child:!0,multiple:!0,name:t.W.DEVICE_USED_FOR_INTERVENTION,label:"Device used for intervention"},respiratoryRate:{child:!0,name:t.W.RESPIRATORY_RATE,label:"Respiratory Rate"},oxygenSaturation:{child:!0,name:t.W.BLOOD_OXYGEN_SATURATION,label:"Oxygen Saturation"},oxygenNeeded:{child:!0,name:t.W.PATIENT_NEED_OXYGEN,label:"Patient Need Oxygen"},oxygenGiven:{child:!0,name:t.W.OXYGEN_GIVEN,label:"Oxygen Given"},oxygenSource:{child:!0,name:t.W.OXYGEN_SOURCE,label:"Oxygen Source"},deviceUsed:{child:!0,name:t.W.DEVICE_USED,label:"Device Used"},isTracheaCentral:{child:!0,name:t.W.IS_TRACHEA_CENTRAL,label:"Is Trachea Central"},deviationSide:{child:!0,name:t.W.SIDE_DEVIATED,label:"Which side is it deviated to"},chestWallAbnormality:{child:!0,name:t.W.CHEST_WALL_ABNORMALITY,label:"Chest Wall Abnormality"},chestExpansion:{child:!0,name:t.W.CHEST_EXPANSION,label:"Chest Expansion"},additionalNotes:{child:!0,name:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},descriptionAbnormality:{child:!0,name:t.W.DESCRIPTION,label:"Description of Abnormality"},percussion:{child:!0,name:t.W.PERCUSSION,label:"Percussion"},breathSounds:{child:!0,name:t.W.BREATHING_SOUNDS,label:"Breath Sounds"}},eZ=eK,eX=o.Ik().shape({[eK.isPatientBreathing.name]:o.Yj().required().label(eK.isPatientBreathing.label),[eK.startTimeIntervention.name]:o.Yj().label(eK.startTimeIntervention.label),[eK.finishTimeIntervention.name]:o.Yj().label(eK.finishTimeIntervention.label),[eK.deviceForIntervention.name]:o.YO().label(eK.deviceForIntervention.label),[eK.respiratoryRate.name]:o.ai().min(0).max(90).when(eK.isPatientBreathing.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eK.respiratoryRate.label).min(1).max(70),[eK.oxygenSaturation.name]:o.ai().min(20).max(100).when(eK.isPatientBreathing.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eK.oxygenSaturation.label).min(10).max(100),[eK.oxygenNeeded.name]:o.Yj().label(eK.oxygenNeeded.label),[eK.oxygenGiven.name]:o.ai().when(eK.oxygenNeeded.name,(e,a)=>e[0]==t.W.YES?a.required():a).min(1).max(15).label(eK.oxygenGiven.label),[eK.oxygenSource.name]:o.Yj().when(eK.oxygenNeeded.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eK.oxygenSource.label),[eK.deviceUsed.name]:o.Yj().when(eK.oxygenNeeded.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eK.deviceUsed.label),[eK.isTracheaCentral.name]:o.Yj().label(eK.isTracheaCentral.label),[eK.deviationSide.name]:o.Yj().label(eK.deviationSide.label),[eK.percussion.name]:o.Yj().label(eK.percussion.label),[eK.chestWallAbnormality.name]:o.Yj().label(eK.chestWallAbnormality.label),[eK.breathSounds.name]:o.Yj().label(eK.breathSounds.label)}),eJ=(0,s.f6)(eK),e$=[{label:"Concentrator",value:t.W.CONCENTRATOR},{label:"Cylinder",value:t.W.CYLINDER},{label:"Piped Oxygen",value:t.W.PIPED_OXYGEN}],eQ=[{label:"Nasal Prongs",id:t.W.NASAL_PRONGS},{label:"Simple face mask",id:t.W.SIMPLE_FACE_MASK},{label:"Venturi face mask",id:t.W.VENTURI_FACE_MASK},{label:"Face mask with nebulising chamber",id:t.W.NEBULISING_CHAMBER},{label:"Nonrebreather face mask",id:t.W.NON_REBREATHER},{label:"Noninvasive ventilation mask",id:t.W.NON_INVASIVE_VENTILATION_MASK},{label:"Laryngeal mask airway",id:t.W.LARYNGEAL},{label:"Endotracheal tube",id:t.W.ENDOTRACHEAL}];t.W.WOUND,t.W.FLAIL_CHEST,t.W.SURGICAL_EMPHAYEMA,t.W.DEFORMITY,t.W.OTHER;let e0=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],e1=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),{gender:o}=(0,p.gd)(),[m,b]=(0,r.useState)([]),[d,A]=(0,r.useState)({}),[E,S]=(0,r.useState)([]),[I,R]=(0,r.useState)([]),{handleSubmit:x,isLoading:N,isSuccess:T}=(0,u.l)(t.fA.BREATHING_ASSESSMENT,a),[g,O]=(0,r.useState)(!1),[j,W]=(0,r.useState)([]),[_,f]=(0,r.useState)([]),[C,y]=(0,r.useState)([]),[v,P]=(0,r.useState)([]),L=async e=>{let a={...e},n=l.getServerTimeString(),i=[{concept:eK.chestWallAbnormality.name,value:a[eK.chestWallAbnormality.name],obsDatetime:n,groupMembers:await (0,s.Zt)(E)},{concept:eK.percussion.name,value:a[eK.percussion.name],obsDatetime:n,groupMembers:await (0,s.Zt)(I)},{concept:eK.chestExpansion.name,value:a[eK.chestExpansion.name],obsDatetime:n,groupMembers:await (0,s.Zt)(m)},{concept:eK.breathSounds.name,value:a[eK.breathSounds.name],obsDatetime:n,groupMembers:[{concept:t.W.SITE,value:"Lung Lateral Left",obsDatetime:n,groupMembers:await (0,s.Zt)(j)},{concept:t.W.SITE,value:"Lung Lateral Right",obsDatetime:n,groupMembers:await (0,s.Zt)(_)},{concept:t.W.SITE,value:"Lung Anterior",obsDatetime:n,groupMembers:await (0,s.Zt)(C)},{concept:t.W.SITE,value:"Lung Posterior",obsDatetime:n,groupMembers:await (0,s.Zt)(v)}]}],r=a[eK.deviceForIntervention.name],o=[];Array.isArray(r)&&(o=r.map(e=>({concept:eK.deviceForIntervention.name,value:e.id,obsDatetime:n}))),delete a[eK.chestWallAbnormality.name],delete a[eK.percussion.name],delete a[eK.deviceUsed.name],delete a[eK.chestExpansion.name],delete a[eK.deviceForIntervention.name],delete a[eK.breathSounds.name],await x([...await (0,s.k$)(eK,a,n),...i,...o])},M=[{id:1,label:"Lung Lateral Left",content:"Female"==o?(0,n.jsx)(eF.T,{onValueChange:W}):(0,n.jsx)(ez.k,{onValueChange:W})},{id:2,label:"Lung lateral right",content:"Female"==o?(0,n.jsx)(eq.W,{onValueChange:f}):(0,n.jsx)(ek.L,{onValueChange:f})},{id:3,label:"Lung Anterior",content:"Female"==o?(0,n.jsx)(eB.d,{onValueChange:y,form:"breathSounds"}):(0,n.jsx)(eH.i,{onValueChange:y,form:"breathSounds"})},{id:4,label:"Lung Posterior",content:"Female"==o?(0,n.jsx)(eV.b,{onValueChange:P,form:"breathSounds"}):(0,n.jsx)(eG.Y,{onValueChange:P,form:"breathSounds"})}];return(0,n.jsx)(c.h,{loading:N,children:!g&&(0,n.jsxs)(i.PD,{validationSchema:eX,initialValues:eJ,onSubmit:L,submitButtonText:"Next",children:[(0,n.jsx)(i.fP,{getValues:A}),(0,n.jsx)(i.kI,{title:"Breathing",children:(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.b1,{row:!0,name:eK.isPatientBreathing.name,label:eK.isPatientBreathing.label,options:e0})})}),d[eK.isPatientBreathing.name]==t.NO&&(0,n.jsxs)(i.kI,{title:"",children:[(0,n.jsx)(i.bL,{message:"Assist with ventilation, Manually assist patient breathing"}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.YZ,{sx:{width:"100%",my:"1ch"},name:eK.startTimeIntervention.name,label:eK.startTimeIntervention.label}),(0,n.jsx)(i.YZ,{sx:{width:"100%",my:"1ch"},name:eK.finishTimeIntervention.name,label:eK.finishTimeIntervention.label})]}),(0,n.jsx)(i.el,{name:eK.deviceForIntervention.name,label:eK.deviceForIntervention.label,sx:{width:"100%"},options:[{label:"Bag and mask",id:t.W.BAG_AND_MASK},{label:"Laryngeal Mask Airway and bag",id:t.W.LARYNGEAL_MASK_AIRWAY_AND_BAG},{label:"Endotracheal tube (ETT)",id:t.W.ENDOTRACHEAL}]})]}),d[eK.isPatientBreathing.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.kI,{title:"Respiratory and Oxygen",children:[(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"bpm",name:eK.respiratoryRate.name,label:eK.respiratoryRate.label,id:eK.respiratoryRate.name}),(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"%",name:eK.oxygenSaturation.name,label:eK.oxygenSaturation.label,id:eK.oxygenSaturation.name})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:eK.oxygenNeeded.name,label:eK.oxygenNeeded.label,options:e0,row:!0}),d[eK.oxygenNeeded.name]==t._Y&&(0,n.jsx)(i.b1,{name:eK.oxygenSource.name,label:eK.oxygenSource.label,options:e$,row:!0})]}),d[eK.oxygenNeeded.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A8,{name:eK.oxygenGiven.name,label:eK.oxygenGiven.label,id:eK.oxygenGiven.name,sx:{width:"100%",m:0},unitOfMeasure:"L/min"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:eK.deviceUsed.name,label:eK.deviceUsed.label,options:eQ,multiple:!1}),(0,n.jsx)("br",{})]})]}),(0,n.jsxs)(i.kI,{last:!0,title:"Trachea and Chest",children:[(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:eK.isTracheaCentral.name,label:eK.isTracheaCentral.label,options:e0,row:!0}),(0,n.jsx)(i.b1,{name:eK.chestWallAbnormality.name,label:eK.chestWallAbnormality.label,options:e0,row:!0})]}),d[eK.isTracheaCentral.name]==t.NO&&(0,n.jsx)(i.Vp,{children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.b1,{name:eK.deviationSide.name,label:eK.deviationSide.label,row:!0,options:[{label:"Left",value:t.W.LEFT},{label:"Right",value:t.W.RIGHT}]})})}),d[eK.chestWallAbnormality.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.bL,{message:"Diagram to select area"}),"Male"==o&&(0,n.jsx)(eH.i,{imageSection:eK.chestWallAbnormality.name,onValueChange:S,form:"breathingLung"}),"Female"==o&&(0,n.jsx)(eB.d,{imageSection:eK.chestWallAbnormality.name,onValueChange:S,form:"breathingLung"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.Vp,{children:d[eK.descriptionAbnormality.name]==t.W.OTHER&&(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.A8,{multiline:!0,rows:3,name:eK.descriptionAbnormality.name,label:eK.descriptionAbnormality.label,id:eK.descriptionAbnormality.name})})})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.b1,{name:eK.chestExpansion.name,label:eK.chestExpansion.label,row:!0,options:[{label:"Normal",value:t.W.NORMAL},{label:"Reduced",value:t.W.REDUCED}]}),d[eK.chestExpansion.name]==t.W.REDUCED&&(0,n.jsxs)(n.Fragment,{children:["Male"==o&&(0,n.jsx)(eH.i,{onValueChange:b,form:"selectable"}),"Female"==o&&(0,n.jsx)(eB.d,{imageEncounter:t.fA.BREATHING_ASSESSMENT,onValueChange:b,form:"selectable"})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.b1,{name:eK.percussion.name,label:eK.percussion.label,row:!0,options:[{label:"Normal",value:t.W.NORMAL},{label:"Abnormal",value:t.W.ABNORMAL}]}),d[eK.percussion.name]==t.W.ABNORMAL&&(0,n.jsxs)(n.Fragment,{children:["Male"==o&&(0,n.jsx)(eG.Y,{form:"percussion",onValueChange:R}),"Female"==o&&(0,n.jsx)(eV.b,{form:"percussion",onValueChange:R})]}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.b1,{name:eK.breathSounds.name,label:eK.breathSounds.label,row:!0,options:[{label:"Normal",value:t.W.NORMAL},{label:"Abnormal",value:t.W.ABNORMAL}]})}),d[eK.breathSounds.name]==t.W.ABNORMAL&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(eU.A,{slides:M})]}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.A8,{multiline:!0,rows:3,sx:{m:0,width:"100%"},name:eK.additionalNotes.name,label:eK.additionalNotes.label,id:eK.additionalNotes.name})})]})]})]})})}},45910:(e,a,l)=>{l.d(a,{CF:()=>r,J$:()=>o,ec:()=>b,gw:()=>m,nu:()=>s});var n=l(51472),i=l(80549),t=l(22454);let s=()=>(0,i.n)({mutationFn:e=>{let a=e.role.map(e=>({name:e.id})),l={username:e.userName,password:e.password,person:{gender:"Male",age:47,birthdate:"1970-01-01T00:00:00.000+0100",birthdateEstimated:!1,dead:!1,deathDate:null,causeOfDeath:null,names:[{givenName:e.firstName,familyName:e.lastName}]},roles:a};return(0,n.kg)(l).then(e=>e.data)}}),r=()=>(0,t.I)({queryKey:["users"],queryFn:()=>(0,n.lo)().then(e=>e.data),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),o=e=>(0,t.I)({queryKey:["search",e],queryFn:()=>(0,n.OV)(e).then(e=>e.data),enabled:!1}),m=()=>(0,i.n)({mutationFn:e=>{let a={username:e.userName,roles:e.role.map(e=>({name:e.label})),password:e.password};return(0,n.TK)(e.userId,a).then(e=>e.data)}}),b=()=>(0,i.n)({mutationFn:e=>{let a={user:{current_password:e.password,password:e.newPassword}};return(0,n.f3)(e.userId,a).then(e=>e.data)}})},51472:(e,a,l)=>{l.d(a,{OV:()=>r,TK:()=>m,f3:()=>b,kg:()=>t,kl:()=>o,lo:()=>s});var n=l(93292);let i="/users",t=e=>(0,n.vt)(e,i),s=()=>(0,n.UK)("".concat(i,"?paginate=false")),r=e=>(0,n.UK)(i+"?paginate=false&username="+e),o=e=>(0,n.HD)(e,i),m=(e,a)=>(0,n.hc)(e,a,i),b=(e,a)=>(0,n.yo)(e,i,a)},52375:(e,a,l)=>{l.d(a,{q:()=>R});var n=l(95155);l(12115);var i=l(43070),t=l(16963),s=l(71356),r=l(64792),o=l(2456),m=l(45202),b=l(4474),d=l(78470),u=l(1151),c=l(48116);let h=(0,c.Ay)(i.A)(e=>{let{theme:a}=e;return{borderRadius:a.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:a.shadows[3],position:"relative"}}),p=(0,c.Ay)(t.A)(e=>{let{theme:a}=e;return{borderCollapse:"separate",borderSpacing:"0px 4px"}}),A=(0,c.Ay)(s.A)(e=>{let{theme:a}=e;return{fontWeight:500,padding:"12px 16px",borderBottom:"none",color:a.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"}}),E=(0,c.Ay)(A)(e=>{let{theme:a}=e;return{fontSize:"0.9rem",fontWeight:"bold",backgroundColor:a.palette.background.default,textTransform:"uppercase"}}),S=(0,c.Ay)(r.A)(e=>{let{theme:a}=e;return{backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:a.palette.grey[100]},boxShadow:a.shadows[1]}}),I=(0,c.Ay)("div")(e=>{let{theme:a}=e;return{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1}}),R=e=>{let{columns:a,data:l,actions:i=!1,getSelectedRow:t,loading:c=!1}=e;return(0,n.jsx)(h,{children:(0,n.jsxs)(p,{stickyHeader:!0,children:[(0,n.jsx)(o.A,{children:(0,n.jsxs)(r.A,{children:[a.map((e,a)=>(0,n.jsx)(E,{children:e.label},a)),i&&(0,n.jsx)(E,{children:"Actions"})]})}),(0,n.jsx)(m.A,{children:c?(0,n.jsx)(r.A,{children:(0,n.jsx)(s.A,{colSpan:a.length+ +!!i,children:(0,n.jsx)(I,{children:(0,n.jsx)(b.A,{})})})}):l.map((e,l)=>(0,n.jsxs)(S,{onClick:()=>t&&t(e),children:[a.map((a,l)=>(0,n.jsx)(d.A,{title:e[a.field],arrow:!0,children:(0,n.jsx)(A,{children:e[a.field]})},l)),i&&(0,n.jsxs)(A,{children:[(0,n.jsx)(u.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,n.jsx)(u.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},l))})]})})}}}]);