"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6232],{16232:(e,a,l)=>{l.d(a,{kn:()=>eY,ng:()=>e0,w8:()=>Z,_G:()=>eu,ze:()=>eN,Q5:()=>e_,$q:()=>ef,mX:()=>ey,HN:()=>eK,CG:()=>$,FB:()=>eh,qG:()=>ej});var n=l(95155),i=l(59487),t=l(23312),s=l(42281),r=l(12115),o=l(37129),m=l(28892),b=l(52269),d=l(9670),u=l(58135),c=l(6459),h=l(49262),p=l(70482),A=l(19652),E=l(59312);let S={rhythm:{name:t.W.RHYTHM,label:"Rhythm"},shockEnergy:{name:t.W.SHOCK_ENERGY,label:"Shock Energy"},medication:{name:t.W.MEDICATION,label:"Medication"},dose:{name:t.W.MEDICATION_DOSE,label:"Dose"},route:{name:t.W.MEDICATION_ROUTE,label:"Route"},doseUnit:{name:t.W.MEDICATION_DOSE_UNIT,label:"Unit"},interventions:{name:t.W.INTERVENTION_LIST,label:"Interventions"},occurrences:{name:t.W.OCCURRENCES,label:"Occurrences (E.g., ROSC, Vomit)"},time:{name:t.W.TIME,label:"Time"},reversibleCauses:{name:t.W.REVERSIBLE_CAUSES,label:"Reversible Causes"},other:{name:t.W.OTHER,label:"Other Interventions"}},I=[{label:"PEA",id:t.W.PEA},{label:"VF",id:t.W.VF},{label:"VT",id:t.W.VT},{label:"Asys",id:t.W.ASYS}],x=["Milligrams (mg)","Micrograms (\xb5g)","Grams (g)","International Units (IU)","Milliliters (ml)","Millimoles (mmol)"],R=[{label:"IV Access",id:t.W.IV_ACCESS},{label:"Intubation",id:t.W.INTUBATION},{label:"POCUS",id:t.W.POCUS},{label:"ABG",id:t.W.ABG},{id:t.W.POSITIONING,label:"Positioning"},{id:t.W.C_SPINE_STABILIZATION,label:"C-Spine Stabilization"},{id:t.W.SUCTIONING,label:"Suctioning"},{id:t.W.FOREIGN_BODY_REMOVAL,label:"Foreign body removal"},{id:t.W.INSERTION_OF_GUEDEL,label:'Insertion of airway "Guedel"'},{id:t.W.OXYGEN_GIVEN,label:"Oxygen therapy"},{id:t.W.BAG_AND_MASK,label:"Bag and mask"},{id:t.W.INTERCOSTAL_DRAINAGE,label:"Intercostal drainage"},{id:t.W.INTAKE_FLUIDS,label:"Intake Fluids"},{id:t.W.HEMORRHAGE_CONTROL,label:"Hemorrhage control"},{id:t.W.BLOOD_SAMPLE,label:"Blood sample"},{id:t.W.CATHETER,label:"Catheter"},{id:t.W.TRANSFUSION,label:"Transfusion"},{id:t.W.NG_INSERTION,label:"NG Insertion"},{id:t.W.SUTURING,label:"Suturing"},{id:t.W.KEEP_WARM,label:"Keep warm"},{id:t.W.OTHER,label:"Other"}],N=[{label:"Intraosseous",id:t.W.INTRAOSSEOUS},{label:"Intravenous",id:t.W.INTRAVENOUS},{label:"Oral",id:t.W.ORAL},{label:"Intramuscular",id:t.W.INTRAMUSCULAR},{label:"Subcutaneous",id:t.W.SUBCUTANEOUS},{label:"Infiltration",id:t.W.INFILTRATION},{label:"Intrathecal",id:t.W.INTRATHECAL},{label:"Dermal",id:t.W.DERMAL},{label:"Inhaled",id:"Inh  aled"}],g=[{label:"Hypoxia",id:t.W.HYPOXIA},{label:"Hypovolemia",id:t.W.HYPOVOLEMIA},{label:"Hyperkalaemia",id:t.W.HYPERKALAEMIA},{label:"Hypokalaemia",id:t.W.HYPOKALAEMIA},{label:"Hypothermia",id:t.W.HYPOTHERMIA},{label:"Tension Pneumothorax",id:t.W.TENSION_PNEUMOTHORAX},{label:"Tamponade, Cadiac",id:t.W.TAMPONADE_CARDIAC},{label:"Toxins",id:t.W.TOXINS},{label:"Thrombosis, Pulmonary",id:t.W.THROMBOSIS_PULMONARY},{label:"Thrombosis, Coronary",id:t.W.THROMBOSIS_CORONARY},{label:"Hydrogen Ions (Acidosis)",id:t.W.HYDROGEN_ION_ACIDOSIS}],T=o.Ik().shape({[S.rhythm.name]:o.YO().required().label(S.rhythm.label),[S.shockEnergy.name]:o.Yj().required().label(S.shockEnergy.label),[S.medication.name]:o.Yj().required().label(S.medication.label),[S.dose.name]:o.Yj().required().label(S.dose.label),[S.route.name]:o.Yj().required().label(S.route.label),[S.doseUnit.name]:o.Yj().required().label(S.doseUnit.label),[S.interventions.name]:o.YO().required().label(S.interventions.label),[S.occurrences.name]:o.Yj().required().label(S.occurrences.label),[S.time.name]:o.Yj().required().label(S.time.label),[S.reversibleCauses.name]:o.YO().required().label(S.reversibleCauses.label),[S.other.name]:o.Yj().label(S.other.label)}),j=e=>{var a;let{patientUuid:l,visitUuid:o,onSubmitRecord:m}=e,[b,d]=(0,r.useState)({}),{handleSubmit:u,isLoading:c}=(0,p.li)(t.fA.CPR,()=>{},l,o),{medicationOptions:j}=(0,A.A)();return(0,r.useEffect)(()=>{m(c)},[c]),(0,n.jsx)(i.PD,{initialValues:{...(0,s.f6)(S),[S.interventions.name]:[]},validationSchema:T,onSubmit:(e,a)=>{let{ServerTime:l}=(0,h.useServerTime)(),n={...e},i=l.getServerTimeString(),r=(0,s.ZM)(n[S.rhythm.name],S.rhythm.name,i),o=(0,s.ZM)(n[S.interventions.name],S.interventions.name,i),m=(0,s.ZM)(n[S.reversibleCauses.name],S.reversibleCauses.name,i);delete n[S.rhythm.name],delete n[S.interventions.name],delete n[S.reversibleCauses.name];let b=(0,s.gX)(n,i);u([{concept:t.W.CPR_RECORD,value:i,groupMembers:[...o,...r,...b,...m],obsDateTime:i}]),a.resetForm()},submitButtonText:"Add Record",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.fP,{getValues:d}),(0,n.jsx)(i.gj,{sx:{my:"1ch"},name:S.time.name,label:S.time.label}),(0,n.jsx)(i.el,{name:S.rhythm.name,label:S.rhythm.label,options:I,size:"small",sx:{width:"100%"}}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:S.shockEnergy.name,label:S.shockEnergy.label,id:"shockEnergy",sx:{width:"100%"}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.el,{name:S.medication.name,label:"Medication Name",options:j,multiple:!1}),(0,n.jsx)(i.pj,{id:S.dose.name,label:S.dose.label,name:S.dose.name,unitName:S.doseUnit.name,unitOptions:x,placeholder:"e.g., 500",sx:{m:0},inputIcon:(0,n.jsx)(E.gaX,{})}),(0,n.jsx)(i.el,{multiple:!1,name:S.route.name,label:S.route.label,options:N,sx:{width:"100%"}})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:S.interventions.name,label:S.interventions.label,options:R,sx:{width:"100%"}}),(null==(a=b[S.interventions.name])?void 0:a.find(e=>e.id==t.W.OTHER))&&(0,n.jsx)(i.A8,{name:S.other.name,label:S.other.label,id:S.other.name,rows:5,sx:{width:"100%"},multiline:!0}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{multiline:!0,rows:5,name:S.occurrences.name,label:S.occurrences.label,id:"occurrences",sx:{width:"100%"}}),(0,n.jsx)(i.el,{name:S.reversibleCauses.name,label:S.reversibleCauses.label,options:g,multiple:!0,width:"100%"})]})})};var O=l(27365),W=l(39347);let _={reasonsCprStopped:{name:t.W.REASON_CPR_STOPPED,label:"Reason CPR Stopped"},otherReason:{name:t.W.OTHER,label:"Other Reason"},dispositionAfterCpr:{name:t.W.DISPOSITION_AFTER_CPR,label:"Disposition After CPR"},spo:{name:t.W.SPO2,label:"SPO2"},oxygen:{name:t.W.OXYGEN_GIVEN,label:"Oxygen"},respiratoryRate:{name:t.W.RESPIRATORY_RATE,label:"Respiratory Rate"},systolic:{name:t.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic"},diastolic:{name:t.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},pulseRate:{name:t.W.PULSE_RATE,label:"Pulse Rate"},temperature:{name:t.W.TEMPERATURE,label:"Temperature"},motorResponse:{name:t.W.MOTOR_RESPONSE,label:"Motor Response"},eyeOpeningResponse:{name:t.W.EYE_OPENING_RESPONSE,label:"Eye Opening Response"},verbalResponse:{name:t.W.VERBAL_RESPONSE,label:"Verbal Response"},teamLeader:{name:t.W.TEAM_LEADER,label:"Team Leader"},teamMembers:{name:t.W.TEAM_MEMBERS,label:"Team Members"},cause:{name:t.W.CAUSE,label:"Likely or known cause of cardiac arrest"},timeStopped:{name:t.W.CPR_TIME_STOPPED,label:"CPR Time Stopped"}},f=o.Ik().shape({[_.reasonsCprStopped.name]:o.Yj().required().label(_.reasonsCprStopped.label),[_.otherReason.name]:o.Yj().when(_.reasonsCprStopped.name,{is:e=>e===t.W.OTHER,then:e=>e.required().label(_.otherReason.label)}).label(_.otherReason.label),[_.dispositionAfterCpr.name]:o.Yj().required().label(_.dispositionAfterCpr.label),[_.spo.name]:o.ai().min(0).max(100).required().label(_.spo.label),[_.oxygen.name]:o.Yj().required().label(_.oxygen.label),[_.respiratoryRate.name]:o.ai().min(0).max(90).required().label(_.respiratoryRate.label),[_.systolic.name]:o.ai().min(0).max(300).required().label(_.systolic.label),[_.diastolic.name]:o.ai().min(0).max(300).required().label(_.diastolic.label),[_.temperature.name]:o.ai().min(20).max(45).required().label(_.temperature.label),[_.pulseRate.name]:o.ai().min(60).max(100).label(_.pulseRate.label),[_.eyeOpeningResponse.name]:o.Yj().required().label(_.eyeOpeningResponse.label),[_.motorResponse.name]:o.Yj().required().label(_.motorResponse.label),[_.verbalResponse.name]:o.Yj().required().label(_.verbalResponse.label),[_.teamLeader.name]:o.Yj().required().label(_.teamLeader.label),[_.teamMembers.name]:o.YO().required().label(_.teamMembers.label),[_.cause.name]:o.Yj().required().label(_.cause.label),[_.timeStopped.name]:o.Yj().required().label(_.timeStopped.label)}),C=[{label:"ROSC",id:t.W.ROSC},{label:"Team decision to stop",id:t.W.TEAM_DECISION_TO_STOP},{label:"DNA CPR document found",id:t.W.DNA_CPR_DOCUMENT_FOUND},{label:"Other",id:t.W.OTHER}],y=[{label:"Resuscitation room",id:t.W.RESUSCITATION_ROOM},{label:"ICU",id:t.W.ICU},{label:"HDU Specify",id:t.W.HDU_SPECIFY},{label:"General Ward Specify",id:t.W.GENERAL_WARD_SPECIFY},{label:"Mortuary",id:t.W.MORTUARY}],v=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],P=[{label:"Spontaneous",value:"Spontaneous",weight:4},{label:"To Speech",value:"To Speech",weight:3},{label:"To Pain",value:"To Pain",weight:2},{label:"No Response",value:"No Response",weight:1}],L=[{label:"Obeying Commands",value:"Obeying Commands",weight:6},{label:"Localising",value:"Localising",weight:5},{label:"Withdraw",value:"Withdraw",weight:4},{label:"Normal Flexion",value:"Normal Flexion",weight:3},{label:"Extension",value:"Extension",weight:2},{label:"None",value:"None",weight:1}],M=[{label:"Oriented",value:"Oriented",weight:5},{label:"Confused",value:"Confused",weight:4},{label:"Inappropriate Words",value:"Inappropriate Words",weight:3},{label:"Incomprehensible sounds",value:"Incomprehensible sounds",weight:2},{label:"None",value:"None",weight:1}],D=e=>{let{onSubmit:a,formRef:l,triggerValidate:r}=e,{data:o,isLoading:m}=(0,O.CF)(),b=null==o?void 0:o.map(e=>({label:e.person.names[0].family_name+" "+e.person.names[0].given_name,id:e.uuid})),u=(e,a)=>{let l=a.find(a=>a.value==e);return l?l.weight:0};return(0,n.jsx)(i.PD,{initialValues:(0,s.f6)(_),validationSchema:f,onSubmit:a,submitButton:!1,ref:l,children:e=>{let{values:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A8,{name:_.cause.name,label:_.cause.label,id:_.cause.name,multiline:!0,rows:4,sx:{width:"100%"}}),(0,n.jsx)(d.default,{variant:"h6",children:"Vital signs after ROSC"}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.A8,{name:_.spo.name,label:_.spo.label,id:_.spo.name,sx:{width:"100%"},unitOfMeasure:"%"}),(0,n.jsx)(i.b1,{name:_.oxygen.name,label:_.oxygen.label,options:v,row:!0}),(0,n.jsx)(i.A8,{name:_.systolic.name,label:_.systolic.label,id:_.systolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"}),(0,n.jsx)(i.A8,{name:_.diastolic.name,label:_.diastolic.label,id:_.diastolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"})]}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.A8,{name:_.respiratoryRate.name,label:_.respiratoryRate.label,id:_.respiratoryRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,n.jsx)(i.A8,{name:_.pulseRate.name,label:_.pulseRate.label,id:_.pulseRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,n.jsx)(i.A8,{name:_.temperature.name,label:_.temperature.label,id:_.temperature.name,sx:{width:"100%"},unitOfMeasure:"\xb0C"})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:_.motorResponse.name,label:_.motorResponse.label,options:L,row:!1}),(0,n.jsx)(i.b1,{name:_.verbalResponse.name,label:_.verbalResponse.label,options:M,row:!1}),(0,n.jsx)(i.b1,{name:_.eyeOpeningResponse.name,label:_.eyeOpeningResponse.label,options:P,row:!1})]}),(0,n.jsxs)(d.default,{fontWeight:"800",variant:"body2",children:["(M",u(a[_.motorResponse.name],L)," V",u(a[_.verbalResponse.name],M)," E",u(a[_.eyeOpeningResponse.name],P),")"," ",u(a[_.motorResponse.name],L)+u(a[_.verbalResponse.name],M)+u(a[_.eyeOpeningResponse.name],P),"/15"]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.YZ,{name:_.timeStopped.name,label:_.timeStopped.label}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.el,{name:_.reasonsCprStopped.name,label:_.reasonsCprStopped.label,options:C,multiple:!1}),(0,n.jsx)(i.el,{name:_.dispositionAfterCpr.name,label:_.dispositionAfterCpr.label,options:y,multiple:!1})]}),(0,n.jsx)("br",{}),a[_.reasonsCprStopped.name]==t.W.OTHER&&(0,n.jsx)(i.A8,{multiline:!0,rows:5,name:_.otherReason.name,label:_.otherReason.label,sx:{width:"100%"},id:_.otherReason.name}),(0,n.jsx)("br",{}),(0,n.jsx)(d.default,{variant:"h6",children:"Resuscitation Team"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:_.teamLeader.name,label:_.teamLeader.label,options:null!=b?b:[],multiple:!1}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:_.teamMembers.name,label:_.teamMembers.label,options:null!=b?b:[]}),(0,n.jsx)("br",{}),(0,n.jsx)(W.A,{onClick:r,variant:"contained",fullWidth:!0,children:"Finish CPR"})]})}})},Y={cardiacArrest:{name:t.W.CARDIAC_ARREST,label:"Witnessed Cardiac Arrest"},site:{name:t.W.SITE,label:"SITE"},specify:{name:t.W.SPECIFY,label:"Specify"},time:{name:t.W.TIME,label:"Time of Call"},date:{name:t.W.DATE_OF_CPR,label:"Date of Call"}},w=[{label:"Rescitation",value:t.W.RESUSCITATION},{label:"SSW",value:t.W.SSW},{label:"Priority",value:t.W.PRIORITY},{label:"Other",value:t.W.OTHER}],U=[{label:"Yes",value:t.W.YES},{label:"No",value:t.W.NO}],B=(0,s.f6)(Y),H=o.Ik().shape({[Y.cardiacArrest.name]:o.Yj().required().label(Y.cardiacArrest.label),[Y.site.name]:o.Yj().required().label(Y.site.label),[Y.specify.name]:o.Yj().when(Y.site.name,{is:e=>e===t.W.OTHER,then:e=>e.required().label(Y.specify.label)})}),V=e=>{let{onSubmit:a,formRef:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.PD,{onSubmit:a,initialValues:B,validationSchema:H,submitButton:!1,ref:l,children:e=>{let{values:a,setFieldValue:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.W9,{width:"100%",name:Y.date.name,label:Y.date.label}),(0,n.jsx)(i.gj,{sx:{my:"1ch"},name:Y.time.name,label:Y.time.label}),(0,n.jsxs)(i.m2,{children:[(0,n.jsx)(i.b1,{options:U,label:Y.cardiacArrest.label,name:Y.cardiacArrest.name,row:!0}),(0,n.jsx)(i.b1,{name:Y.site.name,label:Y.site.label,options:w,row:!0})]}),a[Y.site.name]==t.W.OTHER&&(0,n.jsx)(i.A8,{size:"small",name:Y.specify.name,label:Y.specify.label,id:Y.specify.name,sx:{width:"100%"}})]})}})})};var G=l(47292),F=l(53988),k=l(83436);let z=(e,a)=>{let{data:l,isLoading:n,isRefetching:i}=(0,k.$O)(e),t=null==l?void 0:l.find(e=>e.encounter_type.uuid===a),[s,o]=(0,r.useState)([]);return(0,r.useEffect)(()=>{t&&o(t.obs)},[t]),{dataObs:s,isLoading:i||n}},q=e=>{let{patientId:a,submittingRecord:l}=e,{dataObs:i,isLoading:s}=z(a,t.fA.CPR),r=i.filter(e=>e.children.length>0&&e.names.find(e=>e.name.toLowerCase()==t.W.CPR_RECORD.toLowerCase()));console.log("records",r);let o=r.map(e=>{let{children:a}=e,l=(0,F.m)(a,t.W.TIME),n=(0,F.m)(a,t.W.SHOCK_ENERGY),i=(0,F.m)(a,t.W.MEDICATION),s=(0,F.m)(a,t.W.MEDICATION_DOSE),r=(0,F.m)(a,t.W.MEDICATION_DOSE_UNIT),o=(0,F.m)(a,t.W.OCCURRENCES),m=a.filter(e=>{var a;return null==e||null==(a=e.names)?void 0:a.some(e=>e.name.toLowerCase()===t.W.INTERVENTION_LIST.toLowerCase())}).map(e=>e.value).join(", ");return{time:l,shockEnergy:n,medicationName:i,dose:s,doseUnit:r,occurrences:o,interventionList:m,rhythm:a.filter(e=>{var a;return null==e||null==(a=e.names)?void 0:a.some(e=>e.name.toLowerCase()===t.W.RHYTHM.toLowerCase())}).map(e=>e.value).join(", "),causes:a.filter(e=>{var a;return null==e||null==(a=e.names)?void 0:a.some(e=>e.name.toLowerCase()===t.W.REVERSIBLE_CAUSES.toLowerCase())}).map(e=>e.value).join(", ")}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{variant:"h5",children:"Records"}),(0,n.jsx)("br",{}),(0,n.jsx)(G.q,{columns:[{label:"Time",field:"time"},{label:"Shock Energy",field:"shockEnergy"},{label:"Medication Name",field:"medicationName"},{label:"Dose",field:"dose"},{label:"Dose Unit",field:"doseUnit"},{label:"Occurrences",field:"occurrences"},{label:"Intervention List",field:"interventionList"},{label:"Rhythm",field:"rhythm"},{label:"Reversible Causes",field:"causes"}],loading:s||l,data:o})]})},K=e=>{let{onClose:a,patientuuid:l,visituuid:i}=e,{patientId:o,activeVisit:m}=(0,p.gd)(),[b,d]=(0,r.useState)(!1),{handleSubmit:u}=(0,p.li)(t.fA.CPR,()=>{a()},l,i),c=(0,r.useRef)(null),A=(0,r.useRef)(null),{dataObs:E,isLoading:S}=z(l,t.fA.CPR),I=async()=>{var e,a,l,n,i,t,s,r;await (null==c||null==(a=c.current)?void 0:a.setTouched(Object.keys(null==c||null==(e=c.current)?void 0:e.values).reduce((e,a)=>(e[a]=!0,e),{}))),await (null==A||null==(n=A.current)?void 0:n.setTouched(Object.keys(null==A||null==(l=A.current)?void 0:l.values).reduce((e,a)=>(e[a]=!0,e),{})));let o=await (null==c||null==(i=c.current)?void 0:i.validateForm()),m=await (null==A||null==(t=A.current)?void 0:t.validateForm());if(Object.keys(o).length>0||Object.keys(m).length>0)return void console.log("Validation failed:",{basicFormErrors:o,endFormErrors:m});await (null==c||null==(s=c.current)?void 0:s.submitForm()),await (null==A||null==(r=A.current)?void 0:r.submitForm())};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{formRef:c,onSubmit:()=>{}}),(0,n.jsx)("br",{}),(0,n.jsx)(q,{submittingRecord:b,patientId:l||o}),(0,n.jsx)(j,{onSubmitRecord:d,visitUuid:i||m,patientUuid:l||o}),(0,n.jsx)("br",{}),(0,n.jsx)(D,{triggerValidate:I,formRef:A,onSubmit:()=>{let{ServerTime:e}=(0,h.useServerTime)(),a=e.getServerTimeString(),l=(0,s.gX)(c.current.values,a),n={...A.current.values},i=(0,s.ZM)(n[t.W.TEAM_MEMBERS],t.W.TEAM_MEMBERS,a);delete n[t.W.TEAM_MEMBERS];let r=(0,s.gX)(n,a),o=E.filter(e=>e.children.length>0&&e.names.find(e=>e.name.toLowerCase()==t.W.CPR_RECORD.toLowerCase())).map(e=>({concept:t.W.CPR_RECORD,value:e.value,obsDatetime:e.obs_datetime,groupMembers:e.children.map(e=>({concept:e.names[0].name,value:e.value,obsDatetime:e.obs_datetime}))}));u([{concept:t.W.CPR,value:a,obsDatetime:a,groupMembers:[...r,...i,...l,...o]}])}})]})},Z=e=>{let{open:a,onClose:l,patientuuid:t,visituuid:s}=e;return(0,n.jsx)(i.eV,{maxWidth:"md",open:a,title:"CPR",onClose:l,children:(0,n.jsx)(K,{visituuid:s,patientuuid:t,onClose:l})})};var X=l(874);let J={bleedingInfo:{name:t.W.IS_PATIENT_ACTIVELY_BLEEDING,label:"Is the patient actively bleeding",children:[{concept:t.W.ACTION_DONE,label:"Action Done"}]},pulseInfo:{name:t.W.IS_THE_PATIENT_HAVE_PULSE,label:"Does the patient have a pulse",children:[{concept:t.W.PULSE_RATE,label:"Pulse rate"},{concept:t.W.PULSE_RATE_WEAK,label:"Pulse strength"},{concept:t.W.REGULAR_RHYTHM,label:"Pulse rhythm"},{concept:t.W.CAPILLARY_REFILL_TIME,label:"Capillary refill time"}]},mucousMembranesInfo:{name:t.W.MUCOUS_MEMBRANES,label:"Mucous membranes",children:[{type:"string",multiple:!0,concept:t.W.MUCOUS_ABNORMAL,label:"Mucous Abnormal"}]},bloodPressureMeasured:{name:t.W.BLOOD_PRESSURE_MEASURED,label:"Blood pressure measured",children:[{concept:t.W.SYSTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Systolic"},{concept:t.W.DIASTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Diastolic"},{name:t.W.REASON_NOT_RECORDED,label:"Reason BP Is unrecordable"},{name:t.W.DESCRIPTION,label:"Reason Not Done"}]},traumatizedInfo:{name:t.W.IS_PATIENT_TRAUMATIZED,label:"Is the patient injured",children:[{name:t.W.IS_PELVIS_STABLE,label:"Is the pelvis unstable"},{name:t.W.IS_FEMUR_TIBIA_NORMAL,label:"is the femur and tibia normal",children:[{concept:t.W.IMAGE_PART_NAME,label:"Leg Image",image:!0,parentConcept:t.W.IS_FEMUR_TIBIA_NORMAL}]}]},intravenousAccess:{name:t.W.PATIENT_INTRAVENOUS,label:"Does the patient need intravenous access",children:[{multiple:!0,type:"string",concept:t.W.SIZE_OF_CATHETER,label:"Size of intravenous catheter"},{multiple:!0,type:"string",concept:t.W.CANNULATION_SITE,label:"Cannulation Site"},{multiple:!0,type:"string",concept:t.W.DIAGRAM_CANNULATION_SITE,label:"Cannulation Site"}]},abnormalitiesInfo:{name:t.W.IS_THERE_ANY_OTHER_ABNOMALITIES,label:"Is there any other abnormalities?",children:[{concept:t.W.IMAGE_PART_NAME,label:"Abdomen Image",image:!0,parentConcept:t.W.IS_THERE_ANY_OTHER_ABNOMALITIES}]},abdnomenDistention:{name:t.W.HEADACHE,label:"Is there abdominal distention?"},assessPeripheries:{name:t.W.ASSESS_PERIPHERIES,label:"Assess peripheries"},pulseStrength:{child:!0,name:t.W.PULSE_RATE_WEAK,label:"Pulse strength"},pulseRhythm:{child:!0,name:t.W.REGULAR_RHYTHM,label:"Pulse rhythm"},bloodPressureSystolic:{child:!0,name:t.W.SYSTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Systolic"},bloodPressureDiastolic:{child:!0,name:t.W.DIASTOLIC_BLOOD_PRESSURE,label:"Blood Pressure Diastolic"},capillaryInfo:{child:!0,name:t.W.CAPILLARY_REFILL_TIME,label:"Capillary refill time"},pelvisInfo:{child:!0,name:t.W.IS_PELVIS_STABLE,label:"Is the pelvis unstable?"},catheterInfo:{child:!0,name:t.W.SIZE_OF_CATHETER,label:"Size of intravenous catheter"},femurAndTibiaNormalInfo:{child:!0,name:t.W.IS_FEMUR_TIBIA_NORMAL,label:"is the femur and tibia normal?"},bleedingActionDone:{child:!0,name:t.W.ACTION_DONE,label:"Action done"},anyOtherAbnormalities:{name:t.W.IS_THERE_ANY_OTHER_ABNOMALITIES,label:"Is There Any Other Abnormalites"},additionalNotes:{name:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},reasonNotRecorded:{child:!0,name:t.W.REASON_NOT_RECORDED,label:"Reason BP Is unrecordable"},reasonNotDone:{child:!0,name:t.W.DESCRIPTION,label:"Reason Not Done"},mucousAbnormal:{name:t.W.MUCOUS_ABNORMAL,label:"Mucous Abnormal"},bloodPressureNotDoneOther:{name:t.W.SPECIFY,label:"Specify"},siteOfCannulation:{child:!0,name:t.W.CANNULATION_SITE,label:"Cannulation Site"},diagramCannulationSite:{name:t.W.DIAGRAM_CANNULATION_SITE,label:"Cannulation Site"},pulse:{child:!0,name:t.W.HEART_RATE,label:"Pulse rate"},centralLineCannulationSite:{name:t.W.CENTRAL_LINE_CANNULATION_SITE,label:"Cannulation Site (Central Line)"}},$=J,Q=o.Ik({[J.bleedingInfo.name]:o.Yj().label(J.bleedingInfo.label),[J.pulseInfo.name]:o.Yj().label(J.pulseInfo.label),[J.pulseStrength.name]:o.Yj().label(J.pulseStrength.label),[J.pulseRhythm.name]:o.Yj().label(J.pulseRhythm.label),[J.bleedingActionDone.name]:o.Yj().label(J.bleedingActionDone.label),[J.bloodPressureSystolic.name]:o.ai().min(0).max(300).label(J.bloodPressureSystolic.label),[J.bloodPressureDiastolic.name]:o.ai().min(0).max(300).label(J.bloodPressureDiastolic.label),[J.intravenousAccess.name]:o.Yj().label(J.intravenousAccess.label),[J.traumatizedInfo.name]:o.Yj().label(J.traumatizedInfo.label),[J.abnormalitiesInfo.name]:o.Yj().label(J.abnormalitiesInfo.label),[J.capillaryInfo.name]:o.Yj().label(J.capillaryInfo.label),[J.abdnomenDistention.name]:o.Yj().label(J.abdnomenDistention.label),[J.pelvisInfo.name]:o.Yj().label(J.pelvisInfo.label),[J.mucousMembranesInfo.name]:o.Yj().label(J.mucousMembranesInfo.label),[J.catheterInfo.name]:o.YO().label(J.catheterInfo.label),[J.femurAndTibiaNormalInfo.name]:o.Yj().label(J.femurAndTibiaNormalInfo.label),[J.anyOtherAbnormalities.name]:o.Yj().label(J.anyOtherAbnormalities.label),[J.additionalNotes.name]:o.Yj().label(J.additionalNotes.label),[J.assessPeripheries.name]:o.Yj().label(J.assessPeripheries.label),[J.reasonNotDone.name]:o.Yj().label(J.reasonNotDone.label),[J.mucousAbnormal.name]:o.YO().label(J.mucousAbnormal.label),[J.bloodPressureNotDoneOther.name]:o.Yj().label(J.bloodPressureNotDoneOther.label),[J.siteOfCannulation.name]:o.YO().label(J.siteOfCannulation.label),[J.diagramCannulationSite.name]:o.YO().label(J.diagramCannulationSite.label),[J.pulse.name]:o.ai().label(J.pulse.label),[J.centralLineCannulationSite.name]:o.Yj().label(J.centralLineCannulationSite.label)}),ee=(0,s.f6)(J),ea=[{label:"14G",id:t.W.G14},{label:"16G",id:t.W.G16},{label:"18G",id:t.W.G18},{label:"20G",id:t.W.G20},{label:"22G",id:t.W.G22},{label:"Central Line",id:t.W.CENTRAL_LINE}],el=[{label:"Normal",value:t.W.NORMAL},{label:"Abnormal",value:t.W.ABNORMAL}],en=[{label:"Pale",id:t.W.PALE},{label:"Dry",id:t.W.DRY},{label:"Cyanosis",id:t.W.CYANOSIS},{label:"Jaundice",id:t.W.JAUNDICE}],ei=[{label:"Weak",value:t.W.WEAK},{label:"Strong",value:t.W.STRONG_REGULAR}],et=[{label:"Regular",value:t.W.REGULAR_RHYTHM},{label:"Irregular",value:t.W.IRREGULAR}],es=[{label:"Less than 3 seconds",value:t.W.LESS_THAN_3_SECONDS},{label:"3 seconds",value:t.W.THREE_SECONDS},{label:"More than 3 seconds",value:t.W.MORE_THAN_THREE_SECONDS}],er=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],eo=[{label:"Patient uncooperative",id:t.W.PATIENT_UNCOOPERATIVE},{label:"Machine not available",id:t.W.MACHINE_NOT_AVAILABLE},{label:"Batteries not available",id:t.W.BATTERIES_NOT_AVAILABLE},{label:"No inappropriately sized cuff",id:t.W.INAPPROPRIATELY_SIZED_CUFF},{label:"No power supply",id:t.W.NO_POWER_SUPPLY},{label:"Other",id:t.W.OTHER}],em=[{label:"Left",id:t.W.LEFT},{label:"Right",id:t.W.RIGHT}],eb=[{label:"Antecubital fossa",id:t.W.ANTECUBITAL_FOSSA},{label:"Hand",id:t.W.HAND},{label:"Wrist",id:t.W.WRIST},{label:"Forearm",id:t.W.FOREARM},{label:"Foot",id:t.W.FOOT},{label:"External Jugular",id:t.W.EXTERNAL_JUGULAR}],ed=[{id:t.W.FEMORAL,label:"Femoral"},{id:t.W.SUBCLAVIAN,label:"Subclavian"},{id:t.W.INTERNAL_JUGULAR,label:"Internal Jugular"}],eu=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),{gender:o}=(0,p.gd)(),[A,E]=(0,r.useState)({}),[S,I]=(0,r.useState)([]),[x,R]=(0,r.useState)([]),[N,g]=(0,r.useState)([]),[T,j]=(0,r.useState)(!1),[O,W]=(0,r.useState)(!1),{handleSubmit:_,isLoading:f,isSuccess:C}=(0,u.l)(t.fA.CIRCULATION_ASSESSMENT,a),y=async e=>{let a={...e},n=l.getServerTimeString(),i=[{concept:J.abnormalitiesInfo.name,value:a[J.abnormalitiesInfo.name],obsDatetime:n,groupMembers:await (0,s.Zt)(S)},{concept:J.femurAndTibiaNormalInfo.name,value:a[J.femurAndTibiaNormalInfo.name],obsDatetime:n,groupMembers:await (0,s.Zt)(x)}],t=(0,s.ZM)(a[J.mucousAbnormal.name],J.mucousAbnormal.name,n,!0),r=(0,s.ZM)(a[J.catheterInfo.name],J.catheterInfo.name,n,!0),o=(0,s.ZM)(a[J.siteOfCannulation.name],J.siteOfCannulation.name,n,!0),m=(0,s.ZM)(a[J.diagramCannulationSite.name],J.diagramCannulationSite.name,n,!0);delete a[J.abnormalitiesInfo.name],delete a[J.femurAndTibiaNormalInfo.name],delete a[J.mucousAbnormal.name],delete a[J.catheterInfo.name],delete a[J.siteOfCannulation.name],delete a[J.diagramCannulationSite.name],await _([...await (0,s.k$)(J,a,n),...i,...t,...r,...o,...m])},v=(e,a)=>!!Array.isArray(e)&&e.find(e=>e.id==a);return(0,n.jsx)(c.h,{loading:f,children:!O&&(0,n.jsxs)(i.PD,{validationSchema:Q,initialValues:ee,onSubmit:y,submitButtonText:"next",children:[(0,n.jsx)(i.fP,{getValues:E}),(0,n.jsxs)(i.kI,{title:"Bleeding and Pulse Rate",children:[(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:J.bleedingInfo.name,label:J.bleedingInfo.label,options:er}),(0,n.jsx)(i.b1,{name:J.pulseInfo.name,label:J.pulseInfo.label,options:er,getValue:e=>{e==t.NO&&j(!0)}})]}),A[J.bleedingInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.bL,{message:"Apply pressure"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{multiline:!0,rows:3,sx:{width:"100%"},name:J.bleedingActionDone.name,id:J.bleedingActionDone.name,label:J.bleedingActionDone.label})]}),A[J.pulseInfo.name]==t.NO&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.bL,{message:"Start cardiopulmonary resuscitation"}),(0,n.jsx)(Z,{open:T,onClose:()=>j(!1)})]}),A[J.pulseInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:J.pulse.name,id:J.pulse.name,label:J.pulse.label,sx:{width:"100%"}}),(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:J.pulseStrength.name,label:J.pulseStrength.label,options:ei}),(0,n.jsx)(i.b1,{name:J.pulseRhythm.name,label:J.pulseRhythm.label,options:et}),(0,n.jsx)(i.b1,{name:J.capillaryInfo.name,label:J.capillaryInfo.label,options:es})]})]})]}),(0,n.jsxs)(i.kI,{title:"Mucous and Peripherals",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:J.mucousMembranesInfo.name,label:J.mucousMembranesInfo.label,options:el}),(0,n.jsx)(i.b1,{name:J.assessPeripheries.name,label:J.assessPeripheries.label,options:[{label:"Cold and clammy",value:"cold and clammy"},{label:"Warm",value:"warm"}]})]}),A[J.mucousMembranesInfo.name]==t.W.ABNORMAL&&(0,n.jsx)(i.el,{label:"Mucus Abnormal",name:J.mucousAbnormal.name,options:en})]}),(0,n.jsxs)(i.kI,{title:"Blood Pressure",children:[(0,n.jsx)(i.Vp,{sx:{alignItems:"flex-start"},children:(0,n.jsx)(i.b1,{name:J.bloodPressureMeasured.name,label:J.bloodPressureMeasured.label,options:[{label:"Done",value:t.W.DONE},{label:"Not Done",value:t.W.NOT_DONE},{label:"BP Unrecordable",value:t.W.BP_NOT_RECORDABLE}]})}),A[J.bloodPressureMeasured.name]==t.W.NOT_DONE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.el,{multiple:!1,name:J.reasonNotDone.name,label:J.reasonNotDone.label,options:eo}),A[J.reasonNotDone.name]==t.W.OTHER&&(0,n.jsx)(i.A8,{multiline:!0,rows:3,name:J.bloodPressureNotDoneOther.name,id:J.bloodPressureNotDoneOther.name,label:J.bloodPressureNotDoneOther.label,sx:{width:"100%",mt:"1ch"}})]}),A[J.bloodPressureMeasured.name]==t.W.BP_NOT_RECORDABLE&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:J.reasonNotRecorded.name,label:J.reasonNotRecorded.label,id:J.reasonNotRecorded.name})}),A[J.bloodPressureMeasured.name]==t.W.DONE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"mmHg",name:J.bloodPressureSystolic.name,label:J.bloodPressureSystolic.label,id:J.bloodPressureSystolic.name}),(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"mmHg",name:J.bloodPressureDiastolic.name,label:J.bloodPressureDiastolic.label,id:J.bloodPressureDiastolic.name})]}),A[J.bloodPressureSystolic.name]&&A[J.bloodPressureDiastolic.name]&&(0,n.jsx)(b.default,{children:(0,n.jsxs)(d.default,{variant:"subtitle1",sx:{color:65>Math.round((2*Number(A[J.bloodPressureDiastolic.name])+Number(A[J.bloodPressureSystolic.name]))/3)?"red":"inherit"},children:["Mean Arterial Pressure:"," ",Math.round((2*Number(A[J.bloodPressureDiastolic.name])+Number(A[J.bloodPressureSystolic.name]))/3)," ","mmHg"]})}),(0,n.jsx)("br",{})]})]}),(0,n.jsxs)(i.kI,{title:"Circulation Specific Trauma",children:[(0,n.jsx)(i.b1,{row:!0,name:J.traumatizedInfo.name,label:J.traumatizedInfo.label,options:er}),A[J.traumatizedInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.b1,{row:!0,name:J.pelvisInfo.name,label:J.pelvisInfo.label,options:er}),A[J.pelvisInfo.name]==t._Y&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.bL,{message:"apply pelvic binder"})}),(0,n.jsx)(i.b1,{row:!0,name:J.femurAndTibiaNormalInfo.name,label:J.femurAndTibiaNormalInfo.label,options:er}),A[J.femurAndTibiaNormalInfo.name]==t.NO&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Male"==o&&(0,n.jsx)(m.oj,{imageSection:J.femurAndTibiaNormalInfo.name,imageEncounter:t.fA.CIRCULATION_ASSESSMENT,onValueChange:R,form:"deformity"}),"Female"==o&&(0,n.jsx)(m.tD,{imageSection:J.femurAndTibiaNormalInfo.name,imageEncounter:t.fA.CIRCULATION_ASSESSMENT,onValueChange:R,form:"deformity"}),(0,n.jsx)("br",{})]})]})]}),(0,n.jsxs)(i.kI,{title:"Intravenous",children:[(0,n.jsx)(i.b1,{name:J.intravenousAccess.name,label:J.intravenousAccess.label,options:er}),A[J.intravenousAccess.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{multiple:!0,name:J.catheterInfo.name,label:J.catheterInfo.label,options:ea}),(0,n.jsx)("br",{}),v(A[J.catheterInfo.name],t.W.CENTRAL_LINE)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{variant:"h6",children:"Central Line"}),(0,n.jsx)(i.el,{multiple:!1,name:J.centralLineCannulationSite.name,label:J.centralLineCannulationSite.label,options:ed}),(0,n.jsx)("br",{})]}),(0,n.jsx)(i.el,{multiple:!0,name:J.siteOfCannulation.name,label:J.siteOfCannulation.label,options:em}),v(A[J.siteOfCannulation.name],t.W.LEFT)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{my:2,variant:"h6",children:"Left"}),(0,n.jsx)(i.el,{name:J.diagramCannulationSite.name,label:J.diagramCannulationSite.label,options:eb})]}),v(A[J.siteOfCannulation.name],t.W.RIGHT)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{my:2,variant:"h6",children:"Right"}),(0,n.jsx)(i.el,{name:J.diagramCannulationSite.name,label:J.diagramCannulationSite.label,options:eb})]}),(0,n.jsx)("br",{})]})]}),(0,n.jsxs)(i.kI,{last:!0,title:"Circulation Specific Abdominal Findings",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:J.abdnomenDistention.name,label:J.abdnomenDistention.label,options:er}),(0,n.jsx)(i.b1,{name:J.abnormalitiesInfo.name,label:J.abnormalitiesInfo.label,options:er})]}),A[J.abnormalitiesInfo.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"Male"==o&&(0,n.jsx)(m.GJ,{formNameSection:"other",onValueChange:I}),"Female"==o&&(0,n.jsx)(X.W,{formNameSection:"other",onValueChange:I}),(0,n.jsx)("br",{})]}),(0,n.jsx)(i.A8,{sx:{width:"100%",m:0},name:J.additionalNotes.name,label:J.additionalNotes.label,id:J.additionalNotes.name,rows:5,multiline:!0})]})]})})},ec={eyeOpening:{name:t.W.EYE_OPENING_RESPONSE,label:"Eye Opening Response"},verbalResponse:{name:t.W.VERBAL_RESPONSE,label:"Best Verbal Response"},motorResponse:{name:t.W.MOTOR_RESPONSE,label:"Best Motor Response"},gcs:{name:t.W.GCS,label:"GCS"},focalNeurology:{name:t.W.FOCAL_NEUROLOGY,label:"Focal Neurology"},postureInfo:{name:t.W.POSTURE,label:"Posture"},bloodGlocose:{name:t.W.BLOOD_GLUCOSE,label:"Patient's Random Blood Glucose"},seizureInfo:{name:t.W.ACTIVE_SEIZURES,label:"Is the patient having Seizures"},leftPupilSize:{name:t.W.LEFT_PUPIL_SIZE,label:"Left Pupil Size"},rightPupilSize:{name:t.W.RIGHT_PUPIL_SIZE,label:"Right Pupil Size"},leftPupilReaction:{name:t.W.LEFT_PUPIL_REACTION,label:"Left Pupil Reaction"},rightPupilReaction:{name:t.W.RIGHT_PUPIL_REACTION,label:"Right Pupil Reaction"},units:{name:"units",label:"Units"}},eh=ec,ep=o.Ik({[ec.eyeOpening.name]:o.Yj().required().label(ec.eyeOpening.label),[ec.verbalResponse.name]:o.Yj().required().label(ec.verbalResponse.label),[ec.motorResponse.name]:o.Yj().required().label(ec.motorResponse.label),[ec.focalNeurology.name]:o.Yj().required().label(ec.focalNeurology.label),[ec.postureInfo.name]:o.Yj().required().label(ec.postureInfo.label),[ec.bloodGlocose.name]:o.ai().min(0).max(1e3).label(ec.bloodGlocose.label),[ec.seizureInfo.name]:o.Yj().required().label(ec.seizureInfo.label),[ec.rightPupilReaction.name]:o.Yj().label(ec.rightPupilReaction.label),[ec.rightPupilSize.name]:o.Yj().label(ec.rightPupilSize.label),[ec.leftPupilReaction.name]:o.Yj().label(ec.leftPupilReaction.label),[ec.leftPupilSize.name]:o.Yj().label(ec.leftPupilSize.label),[ec.units.name]:o.Yj().label(ec.units.label)}),eA={...(0,s.f6)(ec),[ec.units.name]:"mmol/l"},eE=[{label:"Spontaneously",value:"4"},{label:"To Speech",value:"3"},{label:"To Pain",value:"2"},{label:"No Response",value:"1"}],eS=[{label:"Oriented To Time, Place and Person  ",value:"5"},{label:"Confused",value:"4"},{label:"Inappropriate Words",value:"3"},{label:"Incomprehensible Words",value:"2"},{label:"No Response",value:"1"}],eI=[{label:"Obey Commands",value:"6"},{label:"Moves to Localized Pain ",value:"5"},{label:"Flexion Withdrawal from Pain",value:"4"},{label:"Abnormal  Flexion (Decorticate)",value:"3"},{label:"Abnormal  Extension (Decerbrate)",value:"2"},{label:"No Response",value:"1"}],ex=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],eR=[{id:"mmol/l",label:"mmol/l"},{id:"mg/dl",label:"mg/dl"}],eN=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),[o,m]=(0,r.useState)(),[p,A]=(0,r.useState)(),[E,S]=(0,r.useState)(),[I,x]=(0,r.useState)(!1),[R,N]=(0,r.useState)({}),{handleSubmit:g,isLoading:T,isSuccess:j}=(0,u.l)(t.fA.PRIMARY_DISABILITY_ASSESSMENT,a),O=Number(o||0)+Number(p||0)+Number(E||0);return(0,n.jsx)(c.h,{loading:T,children:!I&&(0,n.jsxs)(i.PD,{validationSchema:ep,initialValues:eA,onSubmit:e=>{let a=l.getServerTimeString(),n=[{concept:t.W.EYES,value:"Left Eye",obsDateTime:a,groupMembers:[{concept:t.W.PUPIL_SIZE,value:e[ec.leftPupilSize.name],obsDateTime:a},...e[ec.leftPupilReaction.name]?[{concept:t.W.PUPIL_REACTION,value:e[ec.leftPupilReaction.name],obsDateTime:a}]:[],,]},{concept:t.W.EYES,value:"Right Eye",obsDateTime:a,groupMembers:[{concept:t.W.PUPIL_SIZE,value:e[ec.rightPupilSize.name],obsDateTime:a},...e[ec.leftPupilReaction.name]?[{concept:t.W.PUPIL_REACTION,value:e[ec.rightPupilReaction.name],obsDateTime:a}]:[]]}];delete e[ec.leftPupilSize.name],delete e[ec.leftPupilReaction.name],delete e[ec.rightPupilSize.name],delete e[ec.rightPupilReaction.name];let i=Number(o||0)+Number(p||0)+Number(E||0);g([...(0,s.gX)({...e,[t.W.GCS]:i},a),...n])},submitButtonText:"next",children:[(0,n.jsx)(i.fP,{getValues:N}),(0,n.jsxs)(i.kI,{title:"GCS",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:ec.eyeOpening.name,label:ec.eyeOpening.label,options:eE,getValue:e=>m(e)}),(0,n.jsxs)("p",{children:[ec.eyeOpening.label,": ",o]})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:ec.verbalResponse.name,label:ec.verbalResponse.label,options:eS,getValue:e=>A(e)}),(0,n.jsxs)("p",{children:[ec.verbalResponse.label,": ",p]})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{sx:{alignItems:"start"},children:[(0,n.jsx)(i.b1,{name:ec.motorResponse.name,label:ec.motorResponse.label,options:eI,getValue:e=>S(e)}),(0,n.jsxs)("p",{children:[ec.motorResponse.label,": ",E]})]}),(0,n.jsx)("br",{}),(0,n.jsx)(b.default,{children:(0,n.jsxs)(i.Th,{children:["Total Score: ",O]})})]}),(0,n.jsxs)(i.kI,{title:"Pupillary Response",children:[(0,n.jsx)(d.default,{children:"Right Eye"}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:ec.rightPupilSize.name,label:ec.rightPupilSize.label,id:ec.rightPupilSize.name,unitOfMeasure:"mm"}),(0,n.jsx)(i.b1,{name:ec.rightPupilReaction.name,label:ec.rightPupilReaction.label,row:!0,options:ex})]}),(0,n.jsx)("br",{}),(0,n.jsx)(d.default,{children:"Left Eye"}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:ec.leftPupilSize.name,label:ec.leftPupilSize.label,id:ec.leftPupilSize.name,unitOfMeasure:"mm"}),(0,n.jsx)(i.b1,{name:ec.leftPupilReaction.name,label:ec.leftPupilReaction.label,row:!0,options:ex})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.A8,{name:ec.focalNeurology.name,sx:{m:0,width:"100%"},label:ec.focalNeurology.label,rows:5,multiline:!0,id:ec.focalNeurology.name})]}),(0,n.jsxs)(i.kI,{last:!0,title:"Additional findings and Glucose",children:[(0,n.jsx)(i.Vp,{mr:"1ch",children:(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:ec.postureInfo.name,label:ec.postureInfo.label,id:ec.postureInfo.name})}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.el,{sx:{m:0,width:"30%"},multiple:!1,name:ec.units.name,options:eR,label:ec.units.label}),(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:ec.bloodGlocose.name,label:ec.bloodGlocose.label,id:ec.bloodGlocose.name,unitOfMeasure:R[ec.units.name]||"mmol/l"})]}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.b1,{name:ec.seizureInfo.name,label:ec.seizureInfo.label,options:ex})})]})]})})};var eg=l(9890);let eT={temperatureInfo:{name:t.W.TEMPERATURE,label:"Temperature"},additionalNotes:{name:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},image:{name:t.W.IMAGE_PART_NAME,label:"Image",image:!0}},ej=eT,eO=o.Ik({[eT.temperatureInfo.name]:o.ai().required().min(20).max(45).label(eT.temperatureInfo.label),[eT.additionalNotes.name]:o.Yj().label(eT.additionalNotes.label)}),eW=(0,s.f6)(eT),e_=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),{params:o}=(0,p.KU)(),{data:A,isLoading:E}=(0,eg.GN)(null==o?void 0:o.id),[S,I]=(0,r.useState)({}),[x,R]=(0,r.useState)([]),[N,g]=(0,r.useState)([]),[T,j]=(0,r.useState)(!1),{handleSubmit:O,isLoading:W,isSuccess:_}=(0,u.l)(t.fA.EXPOSURE_ASSESSMENT,a),f=async e=>{let a={...e},n=l.getServerTimeString(),i=[{concept:t.W.IMAGE_PART_NAME,value:"full body anterior",obsDatetime:n,groupMembers:[...await (0,s.Zt)(x)]},{concept:t.W.IMAGE_PART_NAME,value:"full body posterior",obsDatetime:n,groupMembers:[...await (0,s.Zt)(N)]},{concept:t.W.NOTES,value:T?"Normal":"Abnormalities",obsDatetime:n}];O([...(0,s.gX)(a,n),...i])},C=A&&(null==A?void 0:A.gender);return(0,n.jsx)(c.h,{loading:W,children:!T&&(0,n.jsxs)(i.PD,{validationSchema:eO,initialValues:eW,onSubmit:f,submitButtonText:"submit",children:[(0,n.jsx)(i.fP,{getValues:I}),(0,n.jsx)(i.A8,{sx:{width:"100%"},name:eT.temperatureInfo.name,label:eT.temperatureInfo.label,id:eT.temperatureInfo.name,unitOfMeasure:"\xb0C"}),(0,n.jsx)("br",{}),!T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.default,{color:"grey",variant:"h5",children:"Select areas with rash, injuries and other abnormalities"}),(0,n.jsx)("br",{})," ","Male"==C&&(0,n.jsxs)(b.default,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.Jc,{onValueChange:R})}),(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.ug,{onValueChange:g})})]}),"Female"==C&&(0,n.jsxs)(b.default,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.Wk,{onValueChange:R})}),(0,n.jsx)(b.default,{sx:{width:"60ch"},children:(0,n.jsx)(m.YP,{onValueChange:g})})]})]}),(0,n.jsx)(i.A8,{sx:{width:"100%"},name:eT.additionalNotes.name,label:eT.additionalNotes.label,id:eT.additionalNotes.name,rows:5,multiline:!0})]})})},ef=()=>{let[e,a]=(0,r.useState)(0),{navigateBackToProfile:l,navigateTo:s}=(0,p.cq)(),{params:o}=(0,p.KU)(),m=[{id:1,label:"Airway Assessment",encounter:t.fA.AIRWAY_ASSESSMENT},{id:11,label:"Breathing Assessment",encounter:t.fA.BREATHING_ASSESSMENT},{id:2,label:"Circulation Assessment",encounter:t.fA.CIRCULATION_ASSESSMENT},{id:3,label:"Disability Assessment",encounter:t.fA.PRIMARY_DISABILITY_ASSESSMENT},{id:4,label:"Exposure Assessment",encounter:t.fA.EXPOSURE_ASSESSMENT}];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.RG,{setActive:a,title:"Primary Survey",steps:m,active:e,onBack:()=>l(),showSubmittedStatus:!0,children:[(0,n.jsx)(eY,{onSubmit:()=>{a(1)}}),(0,n.jsx)(e0,{onSubmit:()=>{a(2)}}),(0,n.jsx)(eu,{onSubmit:()=>{a(3)}}),(0,n.jsx)(eN,{onSubmit:()=>{a(4)}}),(0,n.jsx)(e_,{onSubmit:()=>{s("/patient/".concat(o.id,"/medicalHistory"))}})]})})},eC={isAirwayPatent:{name:t.W.AIRWAY_PATENT,label:"Is Airway Patent",type:"string",options:{[t._Y]:"Patent",[t.NO]:"Not Patent",[t.W.THREATENED]:"Threatened"},children:[{multiple:!0,concept:t.W.AIRWAY_REASON,label:"Reason",type:"string"},{multiple:!0,concept:t.W.AIRWAY_OPENING_INTERVENTION,label:"Airway Opening Intervention",type:"string"}]},isPatientInjured:{name:t.W.PATIENT_INJURED,label:"Is Patient Injured",type:"string",options:{[t._Y]:"Injured",[t.NO]:"Not Injured"},children:[{type:"string",concept:t.W.NECK_COLLAR_APPLIED,label:"Neck Collar Applied",options:{[t._Y]:"Neck collar applied",[t.NO]:"Neck collar not applied",[t.W.NOT_INDICATED]:"No indication of neck collar"}},{type:"string",concept:t.W.HEAD_BLOCKS_APPLIED,label:"Head Blocks Applied"}]},neckCollar:{name:t.W.NECK_COLLAR_APPLIED,label:"Neck Collar Applied",child:!0},weakness:{name:t.W.WEAKNESS,label:"Weakness"},headBlocks:{name:t.W.HEAD_BLOCKS_APPLIED,label:"Head Blocks Applied",child:!0},airWayThreatenedReason:{name:t.W.AIRWAY_REASON,label:"Reason",child:!0},otherReason:{name:t.W.OTHER,label:"Specify"},intervention:{name:t.W.AIRWAY_OPENING_INTERVENTION,label:"Airway Opening Intervention"},nasopharyngealSize:{name:t.W.NASOPHARYNGEAL_AIRWAY,label:"Nasopharyngeal Airway Size"},oropharyngealSize:{name:t.W.OROPHARYNGEAL_AIRWAY,label:"Oropharyngeal Airway Size"}},ey=eC,ev=o.Ik().shape({[eC.isAirwayPatent.name]:o.Yj().required().label(eC.isAirwayPatent.label),[eC.headBlocks.name]:o.Yj().label(eC.headBlocks.label),[eC.neckCollar.name]:o.Yj().label(eC.neckCollar.label),[eC.airWayThreatenedReason.name]:o.YO().label(eC.airWayThreatenedReason.label),[eC.intervention.name]:o.YO().label(eC.intervention.label),[eC.weakness.name]:o.Yj().label(eC.weakness.label),[eC.nasopharyngealSize.name]:o.Yj().label(eC.nasopharyngealSize.label),[eC.oropharyngealSize.name]:o.Yj().label(eC.oropharyngealSize.label),[eC.otherReason.name]:o.Yj().when(eC.airWayThreatenedReason.name,(e,a)=>e[0]==t.W.OTHER?a.required():a).label(eC.otherReason.label)}),eP=[{id:t.W.SECRETION,label:"Secretions - blood, vomit, other"},{id:t.W.TONGUE_SWELLING,label:"Tongue swelling"},{id:t.W.NECK_SWELLING,label:"Neck swelling"},{id:t.W.NECK_HAEMATOMA,label:"Neck haematoma"},{id:t.W.TONGUE_FALLING_BACK,label:"Tongue falling back"},{id:t.W.OTHER,label:"Other"}],eL=[{id:t.W.SUCTIONING_DONE,label:"Suctioning Done"},{id:t.W.JAW_THRUST_MANOEUVER,label:"Jaw thrust manoeuver"},{id:t.W.HEAD_TILT_CHIN_LIFT,label:"Head tilt/chin lift"},{id:t.W.OROPHARYNGEAL,label:"Airway adjunct (Oropharyngeal airway and size / nasopharyngeal airway)"},{id:"Laryngeal mask airway (LMA) insertion",label:"Laryngeal mask airway (LMA) insertion"},{id:"Endotracheal intubation",label:"Endotracheal intubation"},{id:"Performed Cricothyroidotomy(Surgical Airway)",label:"Performed Cricothyroidotomy(Surgical Airway)"},{id:"Performed tracheostomy",label:"Performed tracheostomy"}],eM=(0,s.f6)(eC),eD=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],eY=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),[o,m]=(0,r.useState)({}),{handleSubmit:b,isLoading:d}=(0,u.l)(t.fA.AIRWAY_ASSESSMENT,a),[p,A]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!1),[I,x]=(0,r.useState)(!1),R=async e=>{let a={...e},n=a[eC.intervention.name],i=[],t=l.getServerTimeString();Array.isArray(n)&&(i=n.map(e=>({concept:eC.intervention.name,value:e.id,obsDatetime:t})));let r=a[eC.airWayThreatenedReason.name],o=[];Array.isArray(r)&&(o=r.map(e=>({concept:eC.airWayThreatenedReason.name,value:e.id,obsDatetime:t}))),delete a[eC.airWayThreatenedReason.name],delete a[eC.intervention.name],await b([...await (0,s.k$)(eC,a,t),...i,...o])};return(0,n.jsx)(c.h,{loading:d,children:!p&&(0,n.jsxs)(i.PD,{validationSchema:ev,initialValues:eM,onSubmit:R,submitButtonText:"Next",children:[(0,n.jsx)("br",{}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.fP,{getValues:m}),(0,n.jsxs)(i.kI,{title:"Airway Patent",children:[(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:eC.isAirwayPatent.name,label:eC.isAirwayPatent.label,options:[...eD,{label:"Threatened",value:t.W.THREATENED}]}),(0,n.jsx)(i.b1,{name:eC.isPatientInjured.name,label:eC.isPatientInjured.label,options:eD})]}),(o[eC.isAirwayPatent.name]===t.W.THREATENED||o[eC.isAirwayPatent.name]===t.W.NO)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Vp,{sx:{my:"1ch"},children:(0,n.jsx)(i.el,{name:eC.airWayThreatenedReason.name,label:eC.airWayThreatenedReason.label,options:eP,getValue:e=>{S(!!e.find(e=>e.id==t.W.OTHER))},multiple:!0})}),E&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.A8,{sx:{m:0,width:"100%"},name:eC.otherReason.name,label:eC.otherReason.label,id:eC.otherReason.name})})]})]})]}),(0,n.jsx)("br",{}),o[eC.isPatientInjured.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.bL,{message:"Please stabilize the C-Spine"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.kI,{last:!0,title:"Neck Collar and Head Blocks",children:(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:eC.neckCollar.name,label:eC.neckCollar.label,options:[...eD,{label:"Not Indicated",value:t.W.NOT_INDICATED}]}),(0,n.jsx)(i.b1,{name:eC.headBlocks.name,label:eC.headBlocks.label,options:eD})]})}),(0,n.jsx)("br",{})]}),(o[eC.isAirwayPatent.name]===t.NO||o[eC.isAirwayPatent.name]===t.W.THREATENED)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.kI,{last:!0,title:"Interventions",children:[(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.el,{name:eC.intervention.name,label:eC.intervention.label,options:eL,multiple:!0,getValue:e=>{x(!!e.find(e=>e.id==t.W.OROPHARYNGEAL))}})}),(0,n.jsx)("br",{}),I&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.Vp,{sx:{alignItems:"flex-start"},children:[(0,n.jsx)(i.b1,{name:eC.nasopharyngealSize.name,label:eC.nasopharyngealSize.label+"(CM)",options:[{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"}]}),(0,n.jsx)(i.b1,{name:eC.oropharyngealSize.name,label:eC.oropharyngealSize.label+" (MM)",options:[{value:"80",label:"80"},{value:"90",label:"90"},{value:"100",label:"100"},{value:"110",label:"110"},{value:"120",label:"120"}]})]})})]})})]})]})})};var ew=l(91876),eU=l(21998),eB=l(90957),eH=l(42474),eV=l(29401),eG=l(32079),eF=l(60921),ek=l(23412),ez=l(82846);let eq={isPatientBreathing:{name:t.W.IS_BREATHING_ABNORMAL,label:"Is Patient Breathing",type:"string",options:{[t._Y]:"breathing",[t.NO]:"not breathing"},children:[{concept:t.W.START_TIME,label:"Start Time"},{concept:t.W.END_TIME,label:"End Time"},{multiple:!0,type:"string",concept:t.W.DEVICE_USED_FOR_INTERVENTION,label:"Device used for intervention"},{concept:t.W.RESPIRATORY_RATE,label:"Respiratory Rate"},{concept:t.W.OXYGEN_SATURATION,label:"Oxygen Saturation"},{concept:t.W.PATIENT_NEED_OXYGEN,label:"Patient Need Oxygen",children:[{concept:t.W.OXYGEN_SOURCE,label:"Oxygen Source"}]},{concept:t.W.OXYGEN_GIVEN,label:"Oxygen Given"},{concept:t.W.DEVICE_USED,label:"Device Used"},{concept:t.W.IS_TRACHEA_CENTRAL,label:"Is Trachea Central"},{concept:t.W.SIDE_DEVIATED,label:"Which side is it deviated to"},{concept:t.W.CHEST_WALL_ABNORMALITY,label:"Chest Wall Abnormality",children:[{concept:t.W.IMAGE_PART_NAME,label:"Chest Wall Abnormality Image",image:!0,parentConcept:t.W.CHEST_WALL_ABNORMALITY}]},{concept:t.W.CHEST_EXPANSION,label:"Chest Expansion"},{concept:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},{concept:t.W.DESCRIPTION,label:"Description of Abnormality"},{concept:t.W.PERCUSSION,label:"Percussion",children:[{concept:t.W.IMAGE_PART_NAME,label:"Percussion Image",image:!0,parentConcept:t.W.PERCUSSION}]},{concept:t.W.BREATHING_SOUNDS,label:"Breath Sounds",children:[{concept:t.W.IMAGE_PART_NAME,label:"Breath Sounds Image",image:!0,parentConcept:t.W.BREATHING_SOUNDS}]}]},startTimeIntervention:{child:!0,name:t.W.START_TIME,label:"Start Time"},finishTimeIntervention:{child:!0,name:t.W.END_TIME,label:"End Time"},deviceForIntervention:{child:!0,multiple:!0,name:t.W.DEVICE_USED_FOR_INTERVENTION,label:"Device used for intervention"},respiratoryRate:{child:!0,name:t.W.RESPIRATORY_RATE,label:"Respiratory Rate"},oxygenSaturation:{child:!0,name:t.W.BLOOD_OXYGEN_SATURATION,label:"Oxygen Saturation"},oxygenNeeded:{child:!0,name:t.W.PATIENT_NEED_OXYGEN,label:"Patient Need Oxygen"},oxygenGiven:{child:!0,name:t.W.OXYGEN_GIVEN,label:"Oxygen Given"},oxygenSource:{child:!0,name:t.W.OXYGEN_SOURCE,label:"Oxygen Source"},deviceUsed:{child:!0,name:t.W.DEVICE_USED,label:"Device Used"},isTracheaCentral:{child:!0,name:t.W.IS_TRACHEA_CENTRAL,label:"Is Trachea Central"},deviationSide:{child:!0,name:t.W.SIDE_DEVIATED,label:"Which side is it deviated to"},chestWallAbnormality:{child:!0,name:t.W.CHEST_WALL_ABNORMALITY,label:"Chest Wall Abnormality"},chestExpansion:{child:!0,name:t.W.CHEST_EXPANSION,label:"Chest Expansion"},additionalNotes:{child:!0,name:t.W.ADDITIONAL_NOTES,label:"Additional Notes"},descriptionAbnormality:{child:!0,name:t.W.DESCRIPTION,label:"Description of Abnormality"},percussion:{child:!0,name:t.W.PERCUSSION,label:"Percussion"},breathSounds:{child:!0,name:t.W.BREATHING_SOUNDS,label:"Breath Sounds"}},eK=eq,eZ=o.Ik().shape({[eq.isPatientBreathing.name]:o.Yj().required().label(eq.isPatientBreathing.label),[eq.startTimeIntervention.name]:o.Yj().label(eq.startTimeIntervention.label),[eq.finishTimeIntervention.name]:o.Yj().label(eq.finishTimeIntervention.label),[eq.deviceForIntervention.name]:o.YO().label(eq.deviceForIntervention.label),[eq.respiratoryRate.name]:o.ai().min(0).max(90).when(eq.isPatientBreathing.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eq.respiratoryRate.label).min(1).max(70),[eq.oxygenSaturation.name]:o.ai().min(20).max(100).when(eq.isPatientBreathing.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eq.oxygenSaturation.label).min(10).max(100),[eq.oxygenNeeded.name]:o.Yj().label(eq.oxygenNeeded.label),[eq.oxygenGiven.name]:o.ai().when(eq.oxygenNeeded.name,(e,a)=>e[0]==t.W.YES?a.required():a).min(1).max(15).label(eq.oxygenGiven.label),[eq.oxygenSource.name]:o.Yj().when(eq.oxygenNeeded.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eq.oxygenSource.label),[eq.deviceUsed.name]:o.Yj().when(eq.oxygenNeeded.name,(e,a)=>e[0]==t.W.YES?a.required():a).label(eq.deviceUsed.label),[eq.isTracheaCentral.name]:o.Yj().label(eq.isTracheaCentral.label),[eq.deviationSide.name]:o.Yj().label(eq.deviationSide.label),[eq.percussion.name]:o.Yj().label(eq.percussion.label),[eq.chestWallAbnormality.name]:o.Yj().label(eq.chestWallAbnormality.label),[eq.breathSounds.name]:o.Yj().label(eq.breathSounds.label)}),eX=(0,s.f6)(eq),eJ=[{label:"Concentrator",value:t.W.CONCENTRATOR},{label:"Cylinder",value:t.W.CYLINDER},{label:"Piped Oxygen",value:t.W.PIPED_OXYGEN}],e$=[{label:"Nasal Prongs",id:t.W.NASAL_PRONGS},{label:"Simple face mask",id:t.W.SIMPLE_FACE_MASK},{label:"Venturi face mask",id:t.W.VENTURI_FACE_MASK},{label:"Face mask with nebulising chamber",id:t.W.NEBULISING_CHAMBER},{label:"Nonrebreather face mask",id:t.W.NON_REBREATHER},{label:"Noninvasive ventilation mask",id:t.W.NON_INVASIVE_VENTILATION_MASK},{label:"Laryngeal mask airway",id:t.W.LARYNGEAL},{label:"Endotracheal tube",id:t.W.ENDOTRACHEAL}];t.W.WOUND,t.W.FLAIL_CHEST,t.W.SURGICAL_EMPHAYEMA,t.W.DEFORMITY,t.W.OTHER;let eQ=[{label:"Yes",value:t._Y},{label:"No",value:t.NO}],e0=e=>{let{onSubmit:a}=e,{ServerTime:l}=(0,h.useServerTime)(),{gender:o}=(0,p.gd)(),[m,b]=(0,r.useState)([]),[d,A]=(0,r.useState)({}),[E,S]=(0,r.useState)([]),[I,x]=(0,r.useState)([]),{handleSubmit:R,isLoading:N,isSuccess:g}=(0,u.l)(t.fA.BREATHING_ASSESSMENT,a),[T,j]=(0,r.useState)(!1),[O,W]=(0,r.useState)([]),[_,f]=(0,r.useState)([]),[C,y]=(0,r.useState)([]),[v,P]=(0,r.useState)([]),L=async e=>{let a={...e},n=l.getServerTimeString(),i=[{concept:eq.chestWallAbnormality.name,value:a[eq.chestWallAbnormality.name],obsDatetime:n,groupMembers:await (0,s.Zt)(E)},{concept:eq.percussion.name,value:a[eq.percussion.name],obsDatetime:n,groupMembers:await (0,s.Zt)(I)},{concept:eq.chestExpansion.name,value:a[eq.chestExpansion.name],obsDatetime:n,groupMembers:await (0,s.Zt)(m)},{concept:eq.breathSounds.name,value:a[eq.breathSounds.name],obsDatetime:n,groupMembers:[{concept:t.W.SITE,value:"Lung Lateral Left",obsDatetime:n,groupMembers:await (0,s.Zt)(O)},{concept:t.W.SITE,value:"Lung Lateral Right",obsDatetime:n,groupMembers:await (0,s.Zt)(_)},{concept:t.W.SITE,value:"Lung Anterior",obsDatetime:n,groupMembers:await (0,s.Zt)(C)},{concept:t.W.SITE,value:"Lung Posterior",obsDatetime:n,groupMembers:await (0,s.Zt)(v)}]}],r=a[eq.deviceForIntervention.name],o=[];Array.isArray(r)&&(o=r.map(e=>({concept:eq.deviceForIntervention.name,value:e.id,obsDatetime:n}))),delete a[eq.chestWallAbnormality.name],delete a[eq.percussion.name],delete a[eq.deviceUsed.name],delete a[eq.chestExpansion.name],delete a[eq.deviceForIntervention.name],delete a[eq.breathSounds.name],await R([...await (0,s.k$)(eq,a,n),...i,...o])},M=[{id:1,label:"Lung Lateral Left",content:"Female"==o?(0,n.jsx)(eG.T,{onValueChange:W}):(0,n.jsx)(ek.k,{onValueChange:W})},{id:2,label:"Lung lateral right",content:"Female"==o?(0,n.jsx)(ez.W,{onValueChange:f}):(0,n.jsx)(eF.L,{onValueChange:f})},{id:3,label:"Lung Anterior",content:"Female"==o?(0,n.jsx)(eB.d,{onValueChange:y,form:"breathSounds"}):(0,n.jsx)(eU.i,{onValueChange:y,form:"breathSounds"})},{id:4,label:"Lung Posterior",content:"Female"==o?(0,n.jsx)(eV.b,{onValueChange:P,form:"breathSounds"}):(0,n.jsx)(eH.Y,{onValueChange:P,form:"breathSounds"})}];return(0,n.jsx)(c.h,{loading:N,children:!T&&(0,n.jsxs)(i.PD,{validationSchema:eZ,initialValues:eX,onSubmit:L,submitButtonText:"Next",children:[(0,n.jsx)(i.fP,{getValues:A}),(0,n.jsx)(i.kI,{title:"Breathing",children:(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.b1,{row:!0,name:eq.isPatientBreathing.name,label:eq.isPatientBreathing.label,options:eQ})})}),d[eq.isPatientBreathing.name]==t.NO&&(0,n.jsxs)(i.kI,{title:"",children:[(0,n.jsx)(i.bL,{message:"Assist with ventilation, Manually assist patient breathing"}),(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.YZ,{sx:{width:"100%",my:"1ch"},name:eq.startTimeIntervention.name,label:eq.startTimeIntervention.label}),(0,n.jsx)(i.YZ,{sx:{width:"100%",my:"1ch"},name:eq.finishTimeIntervention.name,label:eq.finishTimeIntervention.label})]}),(0,n.jsx)(i.el,{name:eq.deviceForIntervention.name,label:eq.deviceForIntervention.label,sx:{width:"100%"},options:[{label:"Bag and mask",id:t.W.BAG_AND_MASK},{label:"Laryngeal Mask Airway and bag",id:t.W.LARYNGEAL_MASK_AIRWAY_AND_BAG},{label:"Endotracheal tube (ETT)",id:t.W.ENDOTRACHEAL}]})]}),d[eq.isPatientBreathing.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.kI,{title:"Respiratory and Oxygen",children:[(0,n.jsxs)(i.Vp,{mr:"1ch",children:[(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"bpm",name:eq.respiratoryRate.name,label:eq.respiratoryRate.label,id:eq.respiratoryRate.name}),(0,n.jsx)(i.A8,{sx:{width:"100%"},unitOfMeasure:"%",name:eq.oxygenSaturation.name,label:eq.oxygenSaturation.label,id:eq.oxygenSaturation.name})]}),(0,n.jsx)("br",{}),(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:eq.oxygenNeeded.name,label:eq.oxygenNeeded.label,options:eQ,row:!0}),d[eq.oxygenNeeded.name]==t._Y&&(0,n.jsx)(i.b1,{name:eq.oxygenSource.name,label:eq.oxygenSource.label,options:eJ,row:!0})]}),d[eq.oxygenNeeded.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A8,{name:eq.oxygenGiven.name,label:eq.oxygenGiven.label,id:eq.oxygenGiven.name,sx:{width:"100%",m:0},unitOfMeasure:"L/min"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)(i.el,{name:eq.deviceUsed.name,label:eq.deviceUsed.label,options:e$,multiple:!1}),(0,n.jsx)("br",{})]})]}),(0,n.jsxs)(i.kI,{last:!0,title:"Trachea and Chest",children:[(0,n.jsxs)(i.Vp,{children:[(0,n.jsx)(i.b1,{name:eq.isTracheaCentral.name,label:eq.isTracheaCentral.label,options:eQ,row:!0}),(0,n.jsx)(i.b1,{name:eq.chestWallAbnormality.name,label:eq.chestWallAbnormality.label,options:eQ,row:!0})]}),d[eq.isTracheaCentral.name]==t.NO&&(0,n.jsx)(i.Vp,{children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.b1,{name:eq.deviationSide.name,label:eq.deviationSide.label,row:!0,options:[{label:"Left",value:t.W.LEFT},{label:"Right",value:t.W.RIGHT}]})})}),d[eq.chestWallAbnormality.name]==t._Y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(i.bL,{message:"Diagram to select area"}),"Male"==o&&(0,n.jsx)(eU.i,{imageSection:eq.chestWallAbnormality.name,onValueChange:S,form:"breathingLung"}),"Female"==o&&(0,n.jsx)(eB.d,{imageSection:eq.chestWallAbnormality.name,onValueChange:S,form:"breathingLung"}),(0,n.jsx)("br",{}),(0,n.jsx)(i.Vp,{children:d[eq.descriptionAbnormality.name]==t.W.OTHER&&(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.A8,{multiline:!0,rows:3,name:eq.descriptionAbnormality.name,label:eq.descriptionAbnormality.label,id:eq.descriptionAbnormality.name})})})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.b1,{name:eq.chestExpansion.name,label:eq.chestExpansion.label,row:!0,options:[{label:"Normal",value:t.W.NORMAL},{label:"Reduced",value:t.W.REDUCED}]}),d[eq.chestExpansion.name]==t.W.REDUCED&&(0,n.jsxs)(n.Fragment,{children:["Male"==o&&(0,n.jsx)(eU.i,{onValueChange:b,form:"selectable"}),"Female"==o&&(0,n.jsx)(eB.d,{imageEncounter:t.fA.BREATHING_ASSESSMENT,onValueChange:b,form:"selectable"})]}),(0,n.jsx)("br",{}),(0,n.jsx)(i.b1,{name:eq.percussion.name,label:eq.percussion.label,row:!0,options:[{label:"Normal",value:t.W.NORMAL},{label:"Abnormal",value:t.W.ABNORMAL}]}),d[eq.percussion.name]==t.W.ABNORMAL&&(0,n.jsxs)(n.Fragment,{children:["Male"==o&&(0,n.jsx)(eH.Y,{form:"percussion",onValueChange:x}),"Female"==o&&(0,n.jsx)(eV.b,{form:"percussion",onValueChange:x})]}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.b1,{name:eq.breathSounds.name,label:eq.breathSounds.label,row:!0,options:[{label:"Normal",value:t.W.NORMAL},{label:"Abnormal",value:t.W.ABNORMAL}]})}),d[eq.breathSounds.name]==t.W.ABNORMAL&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(ew.A,{slides:M})]}),(0,n.jsx)(i.Vp,{children:(0,n.jsx)(i.A8,{multiline:!0,rows:3,sx:{m:0,width:"100%"},name:eq.additionalNotes.name,label:eq.additionalNotes.label,id:eq.additionalNotes.name})})]})]})]})})}},24513:(e,a,l)=>{l.d(a,{OV:()=>r,TK:()=>m,f3:()=>b,kg:()=>t,kl:()=>o,lo:()=>s});var n=l(44919);let i="/users",t=e=>(0,n.vt)(e,i),s=()=>(0,n.UK)("".concat(i,"?paginate=false")),r=e=>(0,n.UK)(i+"?paginate=false&username="+e),o=e=>(0,n.HD)(e,i),m=(e,a)=>(0,n.hc)(e,a,i),b=(e,a)=>(0,n.yo)(e,i,a)},27365:(e,a,l)=>{l.d(a,{CF:()=>r,J$:()=>o,ec:()=>b,gw:()=>m,nu:()=>s});var n=l(24513),i=l(5041),t=l(19373);let s=()=>(0,i.n)({mutationFn:e=>{let a=e.role.map(e=>({name:e.id})),l={username:e.userName,password:e.password,person:{gender:"Male",age:47,birthdate:"1970-01-01T00:00:00.000+0100",birthdateEstimated:!1,dead:!1,deathDate:null,causeOfDeath:null,names:[{givenName:e.firstName,familyName:e.lastName}]},roles:a};return(0,n.kg)(l).then(e=>e.data)}}),r=()=>{let e=()=>(0,n.lo)().then(e=>e.data);return(0,t.I)({queryKey:["users"],queryFn:()=>e(),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})},o=e=>{let a=()=>(0,n.OV)(e).then(e=>e.data);return(0,t.I)({queryKey:["search",e],queryFn:()=>a(),enabled:!1})},m=()=>(0,i.n)({mutationFn:e=>{let a={username:e.userName,roles:e.role.map(e=>({name:e.label})),password:e.password};return(0,n.TK)(e.userId,a).then(e=>e.data)}}),b=()=>(0,i.n)({mutationFn:e=>{let a={user:{current_password:e.password,password:e.newPassword}};return(0,n.f3)(e.userId,a).then(e=>e.data)}})},47292:(e,a,l)=>{l.d(a,{q:()=>x});var n=l(95155);l(12115);var i=l(15876),t=l(25949),s=l(33470),r=l(3967),o=l(72137),m=l(57236),b=l(89915),d=l(26096),u=l(53494),c=l(35881);let h=(0,c.Ay)(i.A)(e=>{let{theme:a}=e;return{borderRadius:a.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:a.shadows[3],position:"relative"}}),p=(0,c.Ay)(t.A)(e=>{let{theme:a}=e;return{borderCollapse:"separate",borderSpacing:"0px 4px"}}),A=(0,c.Ay)(s.A)(e=>{let{theme:a}=e;return{fontWeight:500,padding:"12px 16px",borderBottom:"none",color:a.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"}}),E=(0,c.Ay)(A)(e=>{let{theme:a}=e;return{fontSize:"0.9rem",fontWeight:"bold",backgroundColor:a.palette.background.default,textTransform:"uppercase"}}),S=(0,c.Ay)(r.A)(e=>{let{theme:a}=e;return{backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:a.palette.grey[100]},boxShadow:a.shadows[1]}}),I=(0,c.Ay)("div")(e=>{let{theme:a}=e;return{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1}}),x=e=>{let{columns:a,data:l,actions:i=!1,getSelectedRow:t,loading:c=!1}=e;return(0,n.jsx)(h,{children:(0,n.jsxs)(p,{stickyHeader:!0,children:[(0,n.jsx)(o.A,{children:(0,n.jsxs)(r.A,{children:[a.map((e,a)=>(0,n.jsx)(E,{children:e.label},a)),i&&(0,n.jsx)(E,{children:"Actions"})]})}),(0,n.jsx)(m.A,{children:c?(0,n.jsx)(r.A,{children:(0,n.jsx)(s.A,{colSpan:a.length+ +!!i,children:(0,n.jsx)(I,{children:(0,n.jsx)(b.A,{})})})}):l.map((e,l)=>(0,n.jsxs)(S,{onClick:()=>t&&t(e),children:[a.map((a,l)=>(0,n.jsx)(d.A,{title:e[a.field],arrow:!0,children:(0,n.jsx)(A,{children:e[a.field]})},l)),i&&(0,n.jsxs)(A,{children:[(0,n.jsx)(u.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,n.jsx)(u.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},l))})]})})}}}]);