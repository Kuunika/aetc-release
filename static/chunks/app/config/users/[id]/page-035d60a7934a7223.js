(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6828],{131:(e,a,r)=>{"use strict";r.d(a,{O:()=>l});var s=r(44919),n=r(19373);let l=()=>{let e=()=>(0,s.UK)("/roles?paginate=false").then(e=>e.data);return(0,n.I)({queryKey:["roles"],queryFn:()=>e(),enabled:!0})}},15377:(e,a,r)=>{"use strict";r.d(a,{OverlayLoader:()=>t});var s=r(95155);r(12115);var n=r(90418),l=r(89915);function t(e){let{open:a}=e;return(0,s.jsx)("div",{children:(0,s.jsx)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:a,children:(0,s.jsx)(l.A,{color:"inherit"})})})}},19874:(e,a,r)=>{Promise.resolve().then(r.bind(r,85683))},24513:(e,a,r)=>{"use strict";r.d(a,{OV:()=>o,TK:()=>i,f3:()=>u,kg:()=>l,kl:()=>d,lo:()=>t});var s=r(44919);let n="/users",l=e=>(0,s.vt)(e,n),t=()=>(0,s.UK)("".concat(n,"?paginate=false")),o=e=>(0,s.UK)(n+"?paginate=false&username="+e),d=e=>(0,s.HD)(e,n),i=(e,a)=>(0,s.hc)(e,a,n),u=(e,a)=>(0,s.yo)(e,n,a)},27365:(e,a,r)=>{"use strict";r.d(a,{CF:()=>o,J$:()=>d,ec:()=>u,gw:()=>i,nu:()=>t});var s=r(24513),n=r(5041),l=r(19373);let t=()=>(0,n.n)({mutationFn:e=>{let a=e.role.map(e=>({name:e.id})),r={username:e.userName,password:e.password,person:{gender:"Male",age:47,birthdate:"1970-01-01T00:00:00.000+0100",birthdateEstimated:!1,dead:!1,deathDate:null,causeOfDeath:null,names:[{givenName:e.firstName,familyName:e.lastName}]},roles:a};return(0,s.kg)(r).then(e=>e.data)}}),o=()=>{let e=()=>(0,s.lo)().then(e=>e.data);return(0,l.I)({queryKey:["users"],queryFn:()=>e(),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})},d=e=>{let a=()=>(0,s.OV)(e).then(e=>e.data);return(0,l.I)({queryKey:["search",e],queryFn:()=>a(),enabled:!1})},i=()=>(0,n.n)({mutationFn:e=>{let a={username:e.userName,roles:e.role.map(e=>({name:e.label})),password:e.password};return(0,s.TK)(e.userId,a).then(e=>e.data)}}),u=()=>(0,n.n)({mutationFn:e=>{let a={user:{current_password:e.password,password:e.newPassword}};return(0,s.f3)(e.userId,a).then(e=>e.data)}})},85683:(e,a,r)=>{"use strict";r.d(a,{EditUser:()=>w});var s=r(95155),n=r(15377),l=r(70482),t=r(27365),o=r(24513),d=r(12115),i=r(131),u=r(59487),m=r(37129);let c={username:{name:"username",label:"Username"},password:{name:"password",label:"Password"},passwordConfirmation:{name:"passwordConfirmation",label:"Password Confirmation"},role:{name:"role",label:"Roles"}},p=m.Ik({[c.username.name]:m.Yj(),[c.password.name]:m.Yj(),[c.role.name]:m.YO().required().label(c.role.label),[c.passwordConfirmation.name]:m.Yj().oneOf([m.KR(c.password.name)],"Passwords must match")}),h=e=>{var a;let{initialValues:r,onSubmit:n}=e,{isLoading:l,data:t}=(0,i.O)();return(0,s.jsxs)(u.PD,{initialValues:r,validationSchema:p,onSubmit:n,submitButton:!1,children:[(0,s.jsx)(u.A8,{name:c.username.name,label:c.username.label,id:c.username.name,disabled:!0,sx:{width:"100%"}}),(0,s.jsxs)(u.jD,{sx:{display:"flex"},children:[(0,s.jsx)(u.A8,{name:c.password.name,label:c.password.label,id:c.password.name,type:"password",sx:{width:"100%",mr:"1ch"}}),(0,s.jsx)(u.A8,{name:c.passwordConfirmation.name,label:c.passwordConfirmation.label,id:c.passwordConfirmation.name,type:"password",sx:{width:"100%"}})]}),(0,s.jsx)(u.el,{label:c.role.label,name:c.role.name,manualInitialValues:null==r||null==(a=r.role)?void 0:a.map(e=>({value:e.id,label:e.id})),options:t?t.map(e=>({id:e.role,label:e.role})):[]}),(0,s.jsx)(u.O6,{type:"submit",title:"Submit",onClick:()=>{}})]})},w=()=>{let{mutate:e,isPending:a,isSuccess:r}=(0,t.gw)(),{navigateTo:i}=(0,l.cq)(),{params:u}=(0,l.KU)(),[m,c]=(0,d.useState)({}),[p,w]=(0,d.useState)(!0),[f,b]=(0,d.useState)("");(0,d.useEffect)(()=>{let e=null==u?void 0:u.id;b(e),e&&(0,o.kl)(e).then(e=>{c({username:e.data.username,role:e.data.user_roles.map(e=>({id:e.role.role,label:e.role.role}))}),w(!1)}).catch(e=>{console.error("Error fetching user:",e),w(!1)})},[u]),(0,d.useEffect)(()=>{r&&i("/config")},[r]);let x=async a=>{e({...a,userId:f})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Edit User"}),p?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)(h,{initialValues:m,onSubmit:x})]}),(0,s.jsx)(n.OverlayLoader,{open:a})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[5639,16,9344,8250,2225,3740,6987,2073,5062,4821,6448,7129,5976,9487,8441,1684,7358],()=>a(19874)),_N_E=e.O()}]);