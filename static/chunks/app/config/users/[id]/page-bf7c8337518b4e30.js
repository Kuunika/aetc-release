(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6828],{9990:(e,a,s)=>{"use strict";s.d(a,{O:()=>l});var r=s(93292),n=s(22454);let l=()=>(0,n.I)({queryKey:["roles"],queryFn:()=>(0,r.UK)("/roles?paginate=false").then(e=>e.data),enabled:!0})},45910:(e,a,s)=>{"use strict";s.d(a,{CF:()=>o,J$:()=>d,ec:()=>u,gw:()=>i,nu:()=>t});var r=s(51472),n=s(80549),l=s(22454);let t=()=>(0,n.n)({mutationFn:e=>{let a=e.role.map(e=>({name:e.id})),s={username:e.userName,password:e.password,person:{gender:"Male",age:47,birthdate:"1970-01-01T00:00:00.000+0100",birthdateEstimated:!1,dead:!1,deathDate:null,causeOfDeath:null,names:[{givenName:e.firstName,familyName:e.lastName}]},roles:a};return(0,r.kg)(s).then(e=>e.data)}}),o=()=>(0,l.I)({queryKey:["users"],queryFn:()=>(0,r.lo)().then(e=>e.data),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),d=e=>(0,l.I)({queryKey:["search",e],queryFn:()=>(0,r.OV)(e).then(e=>e.data),enabled:!1}),i=()=>(0,n.n)({mutationFn:e=>{let a={username:e.userName,roles:e.role.map(e=>({name:e.label})),password:e.password};return(0,r.TK)(e.userId,a).then(e=>e.data)}}),u=()=>(0,n.n)({mutationFn:e=>{let a={user:{current_password:e.password,password:e.newPassword}};return(0,r.f3)(e.userId,a).then(e=>e.data)}})},46282:(e,a,s)=>{"use strict";s.d(a,{EditUser:()=>w});var r=s(95155),n=s(93584),l=s(87295),t=s(45910),o=s(51472),d=s(12115),i=s(9990),u=s(72478),m=s(35068);let c={username:{name:"username",label:"Username"},password:{name:"password",label:"Password"},passwordConfirmation:{name:"passwordConfirmation",label:"Password Confirmation"},role:{name:"role",label:"Roles"}},p=m.Ik({[c.username.name]:m.Yj(),[c.password.name]:m.Yj(),[c.role.name]:m.YO().required().label(c.role.label),[c.passwordConfirmation.name]:m.Yj().oneOf([m.KR(c.password.name)],"Passwords must match")}),h=e=>{var a;let{initialValues:s,onSubmit:n}=e,{isLoading:l,data:t}=(0,i.O)();return(0,r.jsxs)(u.PD,{initialValues:s,validationSchema:p,onSubmit:n,submitButton:!1,children:[(0,r.jsx)(u.A8,{name:c.username.name,label:c.username.label,id:c.username.name,disabled:!0,sx:{width:"100%"}}),(0,r.jsxs)(u.jD,{sx:{display:"flex"},children:[(0,r.jsx)(u.A8,{name:c.password.name,label:c.password.label,id:c.password.name,type:"password",sx:{width:"100%",mr:"1ch"}}),(0,r.jsx)(u.A8,{name:c.passwordConfirmation.name,label:c.passwordConfirmation.label,id:c.passwordConfirmation.name,type:"password",sx:{width:"100%"}})]}),(0,r.jsx)(u.el,{label:c.role.label,name:c.role.name,manualInitialValues:null==s||null==(a=s.role)?void 0:a.map(e=>({value:e.id,label:e.id})),options:t?t.map(e=>({id:e.role,label:e.role})):[]}),(0,r.jsx)(u.O6,{type:"submit",title:"Submit",onClick:()=>{}})]})},w=()=>{let{mutate:e,isPending:a,isSuccess:s}=(0,t.gw)(),{navigateTo:i}=(0,l.cq)(),{params:u}=(0,l.KU)(),[m,c]=(0,d.useState)({}),[p,w]=(0,d.useState)(!0),[f,b]=(0,d.useState)("");(0,d.useEffect)(()=>{let e=null==u?void 0:u.id;b(e),e&&(0,o.kl)(e).then(e=>{c({username:e.data.username,role:e.data.user_roles.map(e=>({id:e.role.role,label:e.role.role}))}),w(!1)}).catch(e=>{console.error("Error fetching user:",e),w(!1)})},[u]),(0,d.useEffect)(()=>{s&&i("/config")},[s]);let x=async a=>{e({...a,userId:f})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Edit User"}),p?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsx)(h,{initialValues:m,onSubmit:x})]}),(0,r.jsx)(n.OverlayLoader,{open:a})]})}},51472:(e,a,s)=>{"use strict";s.d(a,{OV:()=>o,TK:()=>i,f3:()=>u,kg:()=>l,kl:()=>d,lo:()=>t});var r=s(93292);let n="/users",l=e=>(0,r.vt)(e,n),t=()=>(0,r.UK)("".concat(n,"?paginate=false")),o=e=>(0,r.UK)(n+"?paginate=false&username="+e),d=e=>(0,r.HD)(e,n),i=(e,a)=>(0,r.hc)(e,a,n),u=(e,a)=>(0,r.yo)(e,n,a)},80510:(e,a,s)=>{Promise.resolve().then(s.bind(s,46282))},93584:(e,a,s)=>{"use strict";s.d(a,{OverlayLoader:()=>t});var r=s(95155);s(12115);var n=s(93526),l=s(4474);function t(e){let{open:a}=e;return(0,r.jsx)("div",{children:(0,r.jsx)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:a,children:(0,r.jsx)(l.A,{color:"inherit"})})})}}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,2141,7861,2891,1412,4018,5068,7774,2478,8441,1255,7358],()=>e(e.s=80510)),_N_E=e.O()}]);