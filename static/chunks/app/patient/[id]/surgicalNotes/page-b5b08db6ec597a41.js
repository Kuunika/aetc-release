(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8914],{6459:(e,a,t)=>{"use strict";t.d(a,{h:()=>n});var l=t(95155),i=t(52269),s=t(89915);let n=e=>{let{loading:a,children:t,height:n="100%"}=e;return(0,l.jsxs)(i.default,{sx:{position:"relative",width:"100%",height:n},children:[a&&(0,l.jsx)(i.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,l.jsx)(s.A,{})}),(0,l.jsx)(i.default,{sx:{opacity:a?.5:1,pointerEvents:a?"none":"auto"},children:t})]})}},9802:(e,a,t)=>{"use strict";function l(e){let{presentingComplaints:a,diagnosis:t,labOrders:l,dischargeNotes:i,dischargePlan:s,followUpPlan:n,homeCareInstructions:r}=e,o=e=>Math.round(203*e/25.4),c=o(100),d=o(40),u=c-40,m=Math.floor(u/8),h=[{title:"Discharge Notes",content:i||"N/A"},{title:"Investigations",content:l.length?l.flatMap(e=>e.tests.map(e=>"".concat(e.name,":").concat(e.result||"pending"))).join(" ! "):"No investigations ordered"},{title:"Final Diagnosis",content:(null==t?void 0:t.length)?t.map(e=>e.value).join(" ! "):"None"},{title:"Discharge Plan",content:s||"N/A"},{title:"Follow Up Plan",content:"".concat(n)||"N/A"},{title:"Home Care Instructions",content:r||"N/A"}],p=[];h.forEach((e,a)=>{p.push({text:e.title,isTitle:!0,sectionIndex:a}),(function(e){if(!e)return[];let a=e.split(" "),t=[],l="";for(let e of a){if(e.length>m){l&&(t.push(l),l="");for(let a=0;a<e.length;a+=m){let l=e.substring(a,a+m);t.push(l)}continue}let a=l?"".concat(l," ").concat(e):e;a.length<=m?l=a:(l&&t.push(l),l=e)}return l&&t.push(l),t})(e.content).forEach(e=>{p.push({text:e,isTitle:!1,sectionIndex:a})})});let x=[],b=[],g=70;for(let e=0;e<p.length;e++){let a=p[e],t=0;if(b.length>0){let e=b[b.length-1];a.sectionIndex!==e.sectionIndex&&(t=10)}let l=t+(a.isTitle?30:25);if(g+l>d-20){if(0===b.length){b.push(a),x.push(b),b=[],g=20;continue}x.push(b),b=[],g=20,e--;continue}b.push(a),g+=l}return b.length>0&&x.push(b),x.map((e,a)=>{let t=20,l="^XA\n^PW".concat(c,"\n^LL").concat(d,"\n^CF0,25");0===a?(l+="\n^FO".concat(20,",").concat(20,"^FDPatient Summary-QECH AETC^FS\n^FO").concat(20,",").concat(60,"^GB").concat(u,",3,3^FS"),t=70):t=20;let i=-1;for(let a of e)a.sectionIndex!==i&&(-1!==i&&(t+=10),i=a.sectionIndex),a.isTitle?(l+="\n^CF0,25\n^FO".concat(20,",").concat(t,"^FD").concat(a.text,"^FS"),t+=30):(l+="\n^CF0,20\n^FO".concat(20,",").concat(t,"^FD").concat(a.text,"^FS"),t+=25);return l+"\n^XZ"}).join("\n")}function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Medication Instructions",t=Math.floor(68.21428571428571),l=[],i=[],s=0,n=1;function r(e,t){let l=["^XA","^CF0,25","^FO".concat(30,",30^").concat(a).concat(t>1?" (Cont. ".concat(t,")"):"","^FS"),"^FO".concat(30,",").concat(60,"^GB").concat(955,",").concat(3,",").concat(3,"^FS")].join("\n")+"\n",i=68;for(let a of e){for(let e of a)l+="^FO".concat(30,",").concat(i,"^FD").concat(e,"^FS\n"),i+=20;i+=10}return l+"^XZ"}return e.forEach(e=>{let a=function(e){let a=e.split(" "),l=[],i="";for(let e of a)(i+" "+e).trim().length<=t?i=(i+" "+e).trim():(l.push(i),i=e);return i&&l.push(i),l}(function(e,a){let t=[e.medicationName,"".concat(e.dose," ").concat(e.doseUnits),e.frequency,e.duration,e.formulation,"(".concat(e.prescribedBy,")")].filter(Boolean).map(e=>e.replace(/[\\^]/g,""));return"".concat(a,". ").concat(t.join(" | "))}(e,n)),o=20*a.length+10;s+o>323&&(l.push(r(i,l.length+1)),i=[],s=0),i.push(a),s+=o,n++}),i.length&&l.push(r(i,l.length+1)),l.join("\n")}t.d(a,{B:()=>i,U:()=>l})},16805:(e,a,t)=>{"use strict";t.d(a,{SE:()=>E,Nt:()=>g,Wd:()=>j});var l=t(95155),i=t(12115),s=t(84130),n=t.n(s),r=t(59487),o=t(78064),c=t(77060),d=t.n(c),u=t(23464),m=t(52269),h=t(9670),p=t(36269),x=t(21437);let b=e=>{let{getValue:a}=e,[t,s]=(0,i.useState)("http://localhost:3000"),{data:n,isLoading:r}=(0,x.Ay)();return(0,i.useEffect)(()=>{a(t)},[t]),(0,l.jsx)(p.x,{getValue:e=>{s(e)},label:"Select Printer",options:n?null==n?void 0:n.map(e=>({value:e.ip_address,label:e.name})):[]})},g=e=>{let{value:a,children:t,setTriggerFunc:s,printer:c,orderDate:d}=e,u=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=async()=>{let e=document.getElementById("barcode");e&&v("test",await o.mo(e),c)};s(()=>e)},[c]),(0,l.jsx)(r.jD,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,l.jsx)("div",{id:"barcode",children:(0,l.jsxs)(r.jD,{sx:{pb:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},ref:u,children:[t,(0,l.jsx)(n(),{width:6,height:120,margin:0,displayValue:!1,value:a})]})})})},v=async(e,a,t)=>{let l=a.toDataURL("image/png");try{let e=await d().encode(l);await u.A.post("".concat(t,"/print"),{zpl:"^XA^FO20,20".concat(e,"^XZ")})}catch(e){console.error("Error encoding image to ZPL:",e)}},j=e=>{let{presentingComplaints:a,vitals:t,date:s,arrivalTime:n,referredFrom:c,triageCategory:d,triagedBy:u}=e,[x,g]=(0,i.useState)(""),[j,E]=(0,i.useState)(""),y=async()=>{let e=document.getElementById("triage");e&&v("test",await o.mo(e),x)};return(0,l.jsxs)(m.default,{children:[(0,l.jsx)("div",{id:"triage",children:(0,l.jsx)(r.jD,{sx:{p:"5px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,l.jsxs)(m.default,{sx:{width:"100%"},children:[(0,l.jsxs)(h.default,{variant:"body2",mr:"1ch",children:["Arrival Date Time: ",n]}),(0,l.jsxs)(m.default,{sx:{display:"flex",width:"100%"},children:[(0,l.jsxs)(h.default,{variant:"body2",mr:"1ch",children:["Triage Date Time: ",s]}),(0,l.jsxs)(h.default,{variant:"body2",children:["Referred From: ",c]})]}),(0,l.jsxs)(m.default,{sx:{display:"flex"},children:[(0,l.jsxs)(h.default,{mr:"1ch",variant:"body1",children:["Category: ",d]}),(0,l.jsxs)(h.default,{variant:"body1",children:["Reason: ",j]})]}),(0,l.jsxs)(h.default,{sx:{mt:"1ch"},variant:"subtitle1",children:["Presenting Complaints: ",a," "]}),(0,l.jsx)(r.jD,{sx:{display:"flex",border:"dashed",my:"1ch"},children:t.map(e=>{let{name:a,value:t}=e;return(0,l.jsx)(N,{title:a,value:t},"".concat(t).concat(a))})}),(0,l.jsxs)(h.default,{variant:"body1",children:["Triaged By: ",u]})]})})}),(0,l.jsx)(p.x,{getValue:e=>E(e),label:"Reasons for triage category:",options:[{value:"Vitals above/below threshold",label:"Vitals above/below threshold"},{value:"Airway/Breathing compromised",label:"Airway/Breathing compromised"},{value:"Blood circulation compromised",label:"Blood circulation compromised"},{value:"Disability",label:"Disability"},{value:"Persistent pain and other concerns ",label:"Persistent pain and other concerns "}]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(b,{getValue:e=>g(e)}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(r.O6,{onClick:y,title:"print"})]})},N=e=>{let{title:a,value:t}=e;return(0,l.jsxs)(r.jD,{sx:{mx:"0.5ch",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(r.Th,{variant:"h6",textAlign:"center",children:a}),(0,l.jsx)(r.Th,{variant:"h6",children:t})]})},E=e=>{let{value:a,children:t,setTriggerFunc:s,printer:r,orderDate:c,test:d,fullName:u,gender:m,description:h}=e,p=(0,i.useRef)(null);return(0,i.useEffect)(()=>{s(async()=>{let e=document.getElementById("barcode");if(e){let a=await o.mo(e),t=document.createElement("canvas");t.width=700,t.height=160;let l=t.getContext("2d");if(l){l.fillStyle="#ffffff",l.fillRect(0,0,700,160);let e=a.width/a.height,i=700,s=700/e;s>160&&(i=(s=160)*e);let n=(700-i)/2,o=(160-s)/2;l.drawImage(a,0,0,a.width,a.height,n,o,i,s),v("test",t,r)}}})},[r,s]),(0,l.jsxs)("div",{id:"barcode",ref:p,style:{display:"flex",flexDirection:"column",paddingLeft:"5ch"},children:[(0,l.jsxs)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:[u,"(",m,")~",h]}),(0,l.jsx)("b",{style:{fontSize:"0.5rem",lineHeight:"1"},children:c}),(0,l.jsx)(n(),{width:1,height:45,margin:0,displayValue:!1,value:a}),(0,l.jsx)("b",{style:{fontSize:"0.5rem"},children:d})]})}},28965:(e,a,t)=>{"use strict";t.d(a,{SurgicalNotesFlow:()=>eh});var l=t(95155),i=t(12115),s=t(59487),n=t(70482),r=t(37129),o=t(23312),c=t(83436),d=t(9890),u=t(49262),m=t(40289),h=t(8363),p=t(82545);let x=[{id:o.W.FEELING_OF_A_MASS,label:"Feeling of a mass"},{id:o.W.DIFFICULTY_PAIN_ON_PASSING_STOOLS,label:"Difficulty/Pain on passing stools"},{id:o.W.PAIN,label:"Pain"},{id:o.W.NOT_PASSING_FLATUS,label:"Not passing flatus"},{id:o.W.PASSING_BLOODY_STOOLS,label:"Passing bloody stools"},{id:o.W.PASSING_MELENA,label:"Passing melena"},{id:o.W.NOT_PASSING_URINE,label:"Not passing urine"},{id:o.W.DIFFICULTY_PASSING_URINE,label:"Difficulty passing urine"},{id:o.W.PASSING_DEEP_YELLOW_URINE,label:"Passing deep yellow urine"},{id:o.W.PASSING_PUS_IN_URINE,label:"Passing pus in urine"},{id:o.W.NOT_PASSING_STOOLS,label:"Not passing stools"},{id:o.W.VOMITING,label:"Vomiting"},{id:o.W.VOMITING_BLOOD,label:"Vomiting Blood"},{id:o.W.DYSPHAGIA,label:"Dysphagia"},{id:o.W.ODYNOPHAGIA,label:"Odynophagia"},{id:o.W.ULCER_OR_WOUND,label:"Ulcer"},{id:o.W.YELLOWINGOFEYESORSKIN,label:"Yellowing of the eyes"},{id:o.W.BLEEDING,label:"Bleeding"},{id:o.W.SHORTNESS_OF_BREATH,label:"Shortness of breath"},{id:o.W.OTHER,label:"Other (Specify)"}],b={complaint:"",duration:0,duration_unit:"",otherComplaintSpecify:""},g=e=>{let{name:a}=e;return(0,l.jsx)(m.D0,{name:a,render:e=>{let{form:t}=e,l=(0,m.O6)(t.errors,a);return(0,m.O6)(t.touched,a)&&l?l:null}})},v=r.Ik().shape({complaints:r.YO().of(r.Ik().shape({complaint:r.Yj().required("Complaint is required"),duration:r.ai().min(1,"Duration must be greater than 0").required("Duration is required"),duration_unit:r.Yj().required("Duration unit is required"),otherComplaintSpecify:r.Yj().nullable().when("complaint",{is:o.W.OTHER,then:e=>e.required("Please specify the other complaint")})})),historyOfPresentingComplaint:r.Yj().required("History is required")}),j=e=>{let{onSubmit:a,onSkip:t}=e,[r,j]=(0,i.useState)({}),{params:N}=(0,n.KU)(),{mutate:E}=(0,c.jM)(),[y,S]=(0,i.useState)(void 0),{data:A}=(0,d.iu)(N.id),{init:f,ServerTime:I}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(A){let e=A.find(e=>!e.date_stopped);e&&S(e)}},[A]);let _={complaints_name:e=>({name:"complaints[".concat(e,"].complaint"),label:"Presenting Complaint"}),complaints_duration:e=>({name:"complaints[".concat(e,"].duration"),label:"Duration"}),complaints_duration_units:e=>({name:"complaints[".concat(e,"].duration_unit"),label:"Unit"}),other_complaint_specify:e=>({name:"complaints[".concat(e,"].otherComplaintSpecify"),label:"Specify Other Complaint"})},O=async e=>{let t=I.getServerTimeString(),l=e.complaints.map(e=>{let a=e.complaint===o.W.OTHER;return{concept:e.complaint,value:a?e.otherComplaintSpecify:e.complaint,obsDatetime:t,groupMembers:[{concept:o.W.DURATION,value:"".concat(e.duration," ").concat(e.duration_unit),obsDatetime:t}]}}),i=[{concept:o.W.PRESENTING_COMPLAINTS,value:o.W.PRESENTING_COMPLAINTS,obsDatetime:t,groupMembers:l},{concept:o.W.PRESENTING_HISTORY,value:e.historyOfPresentingComplaint,obsDatetime:t}],s={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==y?void 0:y.uuid,patient:N.id,encounterDatetime:t,obs:i};try{await E(s),a(e)}catch(e){console.error("Error submitting presenting complaints: ",e)}};return(0,l.jsx)(s.PD,{validationSchema:v,initialValues:{complaints:[b],historyOfPresentingComplaint:""},onSubmit:O,enableReinitialize:!0,submitButton:!0,submitButtonText:"Next",children:e=>{let{values:a,setFieldValue:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.fP,{getValues:j}),(0,l.jsx)(s.GE,{direction:"row",children:(0,l.jsxs)(s.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:[(0,l.jsx)(s.kI,{title:"Presenting complaints",children:(0,l.jsx)(m.ED,{name:"complaints",children:e=>{let{}=e;return(0,l.jsx)(p.A,{items:a.complaints,setItems:e=>t("complaints",e),newItem:b,renderFields:(e,a)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{style:{display:"flex-column",width:"100%"},children:[(0,l.jsx)(s.el,{name:_.complaints_name(a).name,label:_.complaints_name(a).label,options:x,multiple:!1,sx:{width:"100%"}}),(0,l.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,l.jsx)(g,{name:"complaints[".concat(a,"].complaint")})}),(0,l.jsx)(s.pj,{id:_.complaints_duration(a).name,name:_.complaints_duration(a).name,unitName:_.complaints_duration_units(a).name,label:_.complaints_duration(a).label,sx:{width:"50%"},unitOptions:o.bH,placeholder:"e.g., 3",inputIcon:(0,l.jsx)(h.YmN,{})}),(0,l.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,l.jsx)(g,{name:"complaints[".concat(a,"].duration")})}),e.complaint===o.W.OTHER&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.A8,{id:_.other_complaint_specify(a).name,label:_.other_complaint_specify(a).label,name:_.other_complaint_specify(a).name,placeholder:"Specify the complaint",sx:{width:"100%",mt:1}}),(0,l.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,l.jsx)(g,{name:"complaints[".concat(a,"].otherComplaintSpecify")})})]})]})})})}})}),(0,l.jsx)("br",{}),(0,l.jsx)(s.A8,{sx:{width:"100%"},id:"historyOfPresentingComplaint",name:"historyOfPresentingComplaint",label:"History of Presenting Complaint",multiline:!0,rows:5,placeholder:"Describe the history of the presenting complaint..."}),(0,l.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,l.jsx)(g,{name:"historyOfPresentingComplaint"})})]})})]})}})},N="NONE",E=[{value:N,label:"None"},{value:o.W.HIV,label:"HIV"},{value:o.W.TUBERCULOSIS,label:"Tuberculosis (TB)"},{value:o.W.CHRONIC_OBSTRUCTIVE_PULMONARY_DISEASE,label:"Chronic Obstructive Pulmonary Disease (COPD)"},{value:o.W.DIABETES_MELLITUS,label:"Diabetes Mellitus"},{value:o.W.ASTHMA,label:"Asthma"},{value:o.W.EPILEPSY,label:"Epilepsy"},{value:o.W.PREVIOUS_STROKE,label:"Previous stroke"},{value:o.W.BLEEDING_DISORDERS,label:"Bleeding disorders"},{value:o.W.OTHER_CONDITION,label:"Other (Specify)"}],y=r.Ik().shape({pastMedicalHistory:r.YO().of(r.Ik().shape({key:r.Yj().required(),value:r.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"Select at least one option"),otherConditionDetails:r.Yj().when("pastMedicalHistory",{is:e=>e.some(e=>e.key===o.W.OTHER_CONDITION&&e.value),then:e=>e.required("Please specify the other condition"),otherwise:e=>e.notRequired()})}),S=()=>{let{values:e,setFieldValue:a}=(0,m.j7)(),t=i.useRef(!1);return(0,i.useEffect)(()=>{if(!e.pastMedicalHistory||0===e.pastMedicalHistory.length)return;if(t.current){t.current=!1;return}let l=e.pastMedicalHistory,i=l.find(e=>e.key===N),s=l.filter(e=>e.key!==N&&e.value);(null==i?void 0:i.value)&&s.length>0&&(console.log("None is checked with others - unchecking all others"),t.current=!0,a("pastMedicalHistory",l.map(e=>e.key===N?e:{...e,value:!1})),a("otherConditionDetails",""),a("onTreatment",{}),a("medications",{}))},[e.pastMedicalHistory]),null},A=e=>{let{condition:a,isNoneSelected:t,selectedConditions:i,formik:n}=e,r=t&&a.value!==N,c=i.includes(a.value);return(0,l.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,l.jsx)(s.Z3,{name:"pastMedicalHistory",allowFilter:!1,options:[{value:a.value,label:a.label}],disabled:r}),a.value===o.W.OTHER_CONDITION&&c&&(0,l.jsx)("div",{style:{marginLeft:"20px",marginTop:"5px"},children:(0,l.jsx)(s.A8,{name:"otherConditionDetails",label:"Specify other condition",placeholder:"Enter other medical condition",type:"text",id:"otherConditionDetails"})}),c&&a.value!==N&&(0,l.jsxs)("div",{style:{marginLeft:"20px",marginTop:"5px"},children:[(0,l.jsx)(s.b1,{name:"onTreatment.".concat(a.value),label:"Are you on treatment for ".concat(a.label,"?"),options:[{value:o.W.YES,label:"Yes"},{value:o.W.NO,label:"No"}],getValue:e=>n.setFieldValue("onTreatment.".concat(a.value),e)}),n.values.onTreatment[a.value]===o.W.YES&&(0,l.jsxs)("div",{style:{marginLeft:"20px",marginTop:"10px"},children:[(0,l.jsx)("h5",{children:"Medication Details"}),(0,l.jsx)(s.A8,{name:"medications.".concat(a.value,".currentMedication"),label:"Current Medication",type:"text",id:"med-".concat(a.value)}),(0,l.jsx)(s.A8,{name:"medications.".concat(a.value,".dose"),label:"Dose",type:"text",id:"dose-".concat(a.value)}),(0,l.jsx)(s.A8,{name:"medications.".concat(a.value,".reason"),label:"Reason for Taking",type:"text",id:"reason-".concat(a.value)}),(0,l.jsx)(s.A8,{name:"medications.".concat(a.value,".duration"),label:"How long have you been taking it?",type:"text",id:"duration-".concat(a.value)})]})]})]},a.value)},f=e=>{let{onSubmit:a,onSkip:t}=e,[r,m]=(0,i.useState)({}),[h,p]=(0,i.useState)([]),{params:x}=(0,n.KU)(),{mutate:b}=(0,c.jM)(),[g,v]=(0,i.useState)(void 0),{data:j}=(0,d.iu)(x.id),{init:f,ServerTime:I}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(j){let e=j.find(e=>!e.date_stopped);e&&v(e)}},[j]),(0,i.useEffect)(()=>{r.pastMedicalHistory&&p(r.pastMedicalHistory.filter(e=>e.value).map(e=>e.key))},[r.pastMedicalHistory]);let _=async e=>{let t=I.getServerTimeString(),l=(e.pastMedicalHistory||[]).filter(e=>e.value).map(e=>e.key);if(console.log("Selected conditions:",l),l.includes(N)){let l={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==g?void 0:g.uuid,patient:x.id,encounterDatetime:t,obs:[{concept:o.W.CONDITION,value:"None",obsDatetime:t}]};try{await b(l),console.log("No past medical history submitted successfully!"),a(e)}catch(e){console.error("Error submitting past medical history:",e)}return}let i=l.map(a=>{var l,i,s,n,r,c,d,u;let m=e.onTreatment[a]===o.W.YES,h=a;return a===o.W.OTHER_CONDITION&&e.otherConditionDetails&&(h="Other: ".concat(e.otherConditionDetails)),{concept:o.W.CONDITION,value:h,obsDatetime:t,groupMembers:[{concept:o.W.ON_TREATMENT,value:e.onTreatment[a]||o.W.NO,obsDatetime:t},...m?[{concept:o.W.MEDICATION,value:(null==(i=e.medications)||null==(l=i[a])?void 0:l.currentMedication)||"",obsDatetime:t},{concept:o.W.MEDICATION_DOSE,value:(null==(n=e.medications)||null==(s=n[a])?void 0:s.dose)||"",obsDatetime:t},{concept:o.W.REASON_FOR_REQUEST,value:(null==(c=e.medications)||null==(r=c[a])?void 0:r.reason)||"",obsDatetime:t},{concept:o.W.MEDICATION_DURATION,value:(null==(u=e.medications)||null==(d=u[a])?void 0:d.duration)||"",obsDatetime:t}]:[]]}}),s={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==g?void 0:g.uuid,patient:x.id,encounterDatetime:t,obs:i};try{await b(s),console.log("Past Medical History submitted successfully!"),a(e)}catch(e){console.error("Error submitting Past Medical History: ",e)}};return(0,l.jsx)(s.PD,{validationSchema:y,initialValues:{pastMedicalHistory:[],onTreatment:{},medications:{},otherConditionDetails:""},onSubmit:_,children:e=>{var a;let t=null==(a=e.values.pastMedicalHistory)?void 0:a.some(e=>e.key===N&&e.value);return(0,l.jsxs)(s.GE,{direction:"column",children:[(0,l.jsx)(s.fP,{getValues:m}),(0,l.jsx)(S,{}),(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsx)(s.kI,{title:"Past Medical History",children:E.map(a=>(0,l.jsx)(A,{condition:a,isNoneSelected:t,selectedConditions:h,formik:e},a.value))})})]})}})},I=[{value:o.W.FAMILY_HISTORY_ASTHMA,label:"Asthma"},{value:o.W.FAMILY_HISTORY_DIABETES_MELLITUS,label:"Diabetes"},{value:o.W.FAMILY_HISTORY_EPILEPSY,label:"Epilepsy"},{value:o.W.FAMILY_HISTORY_HYPERTENSION,label:"Hypertension"},{value:o.W.FAMILY_HISTORY_CANCER,label:"Cancer"}],_=r.Ik().shape({familyHistory:r.YO().min(1,"Please select at least one option"),cancerType:r.Yj().when("familyHistory",{is:e=>null==e?void 0:e.some(e=>e.key===o.W.FAMILY_HISTORY_CANCER&&e.value),then:e=>e.required("Please specify the type of cancer"),otherwise:e=>e.notRequired()})}),O=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:h}=(0,c.jM)(),[p,x]=(0,i.useState)(void 0),{data:b}=(0,d.iu)(r.id),{init:g,ServerTime:v}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(b){let e=b.find(e=>!e.date_stopped);e&&x(e)}},[b]);let j=async e=>{let t=v.getServerTimeString(),l=(e.familyHistory||[]).filter(e=>e.value).map(e=>e.key),i=l.filter(e=>e!==o.W.FAMILY_HISTORY_CANCER).map(e=>{let a=I.find(a=>a.value===e);return{concept:e,value:a?a.label:"Unknown",obsDatetime:t}});l.includes(o.W.FAMILY_HISTORY_CANCER)&&e.cancerType&&i.push({concept:o.W.FAMILY_HISTORY_CANCER,value:e.cancerType,obsDatetime:t});let s={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==p?void 0:p.uuid,patient:r.id,encounterDatetime:t,obs:i};try{await h(s),a(e)}catch(e){console.error("Error submitting Family History:",e)}};return(0,l.jsx)(s.PD,{validationSchema:_,initialValues:{familyHistory:[],cancerType:""},onSubmit:j,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)(s.kI,{title:"Family History",children:[(0,l.jsx)(s.Z3,{name:"familyHistory",allowFilter:!1,options:I}),(0,l.jsx)(()=>{var e;let{values:a}=(0,m.j7)();return(null==(e=a.familyHistory)?void 0:e.some(e=>e.key===o.W.FAMILY_HISTORY_CANCER&&e.value))?(0,l.jsx)(s.A8,{name:"cancerType",label:"Type of Cancer",placeholder:"Specify cancer type",id:"cancerType"}):null},{})]})})})})},T=r.Ik().shape({hasSurgicalHistory:r.Yj().required("Please select Yes or No"),surgicalDetails:r.Yj().when("hasSurgicalHistory",{is:o.W.YES,then:e=>e.required("Please enter surgical details"),otherwise:e=>e.notRequired()})}),R=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:h}=(0,c.jM)(),[p,x]=(0,i.useState)(void 0),{data:b}=(0,d.iu)(r.id),{init:g,ServerTime:v}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(b){let e=b.find(e=>!e.date_stopped);e&&x(e)}},[b]);let j=async e=>{let t=v.getServerTimeString(),l=[{concept:o.W.SURGICAL_PROCEDURE,value:e.hasSurgicalHistory,obsDatetime:t}];e.hasSurgicalHistory===o.W.YES&&e.surgicalDetails&&l.push({concept:o.W.PROCEDURES,value:e.surgicalDetails,obsDatetime:t});let i={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==p?void 0:p.uuid,patient:r.id,encounterDatetime:t,obs:l};try{await h(i),a(e)}catch(e){console.error("Error submitting surgical history:",e)}};return(0,l.jsx)(s.PD,{validationSchema:T,initialValues:{hasSurgicalHistory:"",surgicalDetails:""},onSubmit:j,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)(s.kI,{title:"Any history of previous surgery or procedures?",children:[(0,l.jsx)(s.b1,{name:"hasSurgicalHistory",label:"Has Surgical History",options:[{value:o.W.YES,label:"Yes"},{value:o.W.NO,label:"No"}]}),(0,l.jsx)(()=>{let{values:e}=(0,m.j7)(),[a,t]=(0,m.Mt)("surgicalDetails");return e.hasSurgicalHistory!==o.W.YES?null:(0,l.jsx)(s.A8,{...a,id:"surgicalDetails",sx:{width:"100%"},name:"surgicalDetails",label:"Enter previous procedures and surgeries (Month & Year)",placeholder:"E.g., Appendectomy - January 2020",multiline:!0,rows:5})},{})]})})})})},D="NONE",P=[{value:D,label:"None"},{value:o.W.RECREATIONAL_DRUG,label:"Drugs"},{value:o.W.FOOD_ALLERGY,label:"Food"},{value:o.W.SKIN_PREP,label:"Skin prep"},{value:o.W.LATEX_ALLERGY,label:"Latex"},{value:o.W.MEDICATION_ALLERGY,label:"Medications"},{value:o.W.OTHER_CONDITION,label:"Other (Specify)"}],W=r.Ik().shape({allergies:r.YO().min(1,"Please select at least one option"),drugsDetails:r.Yj().when("allergies",{is:e=>e.some(e=>e.key===o.W.RECREATIONAL_DRUG&&e.value),then:e=>e.required("Specify drug allergy"),otherwise:e=>e.notRequired()}),foodDetails:r.Yj().when("allergies",{is:e=>e.some(e=>e.key===o.W.FOOD_ALLERGY&&e.value),then:e=>e.required("Specify food allergy"),otherwise:e=>e.notRequired()}),skinPrepDetails:r.Yj().when("allergies",{is:e=>e.some(e=>e.key===o.W.SKIN_PREP&&e.value),then:e=>e.required("Specify skin prep allergy"),otherwise:e=>e.notRequired()}),latexDetails:r.Yj().when("allergies",{is:e=>e.some(e=>e.key===o.W.LATEX_ALLERGY&&e.value),then:e=>e.required("Specify latex allergy"),otherwise:e=>e.notRequired()}),medicationsDetails:r.Yj().when("allergies",{is:e=>e.some(e=>e.key===o.W.MEDICATION_ALLERGY&&e.value),then:e=>e.required("Specify medication allergy"),otherwise:e=>e.notRequired()}),otherDetails:r.Yj().when("allergies",{is:e=>e.some(e=>e.key===o.W.OTHER_CONDITION&&e.value),then:e=>e.required("Specify other allergy"),otherwise:e=>e.notRequired()})}),C=()=>{let{values:e,setFieldValue:a}=(0,m.j7)(),t=i.useRef(!1);return(0,i.useEffect)(()=>{if(!e.allergies||0===e.allergies.length)return;if(t.current){t.current=!1;return}let l=e.allergies,i=l.find(e=>e.key===D),s=l.filter(e=>e.key!==D&&e.value);if((null==i?void 0:i.value)&&s.length>0)console.log("None is checked with others - unchecking all others"),t.current=!0,a("allergies",l.map(e=>e.key===D?e:{...e,value:!1})),a("drugsDetails",""),a("foodDetails",""),a("skinPrepDetails",""),a("latexDetails",""),a("medicationsDetails",""),a("otherDetails","");else if(!(null==i?void 0:i.value)&&s.length>0&&l.some(e=>e.key===D)&&(null==i?void 0:i.value)===!1)return},[e.allergies]),null},M=e=>{var a;let{allergy:t,isNoneSelected:i}=e,{values:n}=(0,m.j7)(),r=null==(a=n.allergies)?void 0:a.some(e=>e.key===t.value&&e.value),c=i&&t.value!==D,d="";return t.value===o.W.RECREATIONAL_DRUG?d="drugsDetails":t.value===o.W.FOOD_ALLERGY?d="foodDetails":t.value===o.W.SKIN_PREP?d="skinPrepDetails":t.value===o.W.LATEX_ALLERGY?d="latexDetails":t.value===o.W.MEDICATION_ALLERGY?d="medicationsDetails":t.value===o.W.OTHER_CONDITION&&(d="otherDetails"),(0,l.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,l.jsx)(s.Z3,{name:"allergies",allowFilter:!1,options:[t],disabled:c}),r&&d&&(0,l.jsx)("div",{style:{marginLeft:"20px",marginTop:"5px"},children:(0,l.jsx)(s.A8,{name:d,label:"Specify ".concat(t.label.toLowerCase()," allergy"),placeholder:"Enter ".concat(t.label.toLowerCase()," allergy details"),id:d})})]},t.value)},k=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:m}=(0,c.jM)(),[h,p]=(0,i.useState)(void 0),{data:x}=(0,d.iu)(r.id),{init:b,ServerTime:g}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let v=async e=>{let t=g.getServerTimeString(),l=(e.allergies||[]).filter(e=>e.value).map(e=>e.key);if(console.log("Selected allergies:",l),l.includes(D)){let l={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==h?void 0:h.uuid,patient:r.id,encounterDatetime:t,obs:[{concept:o.W.ALLERGIC_REACTION,value:"None",obsDatetime:t}]};try{await m(l),console.log("No allergies submitted successfully!"),a(e)}catch(e){console.error("Error submitting allergies:",e)}return}let i=[];l.forEach(a=>{let l="",s=P.find(e=>e.value===a),n=s?s.label:"Unknown";a===o.W.RECREATIONAL_DRUG?l="".concat(n,": ").concat(e.drugsDetails||""):a===o.W.FOOD_ALLERGY?l="".concat(n,": ").concat(e.foodDetails||""):a===o.W.SKIN_PREP?l="".concat(n,": ").concat(e.skinPrepDetails||""):a===o.W.LATEX_ALLERGY?l="".concat(n,": ").concat(e.latexDetails||""):a===o.W.MEDICATION_ALLERGY?l="".concat(n,": ").concat(e.medicationsDetails||""):a===o.W.OTHER_CONDITION&&(l="".concat(n,": ").concat(e.otherDetails||"")),i.push({concept:o.W.ALLERGIC_REACTION,value:l,obsDatetime:t})}),console.log("Submitting observations:",i);let s={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==h?void 0:h.uuid,patient:r.id,encounterDatetime:t,obs:i};try{await m(s),console.log("Allergies submitted successfully!"),a(e)}catch(e){console.error("Error submitting Allergies:",e)}};return(0,l.jsx)(s.PD,{validationSchema:W,initialValues:{allergies:[],drugsDetails:"",foodDetails:"",skinPrepDetails:"",latexDetails:"",medicationsDetails:"",otherDetails:""},onSubmit:v,children:e=>{var a;let{values:t}=e,i=null==(a=t.allergies)?void 0:a.some(e=>e.key===D&&e.value);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{}),(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsx)(s.kI,{title:"Allergies and Adverse Reactions",children:P.map(e=>(0,l.jsx)(M,{allergy:e,isNoneSelected:i},e.value))})})})]})}})},L=r.Ik().shape({doYouSmoke:r.Yj().required("Please select an option"),cigarettesPerDay:r.Yj().when("doYouSmoke",{is:"Yes",then:e=>e.required("Please enter how many you smoke per day"),otherwise:e=>e.notRequired()}),smokingHistory:r.Yj().when("doYouSmoke",{is:"No",then:e=>e.required("Please select if you quit or never smoked"),otherwise:e=>e.notRequired()}),alcoholIntake:r.Yj().required("Please enter daily alcohol intake"),recreationalDrugs:r.Yj().required("Please select if you use recreational drugs")}),w=e=>{let{onSubmit:a,onSkip:t}=e,[r,m]=(0,i.useState)(""),{params:h}=(0,n.KU)(),{mutate:p}=(0,c.jM)(),[x,b]=(0,i.useState)(void 0),{data:g}=(0,d.iu)(h.id),{init:v,ServerTime:j}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(g){let e=g.find(e=>!e.date_stopped);e&&b(e)}},[g]);let N=async e=>{let t=j.getServerTimeString(),l=[{concept:o.W.PATIENT_SMOKES,value:e.doYouSmoke,obsDatetime:t,groupMembers:"Yes"===e.doYouSmoke?[{concept:o.W.EXPECTED_DURATION,value:e.cigarettesPerDay,obsDatetime:t}]:[]},{concept:o.W.ALCOHOL_INTAKE,value:e.alcoholIntake,obsDatetime:t},{concept:o.W.RECREATIONAL_DRUG,value:e.recreationalDrugs,obsDatetime:t}],i={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==x?void 0:x.uuid,patient:h.id,encounterDatetime:t,obs:l};try{await p(i),console.log("Social History submitted successfully!"),a(e)}catch(e){console.error("Error submitting Social History: ",e)}};return(0,l.jsx)(s.PD,{validationSchema:L,initialValues:{doYouSmoke:"",cigarettesPerDay:"",smokingHistory:"",alcoholIntake:"",recreationalDrugs:""},onSubmit:N,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)(s.kI,{title:"Social History",children:[(0,l.jsx)(s.b1,{name:"doYouSmoke",label:"Do you smoke?",options:[{value:o.W.YES,label:"Yes"},{value:o.W.NO,label:"No"}],getValue:e=>m(e)}),"Yes"===r&&(0,l.jsx)(s.A8,{id:"cigarettesPerDay",name:"cigarettesPerDay",label:"How many cigarettes per day?"}),(0,l.jsx)("br",{}),"No"===r&&(0,l.jsx)(s.b1,{name:"smokingHistory",label:"If not, did you quit over a month ago or never smoked?",options:[{value:"Quit over a month ago",label:"Quit over a month ago"},{value:"Never smoked",label:"Never smoked"}]}),(0,l.jsx)(s.A8,{id:"alcoholIntake",sx:{width:"100%"},name:"alcoholIntake",label:"What is your daily alcohol intake?"}),(0,l.jsx)(s.b1,{name:"recreationalDrugs",label:"Do you use recreational drugs?",options:[{value:o.W.YES,label:"Yes"},{value:o.W.NO,label:"No"}]})]})})})})},H=r.Ik().shape({areYouPregnant:r.Yj().required("Please select an option"),lnmp:r.Yj().when("areYouPregnant",{is:"Yes",then:e=>e.required("Please enter the Last Normal Menstrual Period"),otherwise:e=>e.notRequired()}),gestationalAge:r.Yj().when("areYouPregnant",{is:"Yes",then:e=>e.required("Gestational age is required"),otherwise:e=>e.notRequired()}),parity:r.Yj().when("areYouPregnant",{is:"Yes",then:e=>e.required("Please enter the parity"),otherwise:e=>e.notRequired()})}),Y=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:m}=(0,c.jM)(),[h,p]=(0,i.useState)(void 0),{data:x}=(0,d.iu)(r.id),{init:b,ServerTime:g}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let v=async e=>{let t=g.getServerTimeString(),l=[{concept:o.W.PREGNANCY_TEST,value:e.areYouPregnant,obsDatetime:t},..."Yes"===e.areYouPregnant?[{concept:o.W.LNMP,value:e.lnmp,obsDatetime:t},{concept:o.W.GESTATIONAL_AGE,value:e.gestationalAge,obsDatetime:t},{concept:o.W.PARITY,value:e.parity,obsDatetime:t}]:[]],i={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==h?void 0:h.uuid,patient:r.id,encounterDatetime:t,obs:l};try{await m(i),console.log("Gynae Obstetric History submitted successfully!"),a(e)}catch(e){console.error("Error submitting Gynae Obstetric History: ",e)}};return(0,l.jsx)(s.PD,{validationSchema:H,initialValues:{areYouPregnant:"",lnmp:"",gestationalAge:"",parity:""},onSubmit:v,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)(s.kI,{title:"Gynae/Obstetric History (Only for Females)",children:[(0,l.jsx)(s.b1,{name:"areYouPregnant",label:"Are you pregnant?",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}),(0,l.jsx)(F,{})]})})})})},F=()=>{let{values:e}=(0,m.j7)();return"Yes"!==e.areYouPregnant?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.bZ,{name:"lnmp",label:"Last Normal Menstrual Period (LNMP)"}),(0,l.jsx)(s.A8,{name:"gestationalAge",label:"Gestational Age (weeks)",id:""}),(0,l.jsx)(s.A8,{id:"parity",name:"parity",label:"Parity"})]})},G={general:[{value:o.W.FEVER,label:"Fever"},{value:o.W.LYMPHADENOPATHY,label:"Lymphadenopathy"},{value:o.W.NIGHT_SWEATS,label:"Night sweats"},{value:o.W.FATIGUE,label:"Fatigue"},{value:o.W.WEIGHT_LOSS,label:"Weight loss"}],ent:[{value:o.W.EYE_PAIN,label:"Eye pain"},{value:o.W.RHINORRHEA,label:"Rhinorrhea"},{value:o.W.TINNITUS,label:"Tinnitus"},{value:o.W.EPISTAXIS,label:"Epistaxis"},{value:o.W.SINUS_PAIN,label:"Sinus pain"},{value:o.W.ORAL_LESIONS,label:"Oral lesions"},{value:o.W.DYSPHAGIA,label:"Dysphagia"},{value:o.W.ODYNOPHAGIA,label:"Odynophagia"}],endocrine:[{value:o.W.HEAT_TOLERANCE,label:"Heat tolerance"},{value:o.W.ABNORMAL_HAIR_GROWTH,label:"Abnormal hair growth"},{value:o.W.COLD_TOLERANCE,label:"Cold tolerance"},{value:o.W.POLYURIA,label:"Polyuria"},{value:o.W.POLYDIPSIA,label:"Polydipsia"}],cardiac:[{value:o.W.BLEEDING_TENDENCIES,label:"Bleeding tendencies"},{value:o.W.CHEST_PAIN,label:"Chest pain"},{value:o.W.HEART_PALPITATIONS,label:"Palpitations"},{value:o.W.OEDEMA,label:"Oedema"},{value:o.W.CYANOSIS,label:"Cyanosis"},{value:o.W.CLAUDICATION,label:"Claudication"},{value:o.W.ORTHOPNOEA,label:"Orthopnoea"},{value:o.W.PAROXYSMAL_NOCTURNAL_DYSPNOEA,label:"Paroxysmal nocturnal dyspnoea"}],respiratory:[{value:o.W.SHORTNESS_OF_BREATH,label:"Shortness Of Breath"},{value:o.W.DYSPNOEA_ON_EXERTION,label:"Dyspnoea on exertion"},{value:o.W.DYSPNOEA_AT_REST,label:"Dyspnoea at rest"},{value:o.W.COUGH,label:"Cough"},{value:o.W.HAEMOPTYSIS,label:"Haemoptysis"},{value:o.W.WHEEZING,label:"Wheezing"}],gastrointestinal:[{value:o.W.NAUSEA,label:"Nausea"},{value:o.W.VOMITING,label:"Vomiting"},{value:o.W.MELENA,label:"Melena"},{value:o.W.HAEMATOCHEZIA,label:"Haematochezia"},{value:o.W.CHANGE_IN_APPETITE,label:"Change in appetite"},{value:o.W.ABDOMINALPAINS,label:"Abdominal pain"},{value:o.W.CHANGE_IN_BOWEL_HABIT,label:"Change in bowel habit"},{value:o.W.HEARTBURN,label:"Heartburn"}],genitourinary:[{value:o.W.DYSURIA,label:"Dysuria"},{value:o.W.URGENCY,label:"Urgency"},{value:o.W.INCONTINENCE,label:"Incontinence"},{value:o.W.HAEMATURIA,label:"Haematuria"},{value:o.W.PYURIA,label:"Pyuria"},{value:o.W.SEXUALLY_TRANSMITTED_INFECTION,label:"Sexually Transmitted Infection (STI)"},{value:o.W.ABNORMAL_VAGINAL_DISCHARGE,label:"Abnormal Vaginal Discharge"},{value:o.W.DYSMENORRHEA,label:"Dysmenorrhea"},{value:o.W.PELVIC_PAIN,label:"Pelvic pain"}],musculoskeletal:[{value:o.W.JOINT_PAIN,label:"Joint Pain"},{value:o.W.SWELLING_JOINT,label:"Joint Swelling"},{value:o.W.PAIN_BACK,label:"Back Pain"}],neurologic:[{value:o.W.HEADACHE,label:"Headache"},{value:o.W.CHANGE_IN_SMELL,label:"Change in smell"},{value:o.W.CHANGE_IN_TASTE,label:"Change in taste"},{value:o.W.PARAESTHESIAS,label:"Paraesthesias"},{value:o.W.MUSCLE_WEAKNESS,label:"Muscle weakness"},{value:o.W.ATAXIA,label:"Ataxia"},{value:o.W.CHANGE_IN_SPEECH,label:"Change in speech"}],psychiatric:[{value:o.W.DEPRESSION,label:"Depression"},{value:o.W.ANXIETY,label:"Anxiety"},{value:o.W.HALLUCINATIONS,label:"Hallucinations"},{value:o.W.MANIA,label:"Mania"},{value:o.W.SUICIDAL_THOUGHTS,label:"Suicidal thoughts"}]},U={general:o.W.REVIEW_OF_SYSTEMS_GENERAL,ent:o.W.REVIEW_OF_SYSTEMS_ENT,endocrine:o.W.REVIEW_OF_SYSTEMS__ENDOCRINE,cardiac:o.W.REVIEW_OF_SYSTEMS_CARDIAC,respiratory:o.W.SEVERE_RESPIRATORY,gastrointestinal:o.W.REVIEW_OF_SYSTEMS_GASTROINTESTINAL,genitourinary:o.W.REVIEW_OF_SYSTEMS_GENITOURINARY,musculoskeletal:o.W.REVIEW_OF_SYSTEMS_MUSCULOSKELETAL,neurologic:o.W.REVIEW_OF_SYSTEMS_NEUROLOGIC,psychiatric:o.W.REVIEW_OF_SYSTEMS_PSYCHIATRIC},B=r.Ik({}),q=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:m}=(0,c.jM)(),[h,p]=(0,i.useState)(void 0),{data:x}=(0,d.iu)(r.id),{init:b,ServerTime:g}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let v=async e=>{let t=g.getServerTimeString();if(!r.id||!h)return void console.error("Missing patient ID or active visit");console.log("Form values:",e);let l=[];for(let a in G){let i=e[a]||[];if(!i.length)continue;let s=i.filter(e=>!0===e.value).map(e=>e.key);if(!s.length)continue;let n=U[a],r=s.map(e=>{let l=G[a].find(a=>a.value===e);return{concept:e,value:(null==l?void 0:l.label)||e,obsDatetime:t}});r.length>0&&l.push({concept:n,value:n,obsDatetime:t,groupMembers:r})}if(console.log("Final obs structure:",l),0===l.length){console.warn("No systems selected, moving to next step anyway"),a(e);return}let i={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,patient:r.id,encounterDatetime:t,visit:h.uuid,obs:l};try{console.log("Submitting payload:",i),await m(i),a(e)}catch(e){console.error("Error submitting Review of Systems:",e)}};return(0,l.jsx)(s.PD,{initialValues:{general:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]},validationSchema:B,onSubmit:v,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsx)(s.kI,{title:"Review of Systems",children:Object.entries(G).map(e=>{let[a,t]=e;return(0,l.jsxs)("div",{style:{marginBottom:"2ch"},children:[(0,l.jsx)("h5",{style:{textTransform:"capitalize"},children:a.replace(/_/g," ")}),(0,l.jsx)(s.Z3,{name:a,allowFilter:!1,options:t.map(e=>({key:e.value,value:e.value,label:e.label}))})]},a)})})})})})},V={general:[{value:o.W.SEVERE_PAIN,label:"In Pain"},{value:o.W.COMFORTABLE,label:"Comfortable"},{value:o.W.ILL,label:"Ill"},{value:o.W.FIT_FOR_AGE,label:"Fit for age"}],eyes:[{value:o.W.PALLOR,label:"Pallor"},{value:o.W.JAUNDICE,label:"Jaundice"},{value:o.W.NONE,label:"None"}],mouth:[{value:o.W.CANDIDA,label:"Candida"},{value:o.W.KAPOSI_SARCOMA,label:"Kaposi's Sarcoma (KS)"},{value:o.W.HYDRATION,label:"Hydration"}],neck:[{value:o.W.NODES,label:"Nodes"},{value:o.W.SUBMENTAL,label:"Submental"},{value:o.W.EPITHROCHLEAR,label:"Epithrochlear"}],endocrine:[{value:o.W.BREAST,label:"Breast"},{value:o.W.THYROID,label:"Thyroid"}]},K={motorResponse:[{value:o.W.NO_MOVEMENT,label:"No movement"},{value:o.W.ABNORMAL_EXTENSION,label:"Abnormal extension (decerebrate posture)"},{value:o.W.ABNORMAL_FLEXION,label:"Abnormal flexion (decorticate posture)"},{value:o.W.FLEXION_WITHDRAWAL_FROM_PAINFUL_STIMULI,label:"Flexion/Withdrawal from painful stimuli"},{value:o.W.MOVES_TO_LOCALIZE_PAIN,label:"Moves to localize pain"},{value:o.W.OBEYS_COMMANDS,label:"Obeys commands"}],verbalResponse:[{value:o.W.NO_SOUND,label:"No sound"},{value:o.W.INCOMPREHENSIBLE_SOUNDS,label:"Incomprehensible sounds"},{value:o.W.INAPPROPRIATE_WORDS,label:"Inappropriate words"},{value:o.W.CONFUSED_AND_DISORIENTED,label:"Confused and disoriented, but able to answer questions"},{value:o.W.ORIENTED_TO_TIME,label:"Oriented to time, person, and place, converses normally"}],eyeResponse:[{value:o.W.DOES_NOT_OPEN_EYES,label:"Does not open eyes"},{value:o.W.OPENS_EYES_IN_RESPONSE_TO_PAIN,label:"Opens eyes in response to pain"},{value:o.W.OPENS_EYES_IN_RESPONSE_TO_VOICE,label:"Opens eyes in response to voice"},{value:o.W.OPENS_EYES_SPONTANEOUSLY,label:"Opens eyes spontaneously"}]},X=r.Ik({}),z=e=>{let{onSubmit:a,onSkip:t}=e,{gender:r}=(0,n.gd)(),{params:m}=(0,n.KU)(),{mutate:h}=(0,c.jM)(),[p,x]=(0,i.useState)(void 0),{data:b}=(0,d.iu)(m.id),{init:g,ServerTime:v}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(b){let e=b.find(e=>!e.date_stopped);e&&x(e)}},[b]);let j=async e=>{if(!p)return void console.error("No active visit found for the patient.");let t=v.getServerTimeString(),l=(e,a)=>({concept:e,value:a,obsDatetime:t}),i=[l(o.W.GENERAL_CONDITION,e.general),l(o.W.TEMPERATURE,e.temperature),l(o.W.PULSE_RATE,e.pulse),l(o.W.BLOOD_PRESSURE_MEASURED,e.bloodPressure),l(o.W.RESPIRATORY_RATE,e.respiratoryRate),l(o.W.EYES,e.eyes),l(o.W.MOUTH,e.mouth),l(o.W.NECK,e.neck),l(o.W.CHEST_EXAMINATION,e.chest),l(o.W.ENDOCRINE_EXAMINATION,e.endocrine),l(o.W.ABDOMINAL_EXAMINATION,e.abdomen),l(o.W.MOTOR_RESPONSE,e.motorResponse),l(o.W.VERBAL_RESPONSE,e.verbalResponse),l(o.W.EYE_OPENING_RESPONSE,e.eyeResponse),l(o.W.CRANIAL_ERVES,e.cranialNerves),l(o.W.GROSS_MOTOR,e.grossMotor),l(o.W.SENSATION,e.sensation),l(o.W.PULSATIONS,e.pulsations),l(o.W.RECTAL_EXAMINATION,e.rectalExamination),l(o.W.EXTREMITIES,e.extremities),l(o.W.VAGINAL_EXAMINATION,e.vaginalExamination)].filter(e=>e.value&&""!==e.value),s={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,patient:m.id,visit:p.uuid,encounterDatetime:t,obs:i};try{await h(s),console.log("Physical Examination submitted successfully!"),a(e)}catch(e){console.error("Error submitting Physical Examination:",e)}};return(0,l.jsx)(s.PD,{initialValues:{general:"",temperature:"",pulse:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdomen:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:"",extremities:"",vaginalExamination:""},validationSchema:X,onSubmit:j,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)(s.kI,{title:"Physical Examination",children:[(0,l.jsx)(s.kI,{title:"General Condition",children:(0,l.jsx)(s.b1,{name:"general",options:V.general,label:""})}),(0,l.jsxs)(s.kI,{title:"Vitals",children:[(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"temperature",label:"Temperature",type:"text",id:"",unitOfMeasure:"\xb0C"}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"pulse",label:"Pulse",type:"text",id:"",unitOfMeasure:"bpm"}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"bloodPressure",label:"Blood Pressure (BP)",type:"text",id:"",unitOfMeasure:"mmHg"}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"respiratoryRate",label:"Respiratory Rate",type:"text",id:"",unitOfMeasure:"bs/m"})]}),(0,l.jsx)(s.kI,{title:"Eyes",children:(0,l.jsx)(s.b1,{name:"eyes",options:V.eyes,label:""})}),(0,l.jsx)(s.kI,{title:"Mouth",children:(0,l.jsx)(s.b1,{name:"mouth",options:V.mouth,label:""})}),(0,l.jsxs)(s.kI,{title:"Neck",children:[(0,l.jsx)(s.b1,{name:"neck",options:V.neck,label:""})," "]}),(0,l.jsx)(s.kI,{title:"Chest Examination",children:(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"chest",label:"Chest",type:"text",id:""})}),(0,l.jsx)(s.kI,{title:"Endocrine Examination",children:(0,l.jsx)(s.b1,{name:"endocrine",options:V.endocrine,label:""})}),(0,l.jsx)(s.kI,{title:"Abdominal Examination",children:(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"abdomen",label:"Abdomen",type:"text",id:""})}),(0,l.jsxs)(s.kI,{title:"Glasgow Coma Scale (GCS)",children:[(0,l.jsx)("h5",{children:"Motor Response"}),(0,l.jsx)(s.b1,{name:"motorResponse",options:K.motorResponse,label:""}),(0,l.jsx)("h5",{children:"Verbal Response"}),(0,l.jsx)(s.b1,{name:"verbalResponse",options:K.verbalResponse,label:""}),(0,l.jsx)("h5",{children:"Eye Response"}),(0,l.jsx)(s.b1,{name:"eyeResponse",options:K.eyeResponse,label:""})]}),(0,l.jsxs)(s.kI,{title:"Additional Examinations",children:[(0,l.jsx)(s.A8,{name:"cranialNerves",sx:{width:"100%"},label:"Cranial Nerves",type:"text",id:""}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"grossMotor",label:"Gross Motor",type:"text",id:""}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"sensation",label:"Sensation",type:"text",id:""})]}),(0,l.jsxs)(s.kI,{title:"Extremities",children:[(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"pulsations",label:"Pulsations",type:"text",id:""}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"rectalExamination",label:"Rectal Examination",type:"text",id:""}),(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"extremities",label:"Extremities Examination",type:"text",id:""}),"Female"==r&&(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"vaginalExamination",label:"Vaginal Examination (For Females Only)",type:"text",id:""})]})]})})})})};var Z=t(47292),J=t(39347),Q=t(62564);let $=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:m}=(0,c.jM)(),[h,p]=(0,i.useState)(void 0),{data:x}=(0,d.iu)(r.id),[b,g]=(0,i.useState)([]),{init:v,ServerTime:j}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let N=async()=>{let e=j.getServerTimeString(),t=b.map(a=>({concept:o.W.DIFFERENTIAL_DIAGNOSIS,value:"".concat(a.code,"-").concat(a.diagnosis),obsDatetime:e})),l={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==h?void 0:h.uuid,patient:r.id,encounterDatetime:e,obs:t};try{await m(l),console.log("Differential Diagnosis submitted successfully!"),a(b)}catch(e){console.error("Error submitting diagnosis:",e)}};return(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)(s.kI,{title:"Working Differential Diagnosis",children:[(0,l.jsx)(Z.q,{columns:[{label:"Code",field:"code"},{label:"Diagnosis",field:"diagnosis"}],data:b}),(0,l.jsx)("br",{}),(0,l.jsx)(Q.default,{label:"Diagnosis",initialValue:"",onSelection:e=>{g(a=>[...a,e])},placeholder:"Start typing to search diagnoses..."}),(0,l.jsx)("br",{}),(0,l.jsx)(J.A,{variant:"contained",color:"primary",onClick:N,children:"Finish and Submit"})]})})})};var ee=t(31960),ea=t(42281);let et={additionalNotes:{name:o.W.NOTES,label:"Additional Investigation Notes"}},el=(0,ea.f6)(et),ei=r.Ik().shape({}),es=e=>{let{onSubmit:a,onSkip:t}=e,{params:r}=(0,n.KU)(),{mutate:m}=(0,c.jM)(),[h,p]=(0,i.useState)(void 0),{data:x}=(0,d.iu)(r.id),{ServerTime:b}=(0,u.useServerTime)();(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&p(e)}},[x]);let g=async e=>{var t;let l=b.getServerTimeString();if(null==(t=e[o.W.NOTES])?void 0:t.trim()){let t={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==h?void 0:h.uuid,patient:r.id,encounterDatetime:l,obs:[{concept:o.W.NOTES,value:e[o.W.NOTES],obsDatetime:l}]};try{await m(t),console.log("Additional Notes submitted successfully!"),a(e)}catch(e){console.error("Error submitting additional notes:",e)}}else a(e)};return(0,l.jsx)(s.PD,{initialValues:el,validationSchema:ei,onSubmit:g,children:(0,l.jsx)(s.GE,{direction:"column",children:(0,l.jsx)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Investigations"}),(0,l.jsx)(ee.M,{}),(0,l.jsxs)("div",{style:{marginTop:"30px"},children:[(0,l.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"15px",color:"#374151",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:"Additional Investigation Notes"}),(0,l.jsx)("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:"12px"},children:"Include other radiology investigations and lab orders that AETC doesn't perform (e.g., external diagnostic laboratories)."}),(0,l.jsx)(s.A8,{multiline:!0,rows:6,name:et.additionalNotes.name,label:et.additionalNotes.label,id:et.additionalNotes.name,sx:{width:"100%"},placeholder:"Enter external lab orders, radiology investigations, or other diagnostic tests not performed at AETC..."})]})]})})})})};var en=t(11518),er=t.n(en),eo=t(96609),ec=t(40700),ed=t(14593);let eu=r.Ik({}),em=e=>{let{onSubmit:a,onSkip:t}=e,[r,m]=(0,i.useState)(null),{params:h}=(0,n.KU)(),{navigateTo:p}=(0,n.cq)(),{data:x}=(0,d.iu)(h.id),{data:b}=(0,c.$O)(h.id),{mutate:g}=(0,c.jM)(),[v,j]=(0,i.useState)(void 0),{init:N,ServerTime:E}=(0,u.useServerTime)(),y=(0,i.useRef)(null),[S,A]=(0,i.useState)({clerkName:"",designation:"",signature:"",additionalNotes:""}),[f,I]=(0,i.useState)({complaints:"",history:"",surgicalHistory:"",surgicalProcedure:"",familyHistory:[],allergies:"",differentialDiagnosis:"",smoking:{status:"",duration:""},alcoholIntake:"",recreationalDrugs:""}),[_,O]=(0,i.useState)({general:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]}),[T,R]=(0,i.useState)({generalCondition:"",temperature:"",pulseRate:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdominal:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:""}),[D,P]=(0,i.useState)([]),W=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!b)return;let e=null==b?void 0:b.filter(e=>e.encounter_type&&e.encounter_type.uuid===o.fA.SURGICAL_NOTES_TEMPLATE_FORM).sort((e,a)=>new Date(a.encounter_datetime).getTime()-new Date(e.encounter_datetime).getTime())[0];if(e&&e.obs){let a={clerkName:"",designation:"",signature:"",additionalNotes:""},t={complaints:"",history:"",surgicalHistory:"",surgicalProcedure:"",familyHistory:[],allergies:"",differentialDiagnosis:"",smoking:{status:"",duration:""},alcoholIntake:"",recreationalDrugs:""},l={general:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[]},i={generalCondition:"",temperature:"",pulseRate:"",bloodPressure:"",respiratoryRate:"",eyes:"",mouth:"",neck:"",chest:"",endocrine:"",abdominal:"",motorResponse:"",verbalResponse:"",eyeResponse:"",cranialNerves:"",grossMotor:"",sensation:"",pulsations:"",rectalExamination:""};e.obs.forEach(e=>{let s=e.names&&e.names.length>0?e.names[0].name:null;if("Clerk name"===s)a.clerkName=e.value||e.value_text||"";else if("Designation"===s)a.designation=e.value||e.value_text||"";else if("Signature"===s)a.signature=e.value||e.value_text||"";else if("Additional Notes"===s)a.additionalNotes=e.value||e.value_text||"";else if("Presenting Complaints"===s)e.children&&e.children.length>0&&(t.complaints=e.children[0].value_text||"");else if("Presenting history"===s)t.history=e.value||e.value_text||"";else if("Surgical Procedure"===s)t.surgicalHistory=e.value||e.value_text||"";else if("Procedures"===s)t.surgicalProcedure=e.value||e.value_text||"";else if(null==s?void 0:s.startsWith("Family History")){let a=e.value||e.value_text||"";a&&t.familyHistory.push(a)}else if("Allergic reaction"===s)t.allergies=e.value||e.value_text||"";else if("Attempted/ Differential Diagnosis"===s)t.differentialDiagnosis=e.value||e.value_text||"";else if("Patient smokes"===s){if(t.smoking.status=e.value||e.value_text||"",e.children&&e.children.length>0){let a=e.children.find(e=>e.names&&e.names.length>0&&"Expected Duration"===e.names[0].name);a&&(t.smoking.duration=a.value||a.value_text||"")}}else"Alcohol intake"===s?t.alcoholIntake=e.value||e.value_text||"":"Recreational drug"===s?t.recreationalDrugs=e.value||e.value_text||"":"Review of systems, general"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.general.push(a)}):"Review of systems ENT"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.ent.push(a)}):"Review of systems endocrine"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.endocrine.push(a)}):"Review of systems cardiac"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.cardiac.push(a)}):"Severe Respiratory"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.respiratory.push(a)}):"Review Of Systems Gastrointestinal"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.gastrointestinal.push(a)}):"Review Of Systems Genitourinary"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.genitourinary.push(a)}):"Review Of Systems musculoskeletal"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.musculoskeletal.push(a)}):"Review Of Systems neurologic"===s?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.neurologic.push(a)}):"Review of systems psychiatric"===s&&e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&l.psychiatric.push(a)});"General condition"===s?i.generalCondition=e.value||"":"Temperature (c)"===s?i.temperature=e.value_numeric?"".concat(e.value_numeric,"\xb0C"):e.value||"":"Pulse Rate"===s?i.pulseRate=e.value_text||e.value||"":"Blood Pressure Measured"===s?i.bloodPressure=e.value_text||e.value||"":"Respiratory rate"===s?i.respiratoryRate=e.value_text||e.value||"":"Eyes"===s?i.eyes=e.value_text||e.value||"":"Mouth"===s?i.mouth=e.value_text||e.value||"":"Neck"===s?i.neck=e.value_text||e.value||"":"Chest examination"===s?i.chest=e.value_text||e.value||"":"Endocrine examination"===s?i.endocrine=e.value_text||e.value||"":"Abdominal examination"===s?i.abdominal=e.value_text||e.value||"":"Motor response"===s?i.motorResponse=e.value_text||e.value||"":"Verbal Response"===s?i.verbalResponse=e.value_text||e.value||"":"Eye Opening response"===s?i.eyeResponse=e.value_text||e.value||"":"Motor response"===s?i.motorResponse=e.value_text||e.value||"":"Verbal Response"===s?i.verbalResponse=e.value_text||e.value||"":"Cranial erves"===s?i.cranialNerves=e.value_text||e.value||"":"Gross motor"===s?i.grossMotor=e.value_text||e.value||"":"Sensation"===s?i.sensation=e.value_text||e.value||"":"Pulsations"===s?i.pulsations=e.value_text||e.value||"":"Rectal examination"===s&&(i.rectalExamination=e.value_text||e.value||"")}),!a.clerkName&&e.created_by&&(a.clerkName=e.created_by),A(a),I(t),O(l),R(i)}let a=[];b.forEach(e=>{e.obs&&e.obs.forEach(e=>{if("Condition"===(e.names&&e.names.length>0?e.names[0].name:null)&&e.children&&e.children.length>0){let t={condition:e.value||e.value_text||"",onTreatment:"",medication:"",medicationDose:"",reasonForRequest:"",medicationDuration:""};e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;"On treatment"===a?t.onTreatment=e.value||e.value_text||"":"Medication"===a?t.medication=e.value||e.value_text||"":"Medication Dose"===a?t.medicationDose=e.value||e.value_text||"":"Reason for request"===a?t.reasonForRequest=e.value||e.value_text||"":"Medication Duration"===a&&(t.medicationDuration=e.value||e.value_text||"")}),a.push(t)}})}),P(a)},[b]),(0,i.useEffect)(()=>{if(x){let e=x.find(e=>!e.date_stopped);e&&j(e)}},[x]);let C=async e=>{let t=E.getServerTimeString(),l=[{concept:o.W.ADDITIONAL_NOTES,value:e.additionalNotes,obsDatetime:t},{concept:o.W.CLERK_NAME,value:e.clerkName,obsDatetime:t},{concept:o.W.DESIGNATION,value:e.designation,obsDatetime:t},{concept:o.W.SIGNATURE,value:e.signature,obsDatetime:t}],i={encounterType:o.fA.SURGICAL_NOTES_TEMPLATE_FORM,visit:null==v?void 0:v.uuid,patient:h.id,encounterDatetime:t,obs:l};try{await g(i),console.log("Initial Management submitted successfully!"),a(e),p("/patient/".concat(h.id,"/profile"))}catch(e){console.error("Error submitting Initial Management:",e)}};return(0,eo.useReactToPrint)({contentRef:W}),(0,l.jsxs)(s.PD,{initialValues:{additionalNotes:S.additionalNotes,clerkName:S.clerkName,designation:S.designation,signature:S.signature},validationSchema:eu,onSubmit:C,enableReinitialize:!0,children:[(0,l.jsx)("div",{ref:W,className:"jsx-7b66091306a8e529 printable-content",children:(0,l.jsxs)("div",{className:"jsx-7b66091306a8e529 print-only",children:[(0,l.jsx)(s.TF,{}),(0,l.jsx)("h1",{style:{textAlign:"center",marginBottom:"20px"},className:"jsx-7b66091306a8e529",children:"Surgical Notes"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Presenting Complaints:"})," ",f.complaints]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Presenting History:"})," ",f.history]}),(0,l.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Past Medical History"}),D.length>0?(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("thead",{className:"jsx-7b66091306a8e529",children:(0,l.jsxs)("tr",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Condition"}),(0,l.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"On Treatment"}),(0,l.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Medication"}),(0,l.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Medication Dose"}),(0,l.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Reason for Request"}),(0,l.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},className:"jsx-7b66091306a8e529",children:"Medication Duration"})]})}),(0,l.jsx)("tbody",{className:"jsx-7b66091306a8e529",children:D.map((e,a)=>(0,l.jsxs)("tr",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.condition}),(0,l.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.onTreatment}),(0,l.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.medication}),(0,l.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.medicationDose}),(0,l.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.reasonForRequest}),(0,l.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-7b66091306a8e529",children:e.medicationDuration})]},a))})]}):(0,l.jsx)("p",{className:"jsx-7b66091306a8e529",children:"No past medical history recorded."}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Surgical History:"})," ",f.surgicalHistory]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Surgical Procedure:"})," ",f.surgicalProcedure]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Family History:"})," ",f.familyHistory.length>0?f.familyHistory.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Allergies:"})," ",f.allergies||"None"]}),(0,l.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Social History"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Smoking Status:"})," ",f.smoking.status||"Unknown"]}),"Yes"===f.smoking.status&&(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Cigarettes per day:"})," ",f.smoking.duration||"Unknown"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Alcohol Intake:"})," ",f.alcoholIntake?"".concat(f.alcoholIntake," units per day"):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Recreational Drugs:"})," ",f.recreationalDrugs||"None"]}),(0,l.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Review of Systems"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"General:"})," ",_.general.length>0?_.general.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"ENT:"})," ",_.ent.length>0?_.ent.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Endocrine:"})," ",_.endocrine.length>0?_.endocrine.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Cardiac:"})," ",_.cardiac.length>0?_.cardiac.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Respiratory:"})," ",_.respiratory.length>0?_.respiratory.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Gastrointestinal:"})," ",_.gastrointestinal.length>0?_.gastrointestinal.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Genitourinary:"})," ",_.genitourinary.length>0?_.genitourinary.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Musculoskeletal:"})," ",_.musculoskeletal.length>0?_.musculoskeletal.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Neurologic:"})," ",_.neurologic.length>0?_.neurologic.join(", "):"None"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Psychiatric:"})," ",_.psychiatric.length>0?_.psychiatric.join(", "):"None"]}),(0,l.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Physical Examination"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"General Condition:"})," ",T.generalCondition||"Not recorded"]}),(0,l.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Vitals"}),(0,l.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"10px"},className:"jsx-7b66091306a8e529",children:[(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Temperature:"})," ",T.temperature||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Pulse Rate:"})," ",T.pulseRate||"Not recorded"," bpm"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Blood Pressure:"})," ",T.bloodPressure||"Not recorded"," mmHg"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Respiratory Rate:"})," ",T.respiratoryRate||"Not recorded"," breaths/min"]})]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Eyes:"})," ",T.eyes||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Mouth:"})," ",T.mouth||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Neck:"})," ",T.neck||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Chest Examination:"})," ",T.chest||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Endocrine Examination:"})," ",T.endocrine||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Abdominal Examination:"})," ",T.abdominal||"Not recorded"]}),(0,l.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Glasgow Coma Scale (GCS)"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Motor Response:"})," ",T.motorResponse||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Verbal Response:"})," ",T.verbalResponse||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Eye Response:"})," ",T.eyeResponse||"Not recorded"]}),(0,l.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Additional Examinations"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Cranial Nerves:"})," ",T.cranialNerves||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Gross Motor:"})," ",T.grossMotor||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Sensation:"})," ",T.sensation||"Not recorded"]}),(0,l.jsx)("h3",{className:"jsx-7b66091306a8e529",children:"Extremities"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Pulsations:"})," ",T.pulsations||"Not recorded"]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Rectal Examination:"})," ",T.rectalExamination||"Not recorded"]}),(0,l.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Working Differential Diagnosis:"})," ",f.differentialDiagnosis||"None"]}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Investigations"}),(0,l.jsx)(ee.M,{}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Medications"}),(0,l.jsx)(ec.Z,{setRow:m}),(0,l.jsx)("hr",{className:"jsx-7b66091306a8e529"}),(0,l.jsx)("h2",{className:"jsx-7b66091306a8e529",children:"Clerking Details"}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Additional Notes:"})," ",S.additionalNotes]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Clerk Name:"})," ",S.clerkName]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Designation:"})," ",S.designation]}),(0,l.jsxs)("p",{className:"jsx-7b66091306a8e529",children:[(0,l.jsx)("strong",{className:"jsx-7b66091306a8e529",children:"Signature:"})," ",S.signature]})]})}),(0,l.jsxs)(s.GE,{direction:"column",children:[(0,l.jsxs)(s.jD,{sx:{bgcolor:"white",padding:"2ch",width:"100%"},children:[(0,l.jsx)(ec.Z,{setRow:m,showPrintButton:!1}),(0,l.jsx)(s.kI,{title:"Additional Information",children:(0,l.jsx)(s.A8,{sx:{width:"100%"},name:"additionalNotes",label:"Additional Notes",multiline:!0,rows:5,placeholder:"Enter any additional information here...",id:""})}),(0,l.jsxs)(s.kI,{title:"Clerk Information",children:[(0,l.jsx)(s.A8,{name:"clerkName",label:"Clerked by (Name)",id:""}),(0,l.jsx)(s.A8,{name:"designation",label:"Designation",id:""}),(0,l.jsx)(s.A8,{name:"signature",label:"Signature",placeholder:"E.g J.Smith",id:""})]})]}),(0,l.jsx)(ed.r,{ref:y,onPrintComplete:()=>{console.log("Surgical notes PDF generated successfully!")}})]}),(0,l.jsx)(er(),{id:"7b66091306a8e529",children:"@media print{.print-only.jsx-7b66091306a8e529{display:block!important}}.print-only.jsx-7b66091306a8e529{display:none}"})]})},eh=()=>{let{gender:e}=(0,n.gd)(),[a,t]=(0,i.useState)(0),{navigateBack:r}=(0,n.cq)(),o=[{id:0,label:"Presenting Complaints"},{id:1,label:"Past Medical History"},{id:2,label:"Past Surgical History"},{id:3,label:"Family History"},{id:4,label:"Allergies"},{id:5,label:"Social History"},..."Female"===e?[{id:6,label:"Gynae History"}]:[],{id:7,label:"Review of Systems"},{id:8,label:"Physical Examination"},{id:9,label:"Working Differential Diagnosis"},{id:10,label:"Investigations"},{id:11,label:"Initial Management"}];return(0,i.useEffect)(()=>{console.log("Active step is now: ".concat(a))},[a]),(0,l.jsxs)(s.RG,{title:"Surgical Notes",steps:o,active:a,setActive:t,onBack:()=>r(),children:[(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(j,{onSkip:()=>{},onSubmit:()=>t(1)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f,{onSkip:()=>{},onSubmit:()=>t(2)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(R,{onSkip:()=>{},onSubmit:()=>t(3)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(O,{onSkip:()=>{},onSubmit:()=>t(4)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(k,{onSkip:()=>{},onSubmit:()=>t(5)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(w,{onSkip:()=>{},onSubmit:()=>t(6)})}),"Female"===e&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y,{onSkip:()=>{},onSubmit:()=>t(7)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(q,{onSkip:()=>{},onSubmit:()=>t(8)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(z,{onSkip:()=>{},onSubmit:()=>t(9)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)($,{onSkip:()=>{},onSubmit:()=>t(10)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(es,{onSkip:()=>{},onSubmit:()=>t(11)})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(em,{onSkip:()=>{},onSubmit:()=>{}})})]})}},36269:(e,a,t)=>{"use strict";t.d(a,{x:()=>c});var l=t(95155),i=t(99284),s=t(50095),n=t(77498),r=t(26403),o=t(12115);function c(e){let{label:a,options:t,getValue:c,defaultValue:d}=e,[u,m]=o.useState("");return(0,l.jsxs)(n.A,{size:"small",fullWidth:!0,children:[(0,l.jsx)(i.A,{id:"demo-select-small-label",children:a}),(0,l.jsx)(r.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:d,value:u,label:a,onChange:e=>{m(e.target.value),c&&c(e.target.value)},children:t.map(e=>(0,l.jsx)(s.A,{value:e.value,children:e.label},e.value))})]})}},42281:(e,a,t)=>{"use strict";t.d(a,{iE:()=>s,Zt:()=>u,iL:()=>d,f6:()=>o,gX:()=>c,ZM:()=>m,k$:()=>h}),t(16380);var l=t(24752),i=t.n(l);let s=e=>{let{title:a,text:t,icon:l,onConfirm:s,confirmButtonText:n,cancelButtonText:r="Cancel"}=e;i().fire({title:a,text:t,icon:l,showCancelButton:!0,confirmButtonColor:"#006401",confirmButtonText:n,cancelButtonText:r}).then(e=>{e.isConfirmed&&s()})};var n=t(23312),r=t(6314);let o=e=>Object.keys(e).reduce((a,t)=>(a[e[t].name]="",a),{}),c=(e,a)=>Object.keys(e).map(t=>({concept:t,value:e[t],obsDatetime:a})),d=(e,a,t)=>{let l=Object.keys(e).map(a=>({concept:e[a].name,label:e[a].label})),i=a.map(e=>({concept:e.id,label:e.label}));return[...l,...t.map(e=>({concept:e.value,label:e.label})),...i]},u=async e=>(await r.Fh.initialize(),e.map(e=>({concept:n.W.IMAGE_PART_NAME,value:e.label,obsDateTime:r.Fh.getServerTimeString(),groupMembers:e.formData.obs}))),m=function(e,a,t){return arguments.length>3&&void 0!==arguments[3]&&arguments[3],Array.isArray(e)?e.map(e=>({concept:a,value:e.id,obsDatetime:t})):[]},h=async(e,a,t)=>(await r.Fh.initialize(),Object.entries(a).map(a=>{let[l,i]=a,s=Object.keys(e).find(a=>e[a].name===l);if(!s)return null;let n=e[s].name,o=e[s].coded;return Array.isArray(i)&&i.every(e=>e&&void 0!==e.id)?i.map(e=>({key:n,value:e.id,coded:o})):{concept:n,value:i,coded:o,obsDatetime:t||r.Fh.getServerTimeString()}}).flat().filter(Boolean))},47292:(e,a,t)=>{"use strict";t.d(a,{q:()=>N});var l=t(95155);t(12115);var i=t(15876),s=t(25949),n=t(33470),r=t(3967),o=t(72137),c=t(57236),d=t(89915),u=t(26096),m=t(53494),h=t(35881);let p=(0,h.Ay)(i.A)(e=>{let{theme:a}=e;return{borderRadius:a.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:a.shadows[3],position:"relative"}}),x=(0,h.Ay)(s.A)(e=>{let{theme:a}=e;return{borderCollapse:"separate",borderSpacing:"0px 4px"}}),b=(0,h.Ay)(n.A)(e=>{let{theme:a}=e;return{fontWeight:500,padding:"12px 16px",borderBottom:"none",color:a.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"}}),g=(0,h.Ay)(b)(e=>{let{theme:a}=e;return{fontSize:"0.9rem",fontWeight:"bold",backgroundColor:a.palette.background.default,textTransform:"uppercase"}}),v=(0,h.Ay)(r.A)(e=>{let{theme:a}=e;return{backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:a.palette.grey[100]},boxShadow:a.shadows[1]}}),j=(0,h.Ay)("div")(e=>{let{theme:a}=e;return{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1}}),N=e=>{let{columns:a,data:t,actions:i=!1,getSelectedRow:s,loading:h=!1}=e;return(0,l.jsx)(p,{children:(0,l.jsxs)(x,{stickyHeader:!0,children:[(0,l.jsx)(o.A,{children:(0,l.jsxs)(r.A,{children:[a.map((e,a)=>(0,l.jsx)(g,{children:e.label},a)),i&&(0,l.jsx)(g,{children:"Actions"})]})}),(0,l.jsx)(c.A,{children:h?(0,l.jsx)(r.A,{children:(0,l.jsx)(n.A,{colSpan:a.length+ +!!i,children:(0,l.jsx)(j,{children:(0,l.jsx)(d.A,{})})})}):t.map((e,t)=>(0,l.jsxs)(v,{onClick:()=>s&&s(e),children:[a.map((a,t)=>(0,l.jsx)(u.A,{title:e[a.field],arrow:!0,children:(0,l.jsx)(b,{children:e[a.field]})},t)),i&&(0,l.jsxs)(b,{children:[(0,l.jsx)(m.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,l.jsx)(m.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},t))})]})})}},48576:(e,a,t)=>{"use strict";t.d(a,{fS:()=>v,G5:()=>g,Xt:()=>x,Jl:()=>p,RO:()=>b});var l=t(23312),i=t(44919),s=t(83436);let n=e=>d(e),r=()=>d(l.W.INVESTIGATIONS),o=e=>(0,i.vt)(e,"/lab/orders"),c=e=>(0,i.UK)("/lab/orders?patient=".concat(e)),d=async e=>{let a=await (0,s.cr)(e);return(0,i.UK)("/concepts/".concat(null==a?void 0:a.data[0].uuid,"/set_members?paginate=false"))};var u=t(19373),m=t(26715),h=t(5041);let p=e=>{let a=async()=>n(e).then(e=>e.data.filter(e=>e.names.length>0&&e.names.some(e=>null==e?void 0:e.name)).map(e=>{var a;return{...e,name:null==(a=e.names.find(e=>null==e?void 0:e.name))?void 0:a.name}}).sort((e,a)=>e.name.localeCompare(a.name)));return(0,u.I)({queryKey:["testTypes",e],queryFn:a,enabled:!0})},x=()=>{let e=async()=>r().then(e=>e.data.sort((e,a)=>e.names[0].name.localeCompare(a.names[0].name)));return(0,u.I)({queryKey:["getSpecimenTypes"],queryFn:e,enabled:!0})},b=e=>{let a=async()=>c(e).then(e=>e.data);return(0,u.I)({queryKey:["patientsOrder",e],queryFn:a,enabled:!0})},g=e=>{let a=async()=>d(e).then(e=>e.data);return(0,u.I)({queryKey:["concept-setMembers",e],queryFn:a,enabled:!1})},v=e=>{let a=(0,m.jE)();return(0,h.n)({mutationFn:e=>o(e).then(e=>e.data),onSuccess:()=>{a.invalidateQueries({queryKey:["patientsOrder"]})}})}},85529:(e,a,t)=>{Promise.resolve().then(t.bind(t,28965)),Promise.resolve().then(t.bind(t,84848)),Promise.resolve().then(t.bind(t,25934)),Promise.resolve().then(t.bind(t,49094)),Promise.resolve().then(t.bind(t,37415)),Promise.resolve().then(t.bind(t,81896)),Promise.resolve().then(t.bind(t,48339)),Promise.resolve().then(t.bind(t,5154)),Promise.resolve().then(t.bind(t,4154)),Promise.resolve().then(t.bind(t,88904)),Promise.resolve().then(t.bind(t,8541)),Promise.resolve().then(t.bind(t,9311)),Promise.resolve().then(t.bind(t,90584)),Promise.resolve().then(t.bind(t,4183)),Promise.resolve().then(t.bind(t,27859)),Promise.resolve().then(t.bind(t,96756)),Promise.resolve().then(t.bind(t,13067)),Promise.resolve().then(t.bind(t,54729)),Promise.resolve().then(t.bind(t,54028)),Promise.resolve().then(t.bind(t,66118)),Promise.resolve().then(t.bind(t,94836)),Promise.resolve().then(t.bind(t,62564)),Promise.resolve().then(t.bind(t,39810)),Promise.resolve().then(t.bind(t,16150)),Promise.resolve().then(t.bind(t,11508)),Promise.resolve().then(t.bind(t,80233)),Promise.resolve().then(t.bind(t,35950)),Promise.resolve().then(t.bind(t,97904)),Promise.resolve().then(t.bind(t,53485)),Promise.resolve().then(t.bind(t,22697)),Promise.resolve().then(t.bind(t,40478)),Promise.resolve().then(t.bind(t,47607)),Promise.resolve().then(t.bind(t,10651)),Promise.resolve().then(t.bind(t,14352)),Promise.resolve().then(t.bind(t,67524)),Promise.resolve().then(t.bind(t,49262)),Promise.resolve().then(t.bind(t,52269)),Promise.resolve().then(t.bind(t,43388)),Promise.resolve().then(t.bind(t,54102)),Promise.resolve().then(t.bind(t,83025)),Promise.resolve().then(t.bind(t,3951)),Promise.resolve().then(t.bind(t,53494)),Promise.resolve().then(t.bind(t,81063)),Promise.resolve().then(t.bind(t,5056)),Promise.resolve().then(t.bind(t,85463)),Promise.resolve().then(t.bind(t,26591)),Promise.resolve().then(t.bind(t,84350)),Promise.resolve().then(t.bind(t,67172)),Promise.resolve().then(t.bind(t,88921)),Promise.resolve().then(t.bind(t,9670))}},e=>{var a=a=>e(e.s=a);e.O(0,[5639,16,9344,8250,2225,3740,8320,6987,2073,5062,4821,6448,7129,4536,5246,5976,9487,5307,8441,1684,7358],()=>a(85529)),_N_E=e.O()}]);