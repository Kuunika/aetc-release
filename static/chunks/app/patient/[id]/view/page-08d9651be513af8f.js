(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9822],{23933:(e,t,i)=>{"use strict";i.d(t,{c4:()=>x,vY:()=>m,oC:()=>h});var l=i(95155),a=i(9890),n=i(59487),s=i(12115),r=i(23312),d=i(53988),o=i(96527),u=i(89915),c=i(14120);let h=e=>{let{socialHistory:t,loading:i,onSubmit:a,disabled:o}=e,[c,h]=(0,s.useState)(!1),x=(0,d.m)(null==t?void 0:t.obs,r.W.MARITAL_STATUS),m=(0,d.m)(null==t?void 0:t.obs,r.W.RELIGION),f=(0,d.m)(null==t?void 0:t.obs,r.W.OCCUPATION),p=(0,d.m)(null==t?void 0:t.obs,r.W.METHOD_OF_TRANSPORTATION),g=(0,d.m)(null==t?void 0:t.obs,r.W.HIGHEST_EDUCATION);return i?(0,l.jsx)(n.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})}):(0,l.jsxs)(v,{children:[(0,l.jsx)(b,{onSubmit:e=>{a(e),h(!1)},initialValues:{[r.W.MARITAL_STATUS]:x,[r.W.RELIGION]:m,[r.W.OCCUPATION]:f,[r.W.METHOD_OF_TRANSPORTATION]:p,[r.W.HIGHEST_EDUCATION]:g},open:c,onClose:()=>h(!1)}),(0,l.jsx)(n.Th,{variant:"h5",children:"Social History"}),(0,l.jsx)(j,{label:"Marital Status",value:x}),(0,l.jsx)(j,{label:"Religion",value:m}),(0,l.jsx)(j,{label:"Occupation",value:f}),(0,l.jsx)(j,{label:"Transportation",value:p}),(0,l.jsx)(j,{label:"Highest Education",value:g}),(0,l.jsx)(n.O6,{disabled:o,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>h(!0)})]})},x=e=>{let{financing:t,loading:i,onSubmit:a,disabled:o}=e,[c,h]=(0,s.useState)(!1),[x,m]=(0,s.useState)({paymentOptions:"",insuranceProvider:"",insuranceNumber:"",insuranceScheme:"",insuranceStatus:""});if((0,s.useEffect)(()=>{let e=(0,d.m)(null==t?void 0:t.obs,"c7bcc8bd-09d5-4f98-8d58-5179f749fd99"),i=(0,d.m)(null==t?void 0:t.obs,"b0ffce26-2d25-449e-871e-c702e44bb37e"),l=(0,d.m)(null==t?void 0:t.obs,"98b08fb2-f877-45b6-a95a-db89dffefb27");m({paymentOptions:e,insuranceProvider:i,insuranceNumber:l,insuranceScheme:(0,d.m)(null==t?void 0:t.obs,"db2e6bba-7d04-4873-a0a2-ac7bd69dd7b1"),insuranceStatus:(0,d.m)(null==t?void 0:t.obs,"3cdd53d9-35a5-47e5-909f-654e5bc7c9a8")})},[t]),i)return(0,l.jsx)(n.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})});let{paymentOptions:b,insuranceProvider:p,insuranceNumber:g,insuranceScheme:y,insuranceStatus:_}=x;return(0,l.jsxs)(v,{children:[(0,l.jsx)(f,{onSubmit:e=>{a(e),h(!1)},initialValues:{[r.W.PAYMENT_OPTIONS]:[b],[r.W.INSURANCE_PROVIDER]:p,[r.W.INSURANCE_NUMBER]:g,[r.W.INSURANCE_STATUS]:_,[r.W.INSURANCE_SCHEME]:y},open:c,onClose:()=>h(!1)}),(0,l.jsx)(n.Th,{variant:"h5",children:"Financing"}),(0,l.jsx)(j,{label:"Payment Option",value:b}),(0,l.jsx)(j,{label:"Insurance Provider",value:p}),(0,l.jsx)(j,{label:"Insurance Number",value:g}),(0,l.jsx)(j,{label:"Insurance Scheme",value:y}),(0,l.jsx)(j,{label:"Insurance Status",value:_}),(0,l.jsx)(n.O6,{disabled:o,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>h(!0)})]})},m=e=>{let{patientId:t,disabled:i}=e,{data:d,isPending:o,refetch:h}=(0,a.B$)(t),[x,m]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),{data:g,isPending:y}=(0,a.vi)(),[_,S]=(0,s.useState)({}),[C,E]=(0,s.useState)(""),{mutate:N,isPending:A,isSuccess:O,isError:T,data:D}=(0,c.bJ)(),{mutateAsync:I,isSuccess:k,data:W}=(0,a.Wv)(),{mutate:V,isPending:L,isSuccess:R,data:H,isError:P}=(0,c.AU)(),[w,U]=(0,s.useState)(!0),[G,F]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{O&&D&&V({patient:t,person:null==D?void 0:D.uuid,nextOfKinRelationship:C})},[O]),(0,s.useEffect)(()=>{R&&(h(),f(!1),U(!0),F(!1))},[R]),o||y||A||L)return(0,l.jsx)(n.jD,{sx:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(u.A,{})});let B=null==d?void 0:d.map(e=>{let t=e.relationship,i=null==g?void 0:g.find(e=>e.relationship_type_id==t),l=null==g?void 0:g.find(e=>e.a_is_to_b==(null==i?void 0:i.b_is_to_a));return{given_name:e.person_b.names[0].given_name,family_name:e.person_b.names[0].family_name,relationship:null==i?void 0:i.b_is_to_a,relationshipUUID:null==l?void 0:l.uuid,person:e.person_b.uuid}}),M=e=>{E(e.relationship),N({nextOfKinFirstName:e.given_name,nextOfKinLastName:e.family_name})},z=async e=>{let t={identifiers:[],names:[{givenName:e.given_name,familyName:e.family_name}]};await I({id:e.person,data:t}),h(),m(!1),U(!0),F(!1)};return(0,l.jsxs)(n.jD,{sx:{display:"flex",width:(null==B?void 0:B.length)==1?"50%":"100%"},children:[(0,l.jsx)(p,{onSubmit:w?z:M,initialValues:{..._,...G?{relationship:r.W.GUARDIAN}:{}},open:x,isGuardian:G,onClose:()=>{m(!1),U(!0),F(!1)}}),(0,l.jsx)(p,{onSubmit:w?z:M,isGuardian:!0,initialValues:{relationship:r.W.GUARDIAN},open:b,onClose:()=>{f(!1),U(!0),F(!1)}}),null==B?void 0:B.map(e=>{var t;return(0,l.jsxs)(v,{children:[(0,l.jsx)(n.Th,{variant:"h5",children:(null==(t=e.relationship)?void 0:t.toLowerCase())=="guardian"?"Guardian Information":"Next Of Kin Information"}),(0,l.jsx)(j,{label:"First Name",value:e.given_name}),(0,l.jsx)(j,{label:"Last Name",value:e.family_name}),(0,l.jsx)(j,{label:"Relationship",value:e.relationship}),(0,l.jsx)(n.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>{var t;m(!0),(null==(t=e.relationship)?void 0:t.toLowerCase())=="guardian"&&F(!0),S({...e,relationship:e.relationshipUUID})}})]})}),(0,l.jsxs)(l.Fragment,{children:[(null==B?void 0:B.length)==0&&(0,l.jsx)(n.O6,{sx:{alignSelf:"flex-start",mr:"1px"},title:"Add Next Of Kin",onClick:()=>{U(!1),m(!0)}}),((null==B?void 0:B.length)==1||(null==B?void 0:B.length)==0)&&(0,l.jsx)(n.O6,{disabled:i,sx:{alignSelf:"flex-start"},title:"Add Guardian",onClick:()=>{U(!1),f(!0)}})]})]})},v=e=>{let{children:t}=e;return(0,l.jsx)(n.sc,{sx:{p:"1ch",flex:1,mx:"0.5ch"},children:t})},j=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(n.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(n.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(n.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})},b=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(n.eV,{maxWidth:"sm",title:"Edit Social History",open:t,onClose:i,children:(0,l.jsx)(o._T,{initialValues:a,onSubmit:s})})},f=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:s}=e;return(0,l.jsx)(n.eV,{maxWidth:"sm",title:"Edit Financing",open:t,onClose:i,children:(0,l.jsx)(o.OE,{initialValues:a,onSubmit:s})})},p=e=>{let{open:t,onClose:i,initialValues:a,isGuardian:s,onSubmit:r}=e;return(0,l.jsx)(n.eV,{maxWidth:"sm",title:"Edit Relationships",open:t,onClose:i,children:(0,l.jsx)(o.tc,{isGuardian:s,initialValues:a,onSubmit:r})})}},34149:function(e,t,i){e.exports=function(e,t){"use strict";let i=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],l=()=>{};return function(a){function n(t){let l={},a={},n=i.map(e=>e.key);return Object.entries(t).forEach(t=>{let[i,s]=t;n.includes(i)&&e.isValidElement(s)?(l[i]=s,a[i]=" "):a[i]=s}),[l,a]}function s(e,l){Object.entries(l).forEach(l=>{let[n,s]=l,r=i.find(e=>e.key===n).getter(a),d=t.createRoot(r);d.render(s),e.__roots.push(d)})}function r(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends a{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return a.argsToParams(t);{let e={};return["title","html","icon"].forEach((i,l)=>{void 0!==t[l]&&(e[i]=t[l])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[i,a]=n(this.__params),d=a.willOpen||l,o=a.didOpen||l,u=a.didDestroy||l;return super._main(Object.assign({},a,{willOpen:e=>{s(this,i),d(e)},didOpen:e=>{setTimeout(()=>{o(e)})},didDestroy:e=>{u(e),r(this)}}))}update(e){Object.assign(this.__params,e),r(this);let[t,i]=n(this.__params);super.update(i),s(this,t)}}}}(i(12115),i(12669))},49646:(e,t,i)=>{Promise.resolve().then(i.bind(i,58657))},52701:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});var l=i(76856),a=i(95155);let n=(0,l.A)((0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},58657:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var l=i(95155),a=i(70482),n=i(83436),s=i(9890),r=i(59487),d=i(23312),o=i(94713),u=i(23933);let c=()=>{let{params:e}=(0,a.KU)(),{data:t,isLoading:i}=(0,s.GN)(e.id),{data:c,isPending:h}=(0,n.$O)(e.id),{data:x,isPending:m}=(0,s.B$)(e.id),v=null==c?void 0:c.find(e=>e.encounter_type.uuid==d.fA.SOCIAL_HISTORY),j=null==c?void 0:c.find(e=>e.encounter_type.uuid==d.fA.FINANCING);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)(o.l,{disabled:!1,patient:null!=t?t:{}}),(0,l.jsxs)(r.jD,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(u.vY,{disabled:!1,patientId:e.id,loading:m,relationships:x||[]})]}),(0,l.jsxs)(r.jD,{sx:{display:"flex",mt:"1ch"},children:[(0,l.jsx)(u.oC,{disabled:!1,onSubmit:()=>{},loading:h||i,socialHistory:v||{}}),(0,l.jsx)(u.c4,{disabled:!1,onSubmit:()=>{},loading:h||i,financing:j||{}})]})]})})}},94713:(e,t,i)=>{"use strict";i.d(t,{l:()=>h});var l=i(95155),a=i(12115),n=i(59487),s=i(25061),r=i(48339),d=i(96527),o=i(23312),u=i(9890),c=i(15377);let h=e=>{let{patient:t,disabled:i}=e,[s,r]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),{mutate:g,isPending:y,isSuccess:_,data:S}=(0,u.Wv)(),[C,E]=(0,a.useState)({firstName:"",lastName:"",birthDate:"",gender:"",birthDateEstimated:""}),[N,A]=(0,a.useState)({nationality:"",district:"",village:"",traditionalAuthority:""}),[O,T]=(0,a.useState)({district:"",traditionalAuthority:"",village:"",closeLandMark:""});(0,a.useEffect)(()=>{D(t),k(t),I(t)},[t]),(0,a.useEffect)(()=>{_&&S&&(D(S),I(S),k(S))},[S,_]);let D=e=>{e&&E({firstName:null==e?void 0:e.given_name,lastName:null==e?void 0:e.family_name,birthDate:null==e?void 0:e.birthdate,gender:null==e?void 0:e.gender,birthDateEstimated:!!(null==e?void 0:e.birthdateEstimated)})},I=e=>{var t,i,l,a,n,s,r,d;e&&A({nationality:null!=(n=null==e||null==(t=e.addresses[0])?void 0:t.country)?n:"",district:null!=(s=null==e||null==(i=e.addresses[0])?void 0:i.address1)?s:"",village:null!=(r=null==e||null==(l=e.addresses[0])?void 0:l.address2)?r:"",traditionalAuthority:null!=(d=null==e||null==(a=e.addresses[0])?void 0:a.county_district)?d:""})},k=e=>{var t,i,l,a,n,s,r,d;e&&T({district:null!=(n=null==e||null==(t=e.addresses[0])?void 0:t.current_district)?n:"",traditionalAuthority:null!=(s=null==e||null==(i=e.addresses[0])?void 0:i.current_traditional_authority)?s:"",village:null!=(r=null==e||null==(l=e.addresses[1])?void 0:l.address1)?r:"",closeLandMark:null!=(d=null==e||null==(a=e.addresses[1])?void 0:a.address2)?d:""})};return(0,l.jsx)(n.jD,{sx:{display:"flex",mt:"1ch"},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.OverlayLoader,{open:y}),(0,l.jsx)(v,{onSubmit:e=>{let i={identifiers:[{identifier:e.identificationNumber,identifierType:o.W.NATIONAL_ID_IDENTIFIER_TYPE,preferred:!0}],names:[{givenName:e.firstName,familyName:e.lastName}],gender:e.gender,birthdateEstimated:e.birthdateEstimated,birthdate:e.birthDate};g({id:t.uuid,data:i}),r(!1)},initialValues:{...C},onClose:()=>r(!1),open:s}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Th,{variant:"h5",children:"Demographics"}),(0,l.jsx)(m,{label:"First Name",value:C.firstName}),(0,l.jsx)(m,{label:"Last Name",value:C.lastName}),(0,l.jsx)(m,{label:"Gender",value:C.gender}),(0,l.jsx)(m,{label:"Date of birth",value:C.birthDate})]}),(0,l.jsx)(n.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>r(!0)})]}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Th,{variant:"h5",children:"Home Location"}),(0,l.jsx)(m,{label:"Country",value:N.nationality}),(0,l.jsx)(m,{label:"Home District",value:N.district}),(0,l.jsx)(m,{label:"Home Traditional Authority",value:N.traditionalAuthority}),(0,l.jsx)(m,{label:"Home Village",value:N.village})]}),(0,l.jsx)(j,{onSubmit:e=>{let i=[{address1:e.district,address2:e.village,address3:O.district,stateProvince:O.traditionalAuthority,countyDistrict:e.traditionalAuthority,cityVillage:e.traditionalAuthority,country:e.nationality,preferred:!0},{address1:O.village,address2:O.closeLandMark,countryDistrict:O.district,cityVillage:O.traditionalAuthority,preferred:!1}];g({id:t.uuid,data:{addresses:i}}),h(!1)},initialValues:N,open:d,onClose:()=>h(!1)}),(0,l.jsx)(n.O6,{disabled:i,variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>h(!0)})]}),(0,l.jsxs)(x,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Th,{variant:"h5",children:"Current Location"}),(0,l.jsx)(m,{label:"Current District",value:O.district}),(0,l.jsx)(m,{label:"Current Traditional Authority",value:O.traditionalAuthority}),(0,l.jsx)(m,{label:"Current Village",value:O.village}),(0,l.jsx)(m,{label:"Close Land Mark",value:O.closeLandMark})]}),(0,l.jsx)(b,{onSubmit:e=>{var i;let l=[{address1:N.district,address2:N.village,address3:e.district,stateProvince:e.traditionalAuthority,countyDistrict:N.traditionalAuthority,cityVillage:N.traditionalAuthority,country:N.nationality,preferred:!0},{address1:e.village,address2:null==t||null==(i=t.addresses[1])?void 0:i.address2,countryDistrict:e.district,cityVillage:e.traditionalAuthority,preferred:!1}];g({id:t.uuid,data:{addresses:l}}),p(!1)},onClose:()=>p(!1),initialValues:O,open:f}),(0,l.jsx)(n.O6,{variant:"secondary",sx:{width:"10%"},title:"Edit",onClick:()=>p(!0)})]})]})})},x=e=>{let{children:t}=e;return(0,l.jsx)(n.sc,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",p:"1ch",flex:1,mx:"0.5ch"},children:t})},m=e=>{let{label:t,value:i}=e;return(0,l.jsxs)(n.jD,{sx:{display:"flex",alignItems:"flex-start",py:"0.5ch",mb:"0.5ch",borderBottom:"#D8D8D8 solid 1px"},children:[(0,l.jsx)(n.Th,{width:"20ch",sx:{fontSize:"0.8rem"},children:t}),(0,l.jsx)(n.Th,{fontWeight:"900",sx:{fontSize:"0.8rem",textTransform:"capitalize"},children:i})]})},v=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Demographics",open:t,onClose:i,children:(0,l.jsx)(s.H,{onSubmit:n,initialValues:a})})},j=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Home Location",open:t,onClose:i,children:(0,l.jsx)(d.CB,{initialValues:a,onSubmit:n})})},b=e=>{let{open:t,onClose:i,initialValues:a,onSubmit:n}=e;return(0,l.jsx)(r.GenericDialog,{maxWidth:"sm",title:"Edit Current Location",open:t,onClose:i,children:(0,l.jsx)(d.CB,{currentLocation:!0,initialValues:a,onSubmit:n})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5639,16,9344,8250,2225,3740,8320,3349,9306,6987,2073,5062,4821,6448,7129,4536,6874,5976,9487,8130,342,6232,1349,5314,6527,8441,1684,7358],()=>t(49646)),_N_E=e.O()}]);