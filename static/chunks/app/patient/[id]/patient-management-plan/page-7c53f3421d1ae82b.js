(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3328],{6459:(e,t,i)=>{"use strict";i.d(t,{h:()=>r});var a=i(95155),n=i(52269),l=i(89915);let r=e=>{let{loading:t,children:i,height:r="100%"}=e;return(0,a.jsxs)(n.default,{sx:{position:"relative",width:"100%",height:r},children:[t&&(0,a.jsx)(n.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,a.jsx)(l.A,{})}),(0,a.jsx)(n.default,{sx:{opacity:t?.5:1,pointerEvents:t?"none":"auto"},children:i})]})}},9802:(e,t,i)=>{"use strict";function a(e){let{presentingComplaints:t,diagnosis:i,labOrders:a,dischargeNotes:n,dischargePlan:l,followUpPlan:r,homeCareInstructions:o}=e,c=e=>Math.round(203*e/25.4),s=c(100),u=c(40),d=s-40,p=Math.floor(d/8),m=[{title:"Discharge Notes",content:n||"N/A"},{title:"Investigations",content:a.length?a.flatMap(e=>e.tests.map(e=>"".concat(e.name,":").concat(e.result||"pending"))).join(" ! "):"No investigations ordered"},{title:"Final Diagnosis",content:(null==i?void 0:i.length)?i.map(e=>e.value).join(" ! "):"None"},{title:"Discharge Plan",content:l||"N/A"},{title:"Follow Up Plan",content:"".concat(r)||"N/A"},{title:"Home Care Instructions",content:o||"N/A"}],h=[];m.forEach((e,t)=>{h.push({text:e.title,isTitle:!0,sectionIndex:t}),(function(e){if(!e)return[];let t=e.split(" "),i=[],a="";for(let e of t){if(e.length>p){a&&(i.push(a),a="");for(let t=0;t<e.length;t+=p){let a=e.substring(t,t+p);i.push(a)}continue}let t=a?"".concat(a," ").concat(e):e;t.length<=p?a=t:(a&&i.push(a),a=e)}return a&&i.push(a),i})(e.content).forEach(e=>{h.push({text:e,isTitle:!1,sectionIndex:t})})});let I=[],A=[],S=70;for(let e=0;e<h.length;e++){let t=h[e],i=0;if(A.length>0){let e=A[A.length-1];t.sectionIndex!==e.sectionIndex&&(i=10)}let a=i+(t.isTitle?30:25);if(S+a>u-20){if(0===A.length){A.push(t),I.push(A),A=[],S=20;continue}I.push(A),A=[],S=20,e--;continue}A.push(t),S+=a}return A.length>0&&I.push(A),I.map((e,t)=>{let i=20,a="^XA\n^PW".concat(s,"\n^LL").concat(u,"\n^CF0,25");0===t?(a+="\n^FO".concat(20,",").concat(20,"^FDPatient Summary-QECH AETC^FS\n^FO").concat(20,",").concat(60,"^GB").concat(d,",3,3^FS"),i=70):i=20;let n=-1;for(let t of e)t.sectionIndex!==n&&(-1!==n&&(i+=10),n=t.sectionIndex),t.isTitle?(a+="\n^CF0,25\n^FO".concat(20,",").concat(i,"^FD").concat(t.text,"^FS"),i+=30):(a+="\n^CF0,20\n^FO".concat(20,",").concat(i,"^FD").concat(t.text,"^FS"),i+=25);return a+"\n^XZ"}).join("\n")}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Medication Instructions",i=Math.floor(68.21428571428571),a=[],n=[],l=0,r=1;function o(e,i){let a=["^XA","^CF0,25","^FO".concat(30,",30^").concat(t).concat(i>1?" (Cont. ".concat(i,")"):"","^FS"),"^FO".concat(30,",").concat(60,"^GB").concat(955,",").concat(3,",").concat(3,"^FS")].join("\n")+"\n",n=68;for(let t of e){for(let e of t)a+="^FO".concat(30,",").concat(n,"^FD").concat(e,"^FS\n"),n+=20;n+=10}return a+"^XZ"}return e.forEach(e=>{let t=function(e){let t=e.split(" "),a=[],n="";for(let e of t)(n+" "+e).trim().length<=i?n=(n+" "+e).trim():(a.push(n),n=e);return n&&a.push(n),a}(function(e,t){let i=[e.medicationName,"".concat(e.dose," ").concat(e.doseUnits),e.frequency,e.duration,e.formulation,"(".concat(e.prescribedBy,")")].filter(Boolean).map(e=>e.replace(/[\\^]/g,""));return"".concat(t,". ").concat(i.join(" | "))}(e,r)),c=20*t.length+10;l+c>323&&(a.push(o(n,a.length+1)),n=[],l=0),n.push(t),l+=c,r++}),n.length&&a.push(o(n,a.length+1)),a.join("\n")}i.d(t,{B:()=>n,U:()=>a})},15377:(e,t,i)=>{"use strict";i.d(t,{OverlayLoader:()=>r});var a=i(95155);i(12115);var n=i(90418),l=i(89915);function r(e){let{open:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(n.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:t,children:(0,a.jsx)(l.A,{color:"inherit"})})})}},37940:(e,t,i)=>{Promise.resolve().then(i.bind(i,50492))},39419:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var a=i(95155),n=i(15377),l=i(70482),r=i(12115),o=i(21184),c=i(59487),s=i(66766),u=i(20256);function d(e,t){return function(i){let[c,s]=(0,r.useState)(!1),{navigateTo:d}=(0,l.cq)();(0,r.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){s(!1),d("/"),localStorage.clear();return}}s(!0)}else s(!1),localStorage.clear(),d("/")},[]);let m=(0,o.R)(t,(0,u.O)());return c?m?(0,a.jsx)(e,{...i}):(0,a.jsx)(p,{}):(0,a.jsx)(n.OverlayLoader,{open:!c})}}let p=()=>(0,a.jsx)(c.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,a.jsx)(s.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},39752:(e,t,i)=>{"use strict";i.d(t,{u9:()=>p,wt:()=>A});var a=i(95155),n=i(59487),l=i(12115),r=i(37129),o=i(23312),c=i(83436),s=i(70482),u=i(9890),d=i(49262);let p={procedures:{name:o.W.PROCEDURES,label:"Procedures",type:"string",hasGroupMembers:!0,children:[{concept:o.W.OTHER,label:"Other (Specify)"}]},supportiveCare:{name:o.W.SUPPORTIVE_CARE,label:"Supportive Care",type:"string",hasGroupMembers:!0,children:[{concept:o.W.OTHER,label:"Other (Specify)"}]}},m=[{value:o.W.MINOR_SURGERY,label:"Minor Surgery"},{value:o.W.SUTURING,label:"Suturing"},{value:o.W.JOINT_REDUCTION,label:"Joint Reduction"},{value:o.W.FRACTURE_REDUCTION,label:"Fracture Reduction"},{value:o.W.INTERCOSTAL_DRAIN_INSERTION,label:"Intercostal Drain Insertion"},{value:o.W.PLEUROCENTESIS,label:"Pleurocentesis"},{value:o.W.PERICARDIOCENTESISI,label:"Pericardiocentesis"},{value:o.W.PARACENTESISI,label:"Paracentesis"},{value:o.W.LUMBER_PUNCTURE,label:"Lumbar Puncture"},{value:o.W.INTRAVENOUS_CANNULATION,label:"Intravenous Cannulation"},{value:o.W.CENTRAL_LINE_INSERTION,label:"Central Line Insertion"},{value:o.W.CATHETERIZATION_URETHRAL,label:"Urethral Catheterization"},{value:o.W.CATHETERIZATION_SUPRAPUBIC,label:"Suprapubic Catheterization"},{value:o.W.SUCTIONING,label:"Suctioning"},{value:o.W.OROPHARYNGEAL_AIRWAY_INSERTION,label:"Oropharyngeal Airway Insertion"},{value:o.W.NASOPHARYNGEAL_AIRWAY_INSERTION,label:"Nasopharyngeal Airway Insertion"},{value:o.W.LARYNGEAL_MASK_AIRWAY_INSERTION,label:"Laryngeal Mask Airway Insertion"},{value:o.W.ENDOTRACHEAL_TUBE_INSERTION,label:"Endotracheal Tube Insertion"},{value:o.W.NASOGASTRIC_TUBE_INSERTION,label:"Nasogastric Tube Insertion"},{value:o.W.MANUAL_VENTILATION,label:"Manual Ventilation"},{value:o.W.CONTINUOUS_POSITIVE_AIRWAY_PRESSURE,label:"Continuous Positive Airway Pressure (CPAP)"},{value:o.W.OTHER,label:"Other (Specify)"}],h=[{value:o.W.WOUND_DRESSING,label:"Wound Dressing"},{value:o.W.PATIENT_EDUCATION,label:"Patient Education"},{value:o.W.COUNSELLING,label:"Counselling"},{value:o.W.FEEDING,label:"Feeding"},{value:o.W.OXYGENATION,label:"Oxygenation"},{value:o.W.TEPID_SPONGING,label:"Tepid Sponging"},{value:o.W.ELECTROCARDIOGRAPHY_MONITORING,label:"Electrocardiography (ECG) Monitoring"},{value:o.W.TURNING_PATIENTS,label:"Turning Patients"},{value:o.W.ORAL_CARE,label:"Oral Care"},{value:o.W.OTHER,label:"Other (Specify)"}],I=r.Ik().shape({procedures:r.YO().of(r.Ik().shape({key:r.Yj().required(),value:r.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one procedure must be selected"),otherProcedureSpecify:r.Yj().nullable().when("procedures",{is:e=>e.some(e=>e.key===o.W.OTHER),then:e=>e.required("Please specify the other procedure")}),supportiveCare:r.YO().of(r.Ik().shape({key:r.Yj().required(),value:r.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one supportive care option must be selected"),otherSupportiveCareSpecify:r.Yj().nullable().when("supportiveCare",{is:e=>e.some(e=>e.key===o.W.OTHER),then:e=>e.required("Please specify the other supportive care")})}),A=e=>{let{onSubmit:t,onSkip:i}=e,[r,p]=(0,l.useState)({}),[A,S]=(0,l.useState)({otherProcedure:!1,otherSupportiveCare:!1}),{params:E}=(0,s.KU)(),{mutate:b}=(0,c.jM)(),{data:f}=(0,u.iu)(E.id),[O,T]=(0,l.useState)(void 0),{init:N,ServerTime:v}=(0,d.useServerTime)();(0,l.useEffect)(()=>{if(f){let e=f.find(e=>!e.date_stopped);e&&T(e)}},[f]);let _=async e=>{console.log("Procedures Selected:",e.procedures),console.log("Supportive Care Selected:",e.supportiveCare);let i=v.getServerTimeString(),a=[{concept:o.W.PROCEDURES,value:o.W.PROCEDURES,obsDatetime:i,groupMembers:(e.procedures||[]).filter(e=>!0===e.value).map(t=>({concept:t.key,value:t.key===o.W.OTHER?e.otherProcedureSpecify:t.key,obsDatetime:i}))},{concept:o.W.SUPPORTIVE_CARE,value:o.W.SUPPORTIVE_CARE,obsDatetime:i,groupMembers:(e.supportiveCare||[]).filter(e=>!0===e.value).map(t=>({concept:t.key,value:t.key===o.W.OTHER?e.otherSupportiveCareSpecify:t.key,obsDatetime:i}))}],n={encounterType:o.fA.NON_PHARMACOLOGICAL,visit:null==O?void 0:O.uuid,patient:E.id,encounterDatetime:i,obs:a};try{await b(n),t(e)}catch(e){console.error("Error submitting Non-Pharmacological form: ",e)}};return(0,a.jsxs)(n.PD,{validationSchema:I,initialValues:{procedures:[],supportiveCare:[],otherProcedureSpecify:"",otherSupportiveCareSpecify:""},onSubmit:_,children:[(0,a.jsx)(n.fP,{getValues:p}),(0,a.jsxs)(n.GE,{direction:"row",children:[(0,a.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:[(0,a.jsx)("h4",{children:"Procedures"}),(0,a.jsx)(n.Z3,{name:"procedures",allowFilter:!1,options:m,getValue:e=>S(t=>({...t,otherProcedure:e.some(e=>e.key===o.W.OTHER&&e.value)}))}),A.otherProcedure&&(0,a.jsx)(n.A8,{id:"otherProcedureSpecify",label:"Specify Other Procedure",name:"otherProcedureSpecify",placeholder:"Specify the procedure"})]}),(0,a.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:[(0,a.jsx)("h4",{children:"Supportive Care"}),(0,a.jsx)(n.Z3,{name:"supportiveCare",allowFilter:!1,options:h,getValue:e=>S(t=>({...t,otherSupportiveCare:e.some(e=>e.key===o.W.OTHER&&e.value)}))}),A.otherSupportiveCare&&(0,a.jsx)(n.A8,{id:"otherSupportiveCareSpecify",label:"Specify Other Supportive Care",name:"otherSupportiveCareSpecify",placeholder:"Specify the care"})]})]})]})}},40700:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var a=i(95155),n=i(6459),l=i(47292),r=i(23312),o=i(34801),c=i(1532),s=i(9802),u=i(70482),d=i(83436),p=i(39347),m=i(12115);let h=e=>{let{setRow:t,encounterType:i=r.fA.PRESCRIPTIONS,medicationLabelTitle:h,showPrintButton:I=!0}=e,{patientId:A,activeVisitId:S}=(0,u.gd)(),{setZpl:E,setOpen:b}=(0,o.m)(),{selectedVisit:f}=(0,c.E)(),{data:O,isPending:T}=(0,d.$O)(A,"encounter_type=".concat(i,"&visit=").concat(null==f?void 0:f.uuid)),[N,v]=(0,m.useState)([]),_=(e,t)=>{var i,a;return null==e||null==(a=e.children)||null==(i=a.find(e=>e.names&&e.names[0].name==t))?void 0:i.value};return(0,m.useEffect)(()=>{var e;let t=null==O?void 0:O.filter(e=>e.visit_id==Number(S));if(!t||0==t.length)return void v([]);v(null==(e=t[0])?void 0:e.obs.filter(e=>(null==e?void 0:e.names)&&(null==e?void 0:e.names[0].name)==r.W.DRUG_GIVEN).map(e=>{let t=_(e,r.l8.MEDICATION_DURATION_UNIT),i=_(e,r.W.MEDICATION_DOSE),a=_(e,r.l8.DESCRIPTION),n=_(e,r.l8.MEDICATION_FORMULATION),l=_(e,r.l8.MEDICATION_DOSE_UNIT),o=_(e,r.l8.MEDICATION_FREQUENCY),c=_(e,r.l8.MEDICATION_DURATION)+" "+t,s=e.value_coded_uuid;return{medicationName:e.value,durationUnit:t,dose:i,doseUnits:l,frequency:o,duration:c,formulation:n,description:a,prescribedBy:e.created_by,medicationUUID:s}}).filter(e=>"current"==e.description))},[O]),(0,a.jsxs)(n.h,{loading:T,children:[I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{onClick:()=>{let e=(0,s.B)(N,h);b(e),E(e)},variant:"contained",children:"Print Medications"}),(0,a.jsx)("br",{})]}),(0,a.jsx)(l.q,{getSelectedRow:t,columns:[{label:"Medication Name",field:"medicationName"},{label:"Dose",field:"dose"},{label:"Frequency",field:"frequency"},{label:"Duration",field:"duration"},{label:"Formulation",field:"formulation"},{label:"Prescriber",field:"prescribedBy"}],data:N})]})}},47292:(e,t,i)=>{"use strict";i.d(t,{q:()=>f});var a=i(95155);i(12115);var n=i(15876),l=i(25949),r=i(33470),o=i(3967),c=i(72137),s=i(57236),u=i(89915),d=i(26096),p=i(53494),m=i(35881);let h=(0,m.Ay)(n.A)(e=>{let{theme:t}=e;return{borderRadius:t.shape.borderRadius,overflow:"auto",maxHeight:"400px",minHeight:"95px",boxShadow:t.shadows[3],position:"relative"}}),I=(0,m.Ay)(l.A)(e=>{let{theme:t}=e;return{borderCollapse:"separate",borderSpacing:"0px 4px"}}),A=(0,m.Ay)(r.A)(e=>{let{theme:t}=e;return{fontWeight:500,padding:"12px 16px",borderBottom:"none",color:t.palette.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"}}),S=(0,m.Ay)(A)(e=>{let{theme:t}=e;return{fontSize:"0.9rem",fontWeight:"bold",backgroundColor:t.palette.background.default,textTransform:"uppercase"}}),E=(0,m.Ay)(o.A)(e=>{let{theme:t}=e;return{backgroundColor:"#fff",borderRadius:"8px",transition:"background 0.2s ease-in-out","&:hover":{backgroundColor:t.palette.grey[100]},boxShadow:t.shadows[1]}}),b=(0,m.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:1}}),f=e=>{let{columns:t,data:i,actions:n=!1,getSelectedRow:l,loading:m=!1}=e;return(0,a.jsx)(h,{children:(0,a.jsxs)(I,{stickyHeader:!0,children:[(0,a.jsx)(c.A,{children:(0,a.jsxs)(o.A,{children:[t.map((e,t)=>(0,a.jsx)(S,{children:e.label},t)),n&&(0,a.jsx)(S,{children:"Actions"})]})}),(0,a.jsx)(s.A,{children:m?(0,a.jsx)(o.A,{children:(0,a.jsx)(r.A,{colSpan:t.length+ +!!n,children:(0,a.jsx)(b,{children:(0,a.jsx)(u.A,{})})})}):i.map((e,i)=>(0,a.jsxs)(E,{onClick:()=>l&&l(e),children:[t.map((t,i)=>(0,a.jsx)(d.A,{title:e[t.field],arrow:!0,children:(0,a.jsx)(A,{children:e[t.field]})},i)),n&&(0,a.jsxs)(A,{children:[(0,a.jsx)(p.default,{"aria-label":"edit",color:"primary",size:"small"}),(0,a.jsx)(p.default,{"aria-label":"delete",color:"secondary",size:"small"})]})]},i))})]})})}},48455:(e,t,i)=>{"use strict";i.d(t,{M:()=>u});var a=i(95155),n=i(12115),l=i(50532),r=i(90912),o=i(98358),c=i(9670),s=i(33881);function u(e){let{sections:t}=e,[i,u]=n.useState(!1),d=e=>(t,i)=>{u(!!i&&e)};return(0,a.jsx)("div",{children:t.map(e=>{let{id:t,title:n,content:u}=e;return(0,a.jsxs)(l.A,{expanded:i===t,onChange:d(t),children:[(0,a.jsx)(o.A,{expandIcon:(0,a.jsx)(s.Odn,{}),"aria-controls":"".concat(t,"-content"),id:"".concat(t,"-header"),children:(0,a.jsx)(c.default,{sx:{width:"33%",flexShrink:0,fontWeight:600},children:n})}),(0,a.jsx)(r.A,{children:u})]},t)})})}},50492:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>P});var a=i(95155),n=i(59487),l=i(23312),r=i(39419),o=i(12115),c=i(40289),s=i(37129),u=i(52269),d=i(82545),p=i(8363),m=i(59312),h=i(83436),I=i(70482),A=i(6459),S=i(40700),E=i(48455),b=i(19652),f=i(49262);let O={name:"",formulation:"",medication_dose:0,medication_dose_unit:"",medication_frequency:"",medication_duration:0,medication_duration_unit:""},T={medications:[O]},N=[{id:l.W.TABLET,label:"Tablet"},{id:l.W.VIAL,label:"Vial"},{id:l.W.INTRAVENOUS,label:"Intravenous"},{id:l.W.POWDER,label:"Powder"},{id:l.W.SOLUTION,label:"Solution"},{id:l.W.EYE_OINTMENT,label:"Eye Ointment"},{id:l.W.CREAM,label:"Cream"},{id:l.W.EYE_DROPS,label:"Eye Drops"},{id:l.W.OINTMENT,label:"Ointment"},{id:l.W.INHALER,label:"Inhaler"},{id:l.W.SUPPOSITORY,label:"Suppository"},{id:l.W.PESSARY,label:"Pessary"},{id:l.W.SUSPENSION,label:"Suspension"},{id:l.W.SHAMPOO,label:"Shampoo"},{id:l.W.EAR_DROPS,label:"Ear Drops"},{id:l.W.EYE_PASTE,label:"Eye Paste"}],v=[{id:"STAT",label:"STAT"},{id:l.W.ONCE_A_DAY,label:"24 Hourly (OD) - Once a day "},{id:l.W.TWICE_A_DAY,label:"12 Hourly (BID) - Twice a day"},{id:l.W.THREE_TIMES_A_DAY,label:"8 Hourly (TID) - Three times a day"},{id:l.W.FOUR_TIMES_A_DAY,label:"6 Hourly (QID) - Four times a day"},{id:l.W.SIX_TIMES_A_DAY,label:"4 Hourly (OD) - Six times a day "},{id:l.W.ONCE_A_WEEK,label:"Once a week"},{id:l.W.ONCE_A_MONTH,label:"Once a month"},{id:l.W.MORNING,label:"Morning"},{id:l.W.EVENING,label:"Evening"},{id:l.W.OTHER,label:"Other"}],_=s.Ik().shape({medications:s.YO().of(s.Ik().shape({name:s.Yj().required("Medication name is required"),formulation:s.Yj().required("Formulation is required"),medication_dose:s.ai().required("Dose is required").positive("Dose must be greater than 0"),medication_dose_unit:s.Yj().required("Dose unit is required"),medication_frequency:s.Yj().required("Frequency is required"),medication_duration:s.ai().required("Duration is required").positive("Duration must be greater than 0"),medication_duration_unit:s.Yj().required("Duration unit is required"),medication_date_last_taken:s.p6().nullable().required("Date of last taken is required"),medication_date_of_last_prescription:s.p6().nullable().required("Date of last prescription is required")}))}),x=["Milligrams (mg)","Micrograms (\xb5g)","Grams (g)","International Units (IU)","Milliliters (ml)","Millimoles (mmol)"],g=e=>{let{onSubmit:t,onSkip:i,encounterType:r=l.fA.PRESCRIPTIONS,onSubmissionSuccess:s,medicationTitle:g="Prescribed Medication",medicationLabelTitle:C}=e,{ServerTime:R}=(0,f.useServerTime)(),{mutate:W,isPending:j,isSuccess:y}=(0,h.jM)(),{medicationOptions:D,loadingDrugs:P}=(0,b.A)(),[M,U]=(0,o.useState)({}),[F,w]=(0,o.useState)({medications:[]}),{activeVisit:H,patientId:L}=(0,I.gd)(),k=(e,t)=>{U(i=>({...i,[e]:t}))};(0,o.useEffect)(()=>{y&&s()},[y]);let Y=()=>{let e=R.getServerTimeString(),t=F.medications.map(t=>({concept:l.W.DRUG_GIVEN,value:t.name,obsDateTime:e,groupMembers:[{concept:l.W.MEDICATION_FORMULATION,value:t.formulation,obsDateTime:e},{concept:l.W.MEDICATION_DOSE,value:t.medication_dose,obsDateTime:e},{concept:l.W.MEDICATION_DOSE_UNIT,value:t.medication_dose_unit,obsDateTime:e},{concept:l.W.MEDICATION_FREQUENCY,value:t.medication_frequency,obsDateTime:e},{concept:l.W.MEDICATION_DURATION,value:t.medication_duration,obsDateTime:e},{concept:l.W.MEDICATION_DURATION_UNIT,value:t.medication_duration_unit,obsDateTime:e},{concept:l.W.DESCRIPTION,value:"current",obsDateTime:e}]}));W({encounterType:r,visit:H,patient:L,encounterDatetime:e,obs:t})},q=[{id:"prescribed",title:g,content:(0,a.jsx)(S.Z,{medicationLabelTitle:C,encounterType:r})}];return(0,a.jsxs)(A.h,{loading:j||P,children:[(0,a.jsx)(E.M,{sections:q}),(0,a.jsx)("br",{}),(0,a.jsx)(n.PD,{initialValues:T,validationSchema:_,onSubmit:t,enableReinitialize:!0,submitButton:!1,children:e=>{let{values:t,setFieldValue:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.fP,{getValues:w}),(0,a.jsx)(c.ED,{name:"medications",children:e=>{let{push:r,remove:o}=e;return(0,a.jsx)(d.A,{items:t.medications,setItems:e=>i("medications",e),newItem:O,renderFields:(e,t)=>{var r;return(0,a.jsxs)(u.default,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,a.jsx)(n.el,{name:"medications[".concat(t,"].name"),label:"Medication Name",options:D,getValue:e=>i("medications[".concat(t,"].name"),e),multiple:!1}),(0,a.jsx)(n.el,{name:"medications[".concat(t,"].formulation"),label:"Formulation",options:N,getValue:e=>i("medications[".concat(t,"].formulation"),e),sx:{flex:1},multiple:!1}),(0,a.jsx)(n.pj,{id:"medications[".concat(t,"].medication_dose"),label:"Dose",name:"medications[".concat(t,"].medication_dose"),unitName:"medications[".concat(t,"].medication_dose_unit"),unitOptions:x,placeholder:"e.g., 500",inputIcon:(0,a.jsx)(m.gaX,{})}),M[t]?(0,a.jsx)(n.A8,{id:"medications[".concat(t,"].medication_frequency"),name:"medications[".concat(t,"].medication_frequency"),label:"Specify frequency",sx:{flex:1}}):(0,a.jsx)(n.el,{name:"medications[".concat(t,"].medication_frequency"),label:"Frequency",options:v,getValue:e=>{"Other"===e&&k(t,!0),i("medications[".concat(t,"].medication_frequency"),e)},multiple:!1}),(null==F||null==(r=F.medications[t])?void 0:r.medication_frequency)!="STAT"&&(0,a.jsx)(n.pj,{id:"medications[".concat(t,"].medication_duration"),name:"medications[".concat(t,"].medication_duration"),unitName:"medications[".concat(t,"].medication_duration_unit"),label:"Duration",unitOptions:l.bH,placeholder:"e.g. 7",inputIcon:(0,a.jsx)(p.YmN,{}),sx:{flex:1}})]})}})}}),(0,a.jsx)(n.jD,{sx:{mt:"2ch"},children:(0,a.jsx)(n.O6,{sx:{m:.5},title:"Submit",type:"submit",onClick:Y})})]})}})]})};var C=i(39752),R=i(9890);l.W.GYNAE_BENCH,l.W.SURGICAL_BENCH,l.W.MEDICAL_BENCH,l.W.SHORT_STAY,l.W.ISOLATION,l.W.TRAUMA,l.W.RESUSCITATION,l.W.PRIORITY;let W=[{value:l.W.GYNAE_BENCH,label:l.W.GYNAE_BENCH},{value:l.W.SURGICAL_BENCH,label:l.W.SURGICAL_BENCH},{value:l.W.MEDICAL_BENCH,label:l.W.MEDICAL_BENCH},{value:l.W.SHORT_STAY,label:l.W.SHORT_STAY},{value:l.W.ISOLATION,label:l.W.ISOLATION},{value:l.W.TRAUMA,label:l.W.TRAUMA},{value:l.W.RESUSCITATION,label:l.W.RESUSCITATION},{value:l.W.PRIORITY,label:l.W.PRIORITY}],j=s.Ik().shape({careArea:s.Yj().required("Please select a patient care area.")}),y=e=>{let{onSubmit:t,onSkip:i}=e,[r,c]=(0,o.useState)({}),{params:s}=(0,I.KU)(),{mutate:u}=(0,h.jM)(),{data:d}=(0,R.iu)(s.id),[p,m]=(0,o.useState)(void 0),{init:A,ServerTime:S}=(0,f.useServerTime)();(0,o.useEffect)(()=>{if(d){let e=d.find(e=>!e.date_stopped);e&&m(e)}},[d]);let E=async e=>{let i=S.getServerTimeString(),a=[{concept:l.W.CARE_AREA,value:e.careArea,obsDatetime:i}],n={encounterType:l.fA.PATIENT_CARE_AREA,visit:null==p?void 0:p.uuid,patient:s.id,encounterDatetime:i,obs:a};try{await u(n),t(e)}catch(e){console.error("Error submitting Patient Care Area: ",e)}};return(0,a.jsxs)(n.PD,{validationSchema:j,initialValues:{careArea:"",otherCareAreaSpecify:""},onSubmit:E,children:[(0,a.jsx)(n.fP,{getValues:c}),(0,a.jsx)(n.kI,{title:"Patient Care Area",children:(0,a.jsx)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:(0,a.jsx)(n.b1,{row:!0,options:W,name:"careArea",label:"Select Patient Care Area"})})})]})},D=()=>{let[e,t]=(0,o.useState)(0),{navigateBackToProfile:i,navigateBack:l}=(0,I.cq)();return(0,o.useEffect)(()=>{console.log("Active step is now: ".concat(e))},[e]),(0,a.jsxs)(n.RG,{title:"Patient Management Plan",steps:[{id:1,label:"Non-Pharmacological"},{id:2,label:"Patient Care Area"},{id:3,label:"Medication"}],active:e,setActive:t,onBack:()=>i(),children:[(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(C.wt,{onSkip:()=>{},onSubmit:()=>t(1)})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y,{onSkip:()=>{},onSubmit:()=>t(2)})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(g,{onSubmissionSuccess:l,onSkip:()=>{},onSubmit:()=>{}})})]})},P=(0,r.A)(function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.TF,{}),(0,a.jsx)(n.MG,{children:(0,a.jsx)(D,{})})]})},[l.Ot.CLINICIAN,l.Ot.NURSE,l.Ot.ADMIN,l.Ot.STUDENT_CLINICIAN])}},e=>{var t=t=>e(e.s=t);e.O(0,[5639,16,9344,8250,2225,3740,3349,6987,2073,5062,4821,6448,7129,5976,9487,8441,1684,7358],()=>t(37940)),_N_E=e.O()}]);