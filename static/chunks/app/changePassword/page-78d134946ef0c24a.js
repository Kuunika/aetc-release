(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2150],{22802:(e,r,s)=>{Promise.resolve().then(s.bind(s,72921))},45910:(e,r,s)=>{"use strict";s.d(r,{CF:()=>l,J$:()=>i,ec:()=>c,gw:()=>d,nu:()=>o});var t=s(51472),a=s(80549),n=s(22454);let o=()=>(0,a.n)({mutationFn:e=>{let r=e.role.map(e=>({name:e.id})),s={username:e.userName,password:e.password,person:{gender:"Male",age:47,birthdate:"1970-01-01T00:00:00.000+0100",birthdateEstimated:!1,dead:!1,deathDate:null,causeOfDeath:null,names:[{givenName:e.firstName,familyName:e.lastName}]},roles:r};return(0,t.kg)(s).then(e=>e.data)}}),l=()=>(0,n.I)({queryKey:["users"],queryFn:()=>(0,t.lo)().then(e=>e.data),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),i=e=>(0,n.I)({queryKey:["search",e],queryFn:()=>(0,t.OV)(e).then(e=>e.data),enabled:!1}),d=()=>(0,a.n)({mutationFn:e=>{let r={username:e.userName,roles:e.role.map(e=>({name:e.label})),password:e.password};return(0,t.TK)(e.userId,r).then(e=>e.data)}}),c=()=>(0,a.n)({mutationFn:e=>{let r={user:{current_password:e.password,password:e.newPassword}};return(0,t.f3)(e.userId,r).then(e=>e.data)}})},51472:(e,r,s)=>{"use strict";s.d(r,{OV:()=>l,TK:()=>d,f3:()=>c,kg:()=>n,kl:()=>i,lo:()=>o});var t=s(93292);let a="/users",n=e=>(0,t.vt)(e,a),o=()=>(0,t.UK)("".concat(a,"?paginate=false")),l=e=>(0,t.UK)(a+"?paginate=false&username="+e),i=e=>(0,t.HD)(e,a),d=(e,r)=>(0,t.hc)(e,r,a),c=(e,r)=>(0,t.yo)(e,a,r)},72921:(e,r,s)=>{"use strict";s.d(r,{default:()=>w});var t=s(95155),a=s(12115),n=s(72478),o=s(35068),l=s(86600),i=s(45910),d=s(90702),c=s(93584);let u=o.Ik({currentPassword:o.Yj().label("Current password").required().min(4),newPassword:o.Yj().label("New password").required().min(4),confirmPassword:o.Yj().label("Confirm password").required().min(4).oneOf([o.KR("newPassword")],"Password not matching ")}),w=()=>{let{mutateAsync:e,isPending:r,isSuccess:s,error:o}=(0,i.ec)(),[w,p]=(0,a.useState)("");return(0,t.jsx)(d.h,{loading:!1,children:(0,t.jsxs)(n.jD,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",borderRadius:"1ch",marginTop:"100px",position:"relative"},children:[(0,t.jsx)(c.OverlayLoader,{open:r}),w&&(0,t.jsx)("div",{style:{color:"green",marginBottom:"1rem"},children:w}),(0,t.jsx)(n.PD,{initialValues:{currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:u,submitButton:!1,onSubmit:async(r,s)=>{let{setFieldError:t}=s,a=localStorage.getItem("accessToken"),n=localStorage.getItem("userName");if(localStorage.getItem("roles"),a){var o,i,d,c;let s=(0,l.s)(a);try{let a=await e({password:r.currentPassword,newPassword:r.newPassword,userId:null==s?void 0:s.user_id,userName:n});if((null==a?void 0:a.status)===422){let e=(null==a||null==(i=a.response)||null==(o=i.data)?void 0:o.error)||"Current password incorrect";t("currentPassword",e)}else(null==a?void 0:a.message)&&p(a.message)}catch(e){t("currentPassword",(null==e||null==(c=e.response)||null==(d=c.data)?void 0:d.error)||"Current password incorrect")}}},children:(0,t.jsxs)(n.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,t.jsx)("h1",{children:"CHANGE PASSWORD "}),(0,t.jsx)(n.A8,{id:"currentPassword",name:"currentPassword",label:"Current password",type:"password"}),(0,t.jsx)(n.A8,{id:"newPassword",name:"newPassword",label:"New password",type:"password"}),(0,t.jsx)(n.A8,{id:"confirmPassword",name:"confirmPassword",label:"Confirm password",type:"password"}),(0,t.jsx)(n.O6,{type:"submit",title:"Change",onClick:()=>{}})]})})]})})}},86600:(e,r,s)=>{"use strict";s.d(r,{s:()=>a});class t extends Error{}function a(e,r){let s;if("string"!=typeof e)throw new t("Invalid token specified: must be a string");r||(r={});let a=+(!0!==r.header),n=e.split(".")[a];if("string"!=typeof n)throw new t(`Invalid token specified: missing part #${a+1}`);try{s=function(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw Error("base64 string is not of the correct length")}try{var s;return s=r,decodeURIComponent(atob(s).replace(/(.)/g,(e,r)=>{let s=r.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}catch(e){return atob(r)}}(n)}catch(e){throw new t(`Invalid token specified: invalid base64 for part #${a+1} (${e.message})`)}try{return JSON.parse(s)}catch(e){throw new t(`Invalid token specified: invalid json for part #${a+1} (${e.message})`)}}t.prototype.name="InvalidTokenError"},90702:(e,r,s)=>{"use strict";s.d(r,{h:()=>o});var t=s(95155),a=s(94049),n=s(4474);let o=e=>{let{loading:r,children:s,height:o="100%"}=e;return(0,t.jsxs)(a.default,{sx:{position:"relative",width:"100%",height:o},children:[r&&(0,t.jsx)(a.default,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:(0,t.jsx)(n.A,{})}),(0,t.jsx)(a.default,{sx:{opacity:r?.5:1,pointerEvents:r?"none":"auto"},children:s})]})}},93584:(e,r,s)=>{"use strict";s.d(r,{OverlayLoader:()=>o});var t=s(95155);s(12115);var a=s(93526),n=s(4474);function o(e){let{open:r}=e;return(0,t.jsx)("div",{children:(0,t.jsx)(a.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:r,children:(0,t.jsx)(n.A,{color:"inherit"})})})}}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,2141,7861,2891,1412,4018,5068,7774,2478,8441,1255,7358],()=>e(e.s=22802)),_N_E=e.O()}]);