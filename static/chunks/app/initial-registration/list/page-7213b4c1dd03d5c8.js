(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3962],{15377:(e,t,a)=>{"use strict";a.d(t,{OverlayLoader:()=>l});var i=a(95155);a(12115);var r=a(90418),n=a(89915);function l(e){let{open:t}=e;return(0,i.jsx)("div",{children:(0,i.jsx)(r.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:t,children:(0,i.jsx)(n.A,{color:"inherit"})})})}},21022:(e,t,a)=>{"use strict";a.d(t,{VQ:()=>l,kC:()=>s,sL:()=>n,uQ:()=>c});var i=a(95155),r=a(59487);let n=e=>{let{children:t,id:a}=e;return(0,i.jsx)(r.Th,{id:a,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:t})},l=e=>{let{children:t}=e;return(0,i.jsx)(r.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:t})},s=e=>{let{children:t,sx:a}=e;return(0,i.jsx)(r.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...a},children:t})},c=e=>{let{children:t}=e;return(0,i.jsx)(r.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:t})}},22769:(e,t,a)=>{"use strict";a.d(t,{R:()=>u});var i=a(95155),r=a(12115),n=a(59487),l=a(75363),s=a(15377),c=a(26096),o=a(53494),d=a(55253);let u=e=>{let{patientId:t,visitId:a,onDelete:u,sx:m,dialogTitle:x="Abscond Patient",dialogConfirmationMsg:h="Are you sure the patient absconded?",buttonTitle:g="Abscond"}=e,{mutate:f,isPending:p,isSuccess:j}=(0,l.FD)(),[v,S]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{j&&u()},[j]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{title:"Mark as absconded",arrow:!0,children:(0,i.jsx)(o.default,{onClick:()=>{S(!0)},"aria-label":"abscond",children:(0,i.jsx)(d.axc,{})})}),(0,i.jsxs)(n.eV,{maxWidth:"sm",title:x,open:v,onClose:()=>S(!1),children:[(0,i.jsx)(s.OverlayLoader,{open:p}),(0,i.jsx)(n.Th,{children:h}),(0,i.jsx)("br",{}),(0,i.jsx)(n.O6,{title:"Yes",onClick:()=>{f(a)}}),(0,i.jsx)(n.O6,{sx:{ml:.3},variant:"secondary",title:"No",onClick:()=>S(!1)})]})]})}},30830:(e,t,a)=>{"use strict";a.d(t,{a:()=>n});var i=a(12115),r=a(33764);let n=(e,t)=>{let[a,r]=(0,i.useState)({page:0,pageSize:10}),[n,s]=(0,i.useState)(""),[c,o]=(0,i.useState)([]),[d,u]=(0,i.useState)(!1),[m,x]=(0,i.useState)(0),[h,g]=(0,i.useState)(0),[f,p]=(0,i.useState)(!1),j=(0,i.useCallback)(async()=>{let i;u(!0),f&&(i=new Date().toISOString().split("T")[0]);try{let r=await l(e,a.pageSize,n,a.page+1,i||"",t);o(r.data.data),x(r.data.total_pages),g(r.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{u(!1)}},[e,a.pageSize,n,a.page,f]);return(0,i.useEffect)(()=>{j()},[j]),{loading:d,patients:c,paginationModel:a,setPaginationModel:r,searchText:n,setSearchText:s,totalPages:m,totalEntries:h,setOnSwitch:p,refetch:(0,i.useCallback)(()=>{j()},[j])}},l=async(e,t,a,i,n,l)=>{let s="category=".concat(e,"&page=").concat(i,"&page_size=").concat(t,"&search=").concat(a,"&date=").concat(n);return l&&(s="category=".concat(e,"&paginate=false&patient_care_area=").concat(encodeURIComponent(l))),await (0,r.P8)(s)}},39419:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var i=a(95155),r=a(15377),n=a(70482),l=a(12115),s=a(21184),c=a(59487),o=a(66766),d=a(20256);function u(e,t){return function(a){let[c,o]=(0,l.useState)(!1),{navigateTo:u}=(0,n.cq)();(0,l.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){o(!1),u("/"),localStorage.clear();return}}o(!0)}else o(!1),localStorage.clear(),u("/")},[]);let x=(0,s.R)(t,(0,d.O)());return c?x?(0,i.jsx)(e,{...a}):(0,i.jsx)(m,{}):(0,i.jsx)(r.OverlayLoader,{open:!c})}}let m=()=>(0,i.jsx)(c.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,i.jsx)(o.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},40425:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var i=a(12115);function r(e,t){let[a,r]=(0,i.useState)(e);return(0,i.useEffect)(()=>{let a=setTimeout(()=>r(e),t);return()=>clearTimeout(a)},[e,t]),a}},42325:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var i=a(95155),r=a(49443),n=a(59487),l=a(21022),s=a(99653),c=a(23312);let o=(0,a(39419).A)(function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.V,{title:"Patients waiting prescreening",link:"/dashboard"}),(0,i.jsxs)(n.Yr,{container:!0,children:[(0,i.jsx)(n.Yr,{xs:0,lg:1,item:!0}),(0,i.jsxs)(n.Yr,{xs:12,lg:10,sx:{display:"flex",flexDirection:"column"},item:!0,children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(l.sL,{children:"Patients waiting for Screening"}),(0,i.jsx)(l.VQ,{children:"This is a list of all patients that went through initial registration successfully and waiting for prescreening."}),(0,i.jsx)(l.kC,{sx:{p:0,mx:"1ch"},children:(0,i.jsx)(r.I,{})})]}),(0,i.jsx)(n.Yr,{xs:0,lg:1,item:!0})]})]})},[c.Ot.ADMIN,c.Ot.CLINICIAN,c.Ot.REGISTRATION_CLERK,c.Ot.NURSE,c.Ot.DATA_MANAGER])},49443:(e,t,a)=>{"use strict";a.d(t,{S:()=>o,I:()=>N});var i=a(95155),r=a(59487),n=a(37129);let l={firstName:{name:"firstName",label:"First Name"},lastName:{name:"lastName",label:"Last Name"}},s=/^[a-zA-Z]+(?:['-][a-zA-Z]+)*\s*$/,c=n.Ik({[l.firstName.name]:n.Yj().matches(s,{message:"Name not valid"}).required().label(l.firstName.label),[l.lastName.name]:n.Yj().matches(s,{message:"Name not valid"}).required().label(l.lastName.label)}),o=e=>{let{initialValues:t,onSubmit:a}=e;return(0,i.jsxs)(r.PD,{initialValues:t,validationSchema:c,onSubmit:a,submitButton:!1,enableReinitialize:!0,children:[(0,i.jsxs)(r.jD,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(r.A8,{name:l.firstName.name,label:l.firstName.label,id:l.firstName.name}),(0,i.jsx)(r.A8,{name:l.lastName.name,label:l.lastName.label,id:l.lastName.name})]}),(0,i.jsx)(r.O6,{type:"submit",title:"Submit",onClick:()=>{}})]})};var d=a(6314),u=a(70482),m=a(9890),x=a(12115),h=a(22769),g=a(23312),f=a(26096),p=a(53494),j=a(55253),v=a(30830),S=a(40425),_=a(16232);let N=()=>{let{loading:e,patients:t,paginationModel:a,setPaginationModel:n,searchText:l,setSearchText:s,totalPages:c,setOnSwitch:o,totalEntries:N}=(0,v.a)("screening"),[y,b]=(0,x.useState)(""),A=(0,S.d)(y,500);(0,x.useEffect)(()=>{s(A)},[A]);let{navigateTo:I}=(0,u.cq)(),[w,T]=(0,x.useState)(!1),[C,k]=(0,x.useState)(""),[D,E]=(0,x.useState)(""),[O,F]=(0,x.useState)(""),{mutate:R}=(0,m.Dk)(),z=null==t?void 0:t.sort((e,t)=>new Date(e.arrival_time)-new Date(t.arrival_time)).map(e=>({id:null==e?void 0:e.uuid,...e,patient_arrival_time:(0,d.WB)(e.arrival_time)})).filter(e=>e.id!=O),L=[{field:"aetc_visit_number",headerName:"Visit Number"},{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"patient_arrival_time",headerName:"Arrival Time",flex:1},{field:"waiting",headerName:"WaitingTime",flex:1,renderCell:e=>(0,i.jsx)(r.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Attended By",flex:1},{field:"action",flex:1,headerName:"Action",renderCell:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.A,{title:"Start screening",arrow:!0,children:(0,i.jsx)(p.default,{onClick:()=>I("/prescreening/".concat(e.id)),"aria-label":"start screening",color:"primary",children:(0,i.jsx)(j.gSK,{})})}),(0,i.jsx)(h.R,{onDelete:()=>{F(e.id),R({id:e.row.patient_id,void_reason:"Absconded"})},visitId:e.row.visit_uuid,patientId:e.id}),(0,i.jsx)(f.A,{title:"Initiate CPR",arrow:!0,children:(0,i.jsx)(p.default,{onClick:()=>{k(e.id),T(!0),E(e.row.visit_uuid)},"aria-label":"initiate CPR",color:"error",children:(0,i.jsx)(j.szJ,{})})})]})}],V=null==z?void 0:z.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,actor:(0,i.jsx)(r.uT,{encounterType:g.fA.INITIAL_REGISTRATION,patientId:e.id}),aggregate:(0,i.jsx)(r.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,i.jsx)(r.VJ,{arrival_time:null==e?void 0:e.latest_encounter_time}),actionName:"registered by",action:(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(r.O6,{sx:{fontSize:"12px",width:"49%",mr:"1px"},title:"screen",onClick:()=>I("/prescreening/".concat(e.id))}),(0,i.jsx)(h.R,{sx:{width:"49%"},onDelete:()=>F(e.id),visitId:e.visit_uuid,patientId:e.id})]}),age:"N/A",triageResult:e.triage_result}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.vP,{columns:L,data:{data:null!=z?z:[],page:a.page,per_page:a.pageSize,total_pages:c,totalEntries:N},searchText:y,setSearchString:b,setPaginationModel:n,paginationModel:a,loading:e,formatForMobileView:V||[],onSwitchChange:o,onRowClick:e=>{I("/prescreening/".concat(e.id))}}),(0,i.jsx)(_.w8,{patientuuid:C,visituuid:D,open:w,onClose:()=>T(!1)})]})}},62122:(e,t,a)=>{Promise.resolve().then(a.bind(a,42325))},75363:(e,t,a)=>{"use strict";a.d(t,{b2:()=>d,FD:()=>u,qv:()=>m});var i=a(49262),r=a(44919);let n="visits",l=e=>(0,r.vt)(e,n),s=(e,t)=>(0,r.hc)(e,t,n);var c=a(26715),o=a(5041);let d=()=>{let e=(0,c.jE)();return(0,o.n)({mutationFn:e=>l(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},u=()=>{let{ServerTime:e}=(0,i.useServerTime)(),t=async t=>s(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,o.n)({mutationFn:t})},m=e=>{let t=(0,c.jE)();return(0,o.n)({mutationFn:e=>s(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},99653:(e,t,a)=>{"use strict";a.d(t,{V:()=>s});var i=a(95155),r=a(70482),n=a(59487),l=a(33881);let s=e=>{let{title:t,link:a}=e,{navigateTo:s}=(0,r.cq)(),c={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,i.jsxs)(n.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,i.jsxs)(n.jD,{onClick:()=>s(a),sx:{display:"flex",cursor:"pointer"},children:[(0,i.jsx)(n.Th,{children:(0,i.jsx)(l.oWm,{})}),(0,i.jsx)(n.Th,{sx:c,children:"Go back"})]}),(0,i.jsx)(n.Th,{sx:c,children:t}),(0,i.jsxs)(n.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(l.M4e,{}),(0,i.jsx)(n.Th,{sx:c,children:"Need any help?"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5639,16,9344,8250,2225,3740,8320,3349,6987,2073,5062,4821,6448,7129,5976,9487,8130,342,6232,8441,1684,7358],()=>t(62122)),_N_E=e.O()}]);