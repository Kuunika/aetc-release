(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7584],{12409:(e,t,a)=>{"use strict";a.d(t,{VQ:()=>n,kC:()=>s,sL:()=>l,uQ:()=>c});var i=a(95155),r=a(72478);let l=e=>{let{children:t,id:a}=e;return(0,i.jsx)(r.Th,{id:a,sx:{fontFamily:"Inter",fontSize:24,fontWeight:700,lineHeight:"29px",letterSpacing:0,textAlign:"center"},children:t})},n=e=>{let{children:t}=e;return(0,i.jsx)(r.Th,{alignSelf:"center",sx:{fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:"21px",letterSpacing:0,color:"#636363",width:"50ch",textAlign:"center",my:"2ch"},children:t})},s=e=>{let{children:t,sx:a}=e;return(0,i.jsx)(r.sc,{elevation:0,sx:{display:"flex",flexDirection:"column",justifyContent:"center",px:"5ch",py:"5ch",mb:"2ch",...a},children:t})},c=e=>{let{children:t}=e;return(0,i.jsx)(r.Th,{sx:{fontFamily:"Inter",fontSize:"16px",fontWeight:600,lineHeight:"24px",letterSpacing:"0em",textAlign:"center",my:"2ch"},children:t})}},27562:(e,t,a)=>{Promise.resolve().then(a.bind(a,72622))},41186:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var i=a(95155),r=a(93584),l=a(87295),n=a(12115),s=a(75855),c=a(72478),o=a(15239),d=a(9877);function x(e,t){return function(a){let[c,o]=(0,n.useState)(!1),{navigateTo:x}=(0,l.cq)();(0,n.useLayoutEffect)(()=>{if(localStorage)if(localStorage.getItem("accessToken")){let e=localStorage.getItem("loginTime");if(e){let t=parseInt(e);if(Math.floor((new Date().getTime()-t)%36e5/6e4)>60){o(!1),x("/"),localStorage.clear();return}}o(!0)}else o(!1),localStorage.clear(),x("/")},[]);let p=(0,s.R)(t,(0,d.O)());return c?p?(0,i.jsx)(e,{...a}):(0,i.jsx)(u,{}):(0,i.jsx)(r.OverlayLoader,{open:!c})}}let u=()=>(0,i.jsx)(c.jD,{sx:{width:"100%",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},children:(0,i.jsx)(o.default,{src:"/403.jpg",height:500,width:500,alt:"403"})})},72622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var i=a(95155),r=a(72478),l=a(12409),n=a(98624),s=a(41186),c=a(263),o=a(12115),d=a(87295),x=a(53756),u=a(86973),p=a(94049),h=a(1151),f=a(2300),g=a(25635),m=a(28548),j=a(91871),y=a(50430),v=a(52641),A=a(95436),C=a(55606),S=a(47448),w=a(26301),_=a(98579),b=a(81013),I=a(39625),E=a(78470),D=a(20063),N=a(97998),T=a(94054);let k=()=>{let[e,t]=(0,o.useState)(!1),[a,l]=(0,o.useState)(""),[n,s]=(0,o.useState)(""),[x,k]=(0,o.useState)(""),[P,R]=(0,o.useState)(!1),[F,V]=(0,o.useState)({specialty:[],patientCareArea:[],recordedBy:[]}),[W,O]=(0,o.useState)({specialties:[],patientCareAreas:[],recordedByOptions:[]}),{navigateTo:L}=(0,d.cq)(),{gender:M}=(0,d.gd)(),{mutate:q,isSuccess:Q}=(0,_.FD)(),U=1===F.patientCareArea.length?F.patientCareArea[0]:void 0,Y=1===F.recordedBy.length?F.recordedBy[0]:void 0,{paginationModel:J,patients:G,searchText:H,setSearchText:K,setPaginationModel:X,loading:Z,totalPages:$,refetch:ee,totalEntries:et}=(0,b.a)("awaiting_speciality",U,Y),[ea,ei]=(0,o.useState)(""),er=(0,T.d)(ea,500);(0,D.useRouter)(),(0,o.useEffect)(()=>{if(G&&G.length>0){let e=Array.from(new Set(G.map(e=>e.department).filter(Boolean))),t=Array.from(new Set(G.map(e=>e.patient_care_area).filter(Boolean))),a=Array.from(new Set(G.map(e=>e.last_encounter_creator).filter(Boolean)));O({specialties:e.sort(),patientCareAreas:t.sort(),recordedByOptions:a.sort()})}},[G]);let el=e=>t=>{let a=t.target.value;V(t=>({...t,[e]:"string"==typeof a?a.split(","):a}))},en=(e,t)=>{V(a=>({...a,[e]:a[e].filter(e=>e!==t)}))},es=F.specialty.length>0||F.patientCareArea.length>0||F.recordedBy.length>0;(0,o.useEffect)(()=>{K(er)},[er]),(0,o.useEffect)(()=>{ee()},[]),(0,o.useEffect)(()=>{let e=()=>{ee()};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[]),(0,o.useEffect)(()=>{Q&&(ee(),console.log("Visit closed successfully, refreshing data..."))},[Q,ee]);let ec=[{field:"triage_result",headerName:"Triage Cat",renderCell:e=>(0,i.jsx)(p.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:(0,i.jsx)(p.default,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:"red"==e.value||"Emergency"==e.value?"#B42318":"yellow"==e.value||"Priority"==e.value?"#EDE207":"green"==e.value||"Queue"==e.value?"#016302":"transparent"}})})},{field:"given_name",headerName:"First Name",flex:1},{field:"family_name",headerName:"Last Name",flex:1},{field:"gender",headerName:"Gender"},{field:"waiting",headerName:"Aggregated Time",flex:1,renderCell:e=>(0,i.jsx)(r.VJ,{arrival_time:e.row.arrival_time})},{field:"last_encounter_creator",headerName:"Recorded By",flex:1},{field:"patient_care_area",flex:1,headerName:"Patient Care Area"},{field:"department",headerName:"Specialty",flex:1},{field:"action",headerName:"Actions",flex:1.2,renderCell:e=>(0,i.jsxs)(p.default,{display:"flex",gap:1,children:[(0,i.jsx)(z,{patient:e.row,onVisitClosed:ee}),(0,i.jsx)(E.A,{title:"Initiate CPR",arrow:!0,children:(0,i.jsx)(h.default,{onClick:()=>{l(e.row.id),t(!0),s(e.row.visit_uuid)},"aria-label":"initiate CPR",color:"error",children:(0,i.jsx)(N.szJ,{})})})]})}],eo=null==G?void 0:G.map(e=>({id:e.id,visitNumber:e.aetc_visit_number,firstName:e.given_name,lastName:e.family_name,gender:e.gender,arrivalTime:e.patient_arrival_time,arrivalDateTime:e.arrival_time,actor:(0,i.jsx)(r.uT,{encounterType:c.fA.AWAITING_SPECIALTY,patientId:e.id}),aggregate:(0,i.jsx)(r.VJ,{arrival_time:e.arrival_time}),waitingTime:(0,i.jsx)(r.VJ,{arrival_time:null==e?void 0:e.latest_encounter_time}),actionName:"Recorded By",action:(0,i.jsx)(B,{patient:e,setDeleted:e=>k(e),triage:e.triage_result,visitId:e.visit_uuid,id:e.uuid,showCPR:"red"===e.triage_result,onCPR:()=>{l(e.id),t(!0),s(e.visit_uuid)},onVisitClosed:ee}),age:"".concat((0,w.Cb)(e.birthdate),"yrs"),triageResult:e.triage_result}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f.default,{sx:{p:2,mb:2},children:[(0,i.jsxs)(p.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,i.jsxs)(p.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(N.YsJ,{}),(0,i.jsx)(g.default,{variant:"h6",children:"Filters"}),es&&(0,i.jsx)(m.A,{label:"".concat(F.specialty.length+F.patientCareArea.length+F.recordedBy.length," active"),size:"small",color:"primary"})]}),(0,i.jsxs)(p.default,{sx:{display:"flex",gap:1},children:[es&&(0,i.jsx)(j.A,{startIcon:(0,i.jsx)(N.QCr,{}),onClick:()=>{V({specialty:[],patientCareArea:[],recordedBy:[]})},size:"small",variant:"outlined",color:"secondary",children:"Clear All"}),(0,i.jsxs)(j.A,{startIcon:P?(0,i.jsx)(N.Ucs,{}):(0,i.jsx)(N.Vr3,{}),onClick:()=>R(!P),size:"small",variant:"outlined",children:[P?"Hide":"Show"," Filters"]})]})]}),(0,i.jsx)(y.A,{in:P,children:(0,i.jsxs)(p.default,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2},children:[(0,i.jsxs)(v.A,{sx:{minWidth:200},children:[(0,i.jsx)(A.A,{children:"Specialty"}),(0,i.jsx)(C.A,{multiple:!0,value:F.specialty,onChange:el("specialty"),input:(0,i.jsx)(S.A,{label:"Specialty"}),renderValue:e=>(0,i.jsx)(p.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,i.jsx)(m.A,{label:e,size:"small",onDelete:()=>en("specialty",e),onMouseDown:e=>{e.stopPropagation()}},e))}),children:W.specialties.map(e=>(0,i.jsx)(u.A,{value:e,children:e},e))})]}),(0,i.jsxs)(v.A,{sx:{minWidth:200},children:[(0,i.jsx)(A.A,{children:"Patient Care Area"}),(0,i.jsx)(C.A,{multiple:!0,value:F.patientCareArea,onChange:el("patientCareArea"),input:(0,i.jsx)(S.A,{label:"Patient Care Area"}),renderValue:e=>(0,i.jsx)(p.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,i.jsx)(m.A,{label:e,size:"small",onDelete:()=>en("patientCareArea",e),onMouseDown:e=>{e.stopPropagation()}},e))}),children:W.patientCareAreas.map(e=>(0,i.jsx)(u.A,{value:e,children:e},e))})]}),(0,i.jsxs)(v.A,{sx:{minWidth:200},children:[(0,i.jsx)(A.A,{children:"Recorded By"}),(0,i.jsx)(C.A,{multiple:!0,value:F.recordedBy,onChange:el("recordedBy"),input:(0,i.jsx)(S.A,{label:"Recorded By"}),renderValue:e=>(0,i.jsx)(p.default,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,i.jsx)(m.A,{label:e,size:"small",onDelete:()=>en("recordedBy",e),onMouseDown:e=>{e.stopPropagation()}},e))}),children:W.recordedByOptions.map(e=>(0,i.jsx)(u.A,{value:e,children:e},e))})]})]})}),es&&(0,i.jsxs)(p.default,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,i.jsx)(g.default,{variant:"body2",sx:{mr:1,alignSelf:"center"},children:"Active filters:"}),F.specialty.map(e=>(0,i.jsx)(m.A,{label:"Specialty: ".concat(e),onDelete:()=>en("specialty",e),size:"small",color:"primary",variant:"outlined"},"specialty-".concat(e))),F.patientCareArea.map(e=>(0,i.jsx)(m.A,{label:"Care Area: ".concat(e),onDelete:()=>en("patientCareArea",e),size:"small",color:"primary",variant:"outlined"},"area-".concat(e))),F.recordedBy.map(e=>(0,i.jsx)(m.A,{label:"Recorded By: ".concat(e),onDelete:()=>en("recordedBy",e),size:"small",color:"primary",variant:"outlined"},"recorded-".concat(e)))]})]}),(0,i.jsx)(r.vP,{columns:ec,data:{data:null!=G?G:[],page:J.page,per_page:J.pageSize,total_pages:$,totalEntries:et},searchText:ea,setSearchString:ei,setPaginationModel:X,paginationModel:J,loading:Z,formatForMobileView:eo||[],onRowClick:e=>L("/patient/".concat(e.id,"/profile"))}),(0,i.jsx)(I.w8,{patientuuid:a,visituuid:n,open:e,onClose:()=>t(!1)})]})},z=e=>{var t;let{patient:a,onVisitClosed:r}=e,{navigateTo:l}=(0,d.cq)(),[n,s]=o.useState(null),{mutate:c,isSuccess:f}=(0,_.FD)(),{gender:g}=(0,d.gd)();return(0,o.useEffect)(()=>{f&&r()},[f,r]),(0,i.jsxs)(p.default,{display:"flex",gap:1,children:[(0,i.jsx)(E.A,{title:"View Profile",arrow:!0,children:(0,i.jsx)(h.default,{onClick:()=>l("/patient/".concat(a.id,"/profile")),"aria-label":"view profile",sx:{color:"green"},children:(0,i.jsx)(N.gSK,{})})}),(0,i.jsx)(E.A,{title:"Dispose",arrow:!0,children:(0,i.jsx)(h.default,{onClick:()=>l("/patient/".concat(a.id,"/disposition")),"aria-label":"Dispose",sx:{color:"grey"},children:(0,i.jsx)(N.dhv,{})})}),(0,i.jsx)(E.A,{title:"Template Forms",arrow:!0,children:(0,i.jsx)(h.default,{onClick:e=>{s(e.currentTarget)},"aria-label":"template forms",sx:{color:"#015E85"},children:(0,i.jsx)(N.t69,{})})}),(0,i.jsxs)(x.A,{id:"basic-menu",anchorEl:n,open:!!n,onClose:()=>{s(null)},children:[(0,i.jsx)(u.A,{onClick:()=>l("/patient/".concat(a.id,"/medicalInpatient")),children:"Medical Inpatient"}),(0,i.jsx)(u.A,{onClick:()=>l("/patient/".concat(a.id,"/surgicalNotes")),children:"Surgical Notes"}),(null==(t=a.gender)?void 0:t.toLowerCase())==="female"&&(0,i.jsx)(u.A,{onClick:()=>l("/patient/".concat(a.id,"/gyneacology")),children:"Gyneacology Ward Admission"})]})]})},B=e=>{let{id:t,visitId:a,triage:l,setDeleted:n,patient:s,showCPR:c,onCPR:f,onVisitClosed:g}=e,{navigateTo:m}=(0,d.cq)(),[j,y]=o.useState(null),{mutate:v,isSuccess:A}=(0,_.FD)();(0,o.useEffect)(()=>{A&&g()},[A,g]);let C=()=>{y(null)};return(0,i.jsxs)(p.default,{sx:{display:"flex",flexDirection:"column",flex:"1"},children:[(0,i.jsx)(r.jD,{sx:{borderRadius:"2px",width:"100%",height:"5ch",backgroundColor:"red"==l?"#B42318":"yellow"==l?"#ede207":"green"==l?"#016302":"",marginY:1}}),(0,i.jsxs)(p.default,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[(0,i.jsx)(E.A,{title:"Close Visit",arrow:!0,children:(0,i.jsx)(h.default,{onClick:()=>{s.visit_uuid?v(s.visit_uuid):console.warn("No active visit UUID found for this patient.")},"aria-label":"close visit",size:"small",sx:{color:"#015E85"},children:(0,i.jsx)(N.axc,{})})}),(0,i.jsx)(E.A,{title:"Template Forms",arrow:!0,children:(0,i.jsx)(h.default,{onClick:e=>{y(e.currentTarget)},"aria-label":"template forms",size:"small",sx:{color:"#015E85"},children:(0,i.jsx)(N.t69,{})})}),(0,i.jsx)(E.A,{title:"View Profile",arrow:!0,children:(0,i.jsx)(h.default,{onClick:()=>m("/patient/".concat(s.id,"/profile")),"aria-label":"view profile",size:"small",sx:{color:"#015E85"},children:(0,i.jsx)(N.gSK,{})})}),c&&(0,i.jsx)(E.A,{title:"Initiate CPR",arrow:!0,children:(0,i.jsx)(h.default,{onClick:f,"aria-label":"initiate CPR",size:"small",color:"error",children:(0,i.jsx)(N.szJ,{})})})]}),(0,i.jsxs)(x.A,{id:"card-action-menu",anchorEl:j,open:!!j,onClose:C,children:[(0,i.jsx)(u.A,{onClick:()=>{m("/patient/".concat(t,"/medicalInpatient")),C()},children:"Medical Inpatient"}),(0,i.jsx)(u.A,{onClick:()=>{m("/patient/".concat(t,"/surgicalNotes")),C()},children:"Surgical Notes"}),(0,i.jsx)(u.A,{onClick:()=>{m("/patient/".concat(t,"/gyneacology")),C()},children:"Gyneacology Ward Admission"})]})]})},P=(0,s.A)(function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.V,{title:"Patients waiting for specialty",link:"/dashboard"}),(0,i.jsxs)(r.Yr,{container:!0,children:[(0,i.jsx)(r.Yr,{xs:0,lg:0,item:!0}),(0,i.jsxs)(r.Yr,{xs:12,lg:12,sx:{display:"flex",flexDirection:"column",mx:"2ch"},item:!0,children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(l.sL,{children:"Patients waiting for specialty"}),(0,i.jsx)(l.VQ,{children:"This is a list of all patients that are waiting for specialty"}),(0,i.jsx)(l.kC,{sx:{p:0},children:(0,i.jsx)(k,{})})]}),(0,i.jsx)(r.Yr,{lg:0,item:!0})]})]})},[c.Ot.CLINICIAN,c.Ot.NURSE,c.Ot.ADMIN,c.Ot.STUDENT_CLINICIAN])},81013:(e,t,a)=>{"use strict";a.d(t,{a:()=>l});var i=a(12115),r=a(31345);let l=(e,t,a)=>{let[r,l]=(0,i.useState)({page:0,pageSize:10}),[s,c]=(0,i.useState)(""),[o,d]=(0,i.useState)([]),[x,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)(0),[f,g]=(0,i.useState)(0),[m,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{y()},[t,r,s,m,a]);let y=async()=>{let i;u(!0),m&&(i=new Date().toISOString().split("T")[0]);try{let l=await n(e,r.pageSize,s,r.page+1,i||"",t,a);d(l.data.data),h(l.data.total_pages),g(l.data.totalEntries)}catch(e){console.error("Error fetching patients:",e)}finally{u(!1)}};return{loading:x,patients:o,paginationModel:r,setPaginationModel:l,searchText:s,setSearchText:c,totalPages:p,totalEntries:f,setOnSwitch:j,refetch:y}},n=async(e,t,a,i,l,n,s)=>{let c="category=".concat(e,"&page=").concat(i,"&page_size=").concat(t,"&search=").concat(a,"&date=").concat(l);return n&&(c+="&patient_care_area=".concat(encodeURIComponent(n))),s&&(c+="&last_encounter_creator=".concat(encodeURIComponent(s))),await (0,r.P8)(c)}},93584:(e,t,a)=>{"use strict";a.d(t,{OverlayLoader:()=>n});var i=a(95155);a(12115);var r=a(93526),l=a(4474);function n(e){let{open:t}=e;return(0,i.jsx)("div",{children:(0,i.jsx)(r.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:t,children:(0,i.jsx)(l.A,{color:"inherit"})})})}},94054:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var i=a(12115);function r(e,t){let[a,r]=(0,i.useState)(e);return(0,i.useEffect)(()=>{let a=setTimeout(()=>r(e),t);return()=>clearTimeout(a)},[e,t]),a}},98579:(e,t,a)=>{"use strict";a.d(t,{b2:()=>o,FD:()=>d,qv:()=>x});var i=a(25641),r=a(93292);let l="visits",n=(e,t)=>(0,r.hc)(e,t,l);var s=a(99776),c=a(80549);let o=()=>{let e=(0,s.jE)();return(0,c.n)({mutationFn:e=>(0,r.vt)(e,l).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:["visits"]})}})},d=()=>{let{ServerTime:e}=(0,i.useServerTime)(),t=async t=>n(t,{stopDatetime:e.getServerTimeString()}).then(e=>e.data);return(0,c.n)({mutationFn:t})},x=e=>{let t=(0,s.jE)();return(0,c.n)({mutationFn:e=>n(e,{stopDatetime:"null"}).then(e=>e.data),onSuccess:()=>{t.invalidateQueries({queryKey:["patients",e,"visits"]})}})}},98624:(e,t,a)=>{"use strict";a.d(t,{V:()=>s});var i=a(95155),r=a(87295),l=a(72478),n=a(56164);let s=e=>{let{title:t,link:a}=e,{navigateTo:s}=(0,r.cq)(),c={fontFamily:"Inter",fontSize:"14px",fontWeight:400,lineHeight:"21px",letterSpacing:"0em",textAlign:"center",mx:"1ch"};return(0,i.jsxs)(l.jD,{sx:{display:"flex",justifyContent:"space-evenly",py:"1ch",borderBottom:"solid 1px #E6E6E6"},children:[(0,i.jsxs)(l.jD,{onClick:()=>s(a),sx:{display:"flex",cursor:"pointer"},children:[(0,i.jsx)(l.Th,{children:(0,i.jsx)(n.oWm,{})}),(0,i.jsx)(l.Th,{sx:c,children:"Go back"})]}),(0,i.jsx)(l.Th,{sx:c,children:t}),(0,i.jsxs)(l.jD,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.M4e,{}),(0,i.jsx)(l.Th,{sx:c,children:"Need any help?"})]})]})}}},e=>{e.O(0,[9503,16,9344,8250,2225,3740,8320,3349,2141,7861,2891,1412,4018,5068,7774,2478,4008,5832,9625,8441,1255,7358],()=>e(e.s=27562)),_N_E=e.O()}]);