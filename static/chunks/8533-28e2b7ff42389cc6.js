(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8533],{3074:(e,t,a)=>{"use strict";a.d(t,{U:()=>I,k:()=>C});var i=a(95155),n=a(59487),s=a(42281),l=a(49262),r=a(70482),o=a(83436),c=a(52269),d=a(81063),u=a(9670),m=a(32582),h=a(39347),p=a(37129),x=a(12115),b=a(40289),g=a(82545),f=a(59312),v=a(8363),j=a(6459),y=a(19652),S=a(23312);let N={name:"",formulation:"",medication_dose:0,medication_dose_unit:"",medication_route:"",medication_frequency:"",medication_duration:0,medication_duration_unit:""},A=[{id:S.W.TABLET,label:"Tablet"},{id:S.W.VIAL,label:"Vial"},{id:S.W.INTRAVENOUS,label:"Intravenous"},{id:S.W.POWDER,label:"Powder"},{id:S.W.SOLUTION,label:"Solution"},{id:S.W.EYE_OINTMENT,label:"Eye Ointment"},{id:S.W.CREAM,label:"Cream"},{id:S.W.EYE_DROPS,label:"Eye Drops"},{id:S.W.OINTMENT,label:"Ointment"},{id:S.W.INHALER,label:"Inhaler"},{id:S.W.SUPPOSITORY,label:"Suppository"},{id:S.W.PESSARY,label:"Pessary"},{id:S.W.SUSPENSION,label:"Suspension"},{id:S.W.SHAMPOO,label:"Shampoo"},{id:S.W.EAR_DROPS,label:"Ear Drops"},{id:S.W.EYE_PASTE,label:"Eye Paste"}],_=[{id:"STAT",label:"STAT"},{id:S.W.ONCE_A_DAY,label:"24 Hourly (OD) - Once a day "},{id:S.W.TWICE_A_DAY,label:"12 Hourly (BID) - Twice a day"},{id:S.W.THREE_TIMES_A_DAY,label:"8 Hourly (TID) - Three times a day"},{id:S.W.FOUR_TIMES_A_DAY,label:"6 Hourly (QID) - Four times a day"},{id:S.W.SIX_TIMES_A_DAY,label:"4 Hourly (OD) - Six times a day "},{id:S.W.ONCE_A_WEEK,label:"Once a week"},{id:S.W.ONCE_A_MONTH,label:"Once a month"},{id:S.W.OTHER,label:"Other"}],T=["Milligrams (mg)","Micrograms (\xb5g)","Grams (g)","International Units (IU)","Milliliters (ml)","Millimoles (mmol)"],E={subjective:{name:S.W.SUBJECTIVE,label:"Subjective",bold:!0},objective:{name:"objective",label:"Objective",type:"title",bold:!0,children:[{concept:S.W.MEDICAL_RECORD_OBSERVATIONS,label:"General/Other observation"},{concept:S.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic"},{concept:S.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},{concept:S.W.PULSE_RATE,label:"Pulse Rate"},{concept:S.W.RESPIRATORY_RATE,label:"Respiratory Rate"},{concept:S.W.BLOOD_OXYGEN_SATURATION,label:"SPO2"},{concept:S.W.TEMPERATURE,label:"Temperature"}]},systolic:{child:!0,name:S.W.SYSTOLIC_BLOOD_PRESSURE,label:"Systolic"},diastolic:{child:!0,name:S.W.DIASTOLIC_BLOOD_PRESSURE,label:"Diastolic"},pulseRate:{child:!0,name:S.W.PULSE_RATE,label:"Pulse Rate"},respiratoryRate:{child:!0,name:S.W.RESPIRATORY_RATE,label:"Respiratory Rate"},spo:{child:!0,name:S.W.BLOOD_OXYGEN_SATURATION,label:"SPO2"},temperature:{child:!0,name:S.W.TEMPERATURE,label:"Temperature"},assessment:{name:S.W.ASSESSMENT,label:"Assessment"},plan:{name:S.W.PLAN,label:"Plan"},evaluation:{name:S.W.EVALUATION,label:"Evaluation"},replan:{name:S.W.REPLAN,label:"Replan"},proceduresConfig:{name:S.W.PROCEDURES,label:"Procedures",multiple:!0,type:"string",hasGroupMembers:!0,bold:!0},supportiveCareConfig:{name:S.W.SUPPORTIVE_CARE,label:"supportive Care",multiple:!0,type:"string",hasGroupMembers:!0,bold:!0}},I=E,O=[{value:S.W.INTRAVENOUS_CANNULATION,label:"Intravenous Cannulation"},{value:S.W.CATHETERIZATION_URETHRAL,label:"Urethral Catheterization"},{value:S.W.SUCTIONING,label:"Suctioning"},{value:S.W.OROPHARYNGEAL_AIRWAY_INSERTION,label:"Oropharyngeal Airway Insertion"},{value:S.W.NASOPHARYNGEAL_AIRWAY_INSERTION,label:"Nasopharyngeal Airway Insertion"},{value:S.W.LARYNGEAL_MASK_AIRWAY_INSERTION,label:"Laryngeal Mask Airway Insertion"},{value:S.W.NASOGASTRIC_TUBE_INSERTION,label:"Nasogastric Tube Insertion"},{value:S.W.OTHER,label:"Other (Specify)"}],D=[{value:S.W.WOUND_DRESSING,label:"Wound Dressing"},{value:S.W.PATIENT_EDUCATION,label:"Patient Education"},{value:S.W.COUNSELLING,label:"Counselling"},{value:S.W.FEEDING,label:"Feeding"},{value:S.W.OXYGENATION,label:"Oxygenation"},{value:S.W.TEPID_SPONGING,label:"Tepid Sponging"},{value:S.W.ELECTROCARDIOGRAPHY_MONITORING,label:"Electrocardiography (ECG) Monitoring"},{value:S.W.TURNING_PATIENTS,label:"Turning Patients"},{value:S.W.ORAL_CARE,label:"Oral Care"},{value:S.W.OTHER,label:"Other (Specify)"}],R=p.Ik().shape({[E.subjective.name]:p.Yj().required(E.subjective.label),[E.objective.name]:p.Yj().required(E.objective.label),[E.assessment.name]:p.Yj().required(E.assessment.label),[E.plan.name]:p.Yj().required(E.plan.label),[E.evaluation.name]:p.Yj().required(E.evaluation.label),[E.replan.name]:p.Yj().required(E.replan.label),procedures:p.YO().of(p.Ik().shape({key:p.Yj().required(),value:p.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one procedure must be selected"),otherProcedureSpecify:p.Yj().nullable().when("procedures",{is:e=>e.some(e=>e.key===S.W.OTHER),then:e=>e.required("Please specify the other procedure")}),supportiveCare:p.YO().of(p.Ik().shape({key:p.Yj().required(),value:p.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one supportive care option must be selected"),otherSupportiveCareSpecify:p.Yj().nullable().when("supportiveCare",{is:e=>e.some(e=>e.key===S.W.OTHER),then:e=>e.required("Please specify the other supportive care")}),[E.spo.name]:p.ai().min(0).max(100).required().label(E.spo.label),[E.respiratoryRate.name]:p.ai().min(0).max(90).required().label(E.respiratoryRate.label),[E.systolic.name]:p.ai().min(0).max(300).required().label(E.systolic.label),[E.diastolic.name]:p.ai().min(0).max(300).required().label(E.diastolic.label),[E.temperature.name]:p.ai().min(20).max(45).required().label(E.temperature.label)}),w=(0,s.f6)(E);w.medications=[N],w.procedures=[],w.supportiveCare=[],w.otherProcedureSpecify="",w.otherSupportiveCareSpecify="";let C=()=>{let{ServerTime:e}=(0,l.useServerTime)(),{activeVisit:t,patientId:a}=(0,r.gd)(),[p,I]=(0,x.useState)({}),C=(e,t)=>{I(a=>({...a,[e]:t}))},{mutate:L,isPending:P,isSuccess:W}=(0,o.jM)(),[M,k]=(0,x.useState)({medications:[]}),[H,F]=(0,x.useState)([]),{medicationOptions:B,loadingDrugs:Y}=(0,y.A)(),G=["Paracetamol","Ibuprofen","Diclofenac sodium 75mg/ml, 3ml","Diclofenac sodium Slow Release","Diclofenac sodium","Salbutamol","Salbutamol sulphate","Salbutamol solution for nebulising 5mg/ml","Salbutamol sulphate aerosol inhalation, 100mcg/dose, 200 doses","Oxytocin","Dextrose 50%,","Aspirin","Prednisolone","Diazepam"],[U,q]=(0,x.useState)({otherProcedure:!1,otherSupportiveCare:!1}),{navigateBack:V}=(0,r.cq)(),{handleSubmit:z}=(0,r.li)(S.fA.NURSING_CARE_NOTES,()=>V());(0,x.useEffect)(()=>{F(B.filter(e=>G.includes(e.label)))},[B]);let K=i=>{if(0===i.length)return;Z(i);let n=e.getServerTimeString(),s=i.map(e=>({concept:S.W.DRUG_GIVEN,value:e.name,obsDateTime:n,groupMembers:[{concept:S.W.MEDICATION_FORMULATION,value:e.formulation,obsDateTime:n,coded:!0},{concept:S.W.MEDICATION_DOSE,value:e.medication_dose,obsDateTime:n},{concept:S.W.MEDICATION_DOSE_UNIT,value:e.medication_dose_unit,obsDateTime:n},{concept:S.W.MEDICATION_FREQUENCY,value:e.medication_frequency,coded:!0,obsDateTime:n},{concept:S.W.MEDICATION_DURATION,value:e.medication_duration,obsDateTime:n},{concept:S.W.MEDICATION_DURATION_UNIT,value:e.medication_duration_unit,obsDateTime:n},{concept:S.W.DESCRIPTION,value:"soapier",obsDateTime:n}]}));L({encounterType:S.fA.SOAPIER_PRESCRIPTION,visit:t,patient:a,encounterDatetime:n,obs:s}),M.medications=[N]},Z=i=>{let n=e.getServerTimeString(),s=i.map(t=>({concept:S.W.DRUG_GIVEN,value:t.name,obsDateTime:n,groupMembers:[{concept:S.W.MEDICATION_DOSE,value:t.medication_dose,obsDateTime:n},{concept:S.W.MEDICATION_ROUTE,value:t.medication_route,obsDatetime:e.getServerTimeString()},{concept:S.W.DESCRIPTION,value:"soapier",obsDateTime:n}]}));L({encounterType:S.fA.SOAPIER_DISPENSING,visit:t,patient:a,encounterDatetime:n,obs:s})},X=async i=>{let n=e.getServerTimeString(),s=[{concept:S.W.PROCEDURES,value:S.W.PROCEDURES,obsDatetime:n,groupMembers:(i.procedures||[]).filter(e=>!0===e.value).map(e=>({concept:e.key,value:e.key===S.W.OTHER?i.otherProcedureSpecify:e.key,obsDatetime:n}))},{concept:S.W.SUPPORTIVE_CARE,value:S.W.SUPPORTIVE_CARE,obsDatetime:n,groupMembers:(i.supportiveCare||[]).filter(e=>!0===e.value).map(e=>({concept:e.key,value:e.key===S.W.OTHER?i.otherSupportiveCareSpecify:e.key,obsDatetime:n}))}];L({encounterType:S.fA.NURSING_CARE_NOTES,visit:t,patient:a,encounterDatetime:n,obs:s})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(j.h,{loading:P||Y,children:(0,i.jsx)(n.PD,{initialValues:w,validationSchema:R,onSubmit:t=>{let{procedures:a,supportiveCare:i,medications:n,otherProcedureSpecify:l,otherSupportiveCareSpecify:r,...o}=t;K(n),X({procedures:a,supportiveCare:i,otherProcedureSpecify:l,otherSupportiveCareSpecify:r}),z((0,s.gX)(o,e.getServerTimeString()))},submitButton:!1,children:e=>{let{values:t,setFieldValue:a}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(c.default,{children:[(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",children:E.subjective.label}),(0,i.jsx)(n.A8,{label:"",name:E.subjective.name,multiline:!0,id:E.subjective.name,rows:3,sx:{width:"100%",mt:0}})]}),(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",children:"Objective"}),(0,i.jsxs)("div",{style:{marginLeft:"50px"},children:[(0,i.jsx)(u.default,{children:E.objective.label}),(0,i.jsx)(n.A8,{label:"",name:E.objective.name,multiline:!0,id:E.objective.name,rows:3,sx:{width:"100%"}}),(0,i.jsx)(u.default,{children:"Vital signs"}),(0,i.jsxs)(n.m2,{children:[(0,i.jsx)(n.A8,{name:E.spo.name,label:E.spo.label,id:E.spo.name,sx:{width:"100%"},unitOfMeasure:"%"}),(0,i.jsx)(n.A8,{name:E.systolic.name,label:E.systolic.label,id:E.systolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"}),(0,i.jsx)(n.A8,{name:E.diastolic.name,label:E.diastolic.label,id:E.diastolic.name,sx:{width:"100%"},unitOfMeasure:"mmHg"}),(0,i.jsx)(n.A8,{name:E.respiratoryRate.name,label:E.respiratoryRate.label,id:E.respiratoryRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,i.jsx)(n.A8,{name:E.pulseRate.name,label:E.pulseRate.label,id:E.pulseRate.name,sx:{width:"100%"},unitOfMeasure:"BPM"}),(0,i.jsx)(n.A8,{name:E.temperature.name,label:E.temperature.label,id:E.temperature.name,sx:{width:"100%"},unitOfMeasure:"\xb0C"})]})]})]}),(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",children:E.assessment.label}),(0,i.jsx)(n.A8,{label:"",name:E.assessment.name,multiline:!0,id:E.assessment.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",children:E.plan.label}),(0,i.jsx)(n.A8,{label:"",name:E.plan.name,multiline:!0,id:E.plan.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",sx:{mb:2},children:"Intervention/Implementation"}),(0,i.jsxs)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:[" ","Non-pharmacological management"," "]}),(0,i.jsx)("div",{style:{maxWidth:"900px"},children:(0,i.jsxs)(n.GE,{direction:"row",children:[(0,i.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"0.5ch",mb:"2ch",width:"90%"},children:[(0,i.jsx)("h4",{children:"Procedures"}),(0,i.jsx)(n.Z3,{name:"procedures",allowFilter:!1,options:O,getValue:e=>q(t=>({...t,otherProcedure:e.some(e=>e.key===S.W.OTHER&&e.value)}))}),U.otherProcedure&&(0,i.jsx)(n.A8,{id:"otherProcedureSpecify",label:"Specify Other Procedure",name:"otherProcedureSpecify",placeholder:"Specify the procedure"})]}),(0,i.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"90%"},children:[(0,i.jsx)("h4",{children:"Supportive Care"}),(0,i.jsx)(n.Z3,{name:"supportiveCare",allowFilter:!1,options:D,getValue:e=>q(t=>({...t,otherSupportiveCare:e.some(e=>e.key===S.W.OTHER&&e.value)}))}),U.otherSupportiveCare&&(0,i.jsx)(n.A8,{id:"otherSupportiveCareSpecify",label:"Specify Other Supportive Care",name:"otherSupportiveCareSpecify",placeholder:"Specify the care"})]})]})}),(0,i.jsx)("h4",{style:{marginBottom:"1ch"},children:"Pharmacological management"}),(0,i.jsx)(n.fP,{getValues:k}),(0,i.jsx)(b.ED,{name:"medications",children:e=>{let{push:s,remove:l}=e;return(0,i.jsx)(g.A,{items:t.medications,setItems:e=>a("medications",e),newItem:N,renderFields:(e,t)=>{var s;return(0,i.jsxs)(c.default,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",width:"100%"},children:[(0,i.jsx)(n.el,{name:"medications[".concat(t,"].name"),label:"Medication Name",options:H,getValue:e=>a("medications[".concat(t,"].name"),e),multiple:!1}),(0,i.jsx)(n.el,{name:"medications[".concat(t,"].formulation"),label:"Formulation",options:A,getValue:e=>a("medications[".concat(t,"].formulation"),e),sx:{flex:1},multiple:!1}),(0,i.jsx)(n.pj,{id:"medications[".concat(t,"].medication_dose"),label:"Dose",name:"medications[".concat(t,"].medication_dose"),unitName:"medications[".concat(t,"].medication_dose_unit"),unitOptions:T,placeholder:"e.g., 500",inputIcon:(0,i.jsx)(f.gaX,{})}),p[t]?(0,i.jsx)(n.A8,{id:"medications[".concat(t,"].medication_frequency"),name:"medications[".concat(t,"].medication_frequency"),label:"Specify frequency",sx:{flex:1}}):(0,i.jsx)(n.el,{name:"medications[".concat(t,"].medication_frequency"),label:"Frequency",options:_,getValue:e=>{"Other"===e&&C(t,!0),a("medications[".concat(t,"].medication_frequency"),e)},multiple:!1}),(null==M||null==(s=M.medications[t])?void 0:s.medication_frequency)!="STAT"&&(0,i.jsx)(n.pj,{id:"medications[".concat(t,"].medication_duration"),name:"medications[".concat(t,"].medication_duration"),unitName:"medications[".concat(t,"].medication_duration_unit"),label:"Duration",unitOptions:S.bH,placeholder:"e.g. 7",inputIcon:(0,i.jsx)(v.YmN,{}),sx:{flex:1}}),(0,i.jsx)(m.A,{id:"medications[".concat(t,"].medication_route"),name:"medications[".concat(t,"].medication_route"),label:"Route",fullWidth:!0,variant:"outlined"})]})}})}}),(0,i.jsx)("br",{})]}),(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",children:E.evaluation.label}),(0,i.jsx)(n.A8,{label:"",name:E.evaluation.name,multiline:!0,id:E.evaluation.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsxs)(d.default,{sx:{p:2,mb:2},children:[(0,i.jsx)(u.default,{variant:"h6",children:E.replan.label}),(0,i.jsx)(n.A8,{label:"",name:E.replan.name,multiline:!0,id:E.replan.name,rows:3,sx:{width:"100%"}})]}),(0,i.jsx)(h.A,{variant:"contained",type:"submit",children:"Submit"})]})})}})})})}},5850:(e,t,a)=>{"use strict";a.d(t,{I:()=>x});var i=a(95155),n=a(11518),s=a.n(n),l=a(12115),r=a(96609),o=a(26379),c=a(87909),d=a(59487),u=a(23312),m=a(70482),h=a(9890),p=a(83436);let x=(0,l.forwardRef)((e,t)=>{let{onPrintComplete:a,showPreview:n=!1}=e,[x,b]=(0,l.useState)(null),{params:g}=(0,m.KU)(),{data:f}=(0,h.iu)(g.id),{data:v}=(0,p.$O)(g.id),[j,y]=(0,l.useState)(void 0),[S,N]=(0,l.useState)({presentingComplaint:[],presentingHistory:"",medication:[],hivProgram:"",onARV:"",healthCenter:"",other:"",surgicalHistory:"",socialHistory:"",familyHistory:"",allergicReaction:[],intoxication:[],general:"",systolicBloodpressure:"",diastolicBloodPressure:"",pulseRate:"",respiratoryRate:"",temperature:"",pupilsSymmetrical:"",conjunctiva:"",oralKS:"",oralCandidiasis:"",jvpRaised:"",lymphadenopathy:"",symmetricalExpansion:"",apexBeat:"",thrillHeaves:"",auscultation:"",auscultationLung:"",edema:"",skinRash:"",herpesZosterScar:"",nuchalRigidity:"",motorResponse:"",verbalResponse:"",eyeOpeningResponse:"",pupil:"",visualFieldAcuity:"",eyeMovementsNystagmus:"",eyeMovementsSensation:"",hearing:"",tongueMovementTastes:"",coughGagReflex:"",power:"",tone:"",reflexes:"",plantars:"",sensation:"",coordination:"",summary:"",generalReview:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[],integumentary:[],differentialDiagnosis:[],additionalNotes:"",admittingOfficer:""}),A=(0,l.useRef)(null),_=(0,r.useReactToPrint)({contentRef:A,onAfterPrint:a});return(0,l.useImperativeHandle)(t,()=>({generatePDF:()=>{_()}})),(0,l.useEffect)(()=>{if(!v)return;let e=null==v?void 0:v.filter(e=>e.encounter_type&&e.encounter_type.uuid===u.fA.MEDICAL_IN_PATIENT).sort((e,t)=>new Date(t.encounter_datetime).getTime()-new Date(e.encounter_datetime).getTime())[0];if(e&&e.obs){let t={presentingComplaint:[],presentingHistory:"",medication:[],hivProgram:"",healthCenter:"",onARV:"",other:"",surgicalHistory:"",socialHistory:"",familyHistory:"",allergicReaction:[],intoxication:[],general:"",systolicBloodpressure:"",diastolicBloodPressure:"",pulseRate:"",respiratoryRate:"",temperature:"",pupilsSymmetrical:"",conjunctiva:"",oralKS:"",oralCandidiasis:"",jvpRaised:"",lymphadenopathy:"",symmetricalExpansion:"",apexBeat:"",thrillHeaves:"",auscultation:"",auscultationLung:"",edema:"",skinRash:"",herpesZosterScar:"",nuchalRigidity:"",motorResponse:"",verbalResponse:"",eyeOpeningResponse:"",pupil:"",visualFieldAcuity:"",eyeMovementsNystagmus:"",eyeMovementsSensation:"",hearing:"",tongueMovementTastes:"",coughGagReflex:"",power:"",tone:"",reflexes:"",plantars:"",sensation:"",coordination:"",summary:"",generalReview:[],ent:[],endocrine:[],cardiac:[],respiratory:[],gastrointestinal:[],genitourinary:[],musculoskeletal:[],neurologic:[],psychiatric:[],integumentary:[],differentialDiagnosis:[],additionalNotes:"",admittingOfficer:e.created_by||""};e.obs.forEach(e=>{var a,i;let n=e.names&&e.names.length>0?e.names[0].name:null;if("Presenting Complaints"===n)e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names[0].name||"",i="";if(e.children&&e.children.length>0){let t=e.children.find(e=>e.names&&e.names.length>0&&"Duration"===e.names[0].name);t&&(i=t.value||t.value_text||"")}a&&t.presentingComplaint.push({complaint:a,duration:i})});else if("Presenting history"===n)t.presentingHistory=e.value||e.value_text||"";else if("Medication"===n)e.children&&e.children.length>0?t.medication=e.children.map(e=>e.value_text||e.value||"").filter(Boolean):t.medication=[e.value_text||e.value||""].filter(Boolean);else if("HIV program"===n)t.hivProgram=e.value||e.value_text||"";else if("On arv"===n)t.onARV=e.value||e.value_text||"";else if("Health center"===n)t.healthCenter=e.value||e.value_text||"";else if("Other"===n)t.other=e.value||e.value_text||"";else if("Surgical History"===n)t.surgicalHistory=e.value||e.value_text||"";else if("Social History"===n)t.socialHistory=e.value||e.value_text||"";else if("Family History"===n)t.familyHistory=e.value||e.value_text||"";else if("Allergic reaction"===n)if(e.children&&e.children.length>0){let a=e.children.map(e=>e.value_text||e.value||"").filter(Boolean);t.allergicReaction.push(...a)}else{let a=e.value_text||e.value||"";a&&t.allergicReaction.push(a)}else"Intoxication"===n?t.intoxication=(null==(a=e.children)?void 0:a.filter(e=>e.names&&e.names.length>0&&"Intoxication"===e.names[0].name).map(e=>e.value||e.value_text).filter(Boolean))||"":"General"===n?t.general=e.value||e.value_text||"":"Systolic blood pressure"===n?t.systolicBloodpressure=e.value||e.value_text||"":"Diastolic blood pressure"===n?t.diastolicBloodPressure=e.value||e.value_text||"":"Pulse Rate"===n?t.pulseRate=e.value||e.value_text||"":"Respiratory rate"===n?t.respiratoryRate=e.value||e.value_text||"":"Temperature (c)"===n?t.temperature=e.value||e.value_text||"":"Pupils symmetrical"===n?t.pupilsSymmetrical=e.value||e.value_text||"":"Conjunctiva"===n?t.conjunctiva=e.value||e.value_text||"":"Oral KS"===n?t.oralKS=e.value||e.value_text||"":"Oral candidiasis"===n?t.oralCandidiasis=e.value||e.value_text||"":"JVP raised"===n?t.jvpRaised=e.value||e.value_text||"":"Lymphadenopathy"===n?t.lymphadenopathy=e.value||e.value_text||"":"symmetrical expansion"===n?t.symmetricalExpansion=e.value||e.value_text||"":"Apex beat"===n?t.apexBeat=e.value||e.value_text||"":"Thrill heaves"===n?t.thrillHeaves=e.value||e.value_text||"":"Auscultation"===n?t.auscultation=e.value||e.value_text||"":"Auscultation Lung"===n?t.auscultationLung=e.value||e.value_text||"":"Edema"===n?t.edema=e.value||e.value_text||"":"Skin rash"===n?t.skinRash=e.value||e.value_text||"":"Herpes Zoster Scar"===n?t.herpesZosterScar=e.value||e.value_text||"":"Nuchal rigidity"===n?t.nuchalRigidity=e.value||e.value_text||"":"Motor response"===n?t.motorResponse=e.value||e.value_text||"":"Verbal response"===n?t.verbalResponse=e.value||e.value_text||"":"Eye Opening response"===n?t.eyeOpeningResponse=e.value||e.value_text||"":"Pupil"===n?t.pupil=e.value||e.value_text||"":"Visual Field Acuity"===n?t.visualFieldAcuity=e.value||e.value_text||"":"Eye Movements/Nystagmus"===n?t.eyeMovementsNystagmus=e.value||e.value_text||"":"Eye Movements/Sensation"===n?t.eyeMovementsSensation=e.value||e.value_text||"":"Hearing"===n?t.hearing=e.value||e.value_text||"":"Tongue Movement/Tastes"===n?t.tongueMovementTastes=e.value||e.value_text||"":"Cough Gag Reflex"===n?t.coughGagReflex=e.value||e.value_text||"":"Power"===n?t.power=e.value||e.value_text||"":"Tone"===n?t.tone=e.value||e.value_text||"":"Reflexes"===n?t.reflexes=e.value||e.value_text||"":"Plantars"===n?t.plantars=e.value||e.value_text||"":"Sensation"===n?t.sensation=e.value||e.value_text||"":"Coordination"===n?t.coordination=e.value||e.value_text||"":"Summary"===n?t.summary=e.value||e.value_text||"":"Additional Notes"===n?t.additionalNotes=e.value||e.value_text||"":"Review of systems, general"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.value;a&&t.generalReview.push(a)}):"Review of systems ENT"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.ent.push(a)}):"Review of systems  endocrine"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.endocrine.push(a)}):"Review of systems cardiac"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.cardiac.push(a)}):"Severe Respiratory"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.respiratory.push(a)}):"Review Of Systems Gastrointestinal"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.gastrointestinal.push(a)}):"Review Of Systems Genitourinary"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.genitourinary.push(a)}):"Review of systems musculoskeletal"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.musculoskeletal.push(a)}):"Review of systems neurologic"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.neurologic.push(a)}):"Review of systems psychiatric"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.psychiatric.push(a)}):"Skin Infection"===n?e.children&&e.children.length>0&&e.children.forEach(e=>{let a=e.names&&e.names.length>0?e.names[0].name:null;a&&t.integumentary.push(a)}):"Attempted/ Differential Diagnosis"===n&&(t.differentialDiagnosis=(null==(i=e.children)?void 0:i.filter(e=>e.names&&e.names.length>0&&"Attempted/ Differential Diagnosis"===e.names[0].name).map(e=>e.value||e.value_text).filter(Boolean))||"")}),N(t)}},[v]),(0,i.jsxs)("div",{ref:A,className:"jsx-6bc66dc380e44007 printable-content",children:[(0,i.jsxs)("div",{className:"jsx-6bc66dc380e44007 "+((n?"print-preview":"print-only")||""),children:[(0,i.jsx)(d.TF,{}),(0,i.jsx)("h1",{style:{textAlign:"center",marginBottom:"20px"},className:"jsx-6bc66dc380e44007",children:"Medical Inpatient Admission Sheet                    "}),Object.values(S).every(e=>"string"==typeof e?!e.trim():0===e.length)?(0,i.jsx)("p",{style:{fontStyle:"italic",color:"gray"},className:"jsx-6bc66dc380e44007",children:"Medical Inpatient Admission Sheet not recorded."}):(0,i.jsxs)("div",{className:"jsx-6bc66dc380e44007 patient-examination-data",children:[S.presentingComplaint&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-6bc66dc380e44007",children:"Complaints"}),(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Presenting Complaints: "}),S.presentingComplaint.map((e,t)=>"(".concat(t+1,") ").concat(e.complaint).concat(e.duration?" - Duration: ".concat(e.duration):"")).join(", ")]})]}),S.presentingHistory&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"History of Presenting Complaints: "}),S.presentingHistory]}),(0,i.jsx)("hr",{className:"jsx-6bc66dc380e44007"}),(S.medication||S.hivProgram||S.onARV||S.healthCenter||S.other||S.surgicalHistory||S.socialHistory||S.familyHistory||S.allergicReaction||S.intoxication)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-6bc66dc380e44007",children:"Medical History"}),S.medication.length>0&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Drug: "}),S.medication.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]}),S.hivProgram&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"HIV Status: "}),S.hivProgram]}),S.onARV&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"On ARV: "}),S.onARV]}),S.healthCenter&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Referral Medical Facility: "}),S.healthCenter]}),S.other&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Other: "}),S.other]}),S.surgicalHistory&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Surgical History: "}),S.surgicalHistory]}),S.socialHistory&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Social History: "}),S.socialHistory]}),S.familyHistory&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Family History: "}),S.familyHistory]}),S.allergicReaction.length>0&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Allergy: "}),S.allergicReaction.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]}),S.intoxication.length>0&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Intoxication: "}),S.intoxication.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})]}),(0,i.jsx)("hr",{className:"jsx-6bc66dc380e44007"}),(S.generalReview||S.ent||S.endocrine||S.cardiac||S.respiratory||S.gastrointestinal||S.genitourinary||S.musculoskeletal||S.neurologic||S.psychiatric||S.integumentary).length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-6bc66dc380e44007",children:"Review of Systems"}),(0,i.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},className:"jsx-6bc66dc380e44007",children:(0,i.jsxs)("tbody",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.generalReview.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"General(Constitutional): "}),S.generalReview.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.ent.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"HEENT: "}),S.ent.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.endocrine.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Endocrine: "}),S.endocrine.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.cardiac.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Cardiovascular: "}),S.cardiac.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.respiratory.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Respiratory: "}),S.respiratory.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.gastrointestinal.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Gastrointestinal: "}),S.gastrointestinal.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.genitourinary.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Genitourinary: "}),S.genitourinary.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.musculoskeletal.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Musculoskeletal: "}),S.musculoskeletal.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:[S.neurologic.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Neurological: "}),S.neurologic.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]}),"   "]}),(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:[S.psychiatric.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Psychiatric: "}),S.psychiatric.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})," "]})]}),(0,i.jsx)("tr",{className:"jsx-6bc66dc380e44007",children:(0,i.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:[S.integumentary.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Integumentary(Skin): "}),S.integumentary.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]})," "]})})]})}),(0,i.jsx)("hr",{className:"jsx-6bc66dc380e44007"})]}),(S.general||S.systolicBloodpressure||S.diastolicBloodPressure||S.pulseRate||S.respiratoryRate||S.temperature||S.pupilsSymmetrical||S.conjunctiva||S.oralKS||S.oralCandidiasis||S.jvpRaised||S.lymphadenopathy||S.symmetricalExpansion||S.apexBeat||S.thrillHeaves||S.auscultation||S.auscultationLung||S.edema||S.skinRash||S.herpesZosterScar||S.nuchalRigidity||S.motorResponse||S.verbalResponse||S.eyeOpeningResponse||S.pupil||S.visualFieldAcuity||S.eyeMovementsNystagmus||S.eyeMovementsSensation||S.hearing||S.tongueMovementTastes||S.coughGagReflex||S.power||S.tone||S.reflexes||S.plantars||S.sensation||S.coordination||S.summary||S.differentialDiagnosis||S.additionalNotes||S.admittingOfficer)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-6bc66dc380e44007",children:"Physical Examination"}),S.general&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"General Impression: "}),S.general]}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Vital Signs"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginBottom:"10px"},className:"jsx-6bc66dc380e44007",children:[S.systolicBloodpressure&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Systolic: "}),S.systolicBloodpressure," mmHg"]}),S.diastolicBloodPressure&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Diastolic: "}),S.diastolicBloodPressure," mmHg"]}),S.pulseRate&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Pulse Rate: "}),S.pulseRate," bpm"]}),S.respiratoryRate&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Respiratory Rate: "}),S.respiratoryRate," breaths/min"]}),S.temperature&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Temperature: "}),S.temperature," \xb0C"]})]}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Head and Neck"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginBottom:"10px"},className:"jsx-6bc66dc380e44007",children:[S.pupilsSymmetrical&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Pupils Symmetrical: "}),S.pupilsSymmetrical]}),S.conjunctiva&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Conjunctiva: "}),S.conjunctiva]}),S.oralKS&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Oral KS: "}),S.oralKS]}),S.oralCandidiasis&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Oral Candidiasis: "}),S.oralCandidiasis]}),S.jvpRaised&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"JVP raised: "}),S.jvpRaised]}),S.lymphadenopathy&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Lymphadenopathy: "}),S.lymphadenopathy]})]}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Chest and Lungs"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginBottom:"10px"},className:"jsx-6bc66dc380e44007",children:[S.symmetricalExpansion&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Symmetrical Expansion: "}),S.symmetricalExpansion]}),S.apexBeat&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Apex Beat: "}),S.apexBeat]}),S.thrillHeaves&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Thrill Heaves: "}),S.thrillHeaves]})]}),S.auscultation&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Auscultation: "}),S.auscultation]}),S.auscultationLung&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Auscultation Lung: "}),S.auscultationLung]}),S.edema&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Oedema: "}),S.edema]}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Skin"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginBottom:"10px"},className:"jsx-6bc66dc380e44007",children:[S.skinRash&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Skin Rash: "}),S.skinRash]}),S.herpesZosterScar&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Herpes Zoster Scar: "}),S.herpesZosterScar]})]}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Neurological Examination"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginBottom:"10px"},className:"jsx-6bc66dc380e44007",children:[S.nuchalRigidity&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Nuchal Rigidity: "}),S.nuchalRigidity]}),S.motorResponse&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Motor Response: "}),S.motorResponse]}),S.verbalResponse&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Verbal Response: "}),S.verbalResponse]}),S.eyeOpeningResponse&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Eye Opening Response: "}),S.eyeOpeningResponse]})]}),(0,i.jsx)("br",{className:"jsx-6bc66dc380e44007"}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Cranial and Peripheral Nerves"}),(0,i.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},className:"jsx-6bc66dc380e44007",children:(0,i.jsxs)("tbody",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.pupil&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Pupil: "}),S.pupil]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.visualFieldAcuity&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Visual Field Acuity: "}),S.visualFieldAcuity]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.eyeMovementsNystagmus&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Eye Movements Nystagmus: "}),S.eyeMovementsNystagmus]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.eyeMovementsSensation&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Eye Movements Sensation: "}),S.eyeMovementsSensation]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.hearing&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Hearing: "}),S.hearing]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.tongueMovementTastes&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Tongue Movement Tastes: "}),S.tongueMovementTastes]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.coughGagReflex&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Cough Gag Reflex: "}),S.coughGagReflex]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.power&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Power: "}),S.power]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.tone&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Tone: "}),S.tone]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.reflexes&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Reflexes: "}),S.reflexes]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.plantars&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Plantars: "}),S.plantars]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.sensation&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Sensation: "}),S.sensation]})})]}),(0,i.jsxs)("tr",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007",children:S.coordination&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Coordination: "}),S.coordination]})}),(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-6bc66dc380e44007"})]})]})}),S.summary&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Summary: "}),S.summary]}),(0,i.jsx)("hr",{className:"jsx-6bc66dc380e44007"}),S.differentialDiagnosis.length>0&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Differential Diagnosis: "}),S.differentialDiagnosis.map((e,t)=>" ".concat(e)).join(", ")]}),(0,i.jsx)("hr",{className:"jsx-6bc66dc380e44007"}),(0,i.jsx)("h2",{className:"jsx-6bc66dc380e44007",children:"Investigation"}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Bedside Results"}),(0,i.jsx)(c.N,{data:[]}),(0,i.jsx)("h3",{className:"jsx-6bc66dc380e44007",children:"Lab results"}),(0,i.jsx)(o.l,{}),S.additionalNotes&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Additional Notes: "}),S.additionalNotes]}),(0,i.jsx)("hr",{className:"jsx-6bc66dc380e44007"}),S.admittingOfficer&&(0,i.jsxs)("p",{className:"jsx-6bc66dc380e44007",children:[(0,i.jsx)("strong",{className:"jsx-6bc66dc380e44007",children:"Admitting Officer: "}),S.admittingOfficer]})]})]})]}),(0,i.jsx)(s(),{id:"6bc66dc380e44007",children:"@media print{.print-only.jsx-6bc66dc380e44007{display:block!important}}.print-only.jsx-6bc66dc380e44007{display:none}.print-preview.jsx-6bc66dc380e44007{display:block;border:1px solid#e0e0e0;margin:20px 0;padding:20px;background:white;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}"})]})})},17874:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var i=a(95155);a(12115);var n=a(15876),s=a(81063),l=a(25949),r=a(72137),o=a(3967),c=a(33470),d=a(57236),u=a(9670),m=a(52269);let h=e=>{let{data:t,title:a}=e;return(0,i.jsxs)(n.A,{component:s.default,children:[(0,i.jsx)("h3",{children:a}),(0,i.jsx)("br",{}),(0,i.jsxs)(l.A,{size:"small",children:[(0,i.jsx)(r.A,{children:(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:(0,i.jsx)("strong",{children:"Plan"})}),(0,i.jsx)(c.A,{children:(0,i.jsx)("strong",{children:"Test(s)"})}),(0,i.jsx)(c.A,{children:(0,i.jsx)("strong",{children:"Result(s)"})})]})}),(0,i.jsx)(d.A,{children:t.map((e,t)=>{let a=e.result.length>0?e.result:[{test:"—",result:"—"}];return a.map((n,s)=>(0,i.jsxs)(o.A,{children:[0===s&&(0,i.jsx)(c.A,{rowSpan:a.length,sx:{verticalAlign:"top",backgroundColor:"#fafafa"},children:(0,i.jsx)(u.default,{variant:"body2",children:e.plan})}),(0,i.jsx)(c.A,{sx:{p:0},children:(0,i.jsx)(m.default,{sx:{px:2,py:1,borderBottom:s<a.length-1?"1px solid #eee":"none"},children:(0,i.jsx)(u.default,{variant:"body2",children:n.test})})}),(0,i.jsx)(c.A,{sx:{p:0},children:(0,i.jsx)(m.default,{sx:{px:2,py:1,borderBottom:s<a.length-1?"1px solid #eee":"none"},children:(0,i.jsx)(u.default,{variant:"body2",children:n.result})})})]},"".concat(t,"-").concat(s)))})})]})]})}},22219:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(95155),n=a(59487);let s=e=>{let{children:t,title:a,icon:s,sx:l}=e;return(0,i.jsxs)(n.sc,{sx:{p:"1ch",backgroundColor:"#fff",boxShadow:"none",...l},children:[(0,i.jsxs)(n.jD,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(n.Th,{variant:"h5",fontWeight:"700",sx:{lineHeight:"24px",letterSpacing:"0em",textAlign:"left",marginBottom:"1ch"},children:a}),s]}),(0,i.jsx)(n.jD,{children:t})]})}},26379:(e,t,a)=>{"use strict";a.d(t,{l:()=>d});var i=a(95155),n=a(70482),s=a(59487),l=a(9670),r=a(6314),o=a(83436),c=a(23312);let d=()=>{let{params:e}=(0,n.KU)(),{data:t}=(0,o.$O)(null==e?void 0:e.id,"encounter_type=".concat(c.fA.LAB_ORDERS_PLAN)),a=[{field:"specimen",headerName:"Specimen",flex:1,renderCell:e=>e.row.specimen.name},{field:"test",headerName:"Test(s)",flex:1,renderCell:e=>e.row.test.name},{field:"priority",headerName:"Priority",flex:1,renderCell:e=>e.row.test.priority},{field:"date",headerName:"Date",flex:1}],d=[];if(t&&(null==t?void 0:t.length)>0){var u,m;d=null==(m=t[0])||null==(u=m.obs)?void 0:u.flatMap(e=>e.children.map(t=>({test:t.names[0].name,date:(0,r.kh)(e.obs_datetime),specimen:e.names[0].name,priority:function(e){let t=[];if(Array.isArray(e.children))for(let n of e.children){var a,i;let e=null==(i=n.names)||null==(a=i[0])?void 0:a.name;("Emergency"===e||"Urgent"===e)&&t.push(e)}return t.join(", ")}(t),id:t.obs_id})))}return(0,i.jsx)(i.Fragment,{children:0===d.length?(0,i.jsx)(l.default,{children:"No lab orders added"}):(0,i.jsx)(s.WE,{height:"25ch",showTopBar:!1,rowHeight:25,rows:d,columns:a})})}},26997:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(12115),n=a(86517);let s=()=>{let{data:e}=(0,n.X)("Allergen Category"),[t,a]=(0,i.useState)([]),{data:s}=(0,n.X)("Medication Allergens"),{data:l}=(0,n.X)("Medical Substance Allergens"),{data:r}=(0,n.X)("Substance Allergens"),{data:o}=(0,n.X)("Food Allergens");return(0,i.useEffect)(()=>{let t=[],i=[],n=[],c=[];if(s&&o&&r&&l&&(i=o.map(e=>{let{name:t,uuid:a}=e;return{value:a,label:t}}),n=r.map(e=>{let{name:t,uuid:a}=e;return{value:a,label:t}}),c=l.map(e=>{let{name:t,uuid:a}=e;return{value:a,label:t}}),t=s.map(e=>{let{name:t,uuid:a}=e;return{value:a,label:t}})),e){let s=[{label:e[0].name,value:e[0].uuid,options:t},{label:e[1].name,value:e[1].uuid,options:c},{label:e[2].name,value:e[2].uuid,options:n},{label:e[3].name,value:e[3].uuid,options:i}];s.push({label:"None",value:"None",options:[{label:"None",value:"None"}]}),a(s)}},[e,s,o,r,l]),{allergyOptions:t,medicationAllergens:s,foodAllergens:o,medicalSubstanceAllergens:l,substanceAllergens:r,allergenCats:e}}},28986:()=>{},32686:(e,t,a)=>{"use strict";a.d(t,{k:()=>h});var i=a(95155),n=a(11518),s=a.n(n),l=a(12115),r=a(96609),o=a(59487),c=a(23312),d=a(70482),u=a(9890),m=a(83436);let h=(0,l.forwardRef)((e,t)=>{let{onPrintComplete:a,showPreview:n=!1}=e,[h,p]=(0,l.useState)(null),{params:x}=(0,d.KU)(),{data:b}=(0,u.iu)(x.id),{data:g}=(0,m.$O)(x.id),[f,v]=(0,l.useState)(void 0),[j,y]=(0,l.useState)({chiefComplaint:"",illnessHistory:"",lnmp:"",edd:"",gestationalAge:"",gravidity:"",parity:"",numberOfLivingChildren:"",menarche:"",menstralCycle:"",duration:"",prevAbortion:"",prevEctopic:"",abnormalVaginalDischarge:"",consistency:"",color:"",odour:"",amount:"",previousContraceptive:"",currentlyOnContraceptive:"",sideEffects:"",cancerScreening:"",historyOfStis:"",medicalHistory:[],habits:[],temperature:"",pulse:"",respiratory:"",bloodPressure:"",systolic:"",diastolic:"",stats:"",rbs:"",weight:"",height:"",condition:"",pallor:"",chestExamination:"",abdomenExamination:"",vaginalInspection:"",vaginalExamination:"",extremities:"",impression:"",plan:"",immediateIntervention:"",admittingOfficer:""}),S=(0,l.useRef)(null),N=(0,r.useReactToPrint)({contentRef:S,onAfterPrint:a});return(0,l.useImperativeHandle)(t,()=>({generatePDF:()=>{N()}})),(0,l.useEffect)(()=>{if(!g)return;let e=null==g?void 0:g.filter(e=>e.encounter_type&&e.encounter_type.uuid===c.fA.GYNEACOLOGY_WARD).sort((e,t)=>new Date(t.encounter_datetime).getTime()-new Date(e.encounter_datetime).getTime())[0];if(e&&e.obs){let t={chiefComplaint:"",illnessHistory:"",lnmp:"",edd:"",gestationalAge:"",gravidity:"",parity:"",numberOfLivingChildren:"",menarche:"",menstralCycle:"",duration:"",prevAbortion:"",prevEctopic:"",abnormalVaginalDischarge:"",consistency:"",color:"",odour:"",amount:"",previousContraceptive:"",currentlyOnContraceptive:"",sideEffects:"",cancerScreening:"",historyOfStis:"",medicalHistory:[],habits:[],temperature:"",pulse:"",respiratory:"",systolic:"",diastolic:"",bloodPressure:"",stats:"",rbs:"",weight:"",height:"",condition:"",pallor:"",chestExamination:"",abdomenExamination:"",vaginalInspection:"",vaginalExamination:"",extremities:"",impression:"",plan:"",immediateIntervention:"",admittingOfficer:e.created_by||""},a=["Family History Hypertension","Family History Diabetes Mellitus","Family History Tuberculosis","Family History Epilepsy","Family History Asthma","Mental illness","Blood transfusion","Drug Allergies"],i=["Alcohol intake","Smoking history","Recreational drug"];e.obs.forEach(e=>{var n;let s=e.names&&e.names.length>0?e.names[0].name:null;if("Chief complaint"===s)t.chiefComplaint=e.value||e.value_text||"";else if("History of present illness"===s)t.illnessHistory=e.value||e.value_text||"";else if("LNMP"===s)t.lnmp=e.value||e.value_text||"";else if("EDD"===s)t.edd=e.value||e.value_text||"";else if("Gestational age"===s)t.gestationalAge=e.value||e.value_text||"";else if("Gravidity"===s)t.gravidity=e.value||e.value_text||"";else if("Parity"===s)t.parity=e.value||e.value_text||"";else if("Number of living children"===s)t.numberOfLivingChildren=e.value||e.value_text||"";else if("Menarche"===s)t.menarche=e.value||e.value_text||"";else if("Menstrual cycle"===s)t.menstralCycle=e.value||e.value_text||"";else if("Duration"===s)t.duration=e.value||e.value_text||"";else if("Prev Abortion"===s)t.prevAbortion=e.value||e.value_text||"";else if("Prev Ectopic"===s)t.prevEctopic=e.value||e.value_text||"";else if("Abnormal Vaginal Discharge"===s)t.abnormalVaginalDischarge=e.value||e.value_text||"";else if("Consistency"===s)t.consistency=e.value||e.value_text||"";else if("Color"===s)t.color=e.value||e.value_text||"";else if("Odour"===s)t.odour=e.value||e.value_text||"";else if("Amount"===s)t.amount=e.value||e.value_text||"";else if("Previous Contraceptive"===s)t.previousContraceptive=e.value||e.value_text||"";else if("Currently On Contraceptive"===s)t.currentlyOnContraceptive=e.value||e.value_text||"";else if(null==(n=e.names)?void 0:n.some(e=>"side effects"===e.name.toLowerCase()))t.sideEffects=e.value||e.value_text||"";else if("Cancer Screening"===s)t.cancerScreening=e.value||e.value_text||"";else if("History of STIs"===s)t.historyOfStis=e.value||e.value_text||"";else if(s&&a.includes(s)){let a=e.value||e.value_text||"";a&&t.medicalHistory.push(a)}else if(s&&i.includes(s)){let a=e.value||e.value_text||"";a&&t.habits.push(a)}else"Temperature (c)"===s?t.temperature=e.value||e.value_text||"":"Pulse Rate"===s?t.pulse=e.value||e.value_text||"":"Respiratory rate"===s?t.respiratory=e.value||e.value_text||"":"Blood Pressure Measured"===s?t.bloodPressure=e.value||e.value_text||"":"Systolic blood pressure"===s?t.systolic=e.value||e.value_text||"":"Diastolic blood pressure"===s?t.diastolic=e.value||e.value_text||"":"Stats"===s?t.stats=e.value||e.value_text||"":"Random Blood Glucose (RBS)"===s?t.rbs=e.value||e.value_text||"":"Weight (kg)"===s?t.weight=e.value||e.value_text||"":"Raised height"===s?t.height=e.value||e.value_text||"":"Condition"===s?t.condition=e.value||e.value_text||"":"Pallor"===s?t.pallor=e.value||e.value_text||"":"Chest examination"===s?t.chestExamination=e.value||e.value_text||"":"Abdominal examination"===s?t.abdomenExamination=e.value||e.value_text||"":"Vaginal Inspection"===s?t.vaginalInspection=e.value||e.value_text||"":"Vaginal examination"===s?t.vaginalExamination=e.value||e.value_text||"":"Extremities"===s?t.extremities=e.value||e.value_text||"":"Clinical impression comments"===s?t.impression=e.value||e.value_text||"":"Treatment plan other remarks"===s?t.plan=e.value||e.value_text||"":"Immediate Intervention"===s&&(t.immediateIntervention=e.value||e.value_text||"")}),y(t)}},[g]),(0,i.jsxs)("div",{ref:S,className:"jsx-5fa98ec82d836d1d printable-content",children:[(0,i.jsxs)("div",{className:"jsx-5fa98ec82d836d1d "+((n?"print-preview":"print-only")||""),children:[(0,i.jsx)(o.TF,{}),(0,i.jsx)("h1",{style:{textAlign:"center",marginBottom:"20px"},className:"jsx-5fa98ec82d836d1d",children:"Gyneacology Ward"}),Object.values(j).every(e=>"string"==typeof e?!e.trim():0===e.length)?(0,i.jsx)("p",{style:{fontStyle:"italic",color:"gray"},className:"jsx-5fa98ec82d836d1d",children:"Gyneacology Ward not recorded."}):(0,i.jsxs)("div",{className:"jsx-5fa98ec82d836d1d patient-examination-data",children:[(j.chiefComplaint||j.illnessHistory)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-5fa98ec82d836d1d",children:"Complaints"}),j.chiefComplaint&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Chief Complaints: "}),j.chiefComplaint]}),j.illnessHistory&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"History of Present Illness: "}),j.illnessHistory]}),(0,i.jsx)("hr",{className:"jsx-5fa98ec82d836d1d"})]}),[j.lnmp,j.edd,j.gestationalAge,j.gravidity,j.parity,j.numberOfLivingChildren,j.menarche,j.menstralCycle,j.duration,j.prevAbortion,j.prevEctopic,j.abnormalVaginalDischarge,j.consistency,j.color,j.odour,j.amount,j.previousContraceptive,j.currentlyOnContraceptive,j.sideEffects,j.cancerScreening,j.historyOfStis].some(Boolean)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-5fa98ec82d836d1d",children:"Obstetric and Gyneacology History"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"10px",flexWrap:"wrap"},className:"jsx-5fa98ec82d836d1d",children:[j.lnmp&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"LNMP: "}),j.lnmp]}),j.edd&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"EDD: "}),j.edd]}),j.gestationalAge&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Gestational Age: "}),j.gestationalAge]}),j.gravidity&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Gravidity: "}),j.gravidity]}),j.parity&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Parity: "}),j.parity]}),j.numberOfLivingChildren&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Number of Living Children: "}),j.numberOfLivingChildren]}),j.menarche&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Menarche: "}),j.menarche]}),j.menstralCycle&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Menstrual Cycle: "}),j.menstralCycle]}),j.duration&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Duration in Days: "}),j.duration]}),j.prevAbortion&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Prev Abortion: "}),j.prevAbortion]}),j.prevEctopic&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Prev Ectopic: "}),j.prevEctopic]}),j.abnormalVaginalDischarge&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Abnormal Vaginal Discharge: "}),j.abnormalVaginalDischarge]}),j.consistency&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Consistency: "}),j.consistency]}),j.color&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Color: "}),j.color]}),j.odour&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Odour: "}),j.odour]}),j.amount&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Amount: "}),j.amount]}),j.previousContraceptive&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Previous Contraceptive: "}),j.previousContraceptive]}),j.currentlyOnContraceptive&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Currently on Contraceptive: "}),j.currentlyOnContraceptive]}),j.sideEffects&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Side Effects: "}),j.sideEffects]}),j.cancerScreening&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Cancer Screening: "}),j.cancerScreening]}),j.historyOfStis&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"History of STIs: "}),j.historyOfStis]})]}),(0,i.jsx)("hr",{className:"jsx-5fa98ec82d836d1d"})]}),(j.medicalHistory.length>0||j.habits.length>0)&&(0,i.jsxs)(i.Fragment,{children:[j.medicalHistory.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-5fa98ec82d836d1d",children:"Medical History"}),(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Condition: "}),j.medicalHistory.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]}),(0,i.jsx)("hr",{className:"jsx-5fa98ec82d836d1d"})]}),j.habits.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-5fa98ec82d836d1d",children:"Habits"}),(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Condition: "}),j.habits.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(", ")]}),(0,i.jsx)("hr",{className:"jsx-5fa98ec82d836d1d"})]})]}),[j.temperature,j.pulse,j.respiratory,j.systolic,j.diastolic,j.stats,j.rbs,j.weight,j.height].some(Boolean)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-5fa98ec82d836d1d",children:"Vital Signs"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginBottom:"10px"},className:"jsx-5fa98ec82d836d1d",children:[j.temperature&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Temperature: "}),j.temperature," \xb0C"]}),j.pulse&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Pulse: "}),j.pulse," bpm"]}),j.respiratory&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Respiratory Rate: "}),j.respiratory," breaths/min"]}),j.systolic&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Systolic Blood Pressure: "}),j.systolic," mmHg"]}),j.diastolic&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Diastolic Blood Pressure: "}),j.diastolic," mmHg"]}),j.stats&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsxs)("strong",{className:"jsx-5fa98ec82d836d1d",children:["O",(0,i.jsx)("sub",{className:"jsx-5fa98ec82d836d1d",children:"2"})," Saturation: "]}),j.stats," %"]}),j.rbs&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"RBS: "}),j.rbs," mmol/L"]}),j.weight&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Weight: "}),j.weight," kg"]}),j.height&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Height: "}),j.height," cm"]})]}),(0,i.jsx)("hr",{className:"jsx-5fa98ec82d836d1d"})]}),[j.condition,j.pallor,j.chestExamination,j.abdomenExamination,j.vaginalInspection,j.vaginalExamination,j.extremities,j.impression,j.plan,j.immediateIntervention,j.admittingOfficer].some(Boolean)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"jsx-5fa98ec82d836d1d",children:"General Examinations"}),j.condition&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Condition: "}),j.condition]}),j.pallor&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Pallor: "}),j.pallor]}),(0,i.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},className:"jsx-5fa98ec82d836d1d",children:(0,i.jsxs)("tbody",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsxs)("tr",{className:"jsx-5fa98ec82d836d1d",children:[j.chestExamination&&(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-5fa98ec82d836d1d",children:(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Chest Examination: "}),j.chestExamination]})}),j.abdomenExamination&&(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-5fa98ec82d836d1d",children:(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Abdominal Examination: "}),j.abdomenExamination]})})]}),(0,i.jsxs)("tr",{className:"jsx-5fa98ec82d836d1d",children:[j.vaginalInspection&&(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-5fa98ec82d836d1d",children:(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Vaginal Inspection: "}),j.vaginalInspection]})}),j.vaginalExamination&&(0,i.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},className:"jsx-5fa98ec82d836d1d",children:(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Vaginal Examination: "}),j.vaginalExamination]})})]})]})}),j.extremities&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Extremities: "}),j.extremities]}),j.impression&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Impression: "}),j.impression]}),j.plan&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Plan: "}),j.plan]}),j.immediateIntervention&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Immediate Intervention: "}),j.immediateIntervention]}),(0,i.jsx)("hr",{className:"jsx-5fa98ec82d836d1d"}),j.admittingOfficer&&(0,i.jsxs)("p",{className:"jsx-5fa98ec82d836d1d",children:[(0,i.jsx)("strong",{className:"jsx-5fa98ec82d836d1d",children:"Admitting Officer: "}),j.admittingOfficer]})]})]})]}),(0,i.jsx)(s(),{id:"5fa98ec82d836d1d",children:"@media print{.print-only.jsx-5fa98ec82d836d1d{display:block!important}}.print-only.jsx-5fa98ec82d836d1d{display:none}.print-preview.jsx-5fa98ec82d836d1d{display:block;border:1px solid#e0e0e0;margin:20px 0;padding:20px;background:white;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}"})]})})},39752:(e,t,a)=>{"use strict";a.d(t,{u9:()=>m,wt:()=>b});var i=a(95155),n=a(59487),s=a(12115),l=a(37129),r=a(23312),o=a(83436),c=a(70482),d=a(9890),u=a(49262);let m={procedures:{name:r.W.PROCEDURES,label:"Procedures",type:"string",hasGroupMembers:!0,children:[{concept:r.W.OTHER,label:"Other (Specify)"}]},supportiveCare:{name:r.W.SUPPORTIVE_CARE,label:"Supportive Care",type:"string",hasGroupMembers:!0,children:[{concept:r.W.OTHER,label:"Other (Specify)"}]}},h=[{value:r.W.MINOR_SURGERY,label:"Minor Surgery"},{value:r.W.SUTURING,label:"Suturing"},{value:r.W.JOINT_REDUCTION,label:"Joint Reduction"},{value:r.W.FRACTURE_REDUCTION,label:"Fracture Reduction"},{value:r.W.INTERCOSTAL_DRAIN_INSERTION,label:"Intercostal Drain Insertion"},{value:r.W.PLEUROCENTESIS,label:"Pleurocentesis"},{value:r.W.PERICARDIOCENTESISI,label:"Pericardiocentesis"},{value:r.W.PARACENTESISI,label:"Paracentesis"},{value:r.W.LUMBER_PUNCTURE,label:"Lumbar Puncture"},{value:r.W.INTRAVENOUS_CANNULATION,label:"Intravenous Cannulation"},{value:r.W.CENTRAL_LINE_INSERTION,label:"Central Line Insertion"},{value:r.W.CATHETERIZATION_URETHRAL,label:"Urethral Catheterization"},{value:r.W.CATHETERIZATION_SUPRAPUBIC,label:"Suprapubic Catheterization"},{value:r.W.SUCTIONING,label:"Suctioning"},{value:r.W.OROPHARYNGEAL_AIRWAY_INSERTION,label:"Oropharyngeal Airway Insertion"},{value:r.W.NASOPHARYNGEAL_AIRWAY_INSERTION,label:"Nasopharyngeal Airway Insertion"},{value:r.W.LARYNGEAL_MASK_AIRWAY_INSERTION,label:"Laryngeal Mask Airway Insertion"},{value:r.W.ENDOTRACHEAL_TUBE_INSERTION,label:"Endotracheal Tube Insertion"},{value:r.W.NASOGASTRIC_TUBE_INSERTION,label:"Nasogastric Tube Insertion"},{value:r.W.MANUAL_VENTILATION,label:"Manual Ventilation"},{value:r.W.CONTINUOUS_POSITIVE_AIRWAY_PRESSURE,label:"Continuous Positive Airway Pressure (CPAP)"},{value:r.W.OTHER,label:"Other (Specify)"}],p=[{value:r.W.WOUND_DRESSING,label:"Wound Dressing"},{value:r.W.PATIENT_EDUCATION,label:"Patient Education"},{value:r.W.COUNSELLING,label:"Counselling"},{value:r.W.FEEDING,label:"Feeding"},{value:r.W.OXYGENATION,label:"Oxygenation"},{value:r.W.TEPID_SPONGING,label:"Tepid Sponging"},{value:r.W.ELECTROCARDIOGRAPHY_MONITORING,label:"Electrocardiography (ECG) Monitoring"},{value:r.W.TURNING_PATIENTS,label:"Turning Patients"},{value:r.W.ORAL_CARE,label:"Oral Care"},{value:r.W.OTHER,label:"Other (Specify)"}],x=l.Ik().shape({procedures:l.YO().of(l.Ik().shape({key:l.Yj().required(),value:l.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one procedure must be selected"),otherProcedureSpecify:l.Yj().nullable().when("procedures",{is:e=>e.some(e=>e.key===r.W.OTHER),then:e=>e.required("Please specify the other procedure")}),supportiveCare:l.YO().of(l.Ik().shape({key:l.Yj().required(),value:l.zM().required()})).transform(e=>Array.isArray(e)?e.filter(e=>!0===e.value):[]).min(1,"At least one supportive care option must be selected"),otherSupportiveCareSpecify:l.Yj().nullable().when("supportiveCare",{is:e=>e.some(e=>e.key===r.W.OTHER),then:e=>e.required("Please specify the other supportive care")})}),b=e=>{let{onSubmit:t,onSkip:a}=e,[l,m]=(0,s.useState)({}),[b,g]=(0,s.useState)({otherProcedure:!1,otherSupportiveCare:!1}),{params:f}=(0,c.KU)(),{mutate:v}=(0,o.jM)(),{data:j}=(0,d.iu)(f.id),[y,S]=(0,s.useState)(void 0),{init:N,ServerTime:A}=(0,u.useServerTime)();(0,s.useEffect)(()=>{if(j){let e=j.find(e=>!e.date_stopped);e&&S(e)}},[j]);let _=async e=>{console.log("Procedures Selected:",e.procedures),console.log("Supportive Care Selected:",e.supportiveCare);let a=A.getServerTimeString(),i=[{concept:r.W.PROCEDURES,value:r.W.PROCEDURES,obsDatetime:a,groupMembers:(e.procedures||[]).filter(e=>!0===e.value).map(t=>({concept:t.key,value:t.key===r.W.OTHER?e.otherProcedureSpecify:t.key,obsDatetime:a}))},{concept:r.W.SUPPORTIVE_CARE,value:r.W.SUPPORTIVE_CARE,obsDatetime:a,groupMembers:(e.supportiveCare||[]).filter(e=>!0===e.value).map(t=>({concept:t.key,value:t.key===r.W.OTHER?e.otherSupportiveCareSpecify:t.key,obsDatetime:a}))}],n={encounterType:r.fA.NON_PHARMACOLOGICAL,visit:null==y?void 0:y.uuid,patient:f.id,encounterDatetime:a,obs:i};try{await v(n),t(e)}catch(e){console.error("Error submitting Non-Pharmacological form: ",e)}};return(0,i.jsxs)(n.PD,{validationSchema:x,initialValues:{procedures:[],supportiveCare:[],otherProcedureSpecify:"",otherSupportiveCareSpecify:""},onSubmit:_,children:[(0,i.jsx)(n.fP,{getValues:m}),(0,i.jsxs)(n.GE,{direction:"row",children:[(0,i.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:[(0,i.jsx)("h4",{children:"Procedures"}),(0,i.jsx)(n.Z3,{name:"procedures",allowFilter:!1,options:h,getValue:e=>g(t=>({...t,otherProcedure:e.some(e=>e.key===r.W.OTHER&&e.value)}))}),b.otherProcedure&&(0,i.jsx)(n.A8,{id:"otherProcedureSpecify",label:"Specify Other Procedure",name:"otherProcedureSpecify",placeholder:"Specify the procedure"})]}),(0,i.jsxs)(n.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%"},children:[(0,i.jsx)("h4",{children:"Supportive Care"}),(0,i.jsx)(n.Z3,{name:"supportiveCare",allowFilter:!1,options:p,getValue:e=>g(t=>({...t,otherSupportiveCare:e.some(e=>e.key===r.W.OTHER&&e.value)}))}),b.otherSupportiveCare&&(0,i.jsx)(n.A8,{id:"otherSupportiveCareSpecify",label:"Specify Other Supportive Care",name:"otherSupportiveCareSpecify",placeholder:"Specify the care"})]})]})]})}},54692:(e,t,a)=>{"use strict";a.d(t,{s:()=>o});var i=a(95155),n=a(48453),s=a(99284),l=a(83170),r=a(59487);let o=e=>{let{options:t,name:a,label:o,width:c="100%",sx:d,getValue:u,manualInitialValues:m,disabled:h=!1,multiple:p=!0,applyPadding:x=!0}=e,{hasError:b,setFieldValue:g,value:f,errorMessage:v}=(0,n.W)(a),j=x?{paddingTop:"1ch",paddingBottom:"1ch"}:{};return(0,i.jsxs)(r.jD,{sx:{width:c,...d,borderRadius:.5},children:[(0,i.jsx)(s.A,{shrink:!0,children:o}),t&&t.length>0?(0,i.jsx)(l.default,{styles:{control:(e,t)=>({...e,borderColor:b?"red":"#B3B3B3",...j}),option:(e,t)=>({...e,backgroundColor:t.isSelected?"white":e.backgroundColor,color:"black","&:hover":{backgroundColor:"#cffccf"}})},defaultValue:m,onChange:e=>{if(p){let i=e.map(e=>{let a=t.find(t=>t.options.some(t=>t.value===e.value));return{group:(null==a?void 0:a.value)||"Unknown",value:e.value,label:e.label}});g(a,i),u&&u(i)}else{let i=t.find(t=>t.options.some(t=>t.value===e.value)),n={group:(null==i?void 0:i.value)||"Unknown",value:e.value,label:e.label};g(a,n),u&&u(n)}},isDisabled:h,isMulti:p,options:t,formatGroupLabel:e=>(0,i.jsx)("div",{style:{fontWeight:"bold"},children:e.label}),theme:e=>({...e,colors:{...e.colors,primary:r.zQ.primary,primary25:"#cffccf",neutral0:"white",neutral80:"black"}})}):null,(0,i.jsx)(r.Th,{color:"red",variant:"subtitle2",children:v})]})}},60283:(e,t,a)=>{"use strict";a.d(t,{g:()=>n});var i=a(12115);let n=()=>{let[e,t]=(0,i.useState)(!1),[a,n]=(0,i.useState)(0),[s,l]=(0,i.useState)(!0),[r,o]=(0,i.useState)(""),[c,d]=(0,i.useState)(!1);return{loading:e,setLoading:t,completed:a,setCompleted:n,showForm:s,setShowForm:l,message:r,setMessage:o,error:c,setError:d}}},69759:(e,t,a)=>{"use strict";a.d(t,{I2:()=>x,J0:()=>h,K8:()=>v,Wm:()=>f,l2:()=>p,l3:()=>b,ml:()=>g,qm:()=>j,rJ:()=>y});var i=a(99604),n=a(53988),s=a(23312),l=a(16232),r=a(3074),o=a(39752),c=a(98338);a(94821);var d=a(99724),u=a(6314);let m=e=>{if(!(null==e?void 0:e.length))return"Notes not entered";let t=e[0];return(null==t?void 0:t.created_by)?"".concat(t.created_by," ").concat((0,u.rX)(null==t?void 0:t.obs_datetime)):'Notes not entered"'},h=e=>({heading:"Presenting Complaints",children:null==e?void 0:e.map(e=>({item:null==e?void 0:e.value})),user:m(e)}),p=e=>[{heading:"Vitals",children:Object.keys(i.D).map(t=>{let a=i.D[t],s=(0,n.m)(e,a.name);return{item:{[a.label]:s||"N/A"}}}),user:m(e)},{heading:"Triage Result",children:[{item:(0,n.m)(e,s.W.TRIAGE_RESULT)||"N/A"}],user:m(e)},{heading:"Patient Care Area",children:[{item:(0,n.m)(e,s.W.CARE_AREA)||"N/A"}],user:m(e)}],x=e=>[{heading:"Airway",children:A(l.mX,e.airwayObs),user:m(e.airwayObs)},{heading:"Breathing",children:A(l.HN,e.breathingObs),user:m(e.breathingObs)},{heading:"Circulation",children:A(l.CG,e.circulationObs),user:m(e.circulationObs)},{heading:"Disability",children:A(l.FB,e.disabilityObs),user:m(e.disabilityObs)},{heading:"Exposure",children:A(l.qG,e.exposureObs),user:m(e.exposureObs)}],b=e=>[{heading:"Non-Pharmacological",children:A(o.u9,e.nonPharmalogical),user:m(e.nonPharmalogical)}],g=e=>[{heading:"General Information",children:A(c.fq,e.generalInformationObs),user:m(e.generalInformationObs)},{heading:"Head and Neck",children:A(c.l7,e.headAndNeckObs),user:m(e.headAndNeckObs)},{heading:"Chest",children:A(c.A,e.chestObs),user:m(e.chestObs)},{heading:"Abdomen and Pelvis",children:A(c.$6,e.abdomenAndPelvisObs),user:m(e.abdomenAndPelvisObs)},{heading:"Extremities",children:A(c.CU,e.extremitiesObs),user:m(e.extremitiesObs)},{heading:"Neurological",children:A(c.hn,e.neurologicalObs),user:m(e.neurologicalObs)}],f=e=>[{heading:"",children:A(r.U,e),user:m(e)}],v=e=>[{heading:"Diagnosis Notes",children:A({diagnosis:{name:s.W.DIFFERENTIAL_DIAGNOSIS,label:"Diagnosis",type:"title",children:[{concept:s.W.DIFFERENTIAL_DIAGNOSIS,label:"Differential",type:"string",multiple:!0},{concept:s.W.FINAL_DIAGNOSIS,label:"Final",type:"string",multiple:!0}]}},e),user:m(e)}],j=e=>e.map(e=>({plan:e.value,result:e.children.map(e=>({test:e.names[0].name,result:e.value})),user:(null==e?void 0:e.created_by)?"".concat(e.created_by," ").concat((0,u.rX)(null==e?void 0:e.obs_datetime)):void 0})),y=e=>[{heading:"Disposition",children:A(d.wv,e),user:m(e)}],S=e=>e.filter(e=>e.value||e.children&&e.children.length>0).map(e=>{var t,a;let i=null!=(a=null==(t=e.children)?void 0:t.filter(e=>e.value||e.children&&e.children.length>0).map(e=>{var t,a;let i=[];return(null==e?void 0:e.children)&&e.children.length>0&&(i=e.children.filter(e=>e.value).map(e=>{var t,a;return{item:{[(null==(a=e.names)||null==(t=a[0])?void 0:t.name)||"Unnamed"]:e.value}}})),{item:0===i.length?{[(null==(a=e.names)||null==(t=a[0])?void 0:t.name)||"Unnamed"]:e.value}:e.value,children:i.length>0?i:void 0}}))?a:[];return{item:e.value,children:i.length>0?i:void 0}}),N=(e,t)=>t?e.length>0&&t.flatMap(t=>{let a,i=(0,n.yw)(e,t.concept);if(!i||0===i.length)return[];if(null==t?void 0:t.image){let a=(0,n.yw)(e,null==t?void 0:t.parentConcept);return(null==a?void 0:a.length)?S(a[0].children):[]}let s=(0,n.m)(e,null==t?void 0:t.concept);if((!s||""===s||null===s)&&(!t.multiple||0===i.length))return[];if((null==t?void 0:t.type)==="string"){let n=(null==t?void 0:t.multiple)?i.map(e=>{let a=(null==t?void 0:t.options)?t.options[e.value]:e.value;return a?{item:a}:null}).filter(Boolean):(null==t?void 0:t.options)?t.options[s]:s;if(null==n||Array.isArray(n)&&0===n.length)return[];a={item:t.label,children:(null==t?void 0:t.children)?N(e,null==t?void 0:t.children):n}}else{let n=(null==t?void 0:t.multiple)?i.map(e=>{let a=(null==t?void 0:t.options)?t.options[e.value]:e.value;return a?{item:a}:null}).filter(Boolean):s?{[t.label]:s}:null;if(!n||Array.isArray(n)&&0===n.length)return[];a={item:n,children:(null==t?void 0:t.children)?N(e,null==t?void 0:t.children):n}}return a}):[],A=(e,t)=>Object.keys(e).filter(t=>!e[t].child).flatMap(a=>{var i,s,l,r,o;let c=e[a],d=(0,n.m)(t,c.name);if(!d&&!c.hasGroupMembers&&!c.image&&"title"!=c.type)return[];let u=null!=(s=null==(i=c.options)?void 0:i[d])?s:d,m=(null==c?void 0:c.type)||"N/A",h=[];if(c.groupMembersWithLabel){let e=(0,n.yw)(t,c.name);(null==e?void 0:e.length)>0&&(h=null==(l=e[0])?void 0:l.children)}let p=null!=(r=N([...t,...h],c.children))?r:[];if(c.hasGroupMembers){let e=(0,n.yw)(t,c.name);if((null==e?void 0:e.length)>0&&(p=[...p,...null==(o=e[0])?void 0:o.children.filter(e=>e.value).map(e=>({item:e.value}))]),!d&&0===p.length)return[]}if(null==c?void 0:c.image)return(0,n.yw)(t,c.name).filter(e=>{var t,a;return e.value||(null!=(a=null==(t=e.children)?void 0:t.length)?a:0)>0}).map(e=>({item:e.value,children:S(e.children)}));let x={item:"string"===m?u:"title"===m?c.label:{[c.label]:u}};return p.length>0&&(x.children=p),x.bold=c.bold,x})},83403:(e,t,a)=>{"use strict";a.d(t,{Yw:()=>r,rg:()=>o,uu:()=>c});var i=a(95155),n=a(47292),s=a(23312),l=a(6314);let r=e=>null==e?void 0:e.map(e=>{var t,a;return{route:null==(t=e.children.find(e=>{var t,a;return(null==(t=e.names)?void 0:t.length)>0&&(null==(a=e.names[0])?void 0:a.name)==s.l8.MEDICATION_ROUTE}))?void 0:t.value,dose:null==(a=e.children.find(e=>{var t,a;return(null==(t=e.names)?void 0:t.length)>0&&(null==(a=e.names[0])?void 0:a.name)==s.W.MEDICATION_DOSE}))?void 0:a.value,createdBy:e.created_by,createdTime:(0,l.rX)(e.obs_datetime),medication:e.value}}),o=(e,t)=>{var a;return r(null==e||null==(a=e.obs)?void 0:a.filter(e=>e.value_coded_uuid==t))},c=e=>{let{data:t,givenMedication:a}=e,s=o(t,a);return(0,i.jsx)(n.q,{columns:[{label:"Dose",field:"dose"},{label:"Route",field:"route"},{label:"Dispensed Time",field:"createdTime"},{label:"Dispenser",field:"createdBy"}],data:s||[]})}},84363:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var i=a(95155),n=a(12115),s=a(58073);a(34037);var l=a(39347);let r=e=>{let{onSubmit:t}=e,[a,r]=(0,n.useState)("");return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(a),r("")},children:[(0,i.jsx)(s.A,{value:a,onChange:e=>{r(e)},options:{autofocus:!0,spellChecker:!1,placeholder:"Type your markdown here..."}}),(0,i.jsx)(l.A,{variant:"contained",type:"submit",children:"Submit"})]})})}},84406:(e,t,a)=>{"use strict";a.d(t,{Q:()=>N});var i=a(95155),n=a(23312),s=a(70482),l=a(16380),r=a(83436),o=a(12115),c=a(52269),d=a(54102),u=a(43388),m=a(9670),h=a(20837),p=a(69439),x=a(39347),b=a(83965),g=a(30821),f=a(6459),v=a(49262);let j={PH:"pH",PCO2:"pCO₂ (mmHg)",PO2:"pO₂ (mmHg)",CTHB:"c_tHb (g/dL)",SO2:"sO₂ (%)",FO2HB:"FO₂Hb (%)",FHHB:"FHHb (%)",FMETHB:"FmetHb (%)",CK:"cK⁺ (mmol/L)",CNA:"cNa⁺ (mmol/L)",CA2:"cCa\xb2⁺ (mmol/L)",CCL:"cCl⁻ (mmol/L)",GLU:"cGlu (mmol/L)",LAC:"cLac (mmol/L)",CTBIL:"ctBil (\xb5mol/L)",PH_T:"pH (T)",PCO2_T:"pCO₂ (T) mmHg",PO2_T:"pO₂ (T) mmHg",P50E:"P50e",BASE_EXCESS:"cBaseExcess (Ecf)c",HCO3:"cHCO₃⁻ (P,st)c",ANION_GAP:"Amion Gap",MOSM:"cmOSm"},y={PH:{name:j.PH,label:j.PH},PCO2:{name:j.PCO2,label:j.PCO2},PO2:{name:j.PO2,label:j.PO2},CTHB:{name:j.CTHB,label:j.CTHB},SO2E:{name:j.SO2,label:j.SO2},FO2HBE:{name:j.FO2HB,label:j.FO2HB},FHHBE:{name:j.FHHB,label:j.FHHB},FMETHB:{name:j.FMETHB,label:j.FMETHB},CK:{name:j.CK,label:j.CK},CNA:{name:j.CNA,label:j.CNA},CA2:{name:j.CA2,label:j.CA2},CCL:{name:j.CCL,label:j.CCL},glucose:{name:j.GLU,label:j.GLU},LACTATE:{name:j.LAC,label:j.LAC},CTBIL:{name:j.CTBIL,label:j.CTBIL},PH_T:{name:j.PH_T,label:j.PH_T},PCO2_T:{name:j.PCO2_T,label:j.PCO2_T},PO2_T:{name:j.PO2_T,label:j.PO2_T},P50E:{name:j.P50E,label:j.P50E},BASE_EXCESS:{name:j.BASE_EXCESS,label:j.BASE_EXCESS},HCO3:{name:j.HCO3,label:j.HCO3},ANION_GAPC:{name:j.ANION_GAP,label:j.ANION_GAP},MOSMC:{name:j.MOSM,label:j.MOSM},mrdt:{name:n.W.MRDT,label:"MRDT",coded:!0},hiv:{name:n.W.HIV,label:"HIV",coded:!0},vdrl:{name:n.W.VDRL,label:"VDRL",coded:!0},pregnancyTest:{name:n.W.PREGNANCY_TEST,label:"Pregnancy Test",coded:!0},urobilinogen:{name:n.W.UROBILINOGEN,label:"Urobilinogen"},leukocytes:{name:n.W.LEUKOCYTES,label:"Leukocytes"},bilirubin:{name:n.W.BILIRUBIN,label:"Bilirubin"},specificGravity:{name:n.W.SPECIFIC_GRAVITY,label:"Specific Gravity"},nitrite:{name:n.W.NITRITE,label:"Nitrite"},ketones:{name:n.W.KETONES,label:"Ketones"},blood:{name:n.W.BLOOD,label:"Blood"},protein:{name:n.W.PROTEIN,label:"Protein"},pocus:{name:n.W.POINT_OF_CARE_ULTRASOUND,label:"Point of care ultrasound"},ecg:{name:n.W.ECG,label:"ECG"},pefr:{name:n.W.PEFR,label:"PEFR"},other:{name:n.W.OTHER,label:"Other"}},S={arterialVenousBloodGasMain:{title:"Arterial/Venous Blood Gas",subSections:["bloodGasValues","oximetryValues","electrolyteValues","metabolicValues","temperatureCorrectedValues","acidBaseStatus"]},bloodGasValues:{title:"Blood Gas Values",fields:[y.PH,y.PCO2,y.PO2]},oximetryValues:{title:"Oximetry Values",fields:[y.CTHB,y.SO2E,y.FO2HBE,y.FHHBE,y.FMETHB]},electrolyteValues:{title:"Electrolyte Values",fields:[y.CK,y.CNA,y.CA2,y.CCL]},metabolicValues:{title:"Metabolic Values",fields:[y.glucose,y.LACTATE,y.CTBIL]},temperatureCorrectedValues:{title:"Temperature Corrected Values",fields:[y.PH_T,y.PCO2_T,y.PO2_T,y.P50E]},acidBaseStatus:{title:"Acid Base Status",fields:[y.BASE_EXCESS,y.HCO3,y.ANION_GAPC,y.MOSMC]},dipstick:{title:"Dipstick",fields:[y.urobilinogen,y.PH,y.leukocytes,y.glucose,y.specificGravity,y.protein,y.nitrite,y.ketones,y.bilirubin,y.blood]},additionalTests:{title:"Additional Tests",fields:[y.pocus,y.ecg,y.pefr,y.other]},pregnancyTest:{title:"Pregnancy Test",fields:[y.pregnancyTest]}},N=()=>{let{activeVisit:e,patientId:t,gender:a}=(0,s.gd)(),{mutate:j,isPending:N,isSuccess:A}=(0,r.jM)(),{ServerTime:_}=(0,v.useServerTime)(),[T,E]=(0,o.useState)(!1),[I,O]=(0,o.useState)(!1),[D,R]=(0,o.useState)(!1),w=(0,o.useCallback)(()=>{let e={};return Object.keys(S).forEach(t=>{let a=S[t];e[t]={open:!1,selectedFields:{}},a.fields&&a.fields.forEach(a=>{e[t].selectedFields[a.name]=!1})}),e},[]),[C,L]=(0,o.useState)(w),P=(0,o.useCallback)(()=>{L(w()),E(!1),O(!1),R(!1)},[w]),W=(0,o.useCallback)(()=>{var e;let t=[],i=e=>{let a=S[e],i=C[e];if(a.fields){let s=a.fields.filter(e=>i.selectedFields[e.name]);s.length>0&&("pregnancyTest"===e?t.push({concept:y.pregnancyTest.name,obsDatetime:_.getServerTimeString(),value:!0}):t.push({concept:n.W.BEDSIDE_INVESTIGATIONS,obsDatetime:_.getServerTimeString(),value:a.title,groupMembers:s.map(e=>({concept:e.name,obsDatetime:_.getServerTimeString(),value:!0}))}))}};return null==(e=S.arterialVenousBloodGasMain.subSections)||e.forEach(e=>{i(e)}),i("dipstick"),i("additionalTests"),"Female"===a&&i("pregnancyTest"),T&&t.push({concept:y.mrdt.name,obsDatetime:_.getServerTimeString(),value:!0}),I&&t.push({concept:y.hiv.name,obsDatetime:_.getServerTimeString(),value:!0}),D&&t.push({concept:y.vdrl.name,obsDatetime:_.getServerTimeString(),value:!0}),t},[C,T,I,D,a]),M=(0,o.useCallback)(a=>{"string"!=typeof a&&a&&a.preventDefault();let i=W();console.log("\uD83D\uDE80 ~ handleSubmit ~ obs:",i),j({encounterType:n.fA.BEDSIDE_INVESTIGATION_PLAN,visit:e,patient:t,encounterDatetime:_.getServerTimeString(),obs:i}),P()},[W,j,e,t,P]);(0,o.useEffect)(()=>{A&&l.oR.success("Bedside test plan submitted successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:l.br})},[A]);let k=(0,o.useCallback)(e=>{L(t=>({...t,[e]:{...t[e],open:!t[e].open}}))},[]),H=(0,o.useCallback)((e,t)=>{L(a=>({...a,[e]:{...a[e],selectedFields:{...a[e].selectedFields,[t]:!a[e].selectedFields[t]}}}))},[]),F=(0,o.useCallback)(e=>{let t=S[e],a=C[e];return!!t.fields&&0!==t.fields.length&&t.fields.every(e=>a.selectedFields[e.name])},[C]),B=(0,o.useCallback)(e=>{let t=S[e],a=C[e];if(!t.fields||0===t.fields.length)return!1;let i=t.fields.filter(e=>a.selectedFields[e.name]).length;return i>0&&i<t.fields.length},[C]),Y=(0,o.useCallback)(e=>{let t=S[e];if(!t.fields)return;let a=C[e],i=!F(e),n={...a.selectedFields};t.fields.forEach(e=>{n[e.name]=i}),L(t=>({...t,[e]:{...t[e],selectedFields:n,open:!0}}))},[C,F]),G=(0,o.useCallback)(e=>{let t=S[e];return!!t.subSections&&t.subSections.every(e=>{let t=S[e];return!t.fields||0===t.fields.length||F(e)})},[F]),U=(0,o.useCallback)(e=>{let t=S[e];if(!t.subSections)return!1;let a=0,i=0;return t.subSections.forEach(e=>{let t=S[e];t.fields&&(i+=t.fields.length,a+=t.fields.filter(t=>C[e].selectedFields[t.name]).length)}),a>0&&a<i},[C]),q=(0,o.useCallback)(e=>{let t=S[e];if(!t.subSections)return;let a=!G(e);L(i=>{var n;let s={...i};return null==(n=t.subSections)||n.forEach(e=>{let t=S[e];if(t.fields){let i={...s[e].selectedFields};t.fields.forEach(e=>{i[e.name]=a}),s[e]={...s[e],selectedFields:i,open:!0}}}),s[e]={...s[e],open:!0},s})},[G]),V=e=>{var t;let{sectionKey:a}=e,n=S[a],s=C[a],l=F(a),r=B(a);return n.fields&&0!==n.fields.length?(0,i.jsxs)(c.default,{sx:{mb:1},children:[" ",(0,i.jsx)(d.default,{control:(0,i.jsx)(u.default,{checked:l,indeterminate:r&&!l,onChange:()=>Y(a),sx:{color:"GrayText"}}),label:(0,i.jsxs)(m.default,{color:"GrayText",onClick:()=>k(a),sx:{fontSize:16,cursor:"pointer",display:"inline-flex",alignItems:"center"},children:[n.title,s.open?(0,i.jsx)(b.A,{sx:{ml:1,fontSize:20}}):(0,i.jsx)(g.A,{sx:{ml:1,fontSize:20}})]})}),(0,i.jsx)(h.A,{in:s.open,children:(0,i.jsx)(c.default,{sx:{pl:4,mt:1},children:null==(t=n.fields)?void 0:t.map(e=>(0,i.jsx)(d.default,{control:(0,i.jsx)(u.default,{checked:s.selectedFields[e.name],onChange:()=>H(a,e.name),name:e.name,id:e.name}),label:e.label},e.name))})})]}):null};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(f.h,{loading:N,children:[(0,i.jsxs)(p.A,{children:[(0,i.jsx)(e=>{var t;let{sectionKey:a}=e,n=S[a],s=C[a],l=G(a),r=U(a);return(0,i.jsxs)(c.default,{sx:{mb:1},children:[(0,i.jsx)(d.default,{control:(0,i.jsx)(u.default,{checked:l,indeterminate:r&&!l,onChange:()=>q(a),sx:{color:"GrayText"}}),label:(0,i.jsxs)(m.default,{color:"GrayText",onClick:()=>k(a),sx:{fontSize:16,cursor:"pointer",display:"inline-flex",alignItems:"center"},children:[n.title,s.open?(0,i.jsx)(b.A,{sx:{ml:1,fontSize:20}}):(0,i.jsx)(g.A,{sx:{ml:1,fontSize:20}})]})}),(0,i.jsx)(h.A,{in:s.open,children:(0,i.jsx)(c.default,{sx:{pl:4,mt:1},children:null==(t=n.subSections)?void 0:t.map(e=>(0,i.jsx)(V,{sectionKey:e},e))})})]})},{sectionKey:"arterialVenousBloodGasMain"}),(0,i.jsx)(c.default,{sx:{mb:1},children:(0,i.jsx)(d.default,{control:(0,i.jsx)(u.default,{checked:T,onChange:()=>E(!T),sx:{color:"GrayText"},name:y.mrdt.name,id:y.mrdt.name}),label:(0,i.jsx)(m.default,{sx:{fontSize:16},color:"GrayText",children:y.mrdt.label})})}),(0,i.jsx)(c.default,{sx:{mb:1},children:(0,i.jsx)(d.default,{control:(0,i.jsx)(u.default,{checked:I,onChange:()=>O(!I),sx:{color:"GrayText"},name:y.hiv.name,id:y.hiv.name}),label:(0,i.jsx)(m.default,{sx:{fontSize:16},color:"GrayText",children:y.hiv.label})})}),(0,i.jsx)(c.default,{sx:{mb:1},children:(0,i.jsx)(d.default,{control:(0,i.jsx)(u.default,{checked:D,onChange:()=>R(!D),sx:{color:"GrayText",fontSize:16},name:y.vdrl.name,id:y.vdrl.name}),label:(0,i.jsx)(m.default,{sx:{fontSize:16},color:"GrayText",children:y.vdrl.label})})}),"Female"===a&&(0,i.jsx)(V,{sectionKey:"pregnancyTest"}),(0,i.jsx)(V,{sectionKey:"dipstick"}),(0,i.jsx)(V,{sectionKey:"additionalTests"})]}),(0,i.jsx)(c.default,{sx:{mb:1},children:(0,i.jsx)(x.A,{type:"submit",variant:"contained",color:"primary",onClick:M,children:"Submit"})})]})})}},85696:(e,t,a)=>{"use strict";a.d(t,{G:()=>r});var i=a(12115),n=a(83436),s=a(23312),l=a(1532);let r=e=>{let[t,a]=(0,i.useState)([]),[r,o]=(0,i.useState)(!0),{data:c,isLoading:d,refetch:u}=(0,n.$O)(e),{visitDate:m}=(0,l.E)();return(0,i.useEffect)(()=>{if(!d&&c&&m){let e=c.filter(e=>e.visit.date_started===m).find(e=>{var t;return(null==e||null==(t=e.encounter_type)?void 0:t.uuid)===s.fA.CLINICAL_NOTES});e?a(e.obs.map(e=>({paragraph:e.value_text,creator:e.created_by,time:e.obs_datetime,rawTime:new Date(e.obs_datetime).getTime()})).sort((e,t)=>t.rawTime-e.rawTime)):a([]),o(!1)}},[c,m,d]),{notes:t,isLoading:r,refresh:u}}},88190:(e,t,a)=>{"use strict";a.d(t,{sK:()=>P,DQ:()=>tc,Zk:()=>f.Z,Cp:()=>et,nB:()=>tu,sJ:()=>ts});var i,n,s,l,r,o,c=a(95155),d=a(12115),u=a(59487);a(84363);var m=a(83436),h=a(70482),p=a(23312);a(6314),a(49262),a(42281),a(85696),a(96609),a(76606),(0,a(50548).A)({palette:{primary:{main:"#2196f3"},secondary:{main:"#f50057"}}}),a(14593),a(32686),a(5850);var x=a(1532);let b=e=>e?"string"==typeof e?e:Object.entries(e).map(e=>{let[t,a]=e;return"".concat(t,": ").concat(a)}).join(", "):"",g=e=>{let{children:t,level:a=1}=e,i=Array.isArray(t)?t:t?[t]:[];return 0===i.length?null:_jsx("div",{style:{paddingLeft:"".concat(16*a,"px")},children:i.map((e,t)=>{let i=b(null==e?void 0:e.item);return _jsxs("div",{style:{marginBottom:"4px"},children:[i&&_jsxs("div",{children:["- ",i]}),(null==e?void 0:e.children)&&_jsx(g,{children:e.children,level:a+1})]},t)})})};a(69759),a(17874),a(88806);var f=a(22219),v=a(91966),j=a(31960),y=a(81063),S=a(3815),N=a(48455),A=a(35881),_=a(29716),T=a(62966),E=a(12422),I=a(78679),O=a(53494),D=a(79608);a(33348),a(79246);var R=a(51661);a(84406);var w=a(92377),C=a(86010);let L=(0,A.Ay)(_.A)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}),P=()=>{let e=[{id:"bedside",title:"Bedside",content:(0,c.jsx)(R.J,{})},{id:"labForm",title:"Lab orders",content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w.v,{onClose:()=>{},addRequest:()=>{}}),(0,c.jsx)(j.M,{})]})},{id:"radiology",title:"Radiology (Coming Soon)",content:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(C.h,{})})},{id:"labResults",title:"Lab Results",content:(0,c.jsx)(v.E,{rows:[]})}];return(0,c.jsxs)(y.default,{sx:{padding:"1ch"},elevation:0,children:[(0,c.jsxs)(u.jD,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.4rem"},children:"Investigations"}),(0,c.jsx)(W,{})]}),(0,c.jsx)("br",{}),(0,c.jsx)(N.M,{sections:e})]})};function W(){let[e,t]=(0,d.useState)(null),[a,i]=d.useState(!1),{hasActiveVisit:n}=(0,h.gd)(),s=()=>{i(!1)};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Fragment,{children:(0,c.jsxs)(L,{onClose:s,"aria-labelledby":"customized-dialog-title",open:a,fullWidth:!0,maxWidth:"xl",children:[(0,c.jsx)(T.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Lab Order"}),(0,c.jsx)(O.default,{"aria-label":"close",onClick:s,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,c.jsx)(D.A,{})}),(0,c.jsxs)(E.A,{dividers:!0,children:[(0,c.jsx)(S.$,{onClose:s})," "]}),(0,c.jsx)(I.A,{})]})})})}var M=a(75180),k=a(52269);let H=e=>{let{chartConfig:t,...a}=e,i=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e,a={chart:{type:"line",height:t.height||350},stroke:{curve:"straight",width:3},dataLabels:{enabled:!0,style:{fontSize:"10px",fontWeight:"bold"}},colors:t.colors||["#FF1654","#247BA0"],xaxis:{categories:t.xAxisCategories},yaxis:{min:t.yAxisMin,max:t.yAxisMax,forceNiceScale:!0},series:t.series};return i.current&&(e=new M.A(i.current,a)).render(),()=>{e&&e.destroy()}},[t]),(0,c.jsx)(k.default,{ref:i,sx:{height:t.height||350},...a})};function F(){let{values:e,dateTimes:t}=(0,h.L$)("Glucose");return(0,c.jsx)(H,{chartConfig:{series:[{name:"Glucose",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#247BA0"]}})}function B(){let{values:e,dateTimes:t}=(0,h.L$)("Systolic blood pressure"),{values:a,dateTimes:i}=(0,h.L$)("Diastolic blood pressure");return(0,c.jsx)(H,{chartConfig:{series:[{name:"Systolic",data:e},{name:"Diastolic",data:a}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#FF1654","#247BA0"]}})}function Y(){let{values:e,dateTimes:t}=(0,h.L$)("Blood oxygen saturation");return(0,c.jsx)(H,{chartConfig:{series:[{name:"O₂ Sat",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#F3A712"]}})}function G(){let{values:e,dateTimes:t}=(0,h.L$)("Temperature");return(0,c.jsx)(H,{chartConfig:{series:[{name:"Temperature",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#8C54FF"]}})}function U(){let{values:e,dateTimes:t}=(0,h.L$)("Heart Rate");return(0,c.jsx)(H,{chartConfig:{series:[{name:"Heart Rate",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#70C1B3"]}})}function q(){let{values:e,dateTimes:t}=(0,h.L$)("Respiratory Rate");return(0,c.jsx)(H,{chartConfig:{series:[{name:"Respiratory Rate",data:e}],xAxisCategories:t,title:"",height:350,yAxisMin:0,colors:["#d815a7"]}})}var V=a(3951),z=a(52835),K=a(39347),Z=a(76438),X=a(57538),$=a(78914),J=a(41476),Q=a(50095),ee=a(66392);let et=()=>{let e=["Respiratory Rate"," Heart Rate","Glucose"],t=["BP","Temperature"," O₂ Sat"],a=(0,d.useRef)(null),i=(0,d.useRef)(null),[n,s]=(0,d.useState)(0),[l,r]=(0,d.useState)(0),[o,u]=(0,d.useState)(!1),[m,h]=(0,d.useState)(!1),p=(e,t,a)=>{t(e),a(!1)},x=e=>{e(e=>!e)},b=(e,t,a)=>{a.current&&a.current.contains(e.target)||t(!1)};return(0,c.jsxs)(V.default,{container:!0,spacing:1,children:[(0,c.jsx)(V.default,{item:!0,xs:12,md:6,children:(0,c.jsxs)(y.default,{elevation:2,sx:{p:2,position:"relative",zIndex:1},children:[(0,c.jsxs)(z.A,{variant:"outlined",ref:a,children:[(0,c.jsx)(K.A,{children:e[n]}),(0,c.jsx)(K.A,{size:"small",onClick:()=>x(u),children:(0,c.jsx)(ee.A,{})})]}),(0,c.jsx)(Z.A,{open:o,anchorEl:a.current,transition:!0,disablePortal:!1,sx:{zIndex:2e3},children:t=>{let{TransitionProps:i,placement:l}=t;return(0,c.jsx)(X.A,{...i,style:{transformOrigin:"bottom"},children:(0,c.jsx)(y.default,{sx:{zIndex:2e3},children:(0,c.jsx)($.x,{onClickAway:e=>b(e,u,a),children:(0,c.jsx)(J.A,{autoFocusItem:!0,children:e.map((e,t)=>(0,c.jsx)(Q.A,{selected:t===n,onClick:()=>p(t,s,u),children:e},e))})})})})}}),0===n&&(0,c.jsx)(q,{}),1===n&&(0,c.jsx)(U,{}),2===n&&(0,c.jsx)(F,{})]})}),(0,c.jsx)(V.default,{item:!0,xs:12,md:6,children:(0,c.jsxs)(y.default,{elevation:2,sx:{p:2,position:"relative",zIndex:1},children:[(0,c.jsxs)(z.A,{variant:"outlined",ref:i,children:[(0,c.jsx)(K.A,{children:t[l]}),(0,c.jsx)(K.A,{size:"small",onClick:()=>x(h),children:(0,c.jsx)(ee.A,{})})]}),(0,c.jsx)(Z.A,{open:m,anchorEl:i.current,transition:!0,disablePortal:!1,sx:{zIndex:2e3},children:e=>{let{TransitionProps:a,placement:n}=e;return(0,c.jsx)(X.A,{...a,style:{transformOrigin:"bottom"},children:(0,c.jsx)(y.default,{sx:{zIndex:2e3},children:(0,c.jsx)($.x,{onClickAway:e=>b(e,h,i),children:(0,c.jsx)(J.A,{autoFocusItem:!0,children:t.map((e,t)=>(0,c.jsx)(Q.A,{selected:t===l,onClick:()=>p(t,r,h),children:e},e))})})})})}}),0===l&&(0,c.jsx)(B,{}),1===l&&(0,c.jsx)(G,{}),2===l&&(0,c.jsx)(Y,{})]})})]})};var ea=a(9670),ei=a(45720),en=a(93513),es=a(50532),el=a(98358),er=a(90912);let eo=e=>{let{patientId:t}=(0,ei.g)(),{data:a,isLoading:i}=(0,m.$O)(t),[n,s]=(0,d.useState)([]),{visitDate:l}=(0,x.E)();(0,d.useEffect)(()=>{if(!i&&a&&l){let t=a.filter(e=>e.visit.date_started===l).find(t=>{var a;return(null==t||null==(a=t.encounter_type)?void 0:a.uuid)===e});t?s(r(t.obs,e)):s([])}},[a,l,i,e]);let r=(e,t)=>{switch(t){case p.fA.AIRWAY_ASSESSMENT:return o(e);case p.fA.BREATHING_ASSESSMENT:return ec(e);case p.fA.CIRCULATION_ASSESSMENT:return eL(e);case p.fA.DISABILITY_ASSESSMENT:return eP(e);case p.fA.EXPOSURE_ASSESSMENT:return eW(e);case p.fA.PRESENTING_COMPLAINTS:return ed(e);case p.fA.ALLERGIES:return eu(e);case p.fA.PRESCRIPTIONS:return em(e);case p.fA.DIAGNOSIS:return eh(e);case p.fA.SURGICAL_HISTORY:return ex(e);case p.fA.PATIENT_ADMISSIONS:return eg(e);case p.fA.OBSTETRIC_HISTORY:return ev(e);case p.fA.SUMMARY_ASSESSMENT:return eN(e);case p.fA.FAMILY_MEDICAL_HISTORY:return ey(e);case p.fA.GENERAL_INFORMATION_ASSESSMENT:return e_(e);case p.fA.HEAD_AND_NECK_ASSESSMENT:return eT(e);case p.fA.CHEST_ASSESSMENT:return eI(e);case p.fA.ABDOMEN_AND_PELVIS_ASSESSMENT:return eO(e);case p.fA.EXTREMITIES_ASSESSMENT:return eD(e);case p.fA.NEUROLOGICAL_EXAMINATION_ASSESSMENT:return eR(e);case p.fA.NURSING_CARE_NOTES:return ew(e);case p.fA.DISPOSITION:return eM(e);default:return[]}},o=e=>{let t=[],a=[],i="",n="",s=[],l=[];return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var r,o;let c=null==(o=e.names)||null==(r=o[0])?void 0:r.name,d=e.value,u=e.created_by||"Unknown";"Airway Patent"===c?(a.length>0&&(s.length>0&&(a.push(1===s.length?"The airway obstruction is attributed to ".concat(s[0],"."):"The airway obstruction is attributed to: ".concat(s.join(", "),".")),s=[]),l.length>0&&(a.push(1===l.length?"Intervention performed: ".concat(l[0],"."):"Interventions performed: ".concat(l.join(", "),".")),l=[]),t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),a=[]),i=e.obs_datetime||new Date().toISOString(),n=u,"Yes"===d?a.push("The airway is patent."):"No"===d?a.push("The airway is not patent."):a.push("The patient's airway is threatened.")):"Airway Reason"===c?s.push(d):"Airway Opening Intervention"===c?l.push(d):"Patient Injured"===c?"Yes"===d?a.push("The patient has sustained injuries."):"No"===d&&a.push("The patient is not injured."):"Neck collar applied"===c?"Yes"===d?a.push("The patient was stabilised by applying the Neck Collar."):"No"===d?a.push("The Neck Collar was not applied."):a.push("Application of a Neck Collar was not indicated."):"Head blocks applied"===c&&("Yes"===d?a.push("Head blocks were applied to stabilize the C-Spine."):a.push("Head blocks were not applied as an Intervention to stabilize the C-Spine."))}),s.length>0&&a.push(1===s.length?"The airway obstruction is attributed to ".concat(s[0],"."):"The airway obstruction is attributed to: ".concat(s.join(", "),".")),l.length>0&&a.push(1===l.length?"Intervention performed: ".concat(l[0],"."):"Interventions performed: ".concat(l.join(", "),".")),a.length>0&&t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),t.sort((e,t)=>t.rawTime-e.rawTime)};return{notes:n,isLoading:i}},ec=e=>{let t=[],a=[],i="",n="",s="",l=[],r=[],o={};for(let[c,d]of([...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var c,d;let u=null==(d=e.names)||null==(c=d[0])?void 0:c.name,m=e.value,h=e.created_by||"Unknown";if("Is Breathing Abnormal"===u&&a.length>0){for(let[e,t]of(l.length>0&&(a.push(l.join(" ")),l=[]),r.length>0&&(a.push("Chest abnormalities: ".concat(r.join(", "),".")),r=[]),Object.entries(o)))t.length>0&&a.push("".concat(e,": ").concat(t.join(", "),"."));o={},s&&(a.push(s),s=""),t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),a=[]}"Is Breathing Abnormal"===u?(i=e.obs_datetime||new Date().toISOString(),n=h,"Yes"===m?a.push("Patient has abnormal breathing."):"No"===m&&a.push("Patient has normal breathing.")):"Patient Need Oxygen"===u?"Yes"===m?l.push("Supplemental oxygen required."):l.push("Supplemental oxygen not required."):"Oxygen Given"===u?l.push("Oxygen given: ".concat(m," L/min.")):"Oxygen Source"===u?l.push("Source: ".concat(m,".")):"Chest wall abnormality"===u?"Yes"===m&&e.children&&e.children.length>0&&e.children.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name,n=e.value;"Image Part Name"===i&&e.children&&e.children.length>0&&e.children.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name,s=e.value;"Description"===i?r.push("".concat(n," - ").concat(s)):"Additional Notes"===i&&r.push("".concat(n," notes: ").concat(s))})}):"Site"===u?o[m]||(o[m]=[]):"Respiratory rate"===u?a.push("Respiratory rate: ".concat(m," bpm.")):"Oxygen Saturation"===u?a.push("Oxygen saturation: ".concat(m,"%.")):"Is Trachea Central"===u?"Yes"===m?a.push("Trachea is central."):a.push("Trachea is not central."):"Chest Expansion"===u?"Normal"===m?a.push("Chest expansion is normal."):a.push("Chest expansion is abnormal."):"Percussion"===u?"Normal"===m?a.push("Percussion findings are normal."):a.push("Percussion findings are abnormal."):"Breathing sounds"===u?"Normal"===m?a.push("Breath sounds are normal."):a.push("Breath sounds are abnormal."):"Additional Notes"===u&&(s="Additional notes: ".concat(m))}),l.length>0&&a.push(l.join(" ")),r.length>0&&a.push("Chest abnormalities: ".concat(r.join(", "),".")),Object.entries(o)))d.length>0&&a.push("".concat(c,": ").concat(d.join(", "),"."));return s&&a.push(s),a.length>0&&t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),t.sort((e,t)=>t.rawTime-e.rawTime)},ed=e=>{let t=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),a=[],i=null,n=["Duration Of Symptoms Hours","Duration Of Symptoms Days","Duration Of Symptoms Weeks","Duration Of Symptoms Months","Duration Of Symptoms Years"];return t.forEach(e=>{var t,s,l;if((null==(s=e.names)||null==(t=s[0])?void 0:t.name)==="Current complaints or symptoms"&&e.value){let t=e.obs_datetime||new Date().toISOString(),s=e.created_by||"Unknown",r=e.value,o="";for(let t of n){let a=null==(l=e.children)?void 0:l.find(e=>{var a,i;return(null==(i=e.names)||null==(a=i[0])?void 0:a.name)===t&&e.value});if(a){let e=t.toLowerCase().split(" ")[3];o="".concat(a.value," ").concat(e);break}}o&&(r+=" (".concat(o,")")),(!i||new Date(t).getTime()-new Date(i.time).getTime()>18e4)&&(i={time:t,creator:s,complaints:[]},a.push(i)),i.complaints.push(r),i.time=t,i.creator=s}}),a.map(e=>({paragraph:"Presenting complaints: ".concat(e.complaints.join(", "),"."),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}))},eu=e=>{let t=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),a=[],i=null;t.forEach(e=>{var t,n,s;if((null==(n=e.names)||null==(t=n[0])?void 0:t.name)==="Allergen Category"&&e.value){let t,n=e.obs_datetime||new Date().toISOString(),l=e.created_by||"Unknown",r=e.value,o=[];null==(s=e.children)||s.forEach(e=>{var a,i,n,s;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Allergen"&&e.value?o.push(e.value):(null==(s=e.names)||null==(n=s[0])?void 0:n.name)==="Description"&&e.value&&(t=e.value)}),o.length>0&&((!i||new Date(n).getTime()-new Date(i.time).getTime()>18e4)&&(i={time:n,creator:l,allergyGroups:{}},a.push(i)),i.allergyGroups[r]||(i.allergyGroups[r]={allergens:[],description:t}),i.allergyGroups[r].allergens.push(...o),t&&(i.allergyGroups[r].description=t),i.time=n,i.creator=l)}});let n=[];return a.forEach(e=>{let t=[];Object.entries(e.allergyGroups).forEach(e=>{let[a,i]=e,n="".concat(a,": ").concat(i.allergens.join(", "));i.description&&(n+=" (".concat(i.description,")")),t.push(n)}),t.length>0&&n.push({paragraph:"ALLERGIES: ".concat(t.join("; "),"."),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()})}),n},em=e=>{let t=[];return null==e||e.forEach(e=>{var a,i;if((null==(i=e.names)||null==(a=i[0])?void 0:a.name)!=="Drug Given")return;let n=e.value,s="",l="",r="",o="",c="",d="",u="",m="",h="",p="",x="",b="",g="",f="",v="",j=e.created_by||"Unknown",y=e.obs_datetime||new Date().toISOString();e.children&&e.children.length>0&&e.children.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name,n=e.value;switch(i){case"Medication Date Last Taken":s=n;break;case"Medication Date Of Last Prescription":l=n;break;case"Medication Frequency":r=n;break;case"Dose in grams":o=n;break;case"Dose in milligrams":c=n;break;case"Dose In Micrograms":d=n;break;case"Dose In Millimeter":m=n;break;case"Dose In Iu":u=n;break;case"Duration On Medication Hours":g=n;break;case"Duration On Medication Days":b=n;break;case"Duration On Medication Weeks":h=n;break;case"Duration On Medication Months":p=n;break;case"Duration On Medication Years":x=n;break;case"Medication Formulation":f=n;break;case"Self medicated":v=n}});let S=[];n&&S.push("".concat(n)),r&&S.push("Frequency: ".concat(r)),o&&S.push("Dose: ".concat(o," grams")),c&&S.push("Dose: ".concat(c," milligrams")),d&&S.push("Dose: ".concat(d," micrograms")),m&&S.push("Dose: ".concat(m," millimeters")),u&&S.push("Dose: ".concat(u," international units")),g&&S.push("Duration: ".concat(g," hours")),b&&S.push("Duration: ".concat(b," days")),h&&S.push("Duration: ".concat(h," weeks")),p&&S.push("Duration: ".concat(p," months")),x&&S.push("Duration: ".concat(x," years")),f&&S.push("Medication formulation: ".concat(f)),s&&S.push("Last taken: ".concat(new Date(s).toLocaleDateString())),l&&S.push("Last prescribed: ".concat(new Date(l).toLocaleDateString())),v&&S.push("Yes"===v?"The patient self-medicated.":"The patient did not self-medicate."),S.length>0&&t.push({paragraph:"Medication: ".concat(S.join("; "),"."),time:y,creator:j,rawTime:new Date(y).getTime()})}),t},eh=e=>{let t=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),a=[],i=null;return t.forEach(e=>{var t,n,s;if((null==(n=e.names)||null==(t=n[0])?void 0:t.name)==="Diagnosis date"){let t=e.obs_datetime||new Date().toISOString(),n=e.created_by||"Unknown",l={diagnosisDate:e.value,creator:n};null==(s=e.children)||s.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name,n=e.value;switch(i){case"ICD11 Diagnosis":l.icd11Diagnosis=n;break;case"On treatment":l.onTreatment="Yes"===n?"The patient is on treatment":"No"===n?"The patient is not on treatment":"The treatment status is not known";break;case"Additional Diagnosis Details":l.additionalDetails=n}}),(!i||new Date(t).getTime()-new Date(i.time).getTime()>18e4)&&(i={time:t,creator:n,conditions:[]},a.push(i)),l.icd11Diagnosis&&(i.conditions.push(l),i.time=t,i.creator=n)}}),a.map(e=>({paragraph:e.conditions.map(e=>ep(e)).join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()})).sort((e,t)=>t.rawTime-e.rawTime)},ep=e=>{let t=[];if(e.icd11Diagnosis&&t.push("Diagnosis: ".concat(e.icd11Diagnosis)),e.diagnosisDate){let a=new Date(e.diagnosisDate);t.push("Diagnosed on ".concat(a.toLocaleDateString()))}return e.onTreatment&&t.push(e.onTreatment),e.additionalDetails&&t.push("Details: ".concat(e.additionalDetails,".")),t.join(". ")},ex=e=>{let t=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),a=[],i=null;return t.forEach(e=>{var t,n,s;if((null==(n=e.names)||null==(t=n[0])?void 0:t.name)==="Date of surgery"){let t=e.obs_datetime||new Date().toISOString(),n=e.created_by||"Unknown",l={surgeryDate:e.value,creator:n};null==(s=e.children)||s.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name,n=e.value;"Indication For Surgery"===i?l.indication=n:"Complications"===i?l.complications=n:(!0===n||"true"===n)&&(l.procedureName=i)}),(!i||new Date(t).getTime()-new Date(i.time).getTime()>18e4)&&(i={time:t,creator:n,surgeries:[]},a.push(i)),l.procedureName&&(i.surgeries.push(l),i.time=t,i.creator=n)}}),a.map(e=>({paragraph:e.surgeries.map(e=>eb(e)).join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()})).sort((e,t)=>t.rawTime-e.rawTime)},eb=e=>{let t=[];return e.procedureName&&t.push("Surgery: ".concat(e.procedureName)),e.surgeryDate&&t.push("Date performed: ".concat(new Date(e.surgeryDate).toLocaleDateString())),e.indication&&t.push("Indication: ".concat(e.indication)),e.complications&&("none"===e.complications.toLowerCase()?t.push("No complications"):t.push("Complications: ".concat(e.complications))),t.join(". ")+(t.length>0?".":"")},eg=e=>{let t=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),a=[],i=null;return t.forEach(e=>{var t,n,s;if((null==(n=e.names)||null==(t=n[0])?void 0:t.name)==="Admission date"){let t=e.obs_datetime||new Date().toISOString(),n=e.created_by||"Unknown",l={admissionDate:e.value,creator:n};null==(s=e.children)||s.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name,n=e.value;"Health center hospitals"===i?l.healthCenter=n:"Admission section"===i?l.admissionSection=n:"ICD11 Diagnosis"===i?l.diagnosis=n:"Surgical interventions for tuberculosis"===i||"Surgical interventions"===i||"Surgical interventions for TB"===i?l.surgicalInterventions=n:"Discharge Instructions"===i?l.dischargeInstructions=n:"Follow Up"===i&&(l.followUp=n)}),(!i||new Date(t).getTime()-new Date(i.time).getTime()>18e4)&&(i={time:t,creator:n,admissions:[]},a.push(i)),i.admissions.push(l),i.time=t,i.creator=n}}),a.map(e=>({paragraph:e.admissions.map(e=>ef(e)).join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()})).sort((e,t)=>t.rawTime-e.rawTime)},ef=e=>{let t=[];return e.healthCenter&&t.push("The patient was admitted at ".concat(e.healthCenter)),e.admissionSection&&t.push("Admission section/ward: ".concat(e.admissionSection)),e.admissionDate&&t.push("Admission date: ".concat(new Date(e.admissionDate).toLocaleDateString())),e.diagnosis&&t.push("Diagnosis: ".concat(e.diagnosis)),e.surgicalInterventions&&t.push("Surgical interventions: ".concat(e.surgicalInterventions)),e.dischargeInstructions&&t.push("Discharge instructions: ".concat(e.dischargeInstructions)),e.followUp&&t.push("Follow-up: ".concat(e.followUp)),t.join(". ")+(t.length>0?".":"")},ev=e=>{let t=[],a={time:"",creator:"Unknown",contraceptives:[],pregnancyOutcomes:[]};return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var i,n;let s=null==(n=e.names)||null==(i=n[0])?void 0:i.name,l=e.value,r=e.obs_datetime||new Date().toISOString(),o=e.created_by||"Unknown";switch(!a.time&&(a.time=r,a.creator=o),s){case"Age At Menarche":(a.ageAtMenarche||a.gestationWeeks||a.previousPregnancies||a.contraceptives.length>0||a.pregnancyOutcomes.length>0)&&(t.push(ej(a)),a={time:r,creator:o,contraceptives:[],pregnancyOutcomes:[]}),a.ageAtMenarche=l;break;case"Gestation weeks":a.gestationWeeks=l;break;case"Previous Pregnancies":a.previousPregnancies=l;break;case"Levoplant":case"Jadelle":case"Implanon":"true"===l&&a.contraceptives.push(s);break;case"Pregenancy Outcome":if(e.children&&e.children.length>0){let t={};e.children.forEach(a=>{var i,n;let s=null==(n=a.names)||null==(i=n[0])?void 0:i.name;if(("Live birth"===s||"STILL BIRTH"===s||"Second Trimester Miscarriage"===s||"First Trimester Miscarriage"===s)&&(t.type=s,"Live birth"===s)){let a=e.children.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>"Parity"===e.name||"Number of births"===e.name||"Number of delivered children"===e.name)});a&&(t.parity=parseFloat(a.value))}}),t.type&&a.pregnancyOutcomes.push(t)}break;case"First Trimester Miscarriage":case"Second Trimester Miscarriage":case"STILL BIRTH":case"Live birth":let c={type:s};if("Live birth"===s&&e.children){let t=e.children.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>"Parity"===e.name||"Number of births"===e.name||"Number of delivered children"===e.name)});t&&(c.parity=parseFloat(t.value))}a.pregnancyOutcomes.push(c);break;case"Additional Notes":a.additionalNotes=l}a.time=r,a.creator=o}),(a.ageAtMenarche||a.gestationWeeks||a.previousPregnancies||a.contraceptives.length>0||a.pregnancyOutcomes.length>0)&&t.push(ej(a)),t.sort((e,t)=>t.rawTime-e.rawTime)},ej=e=>{let t=[];e.ageAtMenarche&&t.push("Menarche occurred at age ".concat(e.ageAtMenarche,"."));let a=[];if(e.gestationWeeks&&a.push("currently ".concat(e.gestationWeeks," gestation")),e.previousPregnancies){let t=parseInt(e.previousPregnancies);a.push("".concat(t," previous ").concat(1===t?"pregnancy":"pregnancies"))}if(a.length>0&&t.push("Obstetric history: ".concat(a.join(", "),".")),e.pregnancyOutcomes.length>0){let a=e.pregnancyOutcomes.map((e,t)=>{let a=e.type;return"Live birth"===e.type&&void 0!==e.parity&&(a+=" (".concat(e.parity," ").concat(1===e.parity?"child":"children",")")),"Pregnancy ".concat(t+1,": ").concat(a)});t.push("Pregnancy outcomes: ".concat(a.join("; "),"."))}if(e.contraceptives.length>0)if(1===e.contraceptives.length)t.push("Contraception: Currently using ".concat(e.contraceptives[0],"."));else{let a=e.contraceptives.pop();t.push("Contraception: Currently using ".concat(e.contraceptives.join(", ")," and ").concat(a,"."))}return e.additionalNotes&&t.push("Notes: ".concat(e.additionalNotes,".")),{paragraph:t.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},ey=e=>{let t=[],a=null,i=null;return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var n,s,l,r;let o=null==(s=e.names)||null==(n=s[0])?void 0:n.name,c=e.value,d=e.obs_datetime||new Date().toISOString(),u=new Date(d),m=e.created_by||"Unknown";if((!a||!i||u.getTime()-i.getTime()>18e4)&&((null==a||null==(r=a.conditions)?void 0:r.length)&&t.push(eS(a)),a={time:d,creator:m,conditions:[]}),i=u,o.startsWith("Family History")){let t={name:o.replace("Family History","").trim(),details:"Family History Cancer"===o?c:void 0};if(e.children&&e.children.length>0){let a=e.children.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>"Relationship To Patient"===e.name)});a&&(t.relationship=a.value)}("Family History Other Condition"===o||"Review Of Systems Other"===o)&&(t.details=c),a.conditions.push(t)}else"Relationship To Patient"===o&&(null==a||null==(l=a.conditions)?void 0:l.length)&&(a.conditions[a.conditions.length-1].relationship=c);a.time=d,a.creator=m}),a&&t.push(eS(a)),t.sort((e,t)=>t.rawTime-e.rawTime)},eS=e=>{let t=[];return t.push("Family History:"),e.conditions.forEach(e=>{let a=e.name;e.relationship&&(a+=" (".concat(e.relationship,")")),"Cancer"===e.name&&e.details?a+=": ".concat(e.details):e.details&&"Cancer"!==e.name&&(a+=": ".concat(e.details)),t.push(a)}),{paragraph:t.join("; "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},eN=e=>{let t=[],a={time:"",creator:"Unknown"};return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var i,n;let s=null==(n=e.names)||null==(i=n[0])?void 0:i.name,l=e.value,r=e.obs_datetime||new Date().toISOString(),o=e.created_by||"Unknown";switch(!a.time&&(a.time=r,a.creator=o),s){case"Time of last meal":if((a.lastMealTime||a.lastMealDescription)&&(t.push(eA(a)),a={time:r,creator:o}),a.lastMealTime=l,e.children&&e.children.length>0){let t=e.children.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>"Description of last meal"===e.name)});t&&(a.lastMealDescription=t.value)}break;case"Description of last meal":a.lastMealDescription||(a.lastMealDescription=l)}a.time=r,a.creator=o}),(a.lastMealTime||a.lastMealDescription)&&t.push(eA(a)),t.sort((e,t)=>t.rawTime-e.rawTime)},eA=e=>{let t=[];if(t.push("Last meal:"),e.lastMealTime){let a=e.lastMealTime.replace(","," at");t.push("consumed on ".concat(a))}return e.lastMealDescription&&(e.lastMealTime?t.push("(".concat(e.lastMealDescription,")")):t.push(e.lastMealDescription)),{paragraph:t.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},e_=e=>{let t=[],a=[],i="",n="";return e.forEach(e=>{var s,l;let r=null==(l=e.names)||null==(s=l[0])?void 0:s.name,o=e.value,c=e.created_by||"Unknown";"Additional Notes"===r&&a.length>0&&(t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),a=[]),"Additional Notes"===r&&(i=e.obs_datetime||new Date().toISOString(),n=c,a.push("".concat(o,".")))}),a.length>0&&t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),t.sort((e,t)=>t.rawTime-e.rawTime)},eT=e=>{let t=[],a={parts:[],abnormalities:new Map,time:"",creator:"Unknown"},i="",n="",s=null,l=e=>["left lateral","right lateral","Left","Right","Front","Back","anterior","posterior"].includes(e),r=(e,t)=>{if(!e.abnormalities.has(t))return null;let a=e.abnormalities.get(t);return a[a.length-1]},o=e=>!!s&&(e.getTime()-s.getTime())/6e4>3,c=e=>{var d,u,m;let h=e.conceptName||e.name||e.names&&(null==(d=e.names[0])?void 0:d.name),p=e.value||e.value_text,x=e.creator||e.created_by||"Unknown",b=e.obs_datetime||e.obsDateTime||new Date().toISOString(),g=e.children||[],f=new Date(b);if(h){if(s&&o(f)&&(a.parts.length>0||a.abnormalities.size>0)&&(t.push(eE(a)),a={parts:[],abnormalities:new Map,time:b,creator:x}),s=f,"Image Part Name"===h)!l(p)&&(i=p,a.parts.includes(p)||a.parts.push(p));else if("Abnormalities"===h)n=p,i&&(a.abnormalities.has(i)||a.abnormalities.set(i,[]),null==(u=a.abnormalities.get(i))||u.push({type:p,details:{}}));else if("Laceration length"===h&&"Laceration"===n){let e=r(a,i);e&&(e.details.length=p)}else if("Laceration depth"===h&&"Laceration"===n){let e=r(a,i);e&&(e.details.depth=p)}else if("Laceration other"===h&&"Laceration"===n){let e=r(a,i);e&&(e.details.other=p)}else if("Description"===h&&"Bruise"===n){let e=r(a,i);e&&(e.details.description=p)}else if("Specify"===h&&"Other"===n){let e=r(a,i);e&&(e.details.specify=p)}else("Clinician notes"===h||"Notes"===h)&&(a.abnormalities.has("General")||a.abnormalities.set("General",[]),null==(m=a.abnormalities.get("General"))||m.push({type:"Note",details:{note:p}}));g.forEach(e=>c(e))}};return[...e].sort((e,t)=>new Date(e.obs_datetime||e.obsDateTime||new Date().toISOString()).getTime()-new Date(t.obs_datetime||t.obsDateTime||new Date().toISOString()).getTime()).forEach(c),(a.parts.length>0||a.abnormalities.size>0)&&t.push(eE(a)),t.sort((e,t)=>t.rawTime-e.rawTime)},eE=e=>{let t=[];return e.parts.length>0&&t.push("Assessment of ".concat(e.parts.join(", ")," was performed.")),e.abnormalities.forEach((e,a)=>{"General"===a?e.forEach(e=>{t.push("")}):e.forEach(e=>{let i="".concat(a," showed ").concat(e.type);switch(e.type){case"Laceration":e.details.length&&(i+=" (Length: ".concat(e.details.length)),e.details.depth&&(i+=", Depth: ".concat(e.details.depth)),e.details.other&&(i+=", Description: ".concat(e.details.other)),e.details.length&&(i+=")");break;case"Bruise":e.details.description&&(i+=" (".concat(e.details.description,")"));break;case"Other":e.details.specify&&(i+=" (".concat(e.details.specify,")"))}t.push(i+".")})}),{paragraph:t.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},eI=e=>{let t=[],a=[],i="",n="",s=new Set,l=e=>1===e.length?e[0]:2===e.length?"".concat(e[0]," and ").concat(e[1]):"".concat(e.slice(0,-1).join(", "),", and ").concat(e[e.length-1]);return e.forEach(r=>{var o,c,d,u,m,h;let p=null==(c=r.names)||null==(o=c[0])?void 0:o.name,x=r.value,b=r.created_by||"Unknown",g=r.obs_datetime||new Date().toISOString();if("Respiratory rate"===p)a.length>0&&(s.size>0&&(a.push("Abnormal findings in ".concat(l(Array.from(s)),".")),s=new Set),t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),a=[]),i=g,n=b,a.push("Respiratory rate: ".concat(x," bpm."));else if("Chest wall abnormality"===p)a.push("Yes"===x?"Chest wall abnormality present.":"No chest wall abnormality.");else if("Apex beat"===p)if("Displaced"===x){let t=null==(d=e.find(e=>{var t,a;return(null==(a=e.names)||null==(t=a[0])?void 0:t.name)==="Positioning"}))?void 0:d.value;a.push("Apex beat displaced"+(t?" (".concat(t,")."):"."))}else a.push("Apex beat normal.");else if("Trill"===p)a.push("Yes"===x?"Trill detected.":"No trill detected.");else if("Heaves"===p)a.push("Yes"===x?"Heaves present.":"No heaves present.");else if("Chest Expansion"===p)a.push("Chest expansion is ".concat(x.toLowerCase(),"."));else if("Tactile fremitus"===p)a.push("Tactile fremitus is ".concat(x.toLowerCase(),"."));else if("Heart sounds"===p)a.push("Heart sounds are ".concat(x.toLowerCase(),"."));else if("Localised chest wall abnormality"===p)if("Yes"===x){let e=[],t=[];null==(u=r.children)||u.forEach(a=>{var i,n,s;(null==(n=a.names)||null==(i=n[0])?void 0:i.name)==="Image Part Name"&&(null==(s=a.children)||s.forEach(a=>{var i,n,s,l;(null==(n=a.names)||null==(i=n[0])?void 0:i.name)==="Description"?e.push(a.value):(null==(l=a.names)||null==(s=l[0])?void 0:s.name)==="Additional Notes"&&t.push(a.value)}))});let i="";e.length>0&&(i=" with ".concat(l(e))),t.length>0&&(i+=" (".concat(t.join(", "),")")),a.push("Localised chest wall abnormality present".concat(i,"."))}else a.push("No localised chest wall abnormality.");else if("Global Chest Wall Abnormality"===p)if("Yes"===x){let e=[];null==(m=r.children)||m.forEach(t=>{var a,i;(null==(i=t.names)||null==(a=i[0])?void 0:a.name)==="Abnormalities"&&e.push(t.value)}),e.length>0?a.push("Global chest wall abnormalities: ".concat(l(e),".")):a.push("Global chest wall abnormality present.")}else a.push("No global chest wall abnormality.");else if("Image Part Name"===p&&["Right Upper Zone","Left Upper Zone","Right Middle Zone","Left Middle Zone","Right Lower Zone","Left Lower Zone"].includes(x)){let t=null==(h=e.find(e=>{var t,a;return(null==(a=e.names)||null==(t=a[0])?void 0:t.name)==="Clinician notes"&&e.group_id===r.group_id}))?void 0:h.value;t?a.push("".concat(x,": ").concat(t,".")):s.add(x)}}),s.size>0&&a.push("Abnormal findings in ".concat(l(Array.from(s)),".")),a.length>0&&t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),t.sort((e,t)=>t.rawTime-e.rawTime)},eO=e=>{let t=[],a=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),i=null;return a.forEach(e=>{let a=e.obs_datetime||new Date().toISOString(),n=new Date(a).getTime(),s=e.created_by||"Unknown";(!i||n-new Date(i.time).getTime()>3e5)&&(i={time:a,observations:[],creator:s},t.push(i)),i.observations.push(e)}),t.sort((e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime()).map(e=>{let t={findings:{},additionalNotes:[]},a=(e,a)=>{t.findings[e]||(t.findings[e]=[]),t.findings[e].push(a)};e.observations.forEach(e=>{var i,n,s,l,r;let o=null==(n=e.names)||null==(i=n[0])?void 0:i.name,c=e.value;switch(o){case"Abdominal distention":a(o,"Yes"===c?"Abdominal distention present.":"No abdominal distention.");break;case"Shifting dullness":a(o,"Yes"===c?"Shifting dullness present.":"Shifting dullness not present.");break;case"Fluid thrill":a(o,"Yes"===c?"Fluid thrill present.":"Fluid thrill not present.");break;case"Bowel sounds":a(o,"Bowel sounds: ".concat(c,"."));break;case"Bruit":a(o,"Yes"===c?"Bruit present.":"Bruit not present.");break;case"Mass":if("Yes"===c){let t=(null==(s=e.children)?void 0:s.filter(e=>{var t,a;return(null==(a=e.names)||null==(t=a[0])?void 0:t.name)==="Description"}).map(e=>e.value))||[];t.length>0?a(o,"Mass present (".concat(t.join(", "),").")):a(o,"Mass present.")}else a(o,"No mass present.");break;case"Tenderness":case"Abnormalities present":case"Circumcision status":case"Laceration":case"Hematomas":case"Inflammation":case"Testicles":a(o,"Yes"===c?"".concat(o," present."):"No ".concat(o.toLowerCase(),"."));break;case"Sphincter tone":case"General":case"Prostate":a(o,"".concat(o,": ").concat(c,"."));break;case"Pelvic examination":a(o,"Pelvic examination: ".concat(c,"."));break;case"Description":break;case"Additional Notes":c.trim()&&t.additionalNotes.push(c);break;case"Image Part Name":let d=null==(r=e.children)||null==(l=r.find(e=>{var t,a;return(null==(a=e.names)||null==(t=a[0])?void 0:t.name)==="Description"}))?void 0:l.value;d?a("Imaging Findings","".concat(c,": ").concat(d,".")):a("Imaging Findings","".concat(c," noted."));break;default:o&&c&&a(o,"".concat(o,": ").concat(c,"."))}});let i=[];if(["Abdominal distention","Shifting dullness","Fluid thrill","Bowel sounds","Bruit","Tenderness","Mass","General","Prostate","Sphincter tone","Pelvic examination","Circumcision status","Laceration","Hematomas","Inflammation","Testicles","Image Part Name","Additional Notes"].forEach(e=>{t.findings[e]&&i.push(t.findings[e].join(" "))}),t.additionalNotes.length>0){let e=t.additionalNotes.filter(e=>e.trim().length>0);e.length>0&&i.push("Additional notes: ".concat(e.join("; ")))}return{paragraph:i.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}})},eD=e=>{var t;let a=[],i=(null==(t=e[0])?void 0:t.created_by)||"Unknown",n=[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()),s=null;n.forEach(e=>{let t=e.obs_datetime||new Date().toISOString(),n=new Date(t).getTime(),l=e.created_by||i;(!s||n-new Date(s.time).getTime()>3e5)&&(s={time:t,observations:[],creator:l},a.push(s)),s.observations.push(e),e.created_by&&(s.creator=e.created_by)});let l=["Deformity","Fracture","Burns","Mass","Tenderness","Crepitus","Laceration","Scars","Skin rash","Wound","Swelling"];return a.map(e=>{let t={findings:{},additionalNotes:[],upperLimbImagesWithAbnormalities:{},lowerLimbImagesWithAbnormalities:{},upperLimbAbnormalities:[],lowerLimbAbnormalities:[],upperLimbStatus:"normal",lowerLimbStatus:"normal"};e.observations.forEach(e=>{var a,i;let n=null==(i=e.names)||null==(a=i[0])?void 0:a.name,s=e.value;if("Abnormalities upper limb"===n)t.upperLimbStatus="Yes"===s?"abnormal":"normal";else if("Abnormalities lower limb"===n)t.lowerLimbStatus="Yes"===s?"abnormal":"normal";else if("Image Part Name"===n){let a=s.includes("upper limb"),i=s.includes("lower limb");if(a||i){let i=s.replace(/(upper|lower) limb -? /,""),n=[];e.children&&e.children.length>0&&e.children.forEach(e=>{e.children&&e.children.length>0&&e.children.forEach(e=>{var t,a;let i=null==(a=e.names)||null==(t=a[0])?void 0:t.name;l.includes(i)&&"Yes"===e.value&&n.push(i)})}),n.length>0&&(a?(t.upperLimbImagesWithAbnormalities[i]=n,t.upperLimbAbnormalities.push(...n)):(t.lowerLimbImagesWithAbnormalities[i]=n,t.lowerLimbAbnormalities.push(...n)))}}}),e.observations.forEach(e=>{var a,i;let n=null==(i=e.names)||null==(a=i[0])?void 0:a.name,s=e.value;switch(n){case"Edema":t.findings[n]="Yes"===s?"The patient has Edema. ":"The patient has no Edema. ";break;case"Oedema details":t.findings[n]="Edema details: ".concat(s,". ");break;case"Cold clammy":t.findings[n]="Yes"===s?"Cold clammy extremities present. ":"Cold clammy extremities not present. ";break;case"Additional Notes":s.trim()&&t.additionalNotes.push(s)}});let a=[];t.findings.Edema&&a.push(t.findings.Edema),t.findings["Oedema details"]&&a.push(t.findings["Oedema details"]),t.findings["Cold clammy"]&&a.push(t.findings["Cold clammy"]);let i="Upper limbs: ";if("normal"===t.upperLimbStatus)i+="No abnormalities detected";else{let e=[];if(Object.entries(t.upperLimbImagesWithAbnormalities).forEach(t=>{let[a,i]=t;e.push("Body part of ".concat(a," shows ").concat(i.join(", ")))}),t.upperLimbAbnormalities.length>0){let a=t.upperLimbAbnormalities.filter(e=>!Object.values(t.upperLimbImagesWithAbnormalities).flat().includes(e));a.length>0&&e.push("".concat(a.join(", ")," present"))}i+=e.join("; ")}a.push(i+".");let n="Lower limbs: ";if("normal"===t.lowerLimbStatus)n+="No abnormalities detected";else{let e=[];if(Object.entries(t.lowerLimbImagesWithAbnormalities).forEach(t=>{let[a,i]=t;e.push("Body part of ".concat(a," shows ").concat(i.join(", ")))}),t.lowerLimbAbnormalities.length>0){let a=t.lowerLimbAbnormalities.filter(e=>!Object.values(t.lowerLimbImagesWithAbnormalities).flat().includes(e));a.length>0&&e.push("".concat(a.join(", ")," present"))}n+=e.join("; ")}return a.push(n+"."),t.additionalNotes.length>0&&a.push("Additional notes: ".concat(t.additionalNotes.join("; "))),{paragraph:a.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}}).sort((e,t)=>t.rawTime-e.rawTime)},eR=e=>{let t=[],a=[],i="",n="Unknown";return e.forEach(e=>{var s,l;let r=null==(l=e.names)||null==(s=l[0])?void 0:s.name,o=e.value,c=e.created_by||n,d=e.obs_datetime||new Date().toISOString();"Additional Notes"===r&&a.length>0&&(t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),a=[]),"Additional Notes"===r&&(i=d,n=c,a.push("".concat(o,".")))}),a.length>0&&t.push({paragraph:a.join(" "),time:i,creator:n,rawTime:new Date(i).getTime()}),t.sort((e,t)=>t.rawTime-e.rawTime)},ew=e=>{let t=[],a={time:"",creator:"Unknown",sections:{},vitals:{},labs:{},medications:[]};return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var i,n,s;let l=null==(n=e.names)||null==(i=n[0])?void 0:i.name,r=e.value,o=e.obs_datetime||new Date().toISOString(),c=e.created_by||"Unknown";if("Subjective"===l&&a.sections.Subjective&&(t.push(eC(a)),a={time:o,creator:c,sections:{},vitals:{},labs:{},medications:[]}),a.time||(a.time=o,a.creator=c),["Subjective","Medical record observations","Assessment","Plan","Intervention","Evaluation","Replan","Implementation"].includes(l))a.sections[l]=r;else if(["Systolic blood pressure","Diastolic blood pressure","Pulse Rate","Respiratory Rate","Spo2","Temperature"].includes(l))a.vitals[l]=r;else if(["Malaria Rapid Diagnostic Test (MRDT)","Blood glucose","Serum glucose","Investigations PT","Urine Dipstick Ketones"].includes(l)){let e="Serum glucose"===l?"Blood glucose":l;a.labs[e]=r}else if("Drug Given"===l){let t={name:r,formulation:"",dose:"",doseUnit:"",frequency:"",duration:"",durationUnit:"",description:""};null==(s=e.children)||s.forEach(e=>{var a,i;let n=null==(i=e.names)||null==(a=i[0])?void 0:a.name,s=e.value;switch(n){case"Medication Formulation":t.formulation=s;break;case"Medication Dose":t.dose=s;break;case"Medication Dose Unit":t.doseUnit=s;break;case"Medication Frequency":t.frequency=s;break;case"Medication Duration":t.duration=s;break;case"Medication Duration Unit":t.durationUnit=s;break;case"Description":t.description=s}}),a.medications.push(t)}}),(Object.keys(a.sections).length>0||Object.keys(a.vitals).length>0||Object.keys(a.labs).length>0||a.medications.length>0)&&t.push(eC(a)),t.sort((e,t)=>t.rawTime-e.rawTime)},eC=e=>{let t=[],a={Subjective:"Subjective","Medical record observations":"Objective",Assessment:"Assessment",Plan:"Plan",Intervention:"Intervention",Evaluation:"Evaluation",Replan:"Replan",Implementation:"Implementation"};if(["Subjective","Medical record observations","Assessment","Plan","Intervention","Evaluation","Replan","Implementation"].forEach(i=>{if(e.sections[i]){let n=a[i]||i;if(t.push("".concat(n,": ").concat(e.sections[i])),"Medical record observations"===i){if(Object.keys(e.vitals).length>0){let a=[];e.vitals["Systolic blood pressure"]&&e.vitals["Diastolic blood pressure"]&&a.push("BP: ".concat(e.vitals["Systolic blood pressure"],"/").concat(e.vitals["Diastolic blood pressure"]," mmHg")),e.vitals["Pulse Rate"]&&a.push("Pulse: ".concat(e.vitals["Pulse Rate"]," bpm")),e.vitals["Respiratory Rate"]&&a.push("Respiratory Rate: ".concat(e.vitals["Respiratory Rate"]," breaths/min")),e.vitals.Spo2&&a.push("SpO2: ".concat(e.vitals.Spo2,"%")),e.vitals.Temperature&&a.push("Temp: ".concat(e.vitals.Temperature,"\xb0C")),a.length>0&&t.push("Vitals: ".concat(a.join(", ")))}if(Object.keys(e.labs).length>0){let a=[];e.labs["Malaria Rapid Diagnostic Test (MRDT)"]&&a.push("Malaria Test: ".concat(e.labs["Malaria Rapid Diagnostic Test (MRDT)"])),e.labs["Blood glucose"]&&a.push("Blood Glucose: ".concat(e.labs["Blood glucose"]," mg/dL")),e.labs["Investigations PT"]&&a.push("PT: ".concat(e.labs["Investigations PT"])),e.labs["Urine Dipstick Ketones"]&&a.push("Urine Ketones: ".concat(e.labs["Urine Dipstick Ketones"])),a.length>0&&t.push("Labs: ".concat(a.join(", ")))}if(e.medications.length>0){let a=e.medications.map(e=>{let t="".concat(e.name);return e.formulation&&(t+=" (".concat(e.formulation,")")),e.dose&&e.doseUnit&&(t+=" ".concat(e.dose," ").concat(e.doseUnit)),e.frequency&&(t+=" ".concat(e.frequency)),e.duration&&e.durationUnit&&(t+=" for ".concat(e.duration," ").concat(e.durationUnit)),e.description&&(t+=" - ".concat(e.description)),t});t.push("Medications: ".concat(a.join("; ")))}}}}),!e.sections["Medical record observations"]&&(Object.keys(e.vitals).length>0||Object.keys(e.labs).length>0||e.medications.length>0)){let a=[];if(Object.keys(e.vitals).length>0){let t=[];e.vitals["Systolic blood pressure"]&&e.vitals["Diastolic blood pressure"]&&t.push("BP: ".concat(e.vitals["Systolic blood pressure"],"/").concat(e.vitals["Diastolic blood pressure"]," mmHg")),e.vitals["Pulse Rate"]&&t.push("Pulse: ".concat(e.vitals["Pulse Rate"]," bpm")),e.vitals["Respiratory Rate"]&&t.push("Respiratory Rate: ".concat(e.vitals["Respiratory Rate"]," breaths/min")),e.vitals.Spo2&&t.push("SpO2: ".concat(e.vitals.Spo2,"%")),e.vitals.Temperature&&t.push("Temp: ".concat(e.vitals.Temperature,"\xb0C")),t.length>0&&a.push("Vitals: ".concat(t.join(", ")))}if(Object.keys(e.labs).length>0){let t=[];e.labs["Malaria Rapid Diagnostic Test (MRDT)"]&&t.push("Malaria Test: ".concat(e.labs["Malaria Rapid Diagnostic Test (MRDT)"])),e.labs["Blood glucose"]&&t.push("Blood Glucose: ".concat(e.labs["Blood glucose"]," mg/dL")),e.labs["Investigations PT"]&&t.push("PT: ".concat(e.labs["Investigations PT"])),e.labs["Urine Dipstick Ketones"]&&t.push("Urine Ketones: ".concat(e.labs["Urine Dipstick Ketones"])),t.length>0&&a.push("Labs: ".concat(t.join(", ")))}if(e.medications.length>0){let t=e.medications.map(e=>{let t="".concat(e.name);return e.formulation&&(t+=" (".concat(e.formulation,")")),e.dose&&e.doseUnit&&(t+=" ".concat(e.dose," ").concat(e.doseUnit)),e.frequency&&(t+=" ".concat(e.frequency)),e.duration&&e.durationUnit&&(t+=" for ".concat(e.duration," ").concat(e.durationUnit)),e.description&&(t+=" - ".concat(e.description)),t});a.push("Medications: ".concat(t.join("; ")))}if(a.length>0){let e=t.findIndex(e=>e.startsWith("Assessment:"));e>=0?t.splice(e,0,"Objective:",...a):t.push("Objective:",...a)}}return{paragraph:t.join(". "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},eL=e=>{let t=[],a=null;for(let d of[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime())){var i,n,s,l,r,o;let e=null==(n=d.names)||null==(i=n[0])?void 0:i.name,u=d.value,m=d.obs_datetime||new Date().toISOString(),h=d.created_by||"Unknown";if("Is Patient Actively Bleeding"===e){if(a){let e=Object.keys(a.observations).length>0,i=Object.keys(a.abnormalities).length>0;(e||i)&&t.push(c(a))}a={time:m,creator:h,observations:{},abnormalities:{}}}if(a)if(("Is There Any Other Abnomalities"===e||"Is Femur Tibia Normal"===e)&&"Yes"===u&&d.children)for(let e of d.children){let t=null==(l=e.names)||null==(s=l[0])?void 0:s.name,i=e.value;if("Image Part Name"===t&&(a.abnormalities[i]||(a.abnormalities[i]=[]),e.children))for(let t of e.children){let e=null==(o=t.names)||null==(r=o[0])?void 0:r.name,n=t.value;("Description"===e||"Abnormalities"===e)&&a.abnormalities[i].push(n)}}else e&&(a.observations[e]={value:u,creator:h,time:m})}if(a){let e=Object.keys(a.observations).length>0,i=Object.keys(a.abnormalities).length>0;(e||i)&&t.push(c(a))}function c(e){var t,a,i,n,s,l,r,o,c,d,u,m,h,p,x,b,g,f,v,j,y,S,N,A,_,T,E,I,O,D,R,w;let C=[],L=e.observations;for(let[S,P]of(C.push((null==(t=L["Is Patient Actively Bleeding"])?void 0:t.value)==="Yes"?"The patient is actively bleeding.":"The patient is not actively bleeding."),(null==(a=L["Is The Patient Have Pulse"])?void 0:a.value)==="No"?C.push("The patient has no palpable pulse."):(C.push("The patient has a palpable pulse."),(null==(N=L["Pulse Rate"])?void 0:N.value)&&C.push("Pulse rate: ".concat(L["Pulse Rate"].value," bpm.")),(null==(A=L["Pulse Rate Weak"])?void 0:A.value)&&C.push("Pulse quality: ".concat(L["Pulse Rate Weak"].value,"."))),L["Blood Pressure Measured"]&&("NOT done"===L["Blood Pressure Measured"].value?(C.push("Blood pressure was not measured."),(null==(T=L.Description)?void 0:T.value)==="Batteries Not Available"&&C.push("Reason: Batteries not available for the device.")):"BP Not Recordable"===L["Blood Pressure Measured"].value?(C.push("Blood pressure was not recordable."),(null==(E=L["Reason Not Recorded"])?void 0:E.value)&&C.push("Reason: ".concat(L["Reason Not Recorded"].value,"."))):(null==(_=L["Systolic blood pressure"])?void 0:_.value)&&C.push("Blood pressure: ".concat(L["Systolic blood pressure"].value,"/").concat((null==(I=L["Diastolic blood pressure"])?void 0:I.value)||"--"," mmHg."))),(null==(i=L["Capillary refill time"])?void 0:i.value)&&C.push("Capillary refill time: ".concat(L["Capillary refill time"].value,".")),(null==(n=L["Patient Intravenous"])?void 0:n.value)==="Yes"?(C.push("IV access established."),(null==(O=L["Size Of Catheter"])?void 0:O.value)&&C.push("Catheter size: ".concat(L["Size Of Catheter"].value,".")),(null==(D=L["Cannulation site"])?void 0:D.value)&&C.push("Cannulation site: ".concat(L["Cannulation site"].value,".")),(null==(R=L["Diagram cannulation site"])?void 0:R.value)&&C.push("Specific site: ".concat(L["Diagram cannulation site"].value,"."))):(null==(s=L["Patient Intravenous"])?void 0:s.value)==="No"&&C.push("No IV access established."),(null==(l=L["Is Patient Traumatized"])?void 0:l.value)==="Yes"?C.push("The patient has traumatic injuries."):(null==(r=L["Is Patient Traumatized"])?void 0:r.value)==="No"&&C.push("The patient has no traumatic injuries."),(null==(o=L["Is Pelvis Stable"])?void 0:o.value)==="No"?C.push("The pelvis is unstable."):(null==(c=L["Is Pelvis Stable"])?void 0:c.value)==="Yes"&&C.push("The pelvis is stable."),(null==(d=L["Is Femur Tibia Normal"])?void 0:d.value)==="No"?C.push("Abnormal femur/tibia findings."):(null==(u=L["Is Femur Tibia Normal"])?void 0:u.value)==="Yes"&&C.push("Femur/tibia appear normal."),(null==(m=L["Mucous Membranes"])?void 0:m.value)==="Abnormal"?(C.push("Mucous membranes appear abnormal."),(null==(w=L["Mucous abnormal"])?void 0:w.value)&&C.push("Specific finding: ".concat(L["Mucous abnormal"].value,"."))):(null==(h=L["Mucous Membranes"])?void 0:h.value)==="Normal"&&C.push("Mucous membranes appear normal."),(null==(p=L["Assess Peripheries"])?void 0:p.value)&&C.push("Peripheral assessment: ".concat(L["Assess Peripheries"].value,".")),(null==(x=L.Headache)?void 0:x.value)==="Yes"?C.push("The patient reports headache."):(null==(b=L.Headache)?void 0:b.value)==="No"&&C.push("The patient reports no headache."),(null==(g=L["Skin Color"])?void 0:g.value)&&C.push("Skin color: ".concat(L["Skin Color"].value,".")),(null==(f=L.Temperature)?void 0:f.value)&&C.push("Temperature: ".concat(L.Temperature.value,".")),(null==(v=L["Heart Sounds"])?void 0:v.value)&&C.push("Heart sounds: ".concat(L["Heart Sounds"].value,".")),(null==(j=L["Respiratory Rate"])?void 0:j.value)&&C.push("Respiratory rate: ".concat(L["Respiratory Rate"].value," breaths/min.")),(null==(y=L["Oxygen Saturation"])?void 0:y.value)&&C.push("Oxygen saturation: ".concat(L["Oxygen Saturation"].value,"%.")),Object.entries(e.abnormalities)))P.length>0&&C.push("".concat(S," abnormalities: ").concat(P.join(", "),"."));return(null==(S=L["Additional Notes"])?void 0:S.value)&&C.push("Additional notes: ".concat(L["Additional Notes"].value,".")),{paragraph:C.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}}return t.sort((e,t)=>t.rawTime-e.rawTime)},eP=e=>{let t=e=>{let t=[];if(e.consciousnessLevel&&t.push("No"===e.consciousnessLevel?"The patient is alert with no reduced level of consciousness.":"The patient has a reduced level of consciousness requiring evaluation."),e.eyeOpening&&e.verbalResponse&&e.motorResponse){let a=parseInt(e.eyeOpening)+parseInt(e.verbalResponse)+parseInt(e.motorResponse);t.push("GCS score: ".concat(a," (E").concat(e.eyeOpening,"V").concat(e.verbalResponse,"M").concat(e.motorResponse,").")),15===a?t.push("Patient is fully conscious with normal neurological function."):a>=13&&a<=14?t.push("Mild brain injury - close monitoring advised."):a>=9&&a<=12?t.push("Moderate brain injury - requires further assessment."):a>=3&&a<=8&&t.push("Severe brain injury/coma - needs immediate intervention.")}if(e.pupils){let a=e.pupils.leftSize||"not measured",i=e.pupils.leftReaction||"not assessed",n=e.pupils.rightSize||"not measured",s=e.pupils.rightReaction||"not assessed";t.push("Pupils: Left (".concat(a,"mm, ").concat(i,"), Right (").concat(n,"mm, ").concat(s,")."))}if(e.focalNeurology&&t.push("Focal neurology: ".concat(e.focalNeurology,".")),e.posture&&t.push("Posture: ".concat(e.posture,".")),e.serumGlucose){let a=parseFloat(e.serumGlucose);a<3.9?t.push("Hypoglycemia (".concat(a," mmol/L).")):a>11.1?t.push("Hyperglycemia (".concat(a," mmol/L).")):t.push("Normal glucose (".concat(a," mmol/L)."))}return e.activeSeizures&&t.push("Yes"===e.activeSeizures?"Active seizures present - requires immediate intervention.":"No active seizures observed."),e.additionalNotes&&t.push("Notes: ".concat(e.additionalNotes,".")),{paragraph:t.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},a=[],i={};for(let o of[...e].sort((e,t)=>new Date(t.obs_datetime).getTime()-new Date(e.obs_datetime).getTime())){var n,s,l,r;let e=null==(s=o.names)||null==(n=s[0])?void 0:n.name,c=o.value,d=o.obs_datetime||new Date().toISOString(),u=o.created_by||"Unknown";switch(!i.time&&(i={time:d,creator:u}),i.time=d,i.creator=u,e){case"Does the patient have a reduced Level of consciousness":i.consciousnessLevel=c;break;case"Eye Opening response":i.eyeOpening=c;break;case"Verbal Response":i.verbalResponse=c;break;case"Motor response":i.motorResponse=c;break;case"Focal Neurology":i.focalNeurology=c;break;case"Posture":i.posture=c;break;case"Serum glucose":i.serumGlucose=c;break;case"Active Seizures":i.activeSeizures=c;break;case"Additional Notes":i.additionalNotes=c;break;case"Eyes":for(let e of(i.pupils||(i.pupils={}),o.children||[])){let t=null==(r=e.names)||null==(l=r[0])?void 0:l.name,a=e.value;if("Pupil size"===t)"Left Eye"===c?i.pupils.leftSize=a:i.pupils.rightSize=a;else if("Pupil Reaction"===t){let e="Yes"===a?"reactive":"non-reactive";"Left Eye"===c?i.pupils.leftReaction=e:i.pupils.rightReaction=e}}}(i.consciousnessLevel||i.eyeOpening||i.verbalResponse||i.motorResponse||i.pupils||i.focalNeurology)&&(a.push(t(i)),i={})}return a.reduce((e,t)=>e.some(e=>e.paragraph===t.paragraph&&e.time===t.time)?e:[...e,t],[]).sort((e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime())},eW=e=>{let t=e=>{let t=[];if(e.temperature&&t.push("Temperature: ".concat(e.temperature,"\xb0C.")),e.abnormalities.length>0){let a=e.abnormalities.map(e=>e.bodyPart);t.push("".concat(a.join(" and ")," ").concat(a.length>1?"were":"was"," assessed."))}return e.abnormalities.forEach(e=>{let a=[];if(a.push("".concat(e.bodyPart," has")),"Present"===e.skinRash){let t=e.descriptions.filter(t=>"Present"===e.skinRash&&(t.toLowerCase().includes("rash")||t.toLowerCase().includes("petechiae")||t.toLowerCase().includes("burns"))).join(", ");a.push("skin rash (".concat(t,")"))}else"Absent"===e.skinRash&&a.push("no skin rash");if("Present"===e.injury){let t=e.descriptions.filter(t=>"Present"===e.injury&&t.toLowerCase().includes("injury")).join(", ");a.push(t?"injury (".concat(t,")"):"injury")}else"Absent"===e.injury&&a.push("no injury");if("Present"===e.abnormalities){let t=e.descriptions.filter(t=>"Present"===e.abnormalities&&!t.toLowerCase().includes("rash")&&!t.toLowerCase().includes("injury")).join(", ");a.push(t?"other abnormalities (".concat(t,")"):"other abnormalities")}else"Absent"===e.abnormalities&&a.push("no other abnormalities");let i=a.join(", ");i=i.replace(/, ([^,]*)$/," and $1"),t.push("".concat(i,"."))}),e.additionalNotes&&t.push("Additional notes: ".concat(e.additionalNotes,".")),{paragraph:t.join(" "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},a=[],i={abnormalities:[]};return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var n,s,l,r,o;let c=null==(s=e.names)||null==(n=s[0])?void 0:n.name,d=e.value,u=e.obs_datetime||new Date().toISOString(),m=e.created_by||"Unknown";switch("Temperature (c)"===c&&(i.time&&a.push(t(i)),i={time:u,creator:m,abnormalities:[]}),i.time=u,i.creator=m,c){case"Temperature (c)":i.temperature=d;break;case"Additional Notes":i.additionalNotes=d;break;case"Image Part Name":if("full body anterior"===d||"full body posterior"===d)null==(l=e.children)||l.forEach(e=>{var t,a,n,s;if("Image Part Name"===(null==(a=e.names)||null==(t=a[0])?void 0:t.name)){let t={bodyPart:e.value,descriptions:[]};null==(n=e.children)||n.forEach(e=>{var a,i,n,s,l;let r=null==(i=e.names)||null==(a=i[0])?void 0:a.name,o=e.value;switch(r){case"Skin rash":t.skinRash="Yes"===o?"Present":"Absent","Yes"===o&&(null==(n=e.children)||n.forEach(e=>{var a,i;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Description"&&t.descriptions.push(e.value)}));break;case"Injury":t.injury="Yes"===o?"Present":"Absent","Yes"===o&&(null==(s=e.children)||s.forEach(e=>{var a,i;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Description of injury"&&t.descriptions.push(e.value)}));break;case"Abnormalities":t.abnormalities="Yes"===o?"Present":"Absent","Yes"===o&&(null==(l=e.children)||l.forEach(e=>{var a,i;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Abnormality description"&&t.descriptions.push(e.value)}));break;case"Description":t.descriptions.push(o);break;case"Additional Notes":t.additionalNotes=o;break;case"Image Part Name":t.bodyPart=o}}),(t.skinRash||t.injury||t.abnormalities||t.descriptions.length>0)&&(null==(s=i.abnormalities)||s.push(t))}});else{let t={bodyPart:d,descriptions:[]};null==(r=e.children)||r.forEach(e=>{var a,i,n,s,l;let r=null==(i=e.names)||null==(a=i[0])?void 0:a.name,o=e.value;switch(r){case"Skin rash":t.skinRash="Yes"===o?"Present":"Absent","Yes"===o&&(null==(n=e.children)||n.forEach(e=>{var a,i;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Description"&&t.descriptions.push(e.value)}));break;case"Injury":t.injury="Yes"===o?"Present":"Absent","Yes"===o&&(null==(s=e.children)||s.forEach(e=>{var a,i;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Description of injury"&&t.descriptions.push(e.value)}));break;case"Abnormalities":t.abnormalities="Yes"===o?"Present":"Absent","Yes"===o&&(null==(l=e.children)||l.forEach(e=>{var a,i;(null==(i=e.names)||null==(a=i[0])?void 0:a.name)==="Abnormality description"&&t.descriptions.push(e.value)}));break;case"Description":t.descriptions.push(o);break;case"Additional Notes":t.additionalNotes=o}}),(t.skinRash||t.injury||t.abnormalities||t.descriptions.length>0)&&(null==(o=i.abnormalities)||o.push(t))}break;case"Clinician notes":i.clinicianNotes=d}}),i.time&&(i.temperature||i.abnormalities&&i.abnormalities.length>0||i.clinicianNotes||i.additionalNotes)&&a.push(t(i)),a},eM=e=>{let t=[],a=null;return[...e].sort((e,t)=>new Date(e.obs_datetime).getTime()-new Date(t.obs_datetime).getTime()).forEach(e=>{var i,n;let s=null==(n=e.names)||null==(i=n[0])?void 0:i.name;e.value;let l=e.obs_datetime||new Date().toISOString(),r=e.created_by||"Unknown";["Discharge Home","Referral","Admission","Death","Absconded","Awaiting Speciality Review","Short stay","Transfer To Another Facility","Refused Hospital Treatment"].includes(s)&&(a&&t.push(ek(a)),a={dispositionType:s,details:{},time:l,creator:r},e.children&&e.children.forEach(e=>{var t,i;let n=null==(i=e.names)||null==(t=i[0])?void 0:t.name,s=e.value;n&&(a.details[n]=s)}))}),a&&t.push(ek(a)),t.sort((e,t)=>t.rawTime-e.rawTime)},ek=e=>{let t=[],a=e.details;switch(e.dispositionType){case"Discharge Home":t.push("Patient was discharged home."),a["Discharge Plan"]&&t.push("Discharge plan: ".concat(a["Discharge Plan"])),"Yes"===a["Followup Plan"]?(t.push("Follow-up is required."),a["Followup Details"]&&t.push("Follow-up details: ".concat(a["Followup Details"]))):"No"===a["Followup Plan"]&&t.push("No follow-up required."),a["Home Care Instructions"]&&t.push("Home care instructions: ".concat(a["Home Care Instructions"])),a["Discharge Notes"]&&t.push("Discharge notes: ".concat(a["Discharge Notes"])),a["Specialist clinic"]&&t.push("Referred to specialist clinic: ".concat(a["Specialist clinic"]));break;case"Referral":t.push("Patient was referred to another facility."),a["Referral Facility"]&&t.push("Referral facility: ".concat(a["Referral Facility"])),a["Referral Reason"]&&t.push("Reason for referral: ".concat(a["Referral Reason"])),a["Referral Notes"]&&t.push("Referral notes: ".concat(a["Referral Notes"]));break;case"Admission":t.push("Patient was admitted to the hospital."),a["Speciality Department"]&&t.push("Department: ".concat(a["Speciality Department"])),a["Bed number"]&&t.push("Bed number: ".concat(a["Bed number"]));break;case"Short stay":t.push("Patient was admitted for a short stay."),a["Reason for short stay"]&&t.push("Reason: ".concat(a["Reason for short stay"])),a["Expected duration"]&&t.push("Expected duration: ".concat(a["Expected duration"])),a["Additional Notes"]&&t.push("Additional notes: ".concat(a["Additional Notes"]));break;case"Transfer To Another Facility":t.push("Patient was transferred to another facility."),a["Facility Name"]&&t.push("Transferred to: ".concat(a["Facility Name"])),a["Reason For Transfer"]&&t.push("Reason for transfer: ".concat(a["Reason For Transfer"]));break;case"Death":t.push("Patient was declared deceased."),a["Cause of death"]&&t.push("Cause of death: ".concat(a["Cause of death"])),a["Time of death"]&&t.push("Time of death: ".concat(a["Time of death"])),a["Family Informed"]&&("Yes"===a["Family Informed"]?t.push("Family was informed."):"No"===a["Family Informed"]&&t.push("Family was not informed.")),a["Relationship To Deceased"]&&t.push("Reported by: ".concat(a["Relationship To Deceased"])),a.Mortuary&&t.push("Body taken to: ".concat(a.Mortuary)),a["Last Office Conducted"]&&("Yes"===a["Last Office Conducted"]?t.push("Last office was conducted."):"No"===a["Last Office Conducted"]&&t.push("Last office was not conducted.")),a["Name Of Health Worker Who Conducted Last Office"]&&t.push("Last office conducted by: ".concat(a["Name Of Health Worker Who Conducted Last Office"])),a["Date Of Last Office"]&&t.push("Date of last office: ".concat(a["Date Of Last Office"])),a["Additional Notes"]&&t.push("Additional notes: ".concat(a["Additional Notes"]));break;case"Absconded":t.push("Patient absconded from care."),a["Last Seen Location"]&&t.push("Last seen at ".concat(a["Last Seen Location"])),a["Date Of Absconding"]&&t.push("Date of absconding: ".concat(a["Date Of Absconding"])),a["Time Of Absconding"]&&t.push("Time of absconding: ".concat(a["Time Of Absconding"]));break;case"Refused Hospital Treatment":t.push("Patient refused hospital treatment."),a["Date Of Refusal"]&&t.push("Date of refusal: ".concat(a["Date Of Refusal"])),a["Witness Name"]&&t.push("Witness name: ".concat(a["Witness Name"])),a["Reason For Refusal"]&&t.push("Reason for refusal: ".concat(a["Reason For Refusal"])),a["Plans To Return For Treatment"]&&("Yes"===a["Plans To Return For Treatment"]?t.push("The patient plans to return for treatment."):"No"===a["Plans To Return For Treatment"]&&t.push("The patient does not plan to return for treatment."));break;case"Transfer":t.push("Patient was transferred to another facility."),a["Transfer Facility"]&&t.push("Transfer facility: ".concat(a["Transfer Facility"])),a["Transfer Reason"]&&t.push("Reason for transfer: ".concat(a["Transfer Reason"])),a["Transfer Notes"]&&t.push("Transfer notes: ".concat(a["Transfer Notes"]));break;case"Awaiting Speciality Review":t.push("Patient is awaiting specialty review."),a["Speciality Department"]&&t.push("Specialty department: ".concat(a["Speciality Department"])),a["Reason for request"]&&t.push("Reason for review: ".concat(a["Reason for request"]));break;default:t.push("Patient disposition: ".concat(e.dispositionType))}let i=["Discharge Plan","Followup Plan","Followup Details","Home Care Instructions","Discharge Notes","Specialist clinic","Referral Facility","Referral Reason","Referral Notes","Admission Ward","Admission Reason","Admission Notes","Cause of death","Time of death","Family Informed","Relationship To Deceased","Mortuary","Last Office Conducted","Name Of Health Worker Who Conducted Last Office","Date Of Last Office","Last Seen","Absconded Notes","Transfer Facility","Transfer Reason","Transfer Notes","Speciality Department","Reason for request","Speciality Department","Bed number","Reason for short stay","Expected duration","Additional Notes","Facility Name","Reason For Transfer","Date Of Absconding","Time Of Absconding","Last Seen Location","Date Of Refusal","Witness Name","Reason For Refusal","Plans To Return For Treatment"];return Object.entries(a).forEach(e=>{let[a,n]=e;!i.includes(a)&&n&&t.push("".concat(a,": ").concat(n))}),{paragraph:t.join(". "),time:e.time,creator:e.creator,rawTime:new Date(e.time).getTime()}},eH=()=>{let{notes:e,isLoading:t}=eo(p.fA.AIRWAY_ASSESSMENT);return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Airway"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No airway assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontStyle:"italic",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},eF=()=>{let{notes:e,isLoading:t}=eo(p.fA.BREATHING_ASSESSMENT);return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Breathing"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No breathing assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontStyle:"italic",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},eB=e=>{let[t,a]=(0,d.useState)(null);return(0,d.useEffect)(()=>{if(!e)return;let t=e.find(e=>e.encounter_type.uuid===p.fA.BED_SIDE_TEST);if(!(null==t?void 0:t.obs))return;let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a="",n=" ".repeat(2*t);if(e.value){var s,l;a+="".concat(n).concat((null==(l=e.names)||null==(s=l[0])?void 0:s.name)||"Test",": ").concat(e.value,"\n")}return e.children&&e.children.length>0&&e.children.forEach(e=>{a+=i(e,t+1)}),a},n=t.obs.map(e=>e.obs_datetime).filter(e=>!!e),s=(n.length>0?new Date(Math.max(...n.map(e=>new Date(e).getTime()))):new Date).toLocaleString(),l=["Bed side tests recorded on ".concat(s,":\n\n")];t.obs.forEach(e=>{l.push(i(e))}),a(l.join(""))},[e]),t},eY=e=>{let[t,a]=(0,d.useState)(null);return(0,d.useEffect)(()=>{if(!e)return;let t=e.find(e=>e.encounter_type.uuid===p.fA.OUTPATIENT_DIAGNOSIS);if(!(null==t?void 0:t.obs))return;let i=t.obs.filter(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>e.name===p.W.DIFFERENTIAL_DIAGNOSIS)}).map(e=>e.value).filter(Boolean);if(0===i.length)return;let n=t.created_by;a(["Differential Diagnosis recorded on:\n","The Differential Diagnosis are: ".concat(i.join(", ")),"\n\nCreated by: ".concat(n)].join(""))},[e]),t},eG=e=>{let[t,a]=(0,d.useState)("");return(0,d.useEffect)(()=>{if(!e)return;let t=[],i=e.find(e=>e.encounter_type.uuid===p.fA.NON_PHARMACOLOGICAL);if(null==i?void 0:i.obs){let e=t=>{let a=[];if(t.children&&t.children.length>0)t.children.forEach(t=>{a=a.concat(e(t))});else{if(t.names&&t.names.length>0){let e=new Set(t.names.map(e=>{var t;return null==(t=e.name)?void 0:t.trim()}).filter(e=>e&&e!==t.value));a.push(...Array.from(e))}t.value&&""!==t.value.trim()&&a.push(t.value)}return a},a=[...i.obs.map(e=>e.obs_datetime),...i.obs.flatMap(e=>e.children?e.children.map(e=>e.obs_datetime):[])].filter(Boolean),n=(a.length>0?new Date(Math.max(...a.map(e=>new Date(e).getTime()))):new Date).toLocaleString(),s={Procedures:[],"Supportive Care":[],Others:[]};i.obs.forEach(t=>{var a,i,n;let l=(null==(n=t.names)||null==(i=n[0])||null==(a=i.name)?void 0:a.toLowerCase())||"",r=e(t).filter(e=>"procedures"!==e.trim().toLowerCase()&&"supportive care"!==e.trim().toLowerCase()&&""!==e.trim());0!==r.length&&(l.includes("procedure")?s.Procedures.push(...r):l.includes("supportive")?s["Supportive Care"].push(...r):s.Others.push(...r))});let l=i.created_by,r=["Non-Pharmacological Management Plan recorded on ".concat(n,":\n")];s.Procedures.length>0&&r.push("The Procedures are: ".concat(s.Procedures.join(", "))),s["Supportive Care"].length>0&&r.push("The Supportive Care done are: ".concat(s["Supportive Care"].join(", "))),r.push("\n\nCreated by: ".concat(l)),t.push(r.join("\n"))}let n=e.find(e=>e.encounter_type.uuid===p.fA.PATIENT_CARE_AREA);if(null==n?void 0:n.obs){let e=n.obs.map(e=>e.value).filter(Boolean);if(e.length>0){let a=new Date(n.encounter_datetime).toLocaleString(),i=n.created_by,s=["Patient Care Area recorded on: ".concat(a,":\n"),"The Patient Care Areas are: ".concat(e.join(", ")),"\n\nCreated by: ".concat(i)];t.push(s.join("\n"))}}let s=e.find(e=>e.encounter_type.uuid===p.fA.PRESCRIPTIONS);if(console.log("Tione zamakhwala",s),null==s?void 0:s.obs){let e=new Date(s.encounter_datetime).toLocaleString(),a=s.created_by||"Unknown",i=s.obs.map(e=>{var t,a,i,n,s,l,r,o,c,d,u,m;let h=null==(a=e.children)||null==(t=a.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>{var t;return null==(t=e.name)?void 0:t.toLowerCase().includes("formulation")})}))?void 0:t.value,p=null==(n=e.children)||null==(i=n.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>{var t,a;return(null==(t=e.name)?void 0:t.toLowerCase().includes("dose"))&&!(null==(a=e.name)?void 0:a.toLowerCase().includes("unit"))})}))?void 0:i.value,x=null==(l=e.children)||null==(s=l.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>{var t;return null==(t=e.name)?void 0:t.toLowerCase().includes("dose unit")})}))?void 0:s.value,b=null==(o=e.children)||null==(r=o.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>{var t;return null==(t=e.name)?void 0:t.toLowerCase().includes("frequency")})}))?void 0:r.value,g=null==(d=e.children)||null==(c=d.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>{var t,a;return(null==(t=e.name)?void 0:t.toLowerCase().includes("duration"))&&!(null==(a=e.name)?void 0:a.toLowerCase().includes("unit"))})}))?void 0:c.value,f=null==(m=e.children)||null==(u=m.find(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>{var t;return null==(t=e.name)?void 0:t.toLowerCase().includes("duration unit")})}))?void 0:u.value,v=[];return v.push(e.value),h&&v.push("(".concat(h,")")),p&&x&&v.push("".concat(p).concat(x)),b&&v.push(b),g&&f&&v.push("for ".concat(g).concat(f)),v.join(" ")}),n=["Prescriptions recorded on ".concat(e,":\n"),"The Prescriptions are: ".concat(i.join(", ")),"\n\nCreated by: ".concat(a)];t.push(n.join("\n"))}a(t.join("\n\n"))},[e]),t},eU=()=>{let{notes:e,isLoading:t}=eo(p.fA.GENERAL_INFORMATION_ASSESSMENT),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"General Information"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No general information data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},eq=()=>{let{notes:e,isLoading:t}=eo(p.fA.HEAD_AND_NECK_ASSESSMENT),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Head and Neck"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No head and neck assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~",e.creator]})]},t))]})},eV=()=>{let{notes:e,isLoading:t}=eo(p.fA.CHEST_ASSESSMENT),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading chest assessment..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Chest Assessment"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No chest assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},ez=()=>{let{notes:e,isLoading:t}=eo(p.fA.ABDOMEN_AND_PELVIS_ASSESSMENT),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Abdomen and Pelvis"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No abdomen and pelvis assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:3,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontStyle:"italic",color:"primary.main",mb:1},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:1},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:1},children:["~",e.creator]})]},t))]})};var eK=a(89187);let eZ=()=>{let{notes:e,isLoading:t}=eo(p.fA.CIRCULATION_ASSESSMENT);return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Circulation"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No circulation assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:2,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0,whiteSpace:"pre-line"},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~",e.creator]})]},t))]})},eX=()=>{let{notes:e,isLoading:t}=eo(p.fA.DISABILITY_ASSESSMENT);return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Disability Assessment"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No disability assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:2,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0,whiteSpace:"pre-line"},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~",e.creator]})]},t))]})},e$=()=>{let{notes:e,isLoading:t}=eo(p.fA.EXPOSURE_ASSESSMENT),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Exposure Assessment"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No exposure assessment data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:2,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0,whiteSpace:"pre-line"},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~",e.creator]})]},t))]})},eJ=e=>{let[t,a]=(0,d.useState)(null);return(0,d.useEffect)(()=>{if(!e)return;let t=e.find(e=>e.encounter_type.uuid===p.fA.OUTPATIENT_DIAGNOSIS);if(!(null==t?void 0:t.obs))return;let i=t.obs.filter(e=>{var t;return null==(t=e.names)?void 0:t.some(e=>e.name===p.W.FINAL_DIAGNOSIS)}).map(e=>e.value).filter(Boolean);if(0===i.length)return;let n=t.created_by;a(["Final Diagnosis recorded on:\n","The Final Diagnosis are: ".concat(i.join(", ")),"\n\nCreated by: ".concat(n)].join(""))},[e]),t},eQ=()=>{let{notes:e,isLoading:t}=eo(p.fA.NURSING_CARE_NOTES),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"SOAPIER Notes"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No SOAPIER notes available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:2,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0,whiteSpace:"pre-line"},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~",e.creator]})]},t))]})};var e0=a(89915);let e6=()=>{let{notes:e,isLoading:t}=eo(p.fA.PRESENTING_COMPLAINTS),{visitDate:a}=(0,x.E)();return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Presenting Complaints"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Presenting Complaints"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No presenting complaints available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e1=()=>{let{notes:e,isLoading:t}=eo(p.fA.ALLERGIES);return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Allergies"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):0===e.length?null:(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Allergies"}),e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e8=()=>{let{notes:e,isLoading:t}=eo(p.fA.PRESCRIPTIONS);return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Medication History"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Medication History"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No medication history available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e2=()=>{let{notes:e,isLoading:t}=eo(p.fA.DIAGNOSIS);return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Existing Conditions"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Existing Conditions"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No existing conditions data available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e3=()=>{let{notes:e,isLoading:t}=eo(p.fA.SURGICAL_HISTORY);return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Surgical History"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Surgical History"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No surgical history available."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:new Date(e.time).toLocaleString()}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e4=()=>{let{notes:e,isLoading:t}=eo(p.fA.PATIENT_ADMISSIONS),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Previous Admissions"}),0===e.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No previous admissions recorded."}):e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e5=()=>{let{notes:e,isLoading:t}=eo(p.fA.REVIEW_OF_SYSTEMS),a=e=>!isNaN(new Date(e).getTime()),i=[...e].sort((e,t)=>t.rawTime-e.rawTime);return t?(0,c.jsx)(ea.default,{children:"Loading..."}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Review of Systems"}),0===i.length?(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No systems review recorded."}):i.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:2,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:0},children:["~ ",e.creator]})]},t))]})},e7=()=>{let{notes:e,isLoading:t}=eo(p.fA.FAMILY_MEDICAL_HISTORY),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Family History"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Family History"}),e.length>0?e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:1},children:["~ ",e.creator]})]},t)):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No Family history data available."})]})},e9=()=>{let{notes:e,isLoading:t}=eo(p.fA.DISPOSITION),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Extremities"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Disposition"}),e.length>0?e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:1},children:["~ ",e.creator]})]},t)):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No disposition data available."})]})},te=()=>{let{notes:e,isLoading:t}=eo(p.fA.OBSTETRIC_HISTORY),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Gynaecology and Obstetrics"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Gynaecology and Obstetrics"}),e.length>0?e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:1},children:["~ ",e.creator]})]},t)):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No Gynaecology and Obstetrics data available."})]})},tt=()=>{let{notes:e,isLoading:t}=eo(p.fA.SUMMARY_ASSESSMENT),a=e=>!isNaN(new Date(e).getTime());return t?(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Last Meal"}),(0,c.jsx)(k.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100px"},children:(0,c.jsx)(e0.A,{size:40})})]}):(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Last Meal"}),e.length>0?e.map((e,t)=>(0,c.jsxs)(k.default,{sx:{mb:0,position:"relative"},children:[(0,c.jsx)(ea.default,{variant:"subtitle2",sx:{fontWeight:"bold",color:"primary.main",mb:0},children:a(e.time)?new Date(e.time).toLocaleString():"Invalid Date"}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",mb:0},children:e.paragraph}),(0,c.jsxs)(ea.default,{variant:"caption",sx:{display:"block",textAlign:"right",color:"text.secondary",fontStyle:"italic",mt:1},children:["~ ",e.creator]})]},t)):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No Last Meal data available."})]})},ta=(0,A.Ay)(es.A)(e=>{let{theme:t}=e;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&::before":{display:"none"},disableGutters:!0,elevation:0,square:!0}}),ti=(0,A.Ay)(el.A)(e=>{var t;let{theme:a}=e;return{backgroundColor:"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:a.spacing(1)},...null==(t=a.applyStyles)?void 0:t.call(a,"dark",{backgroundColor:"rgba(255, 255, 255, .05)"})}}),tn=(0,A.Ay)(er.A)(e=>{let{theme:t}=e;return{padding:t.spacing(1),borderTop:"1px solid rgba(0, 0, 0, .125)"}}),ts=()=>{let{patientId:e}=(0,ei.g)(),{data:t,isLoading:a}=(0,m.$O)(e),{visitDate:i}=(0,x.E)(),[n,s]=(0,d.useState)([]),[l,r]=(0,d.useState)("panel1"),[o,u]=(0,d.useState)(!1),h=eB(n),b=eY(n),g=eG(n),f=eJ(n);if((0,d.useEffect)(()=>{!a&&t&&i&&s(t.filter(e=>e.visit.date_started===i))},[t,i,a]),a)return(0,c.jsx)(eK.E7,{});let v=e=>{let t=new Map;return e.forEach(e=>{let{concept_id:a,obs_datetime:i}=e,n=t.get(a);(!n||new Date(i)>new Date(n.obs_datetime))&&t.set(a,e)}),e.map(e=>{let{concept_id:a,obs_id:i}=e,n=t.get(a).obs_id;return{...e,managerId:n===i?null:n}})},j=e=>{if(!i)return[];let t=n.find(t=>{var a;return(null==t||null==(a=t.encounter_type)?void 0:a.uuid)===e});return t?v(t.obs||[]):[]};if(a)return(0,c.jsx)(eK.E7,{});let S={panel1:{title:"Initial Registration",data:j(p.fA.INITIAL_REGISTRATION)},panel2:{title:"Screening",data:j(p.fA.SCREENING_ENCOUNTER)},panel3:{title:"Social History",data:j(p.fA.SOCIAL_HISTORY)},panel4:{title:"Referral",data:j(p.fA.REFERRAL)},panel5:{title:"Financing",data:j(p.fA.FINANCING)},panel7:{title:"Vitals",data:j(p.fA.VITALS)}},N=e=>(t,a)=>{r(!!a&&e)},A=e=>(t,a)=>{u(!!a&&e)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(y.default,{style:{marginTop:"10px"},children:Object.entries(S).map(e=>{let[t,{title:a,data:i}]=e;return i.length>0&&(0,c.jsx)(ta,{expanded:l===t,onChange:N(t),children:(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"".concat(t,"-content"),id:"".concat(t,"-header"),children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},component:"span",children:a})})},t)})}),(0,c.jsxs)(ta,{expanded:"soapier-notes"===o,onChange:A("soapier-notes"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"soapier-notes-content",id:"soapier-notes-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Soapier Notes"})}),(0,c.jsx)(tn,{children:(0,c.jsx)(eQ,{})})]}),(0,c.jsxs)(ta,{expanded:"primary-assessment"===o,onChange:A("primary-assessment"),sx:{backgroundColor:"white",marginTop:""},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"primary-assessment-content",id:"primary-assessment-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Primary Assessment"})}),(0,c.jsxs)(tn,{children:[(0,c.jsx)(eH,{}),(0,c.jsx)(eF,{}),(0,c.jsx)(eZ,{}),(0,c.jsx)(eX,{}),(0,c.jsx)(e$,{})]})]}),(0,c.jsxs)(ta,{expanded:"sample-history-notes"===o,onChange:A("sample-history-notes"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"sample-history-notes-content",id:"sample-history-notes-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Sample History"})}),(0,c.jsxs)(tn,{children:[(0,c.jsx)(e6,{}),(0,c.jsx)(e1,{}),(0,c.jsx)(e8,{}),(0,c.jsx)(e2,{}),(0,c.jsx)(e3,{}),(0,c.jsx)(e4,{}),(0,c.jsx)(te,{}),(0,c.jsx)(tt,{}),(0,c.jsx)(e5,{}),(0,c.jsx)(e7,{})]})]}),(0,c.jsxs)(ta,{expanded:"breathing-assessment"===o,onChange:A("breathing-assessment"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"breathing-assessment-content",id:"breathing-assessment-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Secondary Assessment"})}),(0,c.jsxs)(tn,{children:[(0,c.jsx)(eU,{}),(0,c.jsx)(eq,{}),(0,c.jsx)(eV,{}),(0,c.jsx)(ez,{})]})]}),(0,c.jsxs)(ta,{expanded:"differential-diagnosis-notes"===o,onChange:A("differential-diagnosis-notes"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"differential-diagnosis-content",id:"differential-diagnosis-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Differential Diagnosis"})}),(0,c.jsx)(tn,{children:(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"700"},children:" Differential Diagnosis"}),b?(0,c.jsxs)(k.default,{sx:{mb:3},children:[(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"primary.main",fontWeight:"700"},children:b.split("\n")[0]}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",whiteSpace:"pre-line"},children:b.split("\n").slice(1).join("\n")})]}):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No  Differential Diagnosis Data available."})]})})]}),(0,c.jsxs)(ta,{expanded:"investigations-notes"===o,onChange:A("investigations-notes"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"investigations-content",id:"investigations-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Investigations"})}),(0,c.jsx)(tn,{children:(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"700"},children:"Investigations"}),h?(0,c.jsxs)(k.default,{sx:{mb:3},children:[(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"primary.main",fontWeight:"700"},children:h.split("\n")[0]}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",whiteSpace:"pre-line"},children:h.split("\n").slice(1).join("\n")})]}):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No Investigations Data available."})]})})]}),(0,c.jsxs)(ta,{expanded:"final-diagnosis-notes"===o,onChange:A("final-diagnosis-notes"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"final-diagnosis-content",id:"final-diagnosis-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Final Diagnosis"})}),(0,c.jsx)(tn,{children:(0,c.jsxs)(k.default,{sx:{p:2},children:[(0,c.jsx)(ea.default,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"700"},children:" Final Diagnosis"}),f?(0,c.jsxs)(k.default,{sx:{mb:3},children:[(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"primary.main",fontWeight:"700"},children:f.split("\n")[0]}),(0,c.jsx)(ea.default,{variant:"body2",sx:{color:"text.primary",whiteSpace:"pre-line"},children:f.split("\n").slice(1).join("\n")})]}):(0,c.jsx)(ea.default,{variant:"body2",sx:{fontStyle:"italic",color:"secondary.main"},children:"No Final Diagnosis Data available."})]})})]}),(0,c.jsxs)(ta,{expanded:"patient-management-plan-notes"===o,onChange:A("patient-management-plan-notes"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"patient-management-plan-content",id:"patient-management-plan-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Patient Management Plan"})}),(0,c.jsx)(tn,{children:g&&(0,c.jsx)(k.default,{sx:{mb:3},children:g.split("\n").map((e,t)=>{let a=/^(Non-Pharmacological Management Plan recorded on|Patient Care Area recorded on|Medication recorded on)/.test(e.trim());return(0,c.jsx)(ea.default,{variant:"body2",sx:{color:a?"primary.main":"text.primary",fontWeight:a?"700":"normal",whiteSpace:"pre-line"},children:e},t)})})})]}),(0,c.jsxs)(ta,{expanded:"disposition"===o,onChange:A("disposition"),sx:{backgroundColor:"white"},children:[(0,c.jsx)(ti,{expandIcon:(0,c.jsx)(en.A,{sx:{fontSize:"0.9rem"}}),"aria-controls":"disposition-content",id:"dispositiont-header",children:(0,c.jsx)(ea.default,{sx:{fontWeight:700},children:"Disposition"})}),(0,c.jsx)(tn,{children:(0,c.jsx)(e9,{})})]})]})};a(55929);var tl=a(40700),tr=a(83403),to=a(47292);let tc=()=>{let{params:e}=(0,h.KU)(),{selectedVisit:t}=(0,x.E)(),{data:a,refetch:i}=(0,m.$O)(e.id,"encounter_type=".concat(p.fA.DISPENSING,"&visit=").concat(null==t?void 0:t.uuid)),[n,s]=(0,d.useState)([]);return(0,d.useEffect)(()=>{if(a&&a.length>0){console.log(a[0].obs),s((0,tr.Yw)(a[0].obs));return}s([])},[a]),(0,c.jsxs)(f.Z,{title:"Medications",children:[(0,c.jsx)("br",{}),(0,c.jsx)(tl.Z,{}),(0,c.jsx)("br",{}),(0,c.jsx)("h3",{children:"Despensed Medicines"}),(0,c.jsx)(to.q,{columns:[{label:"Medication Name",field:"medication"},{label:"Dose",field:"dose"},{label:"Route",field:"route"},{label:"Dispensed Time",field:"createdTime"},{label:"Dispenser",field:"createdBy"}],data:n||[]})]})};var td=a(87909);let tu=()=>{let[e,t]=(0,d.useState)(!0),{params:a}=(0,h.KU)(),i=a.id,{data:n,isLoading:s}=(0,m.$O)(i,"encounter_type=".concat(p.fA.BED_SIDE_TEST)),[l,r]=(0,d.useState)([]);(0,d.useEffect)(()=>{if(!s&&n){var e,t;r(null!=(t=null==n||null==(e=n[0])?void 0:e.obs)?t:[])}},[n]);let o=[{id:"bedsideResults",title:"Bedside Results",content:(0,c.jsx)(td.N,{data:l})},{id:"labResults",title:"Lab Results",content:(0,c.jsx)(v.E,{rows:[]})}];return((0,d.useEffect)(()=>{setTimeout(()=>{t(!1)},2e3)}),e)?(0,c.jsx)(eK.E7,{}):(0,c.jsx)(f.Z,{title:"Results",children:(0,c.jsx)(N.M,{sections:o})})};function tm(){return(tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}function th(){return(th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}function tp(){return(tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}function tx(){return(tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}a(6874);let tb=function(e){return d.createElement("svg",tx({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r||(r=d.createElement("g",{fill:"#636363"},d.createElement("path",{d:"M1.5 8.667c0-2.02 0-3.029.33-3.825a4.33 4.33 0 0 1 2.345-2.345c.796-.33 1.806-.33 3.825-.33s3.029 0 3.825.33a4.33 4.33 0 0 1 2.345 2.345c.33.796.33 1.806.33 3.825s0 3.028-.33 3.825a4.33 4.33 0 0 1-2.345 2.345c-.796.33-1.806.33-3.825.33s-3.029 0-3.825-.33a4.33 4.33 0 0 1-2.345-2.345c-.33-.797-.33-1.806-.33-3.825",opacity:.4}),d.createElement("path",{fillRule:"evenodd",d:"M5.5 9a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5M5.5 6.333a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5M5.5 11.667a.5.5 0 0 1 .5-.5h2.667a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5M6 .833a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5M10 .833a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5",clipRule:"evenodd"}))))};function tg(){return(tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(null,arguments)}let tf=e=>{let{label:t,link:a,icon:i}=e;return _jsx(Link,{href:a,children:_jsx(WrapperBox,{sx:{display:"flex",alignItems:"center"},children:_jsx(MainTypography,{sx:{fontFamily:"Inter",fontSize:"14px",fontWeight:500,lineHeight:"17px",letterSpacing:"0em",textAlign:"left",my:"0.5ch",ml:"5px"},children:t})})})}},88806:(e,t,a)=>{"use strict";a.d(t,{$:()=>s,k:()=>l});var i=a(95155);a(12115);var n=a(6314);let s=e=>{let{data:t,title:a,config:s}=e;if(!t||!Array.isArray(t)||0===t.length)return null;let l=e=>{var t;return Array.isArray(s.rootConcept)?s.rootConcept.some(t=>{var a;return(null==(a=e.names[0])?void 0:a.name)===t}):(null==(t=e.names[0])?void 0:t.name)===s.rootConcept},r=(()=>{let e=[];return t.forEach(t=>{if(l(t)&&t.value){let a={...t,timestamp:t.obs_datetime||"",created_by:t.created_by,rootValue:t.value};s.fields.forEach(e=>{var i;let n=null==(i=t.children)?void 0:i.find(t=>{var a;return(null==(a=t.names[0])?void 0:a.name)===e.conceptName});n&&(a[e.conceptName]=e.format?e.format(n.value):n.value)}),e.push(a)}}),e})();if(0===r.length)return null;let o=s.groupBy||"timestamp",c=r.reduce((e,t)=>{var a,i;let n=(null==(i=t[o])||null==(a=i.split)?void 0:a.call(i,"T")[0])||t[o]||"unknown";return e[n]||(e[n]=[]),e[n].push(t),e},{}),d=s.itemRenderer||(e=>(0,i.jsxs)("div",{style:{marginBottom:"6px"},children:[e.rootValue&&(0,i.jsxs)("div",{style:{fontWeight:"100",marginBottom:"2px"},children:["- ",e.rootValue]}),(0,i.jsx)("div",{style:{paddingLeft:"16px"},children:s.fields.map((t,a)=>e[t.conceptName]&&(0,i.jsxs)("div",{style:{marginBottom:"2px",...t.style||{}},children:["- ",t.displayName,": ",e[t.conceptName]]},a))})]}));return(0,i.jsxs)("div",{style:{marginBottom:"12px",fontFamily:"Arial, sans-serif",lineHeight:1.6},children:[(0,i.jsx)("h4",{style:{fontWeight:"bold",marginBottom:"4px"},children:a}),(0,i.jsx)("div",{style:{marginLeft:"20px"},children:Object.entries(c).map(e=>{let[t,a]=e;return(0,i.jsx)("div",{style:{marginBottom:"8px"},children:a.map((e,t)=>(0,i.jsx)("div",{style:{marginBottom:"6px"},children:d(e)},t))},t)})}),(e=>{var t;return(null==e||null==(t=e[0])?void 0:t.created_by)?(0,i.jsxs)("div",{style:{color:"#7f8c8d",fontSize:"14px",letterSpacing:"0.2px",marginTop:"8px",fontStyle:"italic"},children:["~ ",e[0].created_by," - ",(0,n.rX)(e[0].obs_datetime||new Date)]}):null})(t)]})},l={ALLERGIES:{rootConcept:"Allergen Category",fields:[{conceptName:"Allergen",displayName:"Allergens",format:e=>e},{conceptName:"Description",displayName:"Notes"}]},MEDICATIONS:{rootConcept:"Drug Given",fields:[{conceptName:"Medication Formulation",displayName:"Formulation"},{conceptName:"Medication Dose",displayName:"Dose"},{conceptName:"Medication Dose Unit",displayName:"Unit"},{conceptName:"Medication Frequency",displayName:"Frequency"},{conceptName:"Medication Duration",displayName:"Duration"},{conceptName:"Medication Duration Unit",displayName:"Duration Unit"},{conceptName:"Description",displayName:"Notes"}]},DIAGNOSIS:{rootConcept:"Diagnosis date",fields:[{conceptName:"ICD11 Diagnosis",displayName:"Diagnosis",format:e=>{let t=e.split(",");return t.length>1?"".concat(t[1].trim()," (").concat(t[0].trim(),")"):e}},{conceptName:"On treatment",displayName:"On Treatment"},{conceptName:"Additional Diagnosis Details",displayName:"Details"}]},SURGICAL_HISTORY:{rootConcept:"Surgical Procedure",fields:[{conceptName:"Date of surgery",displayName:"Date"},{conceptName:"Indication For Surgery",displayName:"Indication"},{conceptName:"Complications",displayName:"Complications"}]},ADMISSIONS:{rootConcept:"Admission date",fields:[{conceptName:"Health center hospitals",displayName:"Hospital"},{conceptName:"Admission section",displayName:"Section"},{conceptName:"ICD11 Diagnosis",displayName:"Diagnosis",format:e=>{let t=e.split(",");return t.length>1?"".concat(t[1].trim()," (").concat(t[0].trim(),")"):e}},{conceptName:"Surgical interventions",displayName:"Interventions"},{conceptName:"Discharge Instructions",displayName:"Discharge Instructions"},{conceptName:"Follow Up",displayName:"Follow-up"}]},LAST_MEAL:{rootConcept:"Time of last meal",fields:[{conceptName:"Description of last meal",displayName:"Meal Description"}]},PRESENTING_COMPLAINTS:{rootConcept:["Presenting Complaints","Current complaints or symptoms"],fields:[{conceptName:"Duration Of Symptoms Days",displayName:"Duration (days)"},{conceptName:"Duration Of Symptoms Hours",displayName:"Duration (hours)"},{conceptName:"Duration Of Symptoms Weeks",displayName:"Duration (weeks)"},{conceptName:"Duration Of Symptoms Months",displayName:"Duration (months)"},{conceptName:"Duration Of Symptoms Years",displayName:"Duration (years)"}]},FAMILY_HISTORY:{rootConcept:["Family History Asthma","Family History Diabetes Mellitus","Family History Tuberculosis","Family History Other Condition","Family History Hypertension","Family History Epilepsy","Family History Cancer"],fields:[{conceptName:"Relationship To Patient",displayName:"Relationship"}],itemRenderer:e=>{var t,a;let n=(null==(a=e.names)||null==(t=a[0])?void 0:t.name)||"",s=n.replace("Family History ",""),l=e.value,r="";r="Family History Other Condition"===n||"Family History Cancer"===n?"true"!==l?l:s:"true"===l?"Yes":s;let o=e["Relationship To Patient"];if(!o&&e.children){let t=e.children.find(e=>{var t,a;return(null==(a=e.names)||null==(t=a[0])?void 0:t.name)==="Relationship To Patient"});o=null==t?void 0:t.value}return(0,i.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,i.jsxs)("div",{style:{fontWeight:"100",marginBottom:"4px"},children:["- ",s,": ",r]}),o&&(0,i.jsxs)("div",{style:{paddingLeft:"16px",marginBottom:"0px",lineHeight:1.6},children:["- Relationship: ",o]})]})}}}},94821:(e,t,a)=>{"use strict";a.d(t,{$F:()=>eO,Vm:()=>q,t0:()=>F,BW:()=>eS,W4:()=>ez,Ad:()=>g,R0:()=>ei,bO:()=>ev,px:()=>em,Se:()=>eG,q9:()=>R});var i=a(95155),n=a(12115),s=a(59487),l=a(23312),r=a(70482),o=a(83436),c=a(9890),d=a(42281),u=a(60283),m=a(98386),h=a(86517),p=a(49262);let x=e=>e.flatMap(e=>e.value.flatMap(e=>[{concept:e.complaint,value:!0},{concept:e.duration_unit===l.bH[0]?l.W.DURATION_OF_SYMPTOMS_HOURS:e.duration_unit===l.bH[1]?l.W.DURATION_OF_SYMPTOMS_DAYS:e.duration_unit===l.bH[2]?l.W.DURATION_OF_SYMPTOMS_WEEKS:e.duration_unit===l.bH[3]?l.W.DURATION_OF_SYMPTOMS_MONTHS:l.W.DURATION_OF_SYMPTOMS_YEARS,value:e.duration}])),b={[l.bH[0].toString()]:l.W.DURATION_OF_SYMPTOMS_HOURS,[l.bH[1].toString()]:l.W.DURATION_OF_SYMPTOMS_DAYS,[l.bH[2].toString()]:l.W.DURATION_OF_SYMPTOMS_WEEKS,[l.bH[3].toString()]:l.W.DURATION_OF_SYMPTOMS_MONTHS,[l.bH[4].toString()]:l.W.DURATION_OF_SYMPTOMS_YEARS},g=()=>{let e,[t,a]=(0,n.useState)(0),[g,f]=(0,n.useState)({}),{navigateBack:v,navigateBackToProfile:j,navigateTo:y}=(0,r.cq)(),{params:S}=(0,r.KU)(),{data:N,isLoading:A}=(0,c.GN)(null==S?void 0:S.id),{data:_}=(0,h.X)("Allergen Category"),T=(0,n.useRef)(null),E=(0,n.useRef)(null),I=(0,n.useRef)(null),O=(0,n.useRef)(null),[D,w]=(0,n.useState)(!1),{init:C,ServerTime:L}=(0,p.useServerTime)();(0,n.useEffect)(()=>{D&&(e=L.getServerTimeString(),ej(0),w(!1))},[D]);let{loading:P,setLoading:W,completed:M,setCompleted:k,message:H,setMessage:B,showForm:Y,setShowForm:G,error:U,setError:V}=(0,u.g)(),{data:z,mutateAsync:K,isPending:Z,isSuccess:X,isError:$,error:J}=(0,o.jM)(),{data:Q,isSuccess:ee}=(0,c.iu)(null==S?void 0:S.id),et=null==Q?void 0:Q.find(e=>!e.date_stopped);if(A)return(0,i.jsx)("div",{children:"Loading patient data..."});let ea=[{id:1,label:"Symptoms (Presenting Complaints)",encounter:l.fA.PRESENTING_COMPLAINTS},{id:2,label:"Allergies",encounter:l.fA.ALLERGIES},{id:3,label:"Medications",encounter:l.fA.PRESCRIPTIONS},{id:4,label:"Prior/Existing conditions",encounter:l.fA.DIAGNOSIS},...(null==N?void 0:N.gender)==="Female"?[{id:5,label:"Gynaecology and Obstetrics",encounter:l.fA.OBSTETRIC_HISTORY}]:[],{id:(null==N?void 0:N.gender)==="Female"?6:5,label:"Last Meal",encounter:l.fA.SUMMARY_ASSESSMENT},{id:(null==N?void 0:N.gender)==="Female"?7:6,label:"Events",encounter:l.fA.REVIEW_OF_SYSTEMS}],en=()=>{y("/patient/".concat(S.id,"/secondary-assessment"))},es=()=>{let e=t+1;e<ea.length?a(e):en()},el=()=>{a(t-1)},er=async t=>{let a=x((0,d.gX)(t,e)),i=[],n=null;a.forEach(t=>{!0===t.value?(n={concept:l.W.CURRENT_COMPLAINTS_OR_SYMPTOMS,value:t.concept,obsDatetime:e,groupMembers:[]},i.push(n)):n&&n.groupMembers.push({concept:t.concept,value:t.value,obsDatetime:e})});try{await K({encounterType:l.fA.PRESENTING_COMPLAINTS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:i})}catch(e){throw e}},eo=async t=>{let a=t[l.W.ALLERGY].reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}),i=Object.keys(a).map(i=>{let n=a[i].map(a=>{let i=l.W.ALLERGEN,n=a.value;return a.label.includes("Other Medical Substance Allergen")&&(i=l.W.OTHER_MEDICAL_SUBSTANCE_ALLERGY,n=t[l.W.OTHER_MEDICAL_SUBSTANCE_ALLERGY]),a.label.includes("Other Substance Allergen")&&(i=l.W.OTHER_SUBSTANCE_ALLERGY,n=t[l.W.OTHER_SUBSTANCE_ALLERGY]),a.label.includes("Other Medication Allergen")&&(i=l.W.OTHER_MEDICATION_ALLERGY,n=t[l.W.OTHER_MEDICATION_ALLERGY]),a.label.includes("Other Food Allergen")&&(i=l.W.OTHER_FOOD_ALLERGY,n=t[l.W.OTHER_FOOD_ALLERGY]),{concept:i,value:n,obsDateTime:e}});return{concept:l.W.ALLERGEN_CATEGORY,obsDatetime:e,value:i,groupMembers:n}}),n=[],s=_[0].uuid,r=_[1].uuid,o=_[2].uuid,c=_[3].uuid;i.forEach(async a=>{let i={[s]:"medication_Allergy_Details",[r]:"medical_Substance_Allergy_Details",[o]:"substance_Allergy_Details",[c]:"food_Allergy_Details"}[a.value];i&&t[i]&&a.groupMembers.push({concept:l.W.DESCRIPTION,value:t[i],obsDatetime:e}),n.push(a)});try{let t=await K({encounterType:l.fA.ALLERGIES,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:n});console.log("Encounter successfully created:",t)}catch(e){throw e}};async function ec(t){var a;let i=(null==(a=(0,d.gX)(t,e)[0])?void 0:a.value)||[],n={[l.bH[0].toString()]:l.W.DURATION_ON_MEDICATION_HOURS,[l.bH[1].toString()]:l.W.DURATION_ON_MEDICATION_DAYS,[l.bH[2].toString()]:l.W.DURATION_ON_MEDICATION_WEEKS,[l.bH[3].toString()]:l.W.DURATION_ON_MEDICATION_MONTHS,[l.bH[4].toString()]:l.W.DURATION_ON_MEDICATION_YEARS},s={"Milligrams (mg)":l.W.DOSE_IN_MILLIGRAMS,"Micrograms (\xb5g)":l.W.DOSE_IN_MICROGRAMS,"Grams (g)":l.W.DOSE_IN_GRAMS,"International Units (IU)":l.W.DOSE_IN_IU,"Milliliters (ml)":l.W.DOSE_IN_MILLIMETER,"Millimoles (mmol)":l.W.DOSE_IN_MILLIMOLES},r=i.map(t=>{let a=s[t.medication_dose_unit],i=n[t.medication_duration_unit];return{concept:l.W.DRUG_GIVEN,obsDatetime:e,value:t.name,groupMembers:[{concept:l.W.MEDICATION_DATE_LAST_TAKEN,value:t.medication_date_last_taken},{concept:l.W.MEDICATION_DATE_OF_LAST_PRESCRIPTION,value:t.medication_date_of_last_prescription},{concept:l.W.MEDICATION_FREQUENCY,value:t.medication_frequency},{concept:a,value:t.medication_dose},{concept:i,value:t.medication_duration},{concept:l.W.MEDICATION_FORMULATION,value:t.formulation},{concept:l.W.SELF_MEDICATED,value:t.medication_self_medicated}]}});try{let t=await K({encounterType:l.fA.PRESCRIPTIONS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:r});console.log("Encounter successfully created:",t)}catch(e){throw e}}let ed=e=>{e.current&&e.current.scrollIntoView({behavior:"smooth",block:"start"})};async function eu(t){let a=t.conditions.map(t=>({concept:l.W.DIAGNOSIS_DATE,obsDatetime:e,value:t.date,groupMembers:[{concept:l.W.ICD11_DIAGNOSIS,value:t.name},{concept:l.W.ON_TREATMENT,value:t.onTreatment},{concept:l.W.ADDITIONAL_DIAGNOSIS_DETAILS,value:t.additionalDetails}]}));try{let t=await K({encounterType:l.fA.DIAGNOSIS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:a});console.log("Encounter successfully created:",t)}catch(e){throw e}}async function eh(t){let a=t.surgeries.map(t=>({concept:l.W.SURGICAL_PROCEDURE,obsDatetime:e,value:t.procedure,groupMembers:[{concept:l.W.DATE_OF_SURGERY,value:t.date},{concept:l.W.INDICATION_FOR_SURGERY,value:t.indication},{concept:l.W.COMPLICATIONS,value:t.complication},"Other Surgical Procedure"===t.procedure?{concept:l.W.OTHER,value:t.other}:null]}));try{let t=await K({encounterType:l.fA.SURGICAL_HISTORY,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:a});console.log("Encounter successfully created:",t)}catch(e){throw e}}async function ep(t){let a=t.contraceptive_history.map(e=>({concept:e.id,value:!0})),i="Yes"===t.pregnant?[{concept:l.W.AGE_AT_MENARCHE,value:t.age_at_menarche},{concept:l.W.DATE_OF_LAST_MENSTRUAL,value:t.last_menstral},{concept:l.W.GESTATION_WEEKS,value:t.gestational_age},{concept:l.W.PREVIOUS_PREGNANCIES,value:t.number_of_previous_pregnancies}]:[{concept:l.W.AGE_AT_MENARCHE,value:t.age_at_menarche},{concept:l.W.DATE_OF_LAST_MENSTRUAL,value:t.last_menstral},{concept:l.W.PREVIOUS_PREGNANCIES,value:t.number_of_previous_pregnancies}];i.push(...a);try{let t=await K({encounterType:l.fA.OBSTETRIC_HISTORY,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:i});console.log("Encounter successfully created:",t)}catch(e){throw e}if(t.number_of_previous_pregnancies>0){let a=t.previous_pregnancy_outcomes,i=t.number_of_births;a.map((t,a)=>t==l.W.LIVE_BIRTH?{person:S.id,concept:l.W.PREGENANCY_OUTCOME,obsDatetime:e,value:!0,groupMembers:[{concept:t,value:!0},{concept:l.W.NUMBER_OF_BIRTHS,value:i[a]}]}:{person:S.id,concept:l.W.PREGENANCY_OUTCOME,obsDatetime:e,value:!0,groupMembers:[{concept:t,value:!0}]}).forEach(async t=>{try{let a=await K({encounterType:l.fA.OBSTETRIC_HISTORY,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:[t]});console.log("Encounter successfully created:",a)}catch(e){throw e}})}}async function ex(t){let a=t.admissions;if(!Array.isArray(a))return void console.error("Admissions data is invalid or not an array:",a);let i=a.map(t=>({concept:l.W.ADMISSION_DATE,value:t.date,obsDatetime:e,groupMembers:[{concept:l.W.HEALTH_CENTER_HOSPITALS,value:t.hospital},{concept:l.W.ADMISSION_SECTION,value:t.ward},{concept:l.W.ICD11_DIAGNOSIS,value:t.diagnosis},{concept:l.W.SURGICAL_INTERVENTIONS,value:t.interventions},{concept:l.W.DISCHARGE_INSTRUCTIONS,value:t.discharge_instructions},{concept:l.W.FOLLOW_UP,value:t.follow_up_plans}]}));try{let t=await K({encounterType:l.fA.PATIENT_ADMISSIONS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:i});console.log("Encounter successfully created:",t)}catch(e){throw e}}async function eb(t){let a=t.dateOfMeal,i=t.descriptionOfLastMeal,n={concept:l.W.TIME_OF_LAST_MEAL,value:a,obsDatetime:e,groupMembers:[{concept:l.W.DESCRIPTION_OF_LAST_MEAL,value:i}]};try{let t=await K({encounterType:l.fA.SUMMARY_ASSESSMENT,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:[n]});console.log("Encounter successfully created:",t)}catch(e){throw e}}async function eg(t){let a=t.events,i={concept:l.W.PRESENTING_HISTORY,value:a},n=a?[i]:null;if(n)try{K({encounterType:l.fA.SUMMARY_ASSESSMENT,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:[{concept:l.W.PRESENTING_HISTORY,value:!0,obsDatetime:e,groupMembers:n}]})}catch(e){throw e}let s={pain:l.W.PAIN,rash:l.W.RASH,itching:l.W.ITCHING,earDischarge:l.W.EAR_DISCHARGE,redEye:l.W.RED_EYE,dizziness:l.W.DIZZINESS,excessiveThirst:l.W.EXCESSIVE_THIRST,painfulEar:l.W.PAINFUL_EAR,poorVision:l.W.POOR_VISION,toothache:l.W.TOOTHACHE,runnyNose:l.W.RUNNY_NOSE,noseBleeding:l.W.NOSE_BLEED,jointSwelling:l.W.SWOLLEN_JOINT,jointPain:l.W.JOINT_PAIN,deformity:l.W.DEFORMITY,fever:l.W.FEVER,nightSweats:l.W.NIGHT_SWEATS,weightLoss:l.W.WEIGHT_LOSS,heatIntolerance:l.W.HEAT_INTOLERANCE,coldIntolerance:l.W.COLD_INTOLERANCE,bodySwelling:l.W.SWELLING,fatigue:l.W.FATIGUE,poisoning:l.W.POISONING,poisoningIntentional:l.W.INTENTIONAL_POISONING,ulcerWound:l.W.ULCER_OR_WOUND,otherSymptom:l.W.OTHER},r=Object.keys(s),o=t.Gastrointenstinal_history,c=t["Cardiac/Respiratory history"],d=t["Nervous system history"],u=t.genitourinaryHistory,m=[];if((null==o?void 0:o.length)>0){let t=o.map(e=>({concept:e.id,value:!0}));m.push({concept:l.W.REVIEW_OF_SYSTEMS_GASTROINTESTINAL,value:!0,obsDatetime:e,groupMembers:t})}if((null==c?void 0:c.length)>0){let t=c.map(e=>({concept:e.id,value:!0}));m.push({concept:l.W.REVIEW_OF_SYSTEMS_CARDIOPULMONARY,value:!0,obsDatetime:e,groupMembers:t})}if((null==d?void 0:d.length)>0){let t=d.map(e=>({concept:e.id,value:!0}));m.push({concept:l.W.REVIEW_OF_SYSTEMS_NERVOUS,value:!0,obsDatetime:e,groupMembers:t})}if((null==u?void 0:u.length)>0){let a=t.Other_Genitourinary_condition,i=u.map(e=>({concept:e.id,value:!0}));a&&i.push({concept:l.W.OTHER_GENITOURINARY_CONDITION,value:a}),m.push({concept:l.W.REVIEW_OF_SYSTEMS_GENITOURINARY,value:!0,obsDatetime:e,groupMembers:i})}if(m.length>0)try{let t=await K({encounterType:l.fA.REVIEW_OF_SYSTEMS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:m});console.log("Unified encounter created successfully:",t)}catch(e){throw e}for(let a of r){let i=t["".concat(a,"DurationUnit")],n=t["".concat(a,"Duration")],r=t["".concat(a,"_site")];if(i||"otherSymptom"===a){let o={concept:s[a],value:!0},c={concept:b[i],value:n},d={concept:l.W.ANATOMIC_LOCATIONS,value:r},u=r?[o,c,d]:[o,c];if("poisoning"==a){let e={concept:l.W.INTENTIONAL_POISONING,value:t.poisoningIntentional};u.push(e)}if("otherSymptom"==a){let e={concept:s[a],value:t[a]};u.push(e)}try{let t=await K({encounterType:l.fA.REVIEW_OF_SYSTEMS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:[{concept:l.W.REVIEW_OF_SYSTEMS_GENERAL,value:!0,obsDatetime:e,groupMembers:u}]});console.log("Encounter successfully created:",t)}catch(e){throw e}}}if("Yes"===t.wasInjured){let a={assault:l.W.ASSAULT,roadTraffic:l.W.ROAD_TRAFFIC_ACCIDENT,fall:l.W.FALL,bite:l.W.BITE,gunshot:l.W.GUNSHOT,collapse:l.W.BUILDING_COLLAPSE,selfInflicted:l.W.SELF_HARM,burns:l.W.BURN_INJURY,drowning:l.W.DROWNING},i=Object.keys(a).filter(e=>!0===t[e]),n=t.timeOfInjury.$d.toLocaleString(),s=[];for(let e of i){let i=t["".concat(e,"Comment")],n={concept:a[e],value:i};s.push(n)}let r={concept:l.W.TIME_OF_INJURY,value:n},o={concept:l.W.LOSS_OF_CONSCIOUSNESS,value:t.lostConsciousness},c={concept:l.W.OCCUPATIONAL_INJURY,value:t.occupationalInjury};if(s.push(r,o,c),t.assaultType){s[0].concept=a.assault;let e={concept:"Sexual"==t.assaultType?l.W.SEXUAL_ASSAULT:l.W.PHYSICAL_ASSAULT,value:!0};s.push(e)}try{let t=await K({encounterType:l.fA.REVIEW_OF_SYSTEMS,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:[{concept:l.W.REVIEW_OF_SYSTEMS_TRAUMA,value:!0,obsDatetime:e,groupMembers:s}]});console.log("Encounter successfully created:",t)}catch(e){throw e}}let h=t.occupation,p=t.socialDetails,x=t.maritalStatus,g=t.travelDetails;if(p){var f,v;let t={concept:l.W.OCCUPATION,value:h},a=[{concept:l.W.PATIENT_SMOKES,value:null==p||null==(f=p[0])?void 0:f.value},{concept:l.W.PATIENT_DRINKS_ALCOHOL,value:null==p||null==(v=p[1])?void 0:v.value}],i={concept:l.W.MARITAL_STATUS,value:x},n={concept:l.W.TRAVEL_HISTORY,value:g};a.push(t,i,n);try{let t=await K({encounterType:l.fA.SOCIAL_HISTORY,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:[{concept:l.W.OTHER,value:!0,obsDatetime:e,groupMembers:a}]});console.log("Encounter successfully created:",t)}catch(e){throw e}}}async function ef(t){let a={asthma:l.W.FAMILY_HISTORY_ASTHMA,hypertension:l.W.FAMILY_HISTORY_HYPERTENSION,diabetes_mellitus:l.W.FAMILY_HISTORY_DIABETES_MELLITUS,epilepsy:l.W.FAMILY_HISTORY_EPILEPSY,cancer:l.W.FAMILY_HISTORY_CANCER,tuberculosis:l.W.FAMILY_HISTORY_TUBERCULOSIS,other:l.W.FAMILY_HISTORY_OTHER_CONDITION},i=[];Object.keys(t).forEach(e=>{let n=t[e];if(e.includes("Relationship")){let s=e.replace("Relationship","");if(t[s+"Type"]){let e=t[s+"Type"];i.push({concept:a[s],value:e})}else"otherRelationship"===e&&t.otherSpecify?i.push({concept:a.other,value:t.otherSpecify}):i.push({concept:a[s],value:!0});i.push({concept:l.W.RELATIONSHIP_TO_PATIENT,value:n})}if(e.includes("Type")&&!t[e.replace("Type","Relationship")]){let t=e.replace("Type","");i.push({concept:a[t],value:n})}});let n=[];for(let e=0;e<i.length;e+=2)n.push([i[e],i[e+1]]);let s=n.map(e=>{let[t,a]=e;return{...t,groupMembers:[a]}});try{let t=await K({encounterType:l.fA.FAMILY_MEDICAL_HISTORY,visit:null==et?void 0:et.uuid,patient:S.id,encounterDatetime:e,obs:s});console.log("Encounter successfully created:",t)}catch(e){throw e}}async function ej(e){if(e>=Object.keys(g).length){W(!1),es();return}W(!0);let t=Object.keys(g)[e],a=g[t];try{await ({presentingComplaints:er,allergies:eo,medications:ec,conditions:eu,surgeries:eh,obstetrics:ep,lastMeal:eb,admissions:ex,review:eg,family:ef})[t](a),console.log("submitting",a),B("".concat(t," submitted")),k(e+1)}catch(e){console.error("Error submitting ".concat(t,":"),e),V(!0),B("Error occurred when submitting ".concat(t))}setTimeout(()=>{ej(e+1)},2e3)}return(0,i.jsxs)(i.Fragment,{children:[P&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.n,{message:H,progress:M/Object.keys(g).length*100})}),!P&&(0,i.jsxs)(s.RG,{setActive:a,title:"Medical History",steps:ea,active:t,onBack:()=>j(),showSubmittedStatus:!0,children:[(0,i.jsx)(F,{onSubmit:e=>{f(t=>({...t,presentingComplaints:e})),es()}}),(0,i.jsx)(q,{onSubmit:e=>{f(t=>({...t,allergies:e})),es()},onSkip:es,onPrevious:el}),(0,i.jsx)(ei,{onSubmit:function(e){f(t=>({...t,medications:e})),es()},onPrevious:el,onSkip:es}),(0,i.jsx)("div",{ref:I,children:(0,i.jsx)(em,{onSubmit:function(e){f(t=>({...t,conditions:e})),ed(T)},onPrevious:el,onSkip:()=>ed(T)})}),(0,i.jsxs)(s.UL,{parent:3,children:[(0,i.jsx)("div",{ref:T,children:(0,i.jsx)(R,{onSubmit:function(e){f(t=>({...t,surgeries:e})),ed(E)},onSkip:()=>ed(E),onPrevious:()=>ed(I)})}),(0,i.jsx)("div",{ref:E,children:(0,i.jsx)(eO,{onSubmit:function(e){f(t=>({...t,admissions:e})),es()},onSkip:es,onPrevious:()=>ed(T)})})]}),(null==N?void 0:N.gender)==="Female"&&(0,i.jsx)(ev,{onSubmit:function(e){f(t=>({...t,obstetrics:e})),es()},onSkip:el}),(0,i.jsx)(ez,{onSubmit:function(e){f(t=>({...t,lastMeal:e})),es()},onPrevious:el,onSkip:es}),(0,i.jsx)(eG,{onSubmit:function(e){f(t=>({...t,review:e})),ed(O)},onSkip:()=>ed(O),onPrevious:el}),(0,i.jsx)(s.UL,{parent:(null==N?void 0:N.gender)==="Female"?6:5,children:(0,i.jsx)("div",{ref:O,children:(0,i.jsx)(eS,{onSubmit:function(e){Object.values(e).some(e=>!0===e)&&f(t=>({...t,family:e})),w(!0)},onSkip:el})})})]})]})};var f=a(37129),v=a(82545),j=a(40289),y=a(88190),S=a(89915);let N=e=>{let{showForPrinting:t,toggleShow:a}=e,{params:l}=(0,r.KU)(),{data:c,isLoading:d}=(0,o.$O)(null==l?void 0:l.id),[u,m]=(0,n.useState)([]),h=t?u:u.slice(0,4),p=null==c?void 0:c.filter(e=>"SURGICAL HISTORY"===e.encounter_type.name);(0,n.useEffect)(()=>{if(!d){let e=[];null==p||p.forEach(t=>{console.log("Patient history:",t),t.obs.forEach(t=>{var a,i;t.value;let n={obs_id:t.obs_id,name:null==(i=t.names)||null==(a=i[0])?void 0:a.name,value:t.value,children:t.children?t.children.map(e=>{var t,a;return{obs_id:e.obs_id,name:null==(a=e.names)||null==(t=a[0])?void 0:t.name,value_text:e.value_text?e.value_text:e.value,children:[]}}):[]};e.push(n)}),console.log(e),m(e)})}},[c]);let x=e=>{let t=e.children.find(e=>"Date of surgery"===e.name);if(null==t?void 0:t.value_text)try{return new Date(t.value_text).toLocaleDateString()}catch(e){return console.error("Invalid date:",t.value_text),"Invalid Date"}return"Date not available"},b=e=>e.children.filter(e=>"Date of surgery"!==e.name);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.Zk,{title:"Surgeries",children:(0,i.jsx)(s.jD,{children:d?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"150px"},children:(0,i.jsx)(S.A,{size:40})}):(0,i.jsx)(i.Fragment,{children:0===h.length?(0,i.jsx)("p",{children:"No surgical history available"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",alignItems:"flex-start"},children:h.map(e=>(0,i.jsxs)("div",{style:{flex:"1 1 300px",minWidth:"250px",maxWidth:"350px",color:"rgba(0, 0, 0, 0.6)",padding:"10px",borderRadius:"5px"},children:[(0,i.jsx)("h3",{style:{marginBottom:"5px",color:"rgba(0, 0, 0, 0.8)"},children:e.value||e.name}),(0,i.jsx)("h4",{style:{marginBottom:"10px"},children:x(e)}),b(e).length>0&&(0,i.jsx)("ul",{style:{paddingLeft:"15px"},children:b(e).map(e=>(0,i.jsx)("li",{children:(()=>{let t=e.value_text;return"string"==typeof e.value_text&&("true"===e.value_text||"false"===e.value_text)&&(t=!!t),"boolean"==typeof t?String(e.name):"".concat(String(e.name),": ").concat(String(t))})()},e.obs_id))})]},e.obs_id))}),u.length>4&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"10px"},children:(0,i.jsx)("button",{onClick:()=>a(!t),style:{color:"rgba(0, 0, 0, 0.6)",cursor:"pointer",border:"none",background:"none",padding:0},children:t?"View Less":"View More ..."})})]})})})})})};var A=a(23410);let _={procedure:"",other:"",date:"",complication:"",indication:""},T={surgeries:[_],none:!1},E=f.Ik().shape({procedure:f.Yj().required("Surgical procedure is required"),other:f.Yj().when("procedure",{is:e=>"other_surgical_procedure"===e,then:e=>e.required("Other surgical procedure is required"),otherwise:e=>e.optional()}),date:f.p6().required("Date of surgery is required").nullable().max(new Date,"Date cannot be in the future"),complication:f.Yj().optional(),indication:f.Yj().required("Indication is required")}),I=f.Ik().shape({none:f.zM().required(),surgeries:f.YO().when("none",{is:!1,then:e=>e.of(E).min(1,"At least one surgery must be added"),otherwise:e=>e.notRequired()})}),O=[{id:l.W.EXPLORATORY_LAPAROTOMY,label:"Exploratory laparotomy"},{id:l.W.CAESARIAN_SECTION,label:"Caesarian section"},{id:l.W.INCISION_AND_DRAINAGE,label:"Incision and drainage"},{id:l.W.THORACOTOMY,label:"Thoracotomy"},{id:l.W.CIRCUMCISION,label:"Circumcision"},{id:l.W.DEBRIDEMENT,label:"Debridement"},{id:l.W.HYSTERECTOMY,label:"Hysterectomy"},{id:l.W.ORIF,label:"ORIF (Open reduction and internal fixation)"},{id:l.W.EXTERNAL_FIXATION,label:"External fixation"},{id:l.W.THYROIDECTOMY,label:"Thyroidectomy"},{id:l.W.SKIN_GRAFT,label:"Skin graft"},{id:l.W.OTHER_SURGICAL_PROCEDURE,label:"Other procedure specify"}],D=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e,i=(0,j.O6)(a.errors,t);return(0,j.O6)(a.touched,t)&&i?i:null}})},R=e=>{let{onSubmit:t,onSkip:a,onPrevious:c}=e,{params:d}=(0,r.KU)(),[u,m]=(0,n.useState)({}),{data:h,isLoading:p}=(0,o.$O)(null==d?void 0:d.id),[x,b]=(0,n.useState)([]),[g,f]=(0,n.useState)(!1),[y,S]=(0,n.useState)([]);null==h||h.filter(e=>{var t;return(null==(t=e.encounter_type)?void 0:t.name)==="SURGICAL HISTORY"});let E=async()=>{if(u.none)return void a();t(u)};return(0,n.useEffect)(()=>{u.surgeries&&S(u.surgeries.map(e=>e.procedure===l.W.OTHER_SURGICAL_PROCEDURE))},[u]),(0,i.jsxs)("div",{style:{marginLeft:"100px"},children:[(0,i.jsx)(N,{showForPrinting:g,toggleShow:f}),(0,i.jsx)(s.PD,{initialValues:T,validationSchema:I,onSubmit:E,enableReinitialize:!0,submitButton:!1,children:e=>{let{values:t,setFieldValue:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{marginBottom:"2ch"},children:(0,i.jsx)(A.A,{name:"none",label:"Patient has had no surgeries"})}),(0,i.jsx)(j.ED,{name:"surgeries",children:e=>{let{push:n,remove:l}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.fP,{getValues:m}),(0,i.jsx)(v.A,{items:t.surgeries,setItems:e=>a("surgeries",e),newItem:_,renderFields:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.el,{disabled:u.none,options:O,name:"surgeries[".concat(t,"].procedure"),label:"Surgical Procedure",sx:{width:"100%"},multiple:!1}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(D,{name:"surgeries[".concat(t,"].procedure")})})]}),y[t]&&(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:u.none,id:"surgeries[".concat(t,"].other"),name:"surgeries[".concat(t,"].other"),label:"Other procedure",sx:{width:"100%"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(D,{name:"surgeries[".concat(t,"].other")})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.bZ,{disabled:u.none,name:"surgeries[".concat(t,"].date"),label:"Date of Surgery",sx:{background:"white",width:"150px",margin:"0px"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(D,{name:"surgeries[".concat(t,"].date")})})]}),(0,i.jsx)(s.A8,{disabled:u.none,id:"surgeries[".concat(t,"].complication"),name:"surgeries[".concat(t,"].complication"),label:"Complications (optional)",sx:{width:"100%"}}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:u.none,id:"surgeries[".concat(t,"].indication"),name:"surgeries[".concat(t,"].indication"),label:"Indication",sx:{width:"100%"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(D,{name:"surgeries[".concat(t,"].indication")})})]})]})}),(0,i.jsxs)(s.jD,{sx:{mt:"2ch"},children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:c,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})}})]})}})]})};var w=a(8363),C=a(48455),L=a(47292),P=a(6314);let W=()=>{let{patientId:e}=(0,r.gd)(),{data:t}=(0,o.$O)(e),a=null==t?void 0:t.filter(e=>e.encounter_type.uuid===l.fA.PRESENTING_COMPLAINTS),n=[];return a&&a.length>0&&(n=a[(null==a?void 0:a.length)-1].obs.map(e=>({complaint:e.value,dateTime:(0,P.Eb)(e.obs_datetime)}))),(0,i.jsx)(L.q,{columns:[{label:"Complaint",field:"complaint"},{label:"Date",field:"dateTime"}],data:n})},M=()=>{let e=[{id:"complaints",title:"Complains",content:(0,i.jsx)(W,{})}];return(0,i.jsx)(C.M,{sections:e})},k=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e,i=(0,j.O6)(a.errors,t);return(0,j.O6)(a.touched,t)&&i?i:null}})},H={complaint:"",duration:0,duration_unit:""},F=e=>{let{onSubmit:t}=e,[a,r]=(0,n.useState)([]),[c,d]=(0,n.useState)({}),[u,m]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{let e=await (0,o.cr)(l.W.PRESENTING_COMPLAINTS);r(e=e.data[0].set_members.map(e=>({id:e.names[0].uuid,label:e.names[0].name})))})()},[]);let h={complaints_name:e=>({name:"complaints[".concat(e,"].complaint"),label:"Symptom"}),complaints_duration:e=>({name:"complaints[".concat(e,"].duration"),label:"Duration"}),complaints_duration_units:e=>({name:"complaints[".concat(e,"].duration_unit"),label:"Unit"})},p=f.Ik().shape({complaints:f.YO().of(f.Ik().shape({complaint:f.Yj().required("Symptom is required"),duration:f.ai().min(1,"Duration must be greater than 0").required("Duration is required"),duration_unit:f.Yj().required("Duration unit is required")}))});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M,{}),(0,i.jsx)(s.PD,{validationSchema:p,initialValues:{complaints:[H]},onSubmit:()=>{t(c)},enableReinitialize:!0,submitButton:!0,submitButtonText:"Next",children:e=>{let{values:t,setFieldValue:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.fP,{getValues:d}),(0,i.jsx)(j.ED,{name:"complaints",children:e=>{let{}=e;return(0,i.jsx)(v.A,{items:t.complaints,setItems:e=>n("complaints",e),newItem:H,renderFields:(e,t)=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{display:"flex-column",width:"100%"},children:[(0,i.jsx)(s.el,{name:h.complaints_name(t).name,label:h.complaints_name(t).label,options:a,multiple:!1,sx:{width:"100%"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(k,{name:"complaints[".concat(t,"].complaint")})}),(0,i.jsx)(s.pj,{id:h.complaints_duration(t).name,name:h.complaints_duration(t).name,unitName:h.complaints_duration_units(t).name,label:h.complaints_duration(t).label,sx:{width:"50%"},unitOptions:l.bH,placeholder:"e.g., 3",inputIcon:(0,i.jsx)(w.YmN,{})}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(k,{name:"complaints[".concat(t,"].duration")})})]})})})}})]})}})]})};var B=a(54692);let Y=function(){let{params:e}=(0,r.KU)(),{data:t,isLoading:a}=(0,o.$O)(null==e?void 0:e.id),[l,c]=(0,n.useState)([]),d=null==t?void 0:t.filter(e=>"Allergies"===e.encounter_type.name);return(0,n.useEffect)(()=>{if(!a&&t&&d){var e;let t=null==(e=d[0])?void 0:e.obs,a=[];null==t||t.forEach(e=>{let t=a.find(t=>t.value===e.value);if(t){let a=new Map;[...t.children,...e.children].forEach(e=>{let t="".concat(e.name,"_").concat(e.value);a.set(t,e)}),t.children=Array.from(a.values())}else a.push({...e,children:[...e.children]})});let i=null==a?void 0:a.filter(e=>0!==e.children.length);c(null!=i?i:[])}},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.Zk,{title:"Allergies",children:(0,i.jsx)(s.jD,{children:a?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"150px"},children:(0,i.jsx)(S.A,{size:40})}):(0,i.jsx)(i.Fragment,{children:0===l.length?(0,i.jsx)("p",{children:"No allergy history available"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",alignItems:"flex-start"},children:l.map(e=>(0,i.jsxs)("div",{style:{marginBottom:"20px",marginLeft:"10px",color:"rgba(0, 0, 0, 0.6)"},children:[(0,i.jsx)("h4",{children:e.value}),e.children&&e.children.length>0&&(0,i.jsx)("ul",{style:{paddingLeft:"15px"},children:e.children.map(e=>(0,i.jsx)("li",{children:e.value},e.obs_id))})]},e.obs_id))})})})})})})};var G=a(26997);let U={allergy:{name:l.W.ALLERGY,label:"Allergies"},allergyDetails:{name:l.W.DESCRIPTION,label:"Allergy Details"},otherMedication:{name:l.W.OTHER_MEDICATION_ALLERGY,label:"Specify other medication allergen"},otherMedicalSubstance:{name:l.W.OTHER_MEDICAL_SUBSTANCE_ALLERGY,label:"Specify other medical substance allergen"},otherFood:{name:l.W.OTHER_FOOD_ALLERGY,label:"Specify other food allergen"},otherSubstance:{name:l.W.OTHER_SUBSTANCE_ALLERGY,label:"Specify other substance allergen"}},q=e=>{let{onSubmit:t,onSkip:a,onPrevious:r}=e,[o,c]=(0,n.useState)({}),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)(null),[p,x]=(0,n.useState)(null),[b,g]=(0,n.useState)(null),[v,j]=(0,n.useState)(null),{foodAllergens:y,medicalSubstanceAllergens:S,medicationAllergens:N,substanceAllergens:A,allergyOptions:_,allergenCats:T}=(0,G.Z)();(0,n.useEffect)(()=>{d.length>0?(h(d.some(e=>e.value===y[4].uuid)),x(d.some(e=>e.value===S[2].uuid)),g(d.some(e=>e.value===N[10].uuid)),j(d.some(e=>e.value===A[3].uuid))):(h(null),x(null),g(null),j(null))},[T,N,y,A,S,d]);let E=f.Ik().shape({[U.allergy.name]:f.YO().min(1,"At least one allergy must be selected").of(f.Ik().shape({group:f.Yj().required("Group is required"),value:f.Yj().required("Value is required"),label:f.Yj().required("Label is required")})).required("Allergy field is required"),[U.otherFood.name]:f.Yj().when(U.allergy.name,(e,t)=>((null==e?void 0:e.flat())||[]).some(e=>e.label===l.W.OTHER_FOOD_ALLERGEN)?t.required("Please specify the other food allergy").min(1,"The other food allergy must not be empty"):t.notRequired()),[l.W.OTHER_MEDICATION_ALLERGY]:f.Yj().when(U.allergy.name,(e,t)=>((null==e?void 0:e.flat())||[]).some(e=>e.label===l.W.OTHER_MEDICATION_ALLERGEN)?t.required("Please specify the other medication allergy"):t.notRequired()),[l.W.OTHER_MEDICAL_SUBSTANCE_ALLERGY]:f.Yj().when(U.allergy.name,(e,t)=>((null==e?void 0:e.flat())||[]).some(e=>e.label===l.W.OTHER_MEDICAL_SUBSTANCE_ALLERGEN)?t.required("Please specify the other medical substance allergy"):t.notRequired()),[l.W.OTHER_SUBSTANCE_ALLERGY]:f.Yj().when(U.allergy.name,(e,t)=>((null==e?void 0:e.flat())||[]).some(e=>e.label===l.W.OTHER_SUBSTANCE_ALLERGEN)?t.required("Please specify the other substance allergy"):t.notRequired())}),I={[U.allergy.name]:[],[U.otherFood.name]:"",[U.otherMedication.name]:"",[U.otherMedicalSubstance.name]:"",[U.otherSubstance.name]:"",[U.allergyDetails.name]:""},O=async()=>{await E.validate(o);let e=l.W.ALLERGY;Object.keys(o).forEach(t=>{if(t.startsWith("OTHER_")&&t.endsWith("_ALLERGY")){let a=o[t];a&&(o[e]=o[e].map(e=>e.value===t?{...e,value:a}:e),delete o[t])}}),t(o)};return(0,n.useEffect)(()=>{d.find(e=>"None"===e.value)&&a()},[d]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y,{}),(0,i.jsxs)(s.PD,{validationSchema:E,initialValues:I,onSubmit:O,enableReinitialize:!0,submitButton:!1,children:[(0,i.jsx)(s.fP,{getValues:c}),(0,i.jsx)(B.s,{options:_,getValue:e=>{u(e)},multiple:!0,name:U.allergy.name,label:U.allergy.label}),m&&(0,i.jsx)(s.A8,{id:U.otherFood.name,name:U.otherFood.name,label:U.otherFood.label,sx:{width:"100%",mt:"2ch"}}),p&&(0,i.jsx)(s.A8,{id:U.otherMedicalSubstance.name,name:U.otherMedicalSubstance.name,label:U.otherMedicalSubstance.label,sx:{width:"100%",mt:"2ch"}}),b&&(0,i.jsx)(s.A8,{id:U.otherMedication.name,name:U.otherMedication.name,label:U.otherMedication.label,sx:{width:"100%",mt:"2ch"}}),v&&(0,i.jsx)(s.A8,{id:U.otherSubstance.name,name:U.otherSubstance.name,label:U.otherSubstance.label,sx:{width:"100%",mt:"2ch"}}),d.some(e=>e.group===T[0].uuid)&&(0,i.jsx)(s.A8,{id:"medication_Allergy_Details",name:"medication_Allergy_Details",label:"Medication allergy details",sx:{width:"100%",mt:"2ch"}}),d.some(e=>e.group===T[1].uuid)&&(0,i.jsx)(s.A8,{id:"medical_Substance_Allergy_Details",name:"medical_Substance_Allergy_Details",label:"Medical substance allergy details",sx:{width:"100%",mt:"2ch"}}),d.some(e=>e.group===T[3].uuid)&&(0,i.jsx)(s.A8,{id:"food_Allergy_Details",name:"food_Allergy_Details",label:"Food allergy details",sx:{width:"100%",mt:"2ch"}}),d.some(e=>e.group===T[2].uuid)&&(0,i.jsx)(s.A8,{id:"substance_Allergy_Details",name:"substance_Allergy_Details",label:"Substance allergy details",sx:{width:"100%",mt:"2ch"}}),(0,i.jsxs)(s.jD,{sx:{mt:"2ch"},children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:r,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})]})};var V=a(59312),z=a(86657);let K=()=>{let[e,t]=(0,n.useState)([]),{data:a}=(0,h.X)("General drug frequency");return(0,n.useEffect)(()=>{a&&t(a.map(e=>({id:e.uuid,label:e.name})))},[a]),{frequencyOptions:e}},Z=()=>{let[e,t]=(0,n.useState)([]),{data:a}=(0,h.X)("Formulation");return(0,n.useEffect)(()=>{a&&t(a.map(e=>({id:e.uuid,label:e.name})))},[a]),{formulationOptions:e}},X=new Date().toISOString().split("T")[0],$={name:"",formulation:"",medication_dose:0,medication_dose_unit:"",medication_frequency:"",medication_duration:0,medication_duration_unit:"",medication_date_last_taken:X,medication_date_of_last_prescription:X,medication_self_medicated:""},J={medications:[$],none:!1},Q=["Milligrams (mg)","Micrograms (\xb5g)","Grams (g)","International Units (IU)","Milliliters (ml)","Millimoles (mmol)"],ee=f.Ik().shape({name:f.Yj().required("Medication name is required"),formulation:f.Yj().required("Formulation is required"),medication_dose:f.ai().required("Dose is required").positive("Dose must be greater than 0"),medication_dose_unit:f.Yj().required("Dose unit is required"),medication_frequency:f.Yj().required("Frequency is required"),medication_duration:f.ai().required("Duration is required").positive("Duration must be greater than 0"),medication_duration_unit:f.Yj().required("Duration unit is required"),medication_date_last_taken:f.p6().nullable().required("Date of last taken is required").test("is-in-the-past","Date of last taken must be in the past",e=>e&&e<=new Date).test("last-taken-after-prescription","Date of last taken cannot be before the date of last prescription",function(e){let{medication_date_of_last_prescription:t}=this.parent;return!e||!t||e>=t}),medication_date_of_last_prescription:f.p6().nullable().required("Date of last prescription is required").test("is-in-the-past","Date of last prescription must be in the past",e=>e&&e<=new Date),medication_self_medicated:f.Yj().required("Self-medication status is required").oneOf(["Yes","No"],"Self-medication status must be either Yes or No")}),et=f.Ik().shape({none:f.zM().required(),medications:f.YO().when("none",{is:!1,then:e=>e.of(ee).min(1,"At least one medication must be added"),otherwise:e=>e.notRequired()})}),ea=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e,i=(0,j.O6)(a.errors,t);return(0,j.O6)(a.touched,t)&&i?i:null}})},ei=e=>{let{onSubmit:t,onSkip:a,onPrevious:r}=e,{data:o}=(0,z.J)(),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)({}),[h,p]=(0,n.useState)({}),{frequencyOptions:x}=K(),{formulationOptions:b}=Z(),g=(e,t)=>{m(a=>({...a,[e]:t}))};(0,n.useEffect)(()=>{o&&d(o.map(e=>{var t;return{id:null==(t=e.concept_uuid)?void 0:t.toString(),label:e.name}}))},[o]);let f=async()=>{if(h.none)return void a();t(h)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.PD,{initialValues:J,validationSchema:et,onSubmit:f,enableReinitialize:!0,submitButton:!1,children:e=>{let{values:t,setFieldValue:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.fP,{getValues:p}),(0,i.jsx)("div",{style:{marginBottom:"2ch"},children:(0,i.jsx)(A.A,{name:"none",label:"Patient was not prescribed any medication"})}),(0,i.jsx)(j.ED,{name:"medications",children:e=>{let{push:n,remove:r}=e;return(0,i.jsx)(v.A,{items:t.medications,setItems:e=>a("medications",e),newItem:$,renderFields:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.el,{name:"medications[".concat(t,"].name"),label:"Medication Name",options:c,getValue:e=>a("medications[".concat(t,"].name"),e),sx:{width:"200px"},multiple:!1,disabled:h.none}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].name")})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.el,{name:"medications[".concat(t,"].formulation"),label:"Formulation",options:b,getValue:e=>a("medications[".concat(t,"].formulation"),e),sx:{width:"200px"},multiple:!1,disabled:h.none}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].formulation")})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.pj,{disabled:h.none,id:"medications[".concat(t,"].medication_dose"),label:"Dose",name:"medications[".concat(t,"].medication_dose"),unitName:"medications[".concat(t,"].medication_dose_unit"),unitOptions:Q,placeholder:"e.g., 500",sx:{width:"320px"},inputIcon:(0,i.jsx)(V.gaX,{})}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_dose")})})]}),u[t]?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:h.none,id:"medications[".concat(t,"].medication_frequency"),name:"medications[".concat(t,"].medication_frequency"),label:"Specify frequency",sx:{width:"180px"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_frequency")})})]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)(s.el,{disabled:h.none,name:"medications[".concat(t,"].medication_frequency"),label:"Frequency",options:x,getValue:e=>{"Other"===e&&g(t,!0),a("medications[".concat(t,"].medication_frequency"),e)},sx:{width:"180px"},multiple:!1}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_frequency")})})]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.pj,{disabled:h.none,id:"medications[".concat(t,"].medication_duration"),name:"medications[".concat(t,"].medication_duration"),unitName:"medications[".concat(t,"].medication_duration_unit"),label:"Duration",unitOptions:l.bH,placeholder:"e.g. 7",inputIcon:(0,i.jsx)(w.YmN,{})}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_duration")})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.bZ,{disabled:h.none,name:"medications[".concat(t,"].medication_date_last_taken"),label:"Last Taken",sx:{width:"150px"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_date_last_taken")})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.bZ,{disabled:h.none,name:"medications[".concat(t,"].medication_date_of_last_prescription"),label:"Last Prescribed",sx:{width:"150px"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_date_of_last_prescription")})})]}),(0,i.jsxs)("div",{style:{marginTop:"24px"},children:[(0,i.jsx)(s.b1,{row:!0,name:"medications[".concat(t,"].medication_self_medicated"),options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],label:"Did the patient self medicate?",disabled:h.none}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(ea,{name:"medications[".concat(t,"].medication_self_medicated")})})]})]})})}}),(0,i.jsxs)(s.jD,{sx:{mt:"2ch"},children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:r,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})}})})};var en=a(62564),es=a(17485);let el={name:"",date:"",onTreatment:"",additionalDetails:""},er={conditions:[el],none:!1},eo={conditions_name:e=>({name:"conditions[".concat(e,"].name"),label:"Condition"}),conditions_diagnosis_date:e=>({name:"conditions[".concat(e,"].date"),label:"Date of diagnosis"}),conditions_on_treatment:e=>({name:"conditions[".concat(e,"].onTreatment"),label:"On treatment?"}),conditions_additional_details:e=>({name:"conditions[".concat(e,"].additionalDetails"),label:"Additional details"})},ec=f.Ik().shape({name:f.Yj().required("Condition name is required"),date:f.p6().nullable().required("Date of diagnosis is required").typeError("Invalid date format").max(new Date,"Date of diagnosis cannot be in the future"),onTreatment:f.Yj().required("Treatment status is required"),additionalDetails:f.Yj().optional()}),ed=f.Ik().shape({none:f.zM().required(),conditions:f.YO().when("none",{is:!1,then:e=>e.of(ec).min(1,"At least one condition must be added"),otherwise:e=>e.notRequired()})}),eu=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e,i=(0,j.O6)(a.errors,t);return(0,j.O6)(a.touched,t)&&i?i:null}})},em=e=>{let{onSubmit:t,onSkip:a,onPrevious:l}=e,{params:c}=(0,r.KU)(),{data:d,isLoading:u}=(0,o.$O)(null==c?void 0:c.id),[m,h]=(0,n.useState)({}),[p,x]=(0,n.useState)(),[b,g]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!u){var e,t;let a=null==d?void 0:d.filter(e=>{var t,a;return(null==(t=e.encounter_type)?void 0:t.name)==="DIAGNOSIS"&&(null==(a=e.obs)?void 0:a.length)!==4}),i=null==a||null==(t=a[0])||null==(e=t.obs)?void 0:e.filter(e=>"ICD11 Diagnosis"===e.names[0].name),n=new Map;null==i||i.forEach(e=>{let t=e.value;n.has(t)||n.set(t,e)}),x(Array.from(n.keys()))}},[d]);let f=async()=>{if(m.none)return void a();t(m)},y=(e,t)=>{let a={...b};a[t]=e.diagnosis+" - "+e.code,g(a);let i={...m};i.conditions[t].name=e.code+","+e.diagnosis,h(i)},S=e=>{let t={...b};t[e]="",g(t)};return(0,i.jsxs)(i.Fragment,{children:[p&&p.length>0&&(0,i.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"5px",marginBottom:"20px"},children:[(0,i.jsx)("h4",{style:{color:"rgba(0, 0, 0, 0.6)",marginBottom:"10px"},children:"Known Conditions"}),null==p?void 0:p.map((e,t)=>(0,i.jsx)("p",{style:{color:"rgba(0, 0, 0, 0.6)",margin:0},children:e},t))]}),(0,i.jsx)(s.PD,{initialValues:er,validationSchema:ed,onSubmit:f,enableReinitialize:!0,submitButton:!1,children:e=>{let{values:t,setFieldValue:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{marginBottom:"2ch"},children:(0,i.jsx)(A.A,{name:"none",label:"Patient has no prior/existing conditions"})}),(0,i.jsx)(s.fP,{getValues:h}),(0,i.jsx)(j.ED,{name:"conditions",children:e=>{let{push:n,remove:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.A,{items:t.conditions,setItems:e=>a("conditions",e),newItem:el,renderFields:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsx)(s.bZ,{name:eo.conditions_diagnosis_date(t).name,disabled:m.none,label:eo.conditions_diagnosis_date(t).label,sx:{background:"white",width:"100%"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eu,{name:eo.conditions_diagnosis_date(t).name})}),""!==b[t]&&b[t]?(0,i.jsxs)("div",{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"12px",gap:"1rem",borderRadius:"5px",border:"1px solid #e0e0e0",minHeight:"48px"},children:[(0,i.jsx)("label",{style:{fontWeight:"bold"},children:b[t]}),(0,i.jsx)(es.OZi,{color:"red",onClick:()=>S(t),style:{cursor:"pointer"}})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(en.default,{label:"Diagnosis",initialValue:"",onSelection:e=>y(e,t),placeholder:"Start typing to search diagnoses..."}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eu,{name:eo.conditions_name(t).name})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.b1,{disabled:m.none,name:eo.conditions_on_treatment(t).name,options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"},{value:"Unknown",label:"Unknown"}],label:eo.conditions_on_treatment(t).label}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eu,{name:eo.conditions_on_treatment(t).name})})]})]}),(0,i.jsx)(s.A8,{disabled:m.none,id:eo.conditions_additional_details(t).name,name:eo.conditions_additional_details(t).name,label:eo.conditions_additional_details(t).label,sx:{width:"100%"},multiline:!0,rows:3}),(0,i.jsx)("div",{style:{color:"red",fontSize:"0.875rem"},children:(0,i.jsx)(eu,{name:eo.conditions_additional_details(t).name})})]})}),(0,i.jsxs)(s.jD,{sx:{mt:"2ch"},children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:l,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})}})]})}})]})};var eh=a(50532),ep=a(98358),ex=a(90912);let eb={age_at_menarche:0,last_menstrual:"",pregnant:"No",gestational_age:"Select a date of last normal menstrual period above",number_of_previous_pregnancies:0,previous_pregnancy_outcomes:[],number_of_births:[],contraceptive_history:[]},eg={age_at_menarche:{name:"age_at_menarche",label:"Age at Menarche"},last_menstrual:{name:"last_menstrual",label:"Last normal menstrual period"},pregnant:{name:"pregnant",label:"Is the patient pregnant?"},gestational_age:{name:"gestational_age",label:"Gestational age (weeks)"},number_of_previous_pregnancies:{name:"number_of_previous_pregnancies",label:"Parity"},previous_pregnancy_outcomes:e=>({name:"previous_pregnancy_outcomes[".concat(e,"]"),label:"Outcome of Pregnancy ".concat(e+1)}),number_of_births:e=>({name:"number_of_births[".concat(e,"]"),label:"Number of births (Pregnancy ".concat(e+1,")")}),contraceptive_history:{name:"contraceptive_history",label:"Contraceptive history"}},ef=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e,i=(0,j.O6)(a.errors,t);return(0,j.O6)(a.touched,t)&&i?i:null}})},ev=e=>{let{onSubmit:t,onSkip:a}=e,{params:c}=(0,r.KU)(),{data:d,isLoading:u}=(0,o.$O)(null==c?void 0:c.id),[m,h]=(0,n.useState)({}),[p,x]=(0,n.useState)(0),[b,g]=(0,n.useState)(Array.from({length:p},()=>!1)),[v,j]=(0,n.useState)([]),[y,S]=(0,n.useState)(!1),N=[{id:l.W.JADELLE,label:"Jadelle"},{id:l.W.IMPLANON,label:"Implanon"},{id:l.W.LEVOPLANT,label:"Levoplant"},{id:l.W.DEPO_PROVERA,label:"Depo Provera"},{id:l.W.INTRAUTERINE_CONTRACEPTIVE_DEVICE,label:"Intra Uterine Contraceptive Device (IUCD)"},{id:l.W.PROGESTIN_ONLY_PILLS,label:"Progestin only pills"},{id:l.W.VASECTOMY,label:"Vasectomy"},{id:l.W.TUBAL_LIGATION,label:"Tubal ligation"},{id:l.W.COMBINED_ORAL_PILLS,label:"Combined oral contraceptive pills"},{id:l.W.MALE_FEMALE_CONDOMS,label:"Condoms (Male and female)"},{id:l.W.LACTATION_AMENORRHEA,label:"Lactation amenorrhea"},{id:l.W.NATURAL,label:"Natural"}],A=[{id:l.W.FIRST_TRIMESTER_MISCARRIAGE,label:"First trimester miscarriage"},{id:l.W.SECOND_TRIMESTER_MISCARRIAGE,label:"Second trimester miscarriage"},{id:l.W.STILL_BIRTH,label:"Stillbirth"},{id:l.W.LIVE_BIRTH,label:"Live birth"}],_=f.Ik().shape({[eg.age_at_menarche.name]:f.ai().required("Age at menarche is required").positive("Age at menarche  must be a positive number"),number_of_previous_pregnancies:f.ai().required("Number of previous pregnancies is required").min(0,"Number of pregnancies cannot be negative"),[eg.previous_pregnancy_outcomes.name]:f.YO().of(f.Yj().required("Each pregnancy outcome is required")).when("number_of_previous_pregnancies",{is:e=>e>0,then:e=>e.test("length-match","The number of outcomes must match the number of previous pregnancies",(e,t)=>{let a=t.parent.number_of_previous_pregnancies;return Array.isArray(e)&&e.length===a}),otherwise:e=>e.notRequired()}),[eg.number_of_births.name]:f.YO().of(f.ai().nullable().notRequired()).when([eg.previous_pregnancy_outcomes.name,"number_of_previous_pregnancies"],{is:(e,t)=>t>0&&Array.isArray(e),then:e=>e.test("match-live-births","Each live birth outcome must have a corresponding number of births specified",(e,t)=>{let a=t.parent[eg.previous_pregnancy_outcomes.name];return t.parent.number_of_previous_pregnancies,!!Array.isArray(e)&&!!Array.isArray(a)&&a.every((t,a)=>"Live Birth"!==t||!e[a]||e&&void 0!==e[a]&&e[a]>0)}),otherwise:e=>e.notRequired()}),[eg.last_menstrual.name]:f.p6().required("Last menstrual date is required").nullable().max(new Date,"Date cannot be in the future"),[eg.number_of_previous_pregnancies.name]:f.ai().required("Number of previous pregnancies is required").min(0,"Number of previous pregnancies cannot be negative").integer("Number of pregnancies must be an integer")}),T=async()=>{await _.validate(m),t(m)},E=(e,t)=>{let a=[...b];a[e]=t===A[3].id,g(a)};return(0,n.useEffect)(()=>{if(!u){let e=null==d?void 0:d.filter(e=>{var t;return(null==(t=e.encounter_type)?void 0:t.name)==="OBSTETRIC HISTORY"}),t=[];null==e||e.forEach(e=>{e.obs.forEach(e=>{var a,i;let n=e.value,s={obs_id:e.obs_id,name:null==(i=e.names)||null==(a=i[0])?void 0:a.name,value:n,children:[]};if(e.obs_group_id){let a=t.find(t=>t.obs_id===e.obs_group_id);a&&a.children.push(s)}else t.push(s)})}),j(t)}"Yes"==m.pregnant?S(!0):S(!1);let e=Math.floor(new Date().getTime()/1e3),t=Math.floor(new Date(m[eg.last_menstrual.name]).getTime()/1e3);if(!isNaN(t)){let a=e-t,i=Math.floor(a/604800),n=Math.floor(a%604800/86400),s="".concat(i," weeks and ").concat(n," days");m[eg.gestational_age.name]=s}},[d,m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eh.A,{sx:{mb:"2ch"},children:[(0,i.jsx)(ep.A,{children:(0,i.jsx)("h4",{children:"Existing Obstetrics History"})}),(0,i.jsx)(ex.A,{children:(0,i.jsx)("div",{children:v.map(e=>(0,i.jsx)("div",{style:{marginBottom:"10px",color:"rgba(0, 0, 0, 0.6)"},children:0===e.children.length?(0,i.jsxs)("div",{children:[(0,i.jsxs)("strong",{children:[e.name,":"]})," ",e.value]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{style:{marginBottom:"10px"},children:e.name}),e.children.map(e=>(0,i.jsxs)("div",{style:{paddingLeft:"20px"},children:[(0,i.jsxs)("strong",{children:[e.name,":"]})," ",e.value]},e.obs_id))]})},e.obs_id))})})]}),(0,i.jsx)("div",{style:{marginBottom:"4ch"}}),(0,i.jsxs)(s.PD,{validationSchema:_,initialValues:eb,onSubmit:T,submitButton:!1,enableReinitialize:!0,children:[(0,i.jsx)(s.fP,{getValues:h}),(0,i.jsxs)(s.GE,{direction:"column",children:[(0,i.jsx)(s.A8,{id:eg.age_at_menarche.name,name:eg.age_at_menarche.name,label:eg.age_at_menarche.label}),(0,i.jsx)(s.bZ,{name:eg.last_menstrual.name,label:eg.last_menstrual.label,sx:{background:"white",marginRight:"2ch",width:"150px"}}),(0,i.jsx)("div",{style:{color:"red",fontSize:"0.875rem"},children:(0,i.jsx)(ef,{name:"obstetrics.last_menstrual"})}),(0,i.jsx)(s.b1,{row:!0,name:eg.pregnant.name,options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],label:eg.pregnant.label,sx:{marginTop:"2ch",marginBottom:"2ch"}}),y&&(0,i.jsx)(s.A8,{id:eg.gestational_age.name,name:eg.gestational_age.name,label:eg.gestational_age.label,sx:{marginRight:"2ch",width:"450px"},disabled:!0}),(0,i.jsx)(s.A8,{id:eg.number_of_previous_pregnancies.name,name:eg.number_of_previous_pregnancies.name,label:eg.number_of_previous_pregnancies.label,handleBlurEvent:e=>{x(Number(e))},sx:{marginRight:"2ch"}})]}),(0,i.jsx)(s.GE,{direction:"column",children:0!=p&&Array.from({length:p}).map((e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.el,{options:A,name:eg.previous_pregnancy_outcomes(t).name,label:eg.previous_pregnancy_outcomes(t).label,multiple:!1,getValue:e=>E(t,e)}),b[t]&&(0,i.jsx)(s.A8,{id:eg.number_of_births(t).name,name:eg.number_of_births(t).name,label:eg.number_of_births(t).label,sx:{marginRight:"2ch",mt:"1ch"}}),(0,i.jsx)("div",{style:{color:"red",fontSize:"0.875rem"},children:(0,i.jsx)(ef,{name:"previous_pregnancy_outcomes"})})]}))}),(0,i.jsx)(s.el,{options:N,multiple:!0,name:eg.contraceptive_history.name,label:eg.contraceptive_history.label}),(0,i.jsxs)(s.jD,{sx:{mt:"2ch"},children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:a,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})]})},ej=function(e){let{showForPrinting:t,toggleShow:a}=e,{params:l}=(0,r.KU)(),{data:c,isLoading:d}=(0,o.$O)(null==l?void 0:l.id),[u,m]=(0,n.useState)([]),h=t?u:u.slice(0,4);return(0,n.useEffect)(()=>{if(!d&&c){let e=c.filter(e=>{var t;return(null==(t=e.encounter_type)?void 0:t.name)==="FAMILY MEDICAL HISTORY"}),t=[];e.forEach(e=>{e.obs.forEach(e=>{var a,i;let n=e.value,s={obs_id:e.obs_id,name:null==(i=e.names)||null==(a=i[0])?void 0:a.name,value:n,children:e.children?e.children.map(e=>{var t,a;return{obs_id:e.obs_id,name:null==(a=e.names)||null==(t=a[0])?void 0:t.name,value:e.value,children:[]}}):[]};t.push(s)})}),m(t.filter(e=>e.children&&e.children.length>0))}},[c,d]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(y.Zk,{title:"",children:[(0,i.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1rem",borderBottom:"2px solid #ccc",paddingBottom:"0.5rem"},children:"Family History"}),(0,i.jsx)(s.jD,{children:d?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"150px"},children:(0,i.jsx)(S.A,{size:40})}):(0,i.jsx)(i.Fragment,{children:0===h.length?(0,i.jsx)("p",{children:"No family history available"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",justifyContent:"flex-start"},children:h.map(e=>{var t;return(0,i.jsxs)("div",{style:{width:"300px",color:"rgba(0, 0, 0, 0.6)"},children:[(0,i.jsx)("b",{children:null==(t=e.name)?void 0:t.split("Family History ").pop()}),"Family History Other Condition"===e.name?(0,i.jsx)("p",{children:(0,i.jsx)("b",{children:e.value})}):null,e.children.map(e=>(0,i.jsx)("p",{children:e.value},e.obs_id))]},e.obs_id)})}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:[!t&&u.length>4&&(0,i.jsx)("button",{onClick:()=>a(!0),style:{color:"rgba(0, 0, 0, 0.6)",cursor:"pointer",border:"none",background:"none",padding:0},children:"View More ..."}),t&&(0,i.jsx)("button",{onClick:()=>a(!1),style:{color:"rgba(0, 0, 0, 0.6)",cursor:"pointer",border:"none",background:"none",padding:0},children:"View Less"})]}),"    "]})})})]})})},ey={asthma:{name:"asthma",label:"Asthma"},hypertension:{name:"hypertension",label:"Hypertension"},diabetes_mellitus:{name:"diabetes_mellitus",label:"Diabetes mellitus"},epilepsy:{name:"epilepsy",label:"Epilepsy"},cancer:{name:"cancer",label:"Cancer"},tuberculosis:{name:"tuberculosis",label:"Tuberculosis"},other:{name:"other",label:"Other Condition"}},eS=e=>{let{onSubmit:t,onSkip:a}=e,{params:l}=(0,r.KU)(),{data:c,isLoading:d}=(0,o.$O)(null==l?void 0:l.id),[u,m]=(0,n.useState)({}),[h,p]=(0,n.useState)({asthma:!1,hypertension:!1,diabetes_mellitus:!1,epilepsy:!1,cancer:!1,tuberculosis:!1,other:!1}),[x,b]=(0,n.useState)([]),[g,v]=(0,n.useState)(!1),j=f.Ik().shape({asthma:f.zM(),asthmaRelationship:f.Yj().when("asthma",{is:!0,then:e=>e.required("Please specify relationship for asthma"),otherwise:e=>e.notRequired()}),hypertension:f.zM(),hypertensionRelationship:f.Yj().when("hypertension",{is:!0,then:e=>e.required("Please specify relationship for hypertension"),otherwise:e=>e.notRequired()}),diabetes_mellitus:f.zM(),diabetes_mellitusRelationship:f.Yj().when("diabetes_mellitus",{is:!0,then:e=>e.required("Please specify relationship for diabetes mellitus"),otherwise:e=>e.notRequired()}),epilepsy:f.zM(),epilepsyRelationship:f.Yj().when("epilepsy",{is:!0,then:e=>e.required("Please specify relationship for epilepsy"),otherwise:e=>e.notRequired()}),cancer:f.zM(),cancerType:f.Yj().when("cancer",{is:!0,then:e=>e.required("Please specify the type of cancer"),otherwise:e=>e.notRequired()}),cancerRelationship:f.Yj().when("cancer",{is:!0,then:e=>e.required("Please specify relationship for cancer"),otherwise:e=>e.notRequired()}),tuberculosis:f.zM(),tuberculosisRelationship:f.Yj().when("tuberculosis",{is:!0,then:e=>e.required("Please specify relationship for tuberculosis"),otherwise:e=>e.notRequired()}),other:f.zM(),otherSpecify:f.Yj().when("other",{is:!0,then:e=>e.required("Please specify the other condition"),otherwise:e=>e.notRequired()}),otherRelationship:f.Yj().when("other",{is:!0,then:e=>e.required("Please specify relationship for the other condition"),otherwise:e=>e.notRequired()})}),y=async()=>{t(u)};return(0,n.useEffect)(()=>{p(e=>{let t={...e};return Object.keys(ey).forEach(e=>{t[e]=!!u[e]}),t})},[u]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ej,{showForPrinting:g,toggleShow:v}),(0,i.jsxs)(s.PD,{validationSchema:j,initialValues:{asthma:!1,hypertension:!1,diabetes_mellitus:!1,epilepsy:!1,cancer:!1,tuberculosis:!1,other:!1},onSubmit:y,submitButton:!1,children:[(0,i.jsx)(s.fP,{getValues:m}),(0,i.jsx)(s.GE,{direction:"row",children:(0,i.jsx)(s.jD,{sx:{bgcolor:"white",borderRadius:"8px",padding:"2ch",mb:"2ch",width:"100%"},children:Object.keys(ey).map(e=>(0,i.jsxs)("div",{style:{border:"other"===e?"1px dashed #aaa":"1px solid #e0e0e0",borderRadius:"8px",padding:"16px",marginBottom:"16px",backgroundColor:"other"===e?"white":"#f9f9f9"},children:[(0,i.jsx)(A.A,{name:ey[e].name,label:ey[e].label,checked:u[e]}),h[e]&&(0,i.jsx)("div",{style:{marginTop:"1rem"},children:"cancer"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A8,{id:"cancerType",label:"Type of Cancer",name:"cancerType",placeholder:"Specify type of cancer",sx:{mr:"2ch"}}),(0,i.jsx)(s.A8,{id:"cancerRelationship",label:"Relationship to family member",name:"cancerRelationship",placeholder:"e.g., Mother"})]}):"other"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A8,{id:"otherSpecify",label:"Specify Other Condition",name:"otherSpecify",placeholder:"Specify the condition",sx:{mr:"2ch"}}),(0,i.jsx)(s.A8,{id:"otherRelationship",label:"Relationship to family member",name:"otherRelationship",placeholder:"e.g., Mother"})]}):(0,i.jsx)(s.A8,{id:"".concat(e,"Relationship"),label:"Relationship to family member",name:"".concat(e,"Relationship"),placeholder:"e.g., Mother"})})]},e))})}),(0,i.jsxs)(s.jD,{children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:a,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Submit",type:"submit",sx:{flex:1}})]})]})]})},eN={date:"",hospital:"",ward:"",diagnosis:"",interventions:"",discharge_instructions:"",follow_up_plans:""},eA={admissions:[eN],none:!1},e_={admission_date:e=>({name:"admissions[".concat(e,"].date"),label:"Admission Date"}),hospitals:e=>({name:"admissions[".concat(e,"].hospital"),label:"Hospital"}),wards:e=>({name:"admissions[".concat(e,"].ward"),label:"Ward"}),diagnosis:e=>({name:"admissions[".concat(e,"].diagnosis"),label:"Diagnosis"}),interventions:e=>({name:"admissions[".concat(e,"].interventions"),label:"Interventions"}),discharge_instructions:e=>({name:"admissions[".concat(e,"].discharge_instructions"),label:"Discharge Instructions"}),follow_up_plans:e=>({name:"admissions[".concat(e,"].follow_up_plans"),label:"Follow-up Plans"})},eT=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e,i=(0,j.O6)(a.errors,t);return(0,j.O6)(a.touched,t)&&i?i:null}})},eE=f.Ik().shape({date:f.p6().nullable().required("Admission date is required").typeError("Invalid date format").max(new Date,"Admission date cannot be in the future"),hospital:f.Yj().nullable().required("Hospital name is required"),ward:f.Yj().nullable().required("Ward is required"),diagnosis:f.Yj().nullable().required("Diagnosis is required"),interventions:f.Yj().nullable().required("Interventions are required"),discharge_instructions:f.Yj().nullable().required("Discharge instructions are required"),follow_up_plans:f.Yj().nullable().required("Follow-up plans are required")}),eI=f.Ik().shape({none:f.zM().required(),admissions:f.YO().when("none",{is:!1,then:e=>e.of(eE).min(1,"At least one medication must be added"),otherwise:e=>e.notRequired()})}),eO=e=>{let{onSubmit:t,onSkip:a,onPrevious:l}=e,{params:c}=(0,r.KU)(),[d,u]=(0,n.useState)({}),[m,h]=(0,n.useState)(),{data:p}=(0,r.WL)(),{data:x,isLoading:b}=(0,o.$O)(null==c?void 0:c.id),[g,f]=(0,n.useState)([]),[y,S]=(0,n.useState)(!1),N=y?g:g.slice(0,3),[_,T]=(0,n.useState)([]),E=null==x?void 0:x.filter(e=>{var t;return(null==(t=e.encounter_type)?void 0:t.name)==="PATIENT ADMISSIONS"}),I=async()=>{if(console.log(d),d.none)return void a();t(d)};(0,n.useEffect)(()=>{if(h(p.map(e=>({id:e.facility_code,label:e.facility_name}))),!b){let e=[];null==E||E.forEach(t=>{t.obs.forEach(t=>{var a,i;let n=t.value,s={obs_id:t.obs_id,name:null==(i=t.names)||null==(a=i[0])?void 0:a.name,value:n,children:t.children?t.children.map(e=>{var t,a;return{obs_id:e.obs_id,name:null==(a=e.names)||null==(t=a[0])?void 0:t.name,value_text:e.value_text,children:[]}}):[]};e.push(s)}),e.sort((e,t)=>new Date(t.value).getTime()-new Date(e.value).getTime()),f(e)})}},[x]);let O=(e,t)=>{let a={..._},i={...d};a[t]=e.diagnosis+" - "+e.code,T(a),d.admissions[t].diagnosis=e.code+","+e.diagnosis,u(i)},D=e=>{let t={..._};t[e]="",T(t)};return(0,i.jsxs)("div",{style:{marginLeft:"100px",marginTop:"20px",borderTop:"1px solid rgba(0, 0, 0, 0.1)",paddingTop:"20px",paddingBottom:"20px"},children:[(0,i.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"5px",marginBottom:"20px"},children:[(0,i.jsx)(s.Th,{variant:"h5",fontWeight:"700",sx:{lineHeight:"24px",letterSpacing:"0em",textAlign:"left",marginBottom:"1ch"},children:"Previous admissions"}),(0,i.jsx)("div",{children:0===N.length?(0,i.jsx)("p",{children:"No admission history available"}):(0,i.jsxs)(i.Fragment,{children:[N.map(e=>(0,i.jsxs)("div",{style:{marginBottom:"20px",color:"rgba(0, 0, 0, 0.6)"},children:[(0,i.jsx)("h4",{children:e.value}),e.children&&e.children.length>0&&(0,i.jsx)("ul",{children:e.children.map(e=>(0,i.jsxs)("li",{children:[e.name,": ",e.value_text]},e.obs_id))})]},e.obs_id)),!y&&g.length>3&&(0,i.jsx)("button",{onClick:()=>S(!0),style:{color:"rgba(0, 0, 0, 0.6)",cursor:"pointer",border:"none",background:"none",padding:0},children:"View More ..."}),y&&(0,i.jsx)("button",{onClick:()=>S(!1),style:{color:"rgba(0, 0, 0, 0.6)",cursor:"pointer",border:"none",background:"none",padding:0},children:"View Less"})]})})]}),(0,i.jsx)(s.PD,{validationSchema:eI,initialValues:eA,onSubmit:I,enableReinitialize:!0,submitButton:!1,children:e=>{let{values:t,setFieldValue:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{marginBottom:"2ch"},children:(0,i.jsx)(A.A,{name:"none",label:"Patient has not been admitted"})}),(0,i.jsx)(s.fP,{getValues:u}),(0,i.jsx)(s.jD,{sx:{mb:"2ch"},children:(0,i.jsx)(j.ED,{name:"admissions",children:e=>{let{}=e;return(0,i.jsx)(v.A,{items:t.admissions,setItems:e=>a("admissions",e),newItem:eN,renderFields:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.GE,{direction:"row",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.bZ,{disabled:d.none,name:e_.admission_date(t).name,label:e_.admission_date(t).label,sx:{background:"white",width:"220px"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.admission_date(t).name})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.el,{disabled:d.none,name:e_.hospitals(t).name,label:e_.hospitals(t).label,options:m||[],multiple:!1,sx:{width:"320px"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.hospitals(t).name})})]})]}),(0,i.jsxs)(s.GE,{direction:"column",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:d.none,id:e_.wards(t).name,name:e_.wards(t).name,label:e_.wards(t).label,multiline:!1,sx:{width:"420px",marginRight:"2ch"}}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.wards(t).name})})]}),""!==_[t]&&_[t]?(0,i.jsxs)("div",{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"12px",gap:"1rem",borderRadius:"5px",border:"1px solid #e0e0e0",minHeight:"48px"},children:[(0,i.jsx)("label",{style:{fontWeight:"bold"},children:_[t]}),(0,i.jsx)(es.OZi,{color:"red",onClick:()=>D(t),style:{cursor:"pointer"}})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(en.default,{label:"Diagnosis",initialValue:"",onSelection:e=>O(e,t),placeholder:"Start typing to search diagnoses..."}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.diagnosis(t).name})})]})]}),(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:d.none,id:e_.interventions(t).name,name:e_.interventions(t).name,label:e_.interventions(t).label,multiline:!0,sx:{width:"100%"},rows:4}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.interventions(t).name})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:d.none,id:e_.discharge_instructions(t).name,name:e_.discharge_instructions(t).name,label:e_.discharge_instructions(t).label,multiline:!0,sx:{width:"100%"},rows:4}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.discharge_instructions(t).name})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.A8,{disabled:d.none,id:e_.follow_up_plans(t).name,name:e_.follow_up_plans(t).name,label:e_.follow_up_plans(t).label,multiline:!0,sx:{width:"100%"},rows:4}),(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",children:(0,i.jsx)(eT,{name:e_.follow_up_plans(t).name})})]})]})]})})}})}),(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:l,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})}})]})};var eD=a(77952),eR=a(80530),ew=a(9952),eC=a(30832),eL=a.n(eC);let eP=e=>{let{showForPrinting:t,toggleShow:a}=e,{params:l}=(0,r.KU)(),{data:c,isLoading:d}=(0,o.$O)(null==l?void 0:l.id),[u,m]=(0,n.useState)([]),h=t?u:u.slice(0,4),p=null==c?void 0:c.filter(e=>"SOCIAL HISTORY"===e.encounter_type.name);return console.log("sampleHistoryEncounters",p),(0,n.useEffect)(()=>{if(!d&&p&&p.length>0){var e;let t=Object.values(null==(e=p[0])?void 0:e.obs),a={};t.forEach(e=>{var t,i;let n=null==(i=e.names)||null==(t=i[0])?void 0:t.name;n&&"Other"!==n&&(!a[n]||new Date(e.obs_datetime)>new Date(a[n].obs_datetime))&&(a[n]=e)}),m(Object.values(a))}},[c]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.Zk,{title:"Social History",children:(0,i.jsx)(s.jD,{children:d?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"150px"},children:(0,i.jsx)(S.A,{size:40})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",alignItems:"flex-start"},children:h.map(e=>(0,i.jsxs)("div",{style:{flex:"1 1 300px",minWidth:"250px",maxWidth:"350px",color:"rgba(0, 0, 0, 0.6)",padding:"10px",borderRadius:"5px"},children:[(0,i.jsx)("h4",{children:"Contact marital status"===e.names[0].name?"Marital Status":"Main activity"===e.names[0].name?"Occupation":e.names[0].name}),(0,i.jsx)("p",{children:e.value})]},e.obs_id))}),u.length>4&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"10px"},children:(0,i.jsx)("button",{onClick:()=>a(!t),style:{color:"rgba(0, 0, 0, 0.6)",cursor:"pointer",border:"none",background:"none",padding:0},children:t?"View Less":"View More ..."})})]})})})})},eW=e=>{let{name:t}=e;return(0,i.jsx)(j.D0,{name:t,render:e=>{let{form:a}=e;return(0,j.O6)(a.errors,t)||null}})},eM={lastMeal:{name:"lastMeal",label:"Date of Last Meal",requiresSite:!0},events:{name:"events",label:"Events(History of presenting complaints)",requiresSite:!0},pain:{name:"pain",label:"Pain",requiresSite:!0},rash:{name:"rash",label:"Rash",requiresSite:!0},itching:{name:"itching",label:"Itching",requiresSite:!0},earDischarge:{name:"earDischarge",label:"Ear Discharge",requiresSite:!0},redEye:{name:"redEye",label:"Red Eye",requiresSite:!0},dizziness:{name:"dizziness",label:"Dizziness",requiresSite:!1},excessiveThirst:{name:"excessiveThirst",label:"Excessive Thirst",requiresSite:!1},painfulEar:{name:"painfulEar",label:"Painful Ear",requiresSite:!0},poorVision:{name:"poorVision",label:"Poor Vision",requiresSite:!0},toothache:{name:"toothache",label:"Toothache",requiresSite:!0},runnyNose:{name:"runnyNose",label:"Runny Nose",requiresSite:!1},noseBleeding:{name:"noseBleeding",label:"Nose Bleeding",requiresSite:!1},jointSwelling:{name:"jointSwelling",label:"Joint Swelling",requiresSite:!0},jointPain:{name:"jointPain",label:"Joint Pain",requiresSite:!0},deformity:{name:"deformity",label:"Deformity",requiresSite:!0},fever:{name:"fever",label:"Fever",requiresSite:!1},nightSweats:{name:"nightSweats",label:"Night Sweats",requiresSite:!1},weightLoss:{name:"weightLoss",label:"Weight Loss",requiresSite:!1},heatIntolerance:{name:"heatIntolerance",label:"Heat Intolerance",requiresSite:!1},coldIntolerance:{name:"coldIntolerance",label:"Cold Intolerance",requiresSite:!1},bodySwelling:{name:"bodySwelling",label:"Body Swelling",requiresSite:!0},fatigue:{name:"fatigue",label:"Fatigue",requiresSite:!1},poisoning:{name:"poisoning",label:"Poisoning",requiresSite:!1},poisoningIntentional:{name:"intentionalPoisoning",label:"Intentional Poisoning",requiresSite:!1},ulcerWound:{name:"ulcerWound",label:"Ulcer/Wound",requiresSite:!0}},ek={assault:{name:"assault",label:"Assault",subOptions:[{label:"Physical",value:"Physical"},{label:"Sexual",value:"Sexual"}]},roadTraffic:{name:"roadTraffic",label:"Road Traffic"},fall:{name:"fall",label:"Fall"},bite:{name:"bite",label:"Bite"},gunshot:{name:"gunshot",label:"Gunshot"},collapse:{name:"collapse",label:"Collapse of building"},selfInflicted:{name:"selfInflicted",label:"Self-inflicted"},burns:{name:"burns",label:"Burns"},drowning:{name:"drowning",label:"Drowning"}},eH=[{id:l.W.YELLOWINGOFEYESORSKIN,label:"Yellowing of eyes or skin"},{id:l.W.NAUSEA,label:"Nausea"},{id:l.W.DYSPEPSIA,label:"Dyspepsia"},{id:l.W.ABDOMINALPAINS,label:"Abdominal pains"},{id:l.W.VOMITING,label:"Vomiting"},{id:l.W.DIARRHOEA,label:"Diarrhoea"},{id:l.W.DIFFICULTYINSWALLOWING,label:"Difficulty in swallowing"},{id:l.W.PAINFULSWALLOWING,label:"Painful in swallowing"},{id:l.W.ABDOMINALDISTENSION,label:"Abdominal distension"},{id:l.W.BLOODYSTOOL,label:"Bloody stool"},{id:l.W.STOOL_INCONTINENCE,label:"Stool incontinence"},{id:l.W.ANAL_SWELLING,label:"Anal swelling"},{id:l.W.ANAL_DISCHARGE,label:"Anal discharge"},{id:l.W.YELLOWINGOFEYESORSKIN,label:"Yellowing of eyes or skin"},{id:l.W.NAUSEA,label:"Nausea"},{id:l.W.DYSPEPSIA,label:"Dyspepsia"},{id:l.W.ABDOMINALPAINS,label:"Abdominal pains"},{id:l.W.VOMITING,label:"Vomiting"},{id:l.W.DIARRHOEA,label:"Diarrhoea"},{id:l.W.DIFFICULTYINSWALLOWING,label:"Difficulty in swallowing"},{id:l.W.PAINFULSWALLOWING,label:"Painful in swallowing"},{id:l.W.ABDOMINALDISTENSION,label:"Abdominal distension"},{id:l.W.BLOODYSTOOL,label:"Bloody stool"},{id:l.W.STOOL_INCONTINENCE,label:"Stool incontinence"},{id:l.W.ANAL_SWELLING,label:"Anal swelling"},{id:l.W.ANAL_DISCHARGE,label:"Anal discharge"}],eF=[{id:l.W.COUGH,label:"Cough"},{id:l.W.SHORTNESS_OF_BREATH,label:"Shortness of breath"},{id:l.W.HEART_PALPITATIONS,label:"Heart palpitations"},{id:l.W.WHEEZES,label:"Wheezing"}],eB=[{id:l.W.HEADACHE,label:"Headache"},{id:l.W.CONVULSIONS,label:"Convulsions"},{id:l.W.CONFUSION,label:"Confusions"},{id:l.W.HALLUCINATIONS,label:"Hallucinations"},{id:l.W.ABNORMAL_BEHAVIOUR,label:"Abnormal behaviour"},{id:l.W.TREMOR,label:"Tremor"},{id:l.W.ABNORMAL_GAIT,label:"Abnormal gait"},{id:l.W.NUMBNESS,label:"Numbness"},{id:l.W.NECK_PAINS,label:"Neck pain"},{id:l.W.NECK_STIFFNESS,label:"Neck stiffness"},{id:l.W.WEAKNESS,label:"Weakness"}],eY=[{id:l.W.FREQUENT_URINATION,label:"Frequent urination"},{id:l.W.PAINFUL_URINATION,label:"Painful urination"},{id:l.W.BLOODY_URINE,label:"Bloody urine"},{id:l.W.ABNORMAL_VAGINAL_DISCHARGE,label:"Abnormal vaginal discharge"},{id:l.W.VAGINAL_BLEEDING,label:"Vaginal bleeding"},{id:l.W.SCROTAL_SWELLING,label:"Scrotal swelling"},{id:l.W.GENITAL_ULCER,label:"Genital ulcer"},{id:l.W.URINARY_RETENTION,label:"Urinary retention"},{id:l.W.URINARY_INCONTINENCE,label:"Urine incontinence"},{id:l.W.ERECTILE_DYSFUNCTION,label:"Erectile dysfunction"},{id:l.W.INFERTILITY,label:"Infertility"},{id:l.W.PROLAPSE,label:"Prolapse"},{id:l.W.OTHER_GENITOURINARY_CONDITION,label:"Other"}],eG=e=>{let{onSubmit:t,onSkip:a,onPrevious:r}=e,{ServerTime:o}=(0,p.useServerTime)(),c=o.getServerTimeString(),[d,u]=(0,n.useState)({}),[m,h]=(0,n.useState)({}),[x,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[j,y]=(0,n.useState)({}),[S,N]=(0,n.useState)(!1),[_,T]=(0,n.useState)(!1),[E,I]=(0,n.useState)(!1),[O,D]=(0,n.useState)(!1),[R,C]=(0,n.useState)(!1),L=Object.keys(eM).filter(e=>{let t=m[e]&&"poisoningIntentional"!==e;return"poisoningIntentional"!==e&&"lastMeal"!==e&&"events"!==e||t}),P=R?L:L.slice(0,6),W=(e=>{let t={};return Object.keys(e).forEach(a=>{let i=e[a];if("lastMeal"!==a&&"events"!==a&&"poisoningIntentional"!==a&&"object"==typeof i){let e=i.name;t["".concat(e,"Duration")]=f.Yj().when(e,(e,t)=>d[a]?t.required("Duration of ".concat(i.label," is required")):t.notRequired()),i.requiresSite&&(t["".concat(e,"_site")]=f.Yj().when(e,(e,t)=>d[a]?t.required("Please specify the site of ".concat(i.label)):t.notRequired()))}}),t.events=f.Yj().required("Events field is required."),t.timeOfInjury=f.p6().required("Time of injury is required."),t.poisoningIntentional=f.Yj().when("poisoning",(e,t)=>e[0]?t.required("Intentional poisoning is required"):t.notRequired()),t.otherSymptom=f.Yj().when("other",(e,t)=>e[0]?t.required("Symptom details are required"):t.notRequired()),t.wasInjured=f.Yj().required("Please specify whether the patient was injured"),t.injuryMechanism=f.zM().when("wasInjured",(e,t)=>"Yes"===e[0]?t.oneOf([!0],"Injury mechanism is required"):t.nullable()),Object.keys(ek).forEach(e=>{let a=ek[e],i="".concat(a.name,"Comment");d[e]&&(t[i]=f.Yj().required("Please provide details about the ".concat(a.label," injury"))),"assault"===e&&(t.assaultType=f.Yj().when("assault",(e,t)=>e[0]?t.required("Please specify the type of assault"):t.nullable()))}),t.occupation=f.Yj().when("showSocialHistory",(e,t)=>e[0]?t.required("Occupation is required."):t.nullable()),t.maritalStatus=f.Yj().when("showSocialHistory",(e,t)=>e[0]?t.required("Marital status is required."):t.nullable()),t.travelDetails=f.Yj().when("showSocialHistory",(e,t)=>e[0]?t.required("Travel details are required."):t.nullable()),t.Gastrointenstinal_history=f.YO().of(f.Ik({id:f.Yj().required("ID is required for Gastrointestinal history."),label:f.Yj().required("Label is required for Gastrointestinal history.")})),t["Cardiac/Respiratory history"]=f.YO().of(f.Ik({id:f.Yj().required("ID is required for Cardiac/Respiratory history."),label:f.Yj().required("Label is required for Cardiac/Respiratory history.")})),t["Nervous system history"]=f.YO().of(f.Ik({id:f.Yj().required("ID is required for Nervous system history."),label:f.Yj().required("Label is required for Nervous system history history.")})),t.genitourinaryHistory=f.YO().of(f.Ik({id:f.Yj().required("ID is required for genitourinary history."),label:f.Yj().required("Label is required for genitourinary history.")})),f.Ik().shape(t)})(eM),M={wasInjured:"",events:"",pain:!1,painDuration:"",pain_site:"",rash:!1,rashDuration:"",rash_site:"",itching:!1,itchingDuration:"",itching_site:"",earDischarge:!1,earDischargeDuration:"",earDischarge_site:"",redEye:!1,redEyeDuration:"",redEye_site:"",dizziness:!1,dizzinessDuration:"",excessiveThirst:!1,excessiveThirstDuration:"",painfulEar:!1,painfulEarDuration:"",painfulEar_site:"",poorVision:!1,poorVisionDuration:"",poorVision_site:"",toothache:!1,toothacheDuration:"",toothache_site:"",runnyNose:!1,runnyNoseDuration:"",noseBleeding:!1,noseBleedingDuration:"",jointSwelling:!1,jointSwellingDuration:"",jointSwelling_site:"",jointPain:!1,jointPainDuration:"",jointPain_site:"",deformity:!1,deformityDuration:"",deformity_site:"",fever:!1,feverDuration:"",nightSweats:!1,nightSweatsDuration:"",weightLoss:!1,weightLossDuration:"",heatIntolerance:!1,heatIntoleranceDuration:"",coldIntolerance:!1,coldIntoleranceDuration:"",bodySwelling:!1,bodySwellingDuration:"",bodySwelling_site:"",fatigue:!1,fatigueDuration:"",poisoning:!1,poisoningDuration:"",poisoningIntentional:"",ulcerWound:!1,ulcerWoundDuration:"",ulcerWound_site:"",other:!1,otherSymptom:"",timeOfInjury:eL()(c),injuryMechanism:[],showSocialHistory:!1,lostConsciousness:"Unknown",occupation:"",maritalStatus:"",occupationalInjury:"Unknown",assaultType:"",assault:!1,roadTraffic:!1,fall:!1,bite:!1,gunshot:!1,collapse:!1,selfInflicted:!1,burns:!1,drowning:!1};(0,n.useEffect)(()=>{let e={};Object.keys(eM).forEach(t=>{"lastMeal"!=t&&"events"!=t&&(e[t]=!!d[t])}),h(e),b("Yes"===d.wasInjured),v(d.assault);let t={};Object.keys(ek).forEach(e=>{t[e]=!!d[e]}),y(t),D(!!d.other),Object.values(t).some(Boolean)?d.injuryMechanism=!0:d.injuryMechanism=!1,T(!!d.showSocialHistory)},[d,eM,d.showSocialHistory]);let k=async()=>{t(d)};return(0,i.jsxs)(s.PD,{validationSchema:W,initialValues:M,onSubmit:k,submitButton:!1,children:[(0,i.jsx)(s.fP,{getValues:u}),(0,i.jsxs)(s.jD,{sx:{bgcolor:"white",padding:"2ch",mb:"2ch",width:"100%",borderRadius:"5px"},children:[(0,i.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1rem",borderBottom:"2px solid #ccc",paddingBottom:"0.5rem"},children:"General History"}),P.map(e=>{let t=eM[e],a=m[e]&&"poisoningIntentional"!==e;return(0,i.jsxs)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"16px",marginBottom:"16px",backgroundColor:"#f9f9f9"},children:["poisoningIntentional"!==e&&"lastMeal"!==e&&"events"!==e&&(0,i.jsx)(A.A,{name:eM[e].name,label:eM[e].label}),a&&(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"8px"},children:[(0,i.jsx)(s.pj,{id:"".concat(e,"Duration"),name:"".concat(e,"Duration"),unitName:"".concat(e,"DurationUnit"),label:"Duration",unitOptions:l.bH,placeholder:"e.g. 7",inputIcon:(0,i.jsx)(w.YmN,{})}),t.requiresSite&&"poisoning"!==e&&(0,i.jsx)(s.A8,{id:"".concat(t.name,"_site"),label:"Specify Site",name:"".concat(t.name,"_site"),placeholder:"Specify the site"}),"poisoning"===e&&(0,i.jsx)(s.b1,{row:!0,name:"poisoningIntentional",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],label:"Was the poisoning intentional?"})]})]},e)}),L.length>6&&(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px"},children:(0,i.jsx)("button",{type:"button",onClick:()=>C(e=>!e),style:{background:"none",border:"none",color:"Green",cursor:"pointer",fontSize:"0.95rem",padding:0,textDecoration:"underline"},children:R?"View Less":"View More"})}),(0,i.jsxs)("div",{style:{border:"1px dashed #aaa",borderRadius:"8px",padding:"16px",marginTop:"24px"},children:[(0,i.jsx)(A.A,{name:"other",label:"Other symptom"}),O&&(0,i.jsx)(s.A8,{id:"otherSymptom",label:"Specify other symptom",name:"otherSymptom",placeholder:"Provide details of the symptom",sx:{width:"100%",marginTop:"12px"}})]}),(0,i.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"1rem",borderBottom:"2px solid #ccc",paddingBottom:"0.5rem",marginTop:"2rem"},children:"Trauma/Injury History"}),(0,i.jsx)(s.b1,{row:!0,name:"wasInjured",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],label:"Was the patient injured?"}),x&&(0,i.jsxs)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"16px",marginTop:"16px",backgroundColor:"#f9f9f9"},children:[(0,i.jsx)(s.GE,{direction:"row",children:(0,i.jsx)(eD.$,{dateAdapter:ew.R,children:(0,i.jsx)(eR.K,{name:"timeOfInjury",label:"Select Date/Time of Injury",onChange:e=>{d.timeOfInjury=e},sx:{mb:"1ch",mt:"1ch",backgroundColor:"white"}})})}),(0,i.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,i.jsx)(s.b1,{row:!0,name:"lostConsciousness",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"},{value:"Unknown",label:"Unknown"}],label:"Did the patient lose consciousness on the scene?"}),(0,i.jsx)(s.b1,{row:!0,name:"occupationalInjury",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"},{value:"Unknown",label:"Unknown"}],label:"Was this injury work-related?"})]}),(0,i.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,i.jsx)("h4",{style:{marginBottom:"1ch"},children:"Mechanism of Injury"}),(0,i.jsx)("div",{style:{backgroundColor:"white",marginBlock:"1rem",padding:"1rem",borderRadius:"8px"},children:Object.keys(ek).map(e=>{let t=ek[e];return(0,i.jsx)(A.A,{name:t.name,label:t.label},e)})}),(0,i.jsx)("div",{style:{color:"red",fontSize:"0.875rem"},children:(0,i.jsx)(eW,{name:"injuryMechanism"})}),g&&(0,i.jsxs)("div",{style:{marginTop:"1rem",marginLeft:"1em",padding:"1rem",backgroundColor:"#fff",borderRadius:"8px",border:"1px dashed #ccc"},children:[(0,i.jsx)(s.b1,{name:"assaultType",label:"Type of assault",options:ek.assault.subOptions,row:!0}),(0,i.jsx)(s.A8,{id:"assaultComment",label:"Assault comments",name:"assaultComment",placeholder:"Add details about the assault",multiline:!0,rows:3}),(0,i.jsx)("div",{style:{color:"red",fontSize:"0.875rem"},children:(0,i.jsx)(eW,{name:"assaultComment"})})]}),Object.keys(j).map(e=>j[e]&&"assault"!==e?(0,i.jsx)(s.A8,{id:"".concat(e,"-comment"),label:"".concat(e," comments"),name:"".concat(e,"Comment"),placeholder:"Add details about the ".concat(e.toLowerCase()),multiline:!0,rows:3,sx:{mt:"1rem"}},"comment-".concat(e)):null)]})]})]}),(0,i.jsx)(s.A8,{id:eM.events.name,label:eM.events.label,name:eM.events.name,placeholder:"e.g., Started with mild abdominal pain 3 days ago...",multiline:!0,rows:4,sx:{width:"100%"}}),(0,i.jsx)(s.GE,{direction:"row",children:(0,i.jsx)(s.el,{name:"Gastrointenstinal_history",label:"Gastrointestinal history",options:eH,multiple:!0})}),(0,i.jsx)(s.GE,{direction:"row",children:(0,i.jsx)(s.el,{name:"Cardiac/Respiratory history",label:"Cardiac/Respiratory history",options:eF,multiple:!0})}),(0,i.jsx)(s.GE,{direction:"row",children:(0,i.jsx)(s.el,{name:"Nervous system history",label:"Nervous system history",options:eB,multiple:!0})}),(0,i.jsxs)(s.GE,{direction:"row",children:[(0,i.jsx)(s.el,{name:"genitourinaryHistory",label:"Genitourinary history",options:eY,multiple:!0,getValue:e=>{e.some(e=>e.label===eY[12].label)&&N(!0)}}),S&&(0,i.jsx)(s.A8,{id:"Other_Genitourinary_condition",name:"Other_Genitourinary_condition",label:"Specify condition",sx:{marginLeft:"2ch"}})]}),(0,i.jsxs)(s.GE,{direction:"column",children:[(0,i.jsx)("div",{style:{marginTop:"2rem"},children:(0,i.jsx)(eP,{showForPrinting:E,toggleShow:I})}),(0,i.jsx)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"16px",marginBottom:"16px",backgroundColor:"white",width:"32%",marginTop:"1rem"},children:(0,i.jsx)(A.A,{name:"showSocialHistory",label:"Update social history?"})}),_&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.b1,{row:!0,name:"occupation",label:"What is the patients occupation?",options:[{label:"Working",value:"working"},{label:"Business",value:"business"},{label:"Unemployed",value:"unemployed"},{label:"Self Employed",value:"selfemployed"},{label:"Student",value:"student"},{label:"House Wife",value:"housewife"},{label:"Unknown",value:"unknown"}],sx:{mb:"1ch"}}),(0,i.jsx)(s.Z3,{getValue:e=>{},name:"socialDetails",options:[{label:"Smoker",value:"smoking"},{label:"Drinker",value:"alcohol"}]}),(0,i.jsx)(s.b1,{sx:{mt:"1ch"},row:!0,name:"maritalStatus",label:"What is the patients marital status?",options:[{label:"Single",value:"single"},{label:"Married",value:"married"},{label:"Separated",value:"separated"},{label:"Widowed",value:"widow/widower"},{label:"Divorced",value:"divorced"},{label:"Unknown",value:"unknown"}]}),(0,i.jsx)(s.A8,{id:"travelDetails",name:"travelDetails",label:"Travel Details",multiline:!0,rows:4})]})]}),(0,i.jsxs)(s.jD,{children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:r,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})},eU={lastMeal:{name:"dateOfMeal",label:"When did the patient eat last?"},description:{name:"descriptionOfLastMeal",label:"What did the patient eat?"}},eq=f.Ik().shape({[eU.lastMeal.name]:f.Yj().when("didNotEat",{is:!1,then:e=>e.required('If they did not eat check "Patient did not eat" below, Otherwise please select a time of last meal.')}),[eU.description.name]:f.Yj().when("didNotEat",{is:!1,then:e=>e.required("Unless they did not eat a description of the last meal is required.")})}),eV={[eU.lastMeal.name]:void 0,[eU.description.name]:"",didNotEat:!1},ez=e=>{let{onSubmit:t,onSkip:a,onPrevious:l}=e,[r,o]=(0,n.useState)({}),c=async()=>{if(r.didNotEat)return void a();t(r)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.PD,{validationSchema:eq,initialValues:eV,onSubmit:c,enableReinitialize:!0,submitButton:!1,children:[(0,i.jsx)(s.fP,{getValues:o}),(0,i.jsxs)(s.GE,{direction:"column",children:[(0,i.jsx)("div",{style:{marginRight:"2ch"},children:(0,i.jsx)(eD.$,{dateAdapter:ew.R,children:(0,i.jsx)(j.D0,{name:eU.lastMeal.name,children:e=>{let{form:t}=e,a=(0,j.O6)(t.errors,eU.lastMeal.name);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eR.K,{disableFuture:!0,label:eU.lastMeal.label,onChange:e=>{t.setFieldValue(eU.lastMeal.name,null==e?void 0:e.$d.toLocaleString())},sx:{width:"300px",mt:"1.8ch",backgroundColor:"white",borderRadius:"5px",border:a?"1px solid red":"1px solid #ccc"}}),a&&(0,i.jsx)(s.Th,{color:"red",variant:"subtitle2",width:"300px",children:a})]})}})})}),(0,i.jsx)(s.A8,{id:eU.description.name,label:eU.description.label,name:eU.description.name,placeholder:"e.g., rice and beans",multiline:!0,rows:4,sx:{width:"100%",mt:"2ch"},disabled:r.didNotEat})]}),(0,i.jsx)(A.A,{name:"didNotEat",label:"Patient did not eat"}),(0,i.jsxs)(s.jD,{sx:{mt:"2ch"},children:[(0,i.jsx)(s.O6,{variant:"secondary",title:"Previous",type:"button",onClick:l,sx:{flex:1,marginRight:"8px"}}),(0,i.jsx)(s.O6,{onClick:()=>{},variant:"primary",title:"Next",type:"submit",sx:{flex:1}})]})]})})}}}]);